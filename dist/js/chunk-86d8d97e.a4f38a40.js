(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-86d8d97e"],{"952b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app animated fadeIn"},[a("loading",{attrs:{active:this.$store.state.isLoading,"can-cancel":!0,"is-full-page":this.$store.state.fullPage},on:{"update:active":function(e){return t.$set(this.$store.state,"isLoading",e)}}}),a("b-row",[a("b-col",{ref:"formContainer",attrs:{cols:"12",xl:"12"}},[a("transition",{attrs:{name:"slide"}},[a("b-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("b",{staticClass:"h4"},[t._v(" "+t._s(this.get_text("kpi_name@kpi_values@l"))+": "+t._s(this.kpivalueData.kpiname))]),a("br"),a("b",{staticClass:"h4"},[t._v(" "+t._s(this.get_text("organization_unit@kpi_values@l"))+": "+t._s(this.kpivalueData.orgunit))]),a("br"),a("b",{staticClass:"h4"},[t._v(" "+t._s(this.get_text("kpi_id@kpi_values@l"))+": "+t._s(this.kpivalueData.kpiid))]),a("br"),a("b",{staticClass:"h4"},[t._v(" "+t._s(this.get_text("value_type@kpi_def@c"))+": "+t._s("Number"==this.kpivalueData.value_type?this.get_text("number@fg_form@l"):"Percentage"==this.kpivalueData.value_type?this.get_text("percentage@fg_form@l"):"Ratio"==this.kpivalueData.value_type?this.get_text("ratio@fg_form@l"):"Rate"==this.kpivalueData.value_type?this.get_text("rate@fg_form@l"):""))]),a("b-button",{staticClass:"btn float-right",staticStyle:{"margin-left":"1%","margin-right":"1%"},attrs:{variant:"warning",size:"md"},on:{click:t.backToList}},[a("b",[a("i",{staticClass:"glyphicon-list glyphicon font-1xl"}),t._v(" "+t._s(t.get_text("kpi_list@kpi_def@l")))])])],1),t.$auth.ready()&&this.$store.state.loading?t._e():a("div",[a("div",{staticStyle:{"text-align":"center","padding-top":"50px"}},[t._v("\n\n\n                            "+t._s(this.get_text("loading@kpi_values@l"))+"\n                        ")])]),t.$auth.ready()&&this.$store.state.loading?a("div",[a("b-row",[a("b-col",{attrs:{md:"3"}},[a("b-form-group",{staticClass:"mb-0",attrs:{horizontal:"",label:this.get_text("filter@l")}},[a("b-input-group",[a("b-form-input",{attrs:{placeholder:this.get_text("type_to_search@kpi_values@l")},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),a("b-input-group-append",[a("b-btn",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v(t._s(this.get_text("clear@l"))+"\n                                            ")])],1)],1)],1)],1),a("b-col",{attrs:{md:"4"}},[a("b-form-group",{staticClass:"mb-0",attrs:{horizontal:"",label:this.get_text("sort@l")}},[a("b-input-group",[a("b-form-select",{attrs:{options:t.sortOptions},model:{value:t.sortBy,callback:function(e){t.sortBy=e},expression:"sortBy"}},[a("option",{attrs:{slot:"first"},domProps:{value:null},slot:"first"},[t._v("-- "+t._s(this.get_text("none@l"))+" --\n                                            ")])]),a("b-form-select",{attrs:{slot:"append",disabled:!t.sortBy},slot:"append",model:{value:t.sortDesc,callback:function(e){t.sortDesc=e},expression:"sortDesc"}},[a("option",{domProps:{value:!1}},[t._v(t._s(this.get_text("asc@l")))]),a("option",{domProps:{value:!0}},[t._v(t._s(this.get_text("desc@l"))+"\n                                            ")])])],1)],1)],1),a("b-col",{attrs:{md:"4"}},[a("b-form-group",{staticClass:"mb-0",attrs:{horizontal:"",label:this.get_text("per_page@l")}},[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1)],1),a("b-table",{attrs:{hover:t.hover,striped:t.striped,bordered:t.bordered,small:t.small,fixed:t.fixed,responsive:"sm",items:t.kpivalueslists,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"status",fn:function(e){return[a("b-badge",{attrs:{variant:t.getBadge(e.item.status)}},[t._v(t._s(t.getName(e.item.status))+"\n                                ")])]}},{key:"actions",fn:function(e){return[a("b-row",{staticClass:"text-center"},[t.$can("kpi-edit")?a("b-col",{staticClass:"mb-3 mb-xl-0",attrs:{cols:"2",sm:"4",md:"2",xl:"1"}},[a("b-button",{attrs:{variant:"warning",size:"sm"},on:{click:function(a){return t.editKpivalues(e.item,"edit")}}},[a("b",[a("i",{staticClass:"icon-pencil icons font-1xl"})])])],1):t._e()],1)]}}],null,!1,1746922940)}),a("nav",[a("b-pagination",{attrs:{size:"sm","total-rows":t.getRowCount,"per-page":t.perPage,"prev-text":this.get_text("prev@l"),"next-text":this.get_text("next@l"),"hide-goto-end-buttons":""},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),a("b-button",{staticClass:"float-right",attrs:{variant:"primary",size:"lg",type:"submit"},on:{click:function(e){return t.editdatatable()}}},[t._v(t._s(t.get_text("submit@kpi_values@l"))+"\n                        ")])],1):t._e()])],1),a("b-modal",{ref:"vueModel",staticClass:"modal-primary",attrs:{title:t.get_text("edit@kpi_values@l"),size:"lg","hide-footer":""},model:{value:t.showingeditModal,callback:function(e){t.showingeditModal=e},expression:"showingeditModal"}},[a("b-form",{on:{submit:function(e){return e.preventDefault(),t.updatekpivalues(e)}}},[a("b-row",["Number"===this.kpivalueData.value_type?a("b-col",{attrs:{sm:"6"}},[a("b-form-group",[a("label",{attrs:{for:"actualvalue"}},[t._v(t._s(t.get_text("actual_value@kpi_values@l"))),a("i",{staticClass:"fa fa-asterisk danger fa-xs",staticStyle:{"font-size":"10px",color:"red"}})]),"Number"===this.kpivalueData.value_type?a("b-form-input",{class:{"is-invalid":t.updated&&t.errors.has("actualvalue")},attrs:{type:"text",id:"actualvalue",name:"actualvalue"},model:{value:t.actual_value,callback:function(e){t.actual_value=e},expression:"actual_value"}}):t._e(),t.updated&&t.errors.has("actualvalue")?a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.first("actualvalue"))+"\n                                ")]):t._e()],1)],1):t._e(),"Number"!=this.kpivalueData.value_type?a("b-col",{attrs:{sm:"6"}},[a("b-form-group",[a("label",{attrs:{for:"actualnumerator"}},[t._v(t._s(this.kpivalueData.numeratorname)),a("i",{staticClass:"fa fa-asterisk danger fa-xs",staticStyle:{"font-size":"10px",color:"red"}})]),a("b-form-input",{class:{"is-invalid":t.updated&&t.errors.has("actualnumerator")},attrs:{type:"text",id:"actualnumerator",name:"actualnumerator"},model:{value:t.actual_numerator,callback:function(e){t.actual_numerator=e},expression:"actual_numerator"}}),t.updated&&t.errors.has("actualnumerator")?a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.first("actualnumerator"))+"\n                                ")]):t._e()],1)],1):t._e(),"Number"!=this.kpivalueData.value_type?a("b-col",{attrs:{sm:"6"}},[a("b-form-group",[a("label",{attrs:{for:"actualdenominator"}},[t._v(t._s(this.kpivalueData.denominatorname)),a("i",{staticClass:"fa fa-asterisk danger fa-xs",staticStyle:{"font-size":"10px",color:"red"}})]),a("b-form-input",{class:{"is-invalid":t.updated&&t.errors.has("actualdenominator")},attrs:{type:"text",id:"actualdenominator",name:"actualdenominator"},model:{value:t.actual_denominator,callback:function(e){t.actual_denominator=e},expression:"actual_denominator"}}),t.updated&&t.errors.has("actualdenominator")?a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.first("actualdenominator"))+"\n                                ")]):t._e()],1)],1):t._e(),a("b-col",{attrs:{sm:"6"}},[a("b-form-group",[a("label",{attrs:{for:"Type"}},[t._v(t._s(t.get_text("notes@kpi_values@l")))]),a("b-form-textarea",{attrs:{id:"notes",rows:"8"},model:{value:t.notes,callback:function(e){t.notes=e},expression:"notes"}})],1)],1)],1),a("b-button",{staticClass:"float-right",attrs:{variant:"primary",size:"lg",type:"submit"}},[t._v(t._s(t.get_text("update@kpi_values@l"))+"\n                    ")])],1)],1),a("b-modal",{staticClass:"modal-danger",attrs:{title:"Delete Priority",size:"lg","ok-variant":"danger"},model:{value:t.showingdeleteModal,callback:function(e){t.showingdeleteModal=e},expression:"showingdeleteModal"}},[a("div",{staticClass:"modalcontent"},[a("h3",{staticClass:"text-center"},[t._v(t._s(this.get_text("are_you_sure_to_delete@@trans_table@l"))+" ?")]),a("b-col",{staticClass:"text-center",attrs:{md:"12"}},[a("button",{staticClass:"btn btn-outline-danger left",on:{click:function(e){t.showingdeleteModal=!1,t.deleteTabledata(t.translationData)}}},[t._v(t._s(this.get_text("yes@trans_table@l"))+"\n                        ")]),t._v("Â \n                        "),a("button",{staticClass:"btn btn-outline-success right",on:{click:function(e){t.showingdeleteModal=!1}}},[t._v(t._s(this.get_text("no@trans_table@l"))+"\n                        ")])])],1)])],1)],1)],1)},i=[],l=(a("28a5"),a("a481"),a("f430")),r=a("a026"),o=(a("0fae"),a("5c96")),n=a.n(o),u=a("9062"),c=a.n(u);a("e40d");r["default"].use(n.a),r["default"].use(c.a);var d={store:l["a"],props:{hover:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},bordered:{type:Boolean,default:!1},small:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1}},created:function(){this.$store.dispatch("loadTranslations"),this.$store.dispatch("loadkpivalues",this.$route.params.id)},data:function(){return{kpidatavalues:[],tableslist:[],tablesdata:[],tablecolumnlist:[],tablecolumndata:[],tablesselect:"",selected:null,tablecolumns:null,keytypeselected:null,keyname:"",keynameEn:"",keynameAr:"",keynameshortEn:"",keynameshortAr:"",keyid:"",items:"",fields:"",button:"",currentPage:1,perPage:10,totalRows:0,actual_value:"",notes:"",kpivalueData:{actual_value:null,notes:null,id:null,kpiname:null,orgunit:null,kpiid:null},key_typefilter:null,priorityInfo:null,showingeditModal:!1,showingViewModal:!1,showingModal:!1,showingdeleteModal:!1,submitted:!1,updated:!1,pageOptions:[10,20,30],sortBy:null,sortDesc:!1,sortDirection:"asc",filter:null,translationData:"",translateData:{key_type:""},translation:[],sortOptions:[]}},beforeMount:function(){localStorage.getItem("translation")&&(this.translation=JSON.parse(localStorage.getItem("translation"))),this.$store.dispatch("loadkpivalues",this.$route.or.id)},computed:{kpivalueslists:function(){for(var t in this.kpivaluelistdata=this.$store.getters.kpivalues,this.kpivaluelistdata)this.kpidatavalues.push(this.kpivaluelistdata[t]),"Percentage"==this.kpivaluelistdata[0].value_type&&this.kpivaluelistdata[t].actual_value;this.kpivalueData.kpiname=this.kpivaluelistdata[0].kpiname,this.kpivalueData.orgunit=this.kpivaluelistdata[0].subtenant_name,this.kpivalueData.kpiid=this.kpivaluelistdata[0].kpiid,this.kpivalueData.value_type=this.kpivaluelistdata[0].value_type,this.kpivalueData.denominatorname=this.kpivaluelistdata[0].denominatorname,this.kpivalueData.numeratorname=this.kpivaluelistdata[0].numeratorname,this.items=this.kpidatavalues;var e=[];e=this.items,this.totalRows=e.length;var a=[];for(var s in this.items[0])a.push(s);a=a.filter((function(t){return"id"!==t})),a=a.filter((function(t){return"kpi_target_id"!==t})),a=a.filter((function(t){return"target_year"!==t})),a=a.filter((function(t){return"target_month"!==t})),a=a.filter((function(t){return"kpiname"!==t})),a=a.filter((function(t){return"value_type"!==t})),a=a.filter((function(t){return"subtenant_name"!==t})),a=a.filter((function(t){return"kpiid"!==t})),a=a.filter((function(t){return"numeratorname"!==t})),a=a.filter((function(t){return"denominatorname"!==t}));for(var i=[],l=a.length,r=0;r<l;r++){var o=!0;"actual_denominator"!=a[r]&&"actual_numerator"!=a[r]&&"notes"!=a[r]&&"actual_value"!=a[r]&&"actual_date"!=a[r]||(o=!1),i.push({key:a[r],label:this.get_text(a[r]+"@kpi_values@c"),sortable:o,resizeable:!0,sortDirection:"desc"})}i.push({key:"actions",label:this.get_text("actions@kpi_values@c"),sortable:!1,resizeable:!0});i[2].label;return i[2].label=i[2].label.replace(i[2].label,this.kpivalueData.numeratorname),i[3].label=i[3].label.replace(i[3].label,this.kpivalueData.denominatorname),"Number"==this.kpivalueData.value_type&&i.splice(2,2),this.fields=i,this.sortOptions=this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}})),this.$store.getters.kpivalues},getRowCount:function(){return this.$store.getters.kpivalues.length},sortOptions:function(){}},watch:{showingeditModal:function(){0==this.showingeditModal&&(this.$store.dispatch("loadTranslations"),this.priorityData={})}},components:{loading:c.a},methods:{backToList:function(){sessionStorage.removeItem("kpi_id"),window.location.replace("/kpilist")},get_text:function(t){var e=this.translation[this.$i18n.locale][t];if(e)return e;var a=t.split("@");if(a.length>2){var s=a[0]+"@l",i=this.translation[this.$i18n.locale][s];return i||"!"+t}return"!"+t},editdatatable:function(){var t=this;r["default"].axios.post("/kpivaluesUpdate",{kpivalues:this.$store.getters.kpivalues}).then((function(e){400==e.data.code?(t.$store.dispatch("get_text_title","error@m"),t.$store.dispatch("get_text_message",e.data.msg+"@m"),r["default"].prototype.$notify.error({title:t.$store.state.title,message:t.$store.state.message,type:"Error",position:"top-right"})):(t.dangerModal=!1,t.rejectreasontext="",t.$store.dispatch("get_text_title","success@m"),t.$store.dispatch("get_text_message",e.data.msg+"@m"),r["default"].prototype.$notify.success({title:t.$store.state.title,message:t.$store.state.message,type:"Success",position:"top-right"}),t.$store.dispatch("loadkpivalues",t.$route.params.id),t.kpivaluelistdata=t.$store.getters.kpivalues),t.$store.state.isLoading=!1})).catch((function(t){console.log(t)}))},updatekpivalues:function(){var t=this;this.updated=!0,this.$validator.validate().then((function(e){if(e){for(var a in t.showingeditModal=!1,console.log(t.$store.getters.kpivalues),t.$store.getters.kpivalues)"Number"!=t.kpivalueData.value_type&&(t.actual_value=t.actual_numerator/t.actual_denominator),"Percentage"==t.kpivalueData.value_type&&(t.actual_value=t.actual_numerator/t.actual_denominator*100,t.actual_value=t.actual_value.toFixed(2),t.actual_value=t.actual_value+"%"),"Rate"!=t.kpivalueData.value_type&&"Ratio"!=t.kpivalueData.value_type||(t.actual_value=t.actual_value.toFixed(4)),t.$store.getters.kpivalues[a].id==t.kpivalueData[0].id&&(t.$store.getters.kpivalues[a].actual_value=t.actual_value,t.$store.getters.kpivalues[a].actual_numerator=t.actual_numerator,t.$store.getters.kpivalues[a].actual_denominator=t.actual_denominator,t.$store.getters.kpivalues[a].notes=t.notes);t.actual_value="",t.notes="",t.actual_numerator="",t.actual_denominator="",t.$validator.reset()}}))},$can:function(t){return-1!==this.$auth.user().allPermissions.indexOf(t)},editKpivalues:function(t){var e=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$store.state.isLoading=!0,r["default"].axios.get("/kpivaluesbyId/".concat(t.id)).then((function(t){401==t.data.code?(e.$store.dispatch("get_text_title","error@m"),e.$store.dispatch("get_text_message",t.data.msg+"@m"),r["default"].prototype.$notify.error({title:e.$store.state.title,message:e.$store.state.message,type:"Error",position:"top-right"})):(e.showingeditModal=!0,e.kpivalueData=t.data.data,console.log(e.kpivalueData)),e.$store.state.isLoading=!1})).catch((function(t){console.log(t)}))},getBadge:function(t){return 1==t?"success":0===t?"warning":"primary"},getName:function(t){return"1"==t?"Active":"0"==t?"Deactive":"primary"},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1}}},p=d,v=(a("afcc"),a("9890"),a("2877")),_=Object(v["a"])(p,s,i,!1,null,"76181268",null);e["default"]=_.exports},9890:function(t,e,a){"use strict";var s=a("a930"),i=a.n(s);i.a},"9c30":function(t,e,a){},a930:function(t,e,a){},afcc:function(t,e,a){"use strict";var s=a("9c30"),i=a.n(s);i.a}}]);
//# sourceMappingURL=chunk-86d8d97e.a4f38a40.js.map