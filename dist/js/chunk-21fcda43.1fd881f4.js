(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21fcda43"],{"7f7f":function(t,e,a){var s=a("86cc").f,o=Function.prototype,r=/^\s*function ([^ (]*)/,i="name";i in o||a("9e1e")&&s(o,i,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},a592:function(t,e,a){"use strict";a.d(e,"a",(function(){return d}));a("7f7f");var s=a("a026"),o=a("2f62"),r=a("5c96"),i=a.n(r),n=a("d3a4");s["default"].use(o["a"]),s["default"].use(i.a),s["default"].prototype.$notify=r["Notification"];var d=new o["a"].Store({state:{translations:{en:{hello:"Hello World"},ar:{hello:"Hallo Verden"}},loading:!1,users:[],userProfile:[],groups:[],parents:[],isLoading:!1,fullPage:!0,title:"",message:""},mutations:{SET_USERS:function(t,e){t.users=e},SET_USER_PROFILE:function(t,e){t.userProfile=e},SET_GROUP:function(t,e){t.groups=e.map((function(t){return{text:t.name,value:t.id}}))},REMOVE_USER:function(t,e){var a=t.users;a.splice(a.indexOf(e),1)},UPDATE_USER:function(t,e){console.log(e)},CREATED_USER:function(t,e){console.log("add User",e),this.dispatch("loadUsers"),console.log("after User",t.users)},SET_PARENT_TANENTS:function(t,e){t.parents=e},SET_GROUP_TANENTS:function(t,e){console.log(e),t.groupTanent=e.map((function(t){return{text:t.name,value:t.name}}))},GET_TEXT_TITLE:function(t,e){return t.title=e},GET_TEXT_MSG:function(t,e){return t.message=e}},getters:{users:function(t){return t.users},getRowCount:function(t){return t.users.length}},actions:{get_text_title:function(t,e){var a=t.commit,s=this.state.translations[n["a"].locale][e];a("GET_TEXT_TITLE",s||"!"+e)},get_text_message:function(t,e){var a=t.commit,s=this.state.translations[n["a"].locale][e];a("GET_TEXT_MSG",s||"!"+e)},loadUsers:function(t){var e=this,a=t.commit;this.state.isLoading=!0,s["default"].axios({url:"user",method:"GET"}).then((function(t){200==t.data.code?a("SET_USERS",t.data.data):(e.dispatch("get_text_title","Error"),e.dispatch("get_text_message",t.data.msg),s["default"].prototype.$notify.error({title:e.state.title,message:e.state.message,type:"Error",position:"top-right"})),e.state.isLoading=!1}))},loadGroups:function(t){var e=this,a=t.commit;s["default"].axios({url:"allGroup",method:"GET"}).then((function(t){200==t.data.code&&(e.state.loading=!0,a("SET_GROUP",t.data.groups))}))},loadParentTenant:function(t){var e=this,a=t.commit;s["default"].axios({url:"allTenant",method:"GET"}).then((function(t){200==t.data.code&&(e.state.loading=!0,a("SET_PARENT_TANENTS",t.data.subTenants))}))},loadUsersProfile:function(t,e){var a=this,o=t.commit;this.state.isLoading=!0,s["default"].axios({url:"/user/".concat(e.id,"/profile"),method:"GET"}).then((function(t){alert(t.data.code),200==t.data.code?o("SET_USER_PROFILE",t.data.data):(a.dispatch("get_text_title","Error@m"),a.dispatch("get_text_message",t.data.msg+"@m"),s["default"].prototype.$notify.error({title:a.state.title,message:a.state.message,type:"Error",position:"top-right"})),a.state.isLoading=!1}))},loadGroupsTenant:function(t){var e=this,a=t.commit;s["default"].axios({url:"rolesList",method:"GET"}).then((function(t){200==t.data.code&&(console.log(t.data),e.state.loading=!0,a("SET_GROUP_TANENTS",t.data.roles))}))},updateUserProfile:function(t,e){var a=this,o=(t.commit,{headers:{"content-type":"multipart/form-data"}});this.state.isLoading=!0,s["default"].axios.post("/user/".concat(e.where,"/profile"),e.data,o).then((function(t){204==t.data.code?(a.dispatch("get_text_title","Success@m"),a.dispatch("get_text_message",t.data.msg+"@m"),console.log("Update user",t.data.code,"from the server"),s["default"].prototype.$notify({title:a.state.title,message:a.state.message,type:"success",position:"top-right"})):(a.dispatch("get_text_title","Error@m"),a.dispatch("get_text_message",t.data.msg+"@m"),s["default"].prototype.$notify.error({title:a.state.title,message:a.state.message,type:"Error",position:"top-right"})),a.state.isLoading=!1}))},updateUserPassword:function(t,e){var a=this;t.commit;this.state.isLoading=!0,s["default"].axios.put("/user/".concat(e.where,"/credentials"),e.data).then((function(t){console.log("Update user",t.data.code,"from the server"),a.dispatch("get_text_title","Success@m"),a.dispatch("get_text_message",t.data.msg+"@m"),console.log("Update user",t.data.code,"from the server"),s["default"].prototype.$notify({title:a.state.title,message:a.state.message,type:"success",position:"top-right"}),a.state.isLoading=!1}))},removeUser:function(t,e){var a=this,o=t.commit;this.state.isLoading=!0,s["default"].axios.delete("/user/".concat(e.id)).then((function(t){a.state.isLoading=!1,200==t.data.code?(console.log("removed user",t.data.code,"from the server"),a.dispatch("get_text_title","Success@m"),a.dispatch("get_text_message",t.data.msg+"@m"),s["default"].prototype.$notify({title:a.state.title,message:a.state.message,type:"success",position:"top-right"}),o("REMOVE_USER",e)):(a.dispatch("get_text_title","Error@m"),a.dispatch("get_text_message",t.data.msg+"@m"),s["default"].prototype.$notify.error({title:a.state.title,message:a.state.message,type:"Error",position:"top-right"}))}))},updateUser:function(t,e){var a=this,o=t.commit;this.state.isLoading=!0,s["default"].axios.put("/user/".concat(e.where),e.data).then((function(t){a.state.isLoading=!1,console.log("Update user",t.data.code,"from the server"),a.dispatch("get_text_title","Success@m"),a.dispatch("get_text_message",t.data.msg+"@m"),s["default"].prototype.$notify({title:a.state.title,message:a.state.message,type:"success",position:"top-right"}),o("UPDATE_USER",e.data)}))},createUser:function(t,e){var a=this,o=t.commit;this.state.isLoading=!0,s["default"].axios.post("/user",e.data).then((function(t){a.state.isLoading=!1,200==t.data.code?(a.dispatch("get_text_title","Success@m"),a.dispatch("get_text_message",t.data.msg+"@m"),console.log("Created user",t.data.code,"from the server"),s["default"].prototype.$notify({title:a.state.title,message:a.state.message,type:"success",position:"top-right"}),o("CREATED_USER",e.data)):(a.dispatch("get_text_title","Error@m"),a.dispatch("get_text_message",t.data.msg+"@m"),s["default"].prototype.$notify.error({title:a.state.title,message:a.state.message,type:"Error",position:"top-right"}))}))},translation:function(){var t=this;s["default"].axios.get("/gettranslations").then((function(e){if(t.state.isLoading=!1,200==e.data.code){JSON.stringify(e.data.data);t.state.translations=e.data.data}else t.dispatch("get_text_title","Error@m"),t.dispatch("get_text_message",e.data.msg+"@m"),s["default"].prototype.$notify.error({title:t.state.title,message:t.state.message,type:"Error",position:"top-right"})})).catch((function(e){t.state.isLoading=!1,422==e.response.status&&(t.dispatch("get_text_title","Error@m"),t.dispatch("get_text_message",e.response.data.errors.Type[0]+"@m"),s["default"].prototype.$notify.error({title:t.state.title,message:t.state.message,type:"Error",position:"top-right"}))}))}}})},f58e:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app animated fadeIn"},[a("loading",{attrs:{active:this.$store.state.isLoading,"can-cancel":!0,"is-full-page":this.$store.state.fullPage},on:{"update:active":function(e){return t.$set(this.$store.state,"isLoading",e)}}}),a("b-row",[a("b-col",{attrs:{xl:"12",lg:"12",md:"12"}},[a("b-form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[a("b-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("h4",{staticClass:"card-title"},[t._v(t._s(t.get_text("title@updateCredential@l")))])]),a("b-row",[a("b-col",{attrs:{sm:"6"}},[a("b-form-group",[a("label",{attrs:{for:"authenticatedUserPassword"}},[t._v(t._s(t.get_text("my_password@updateCredential@l")))]),a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.submitted&&t.errors.has("authenticatedUserPassword")},attrs:{type:"text",id:"authenticatedUserPassword",placeholder:t.get_text("enter_your_password@updateCredential@l"),name:"authenticatedUserPassword"},model:{value:t.data.body.authenticatedUserPassword,callback:function(e){t.$set(t.data.body,"authenticatedUserPassword",e)},expression:"data.body.authenticatedUserPassword"}}),t.submitted&&t.errors.has("authenticatedUserPassword")?a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.first("authenticatedUserPassword"))+"\n                                ")]):t._e()],1)],1)],1),a("b-row",[a("b-col",{attrs:{sm:"6"}},[a("b-form-group",[a("label",{attrs:{for:"password"}},[t._v(t._s(t.get_text("new_password@updateCredential@l")))]),a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,min:5},expression:"{ required: true, min: 5 }"}],ref:"password",staticClass:"form-control",class:{"is-invalid":t.submitted&&t.errors.has("password")},attrs:{type:"password",name:"password",placeholder:t.get_text("enter_new_password@updateCredential@l"),autocomplete:"username email"},model:{value:t.data.body.password,callback:function(e){t.$set(t.data.body,"password",e)},expression:"data.body.password"}}),t.submitted&&t.errors.has("password")?a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.first("password")))]):t._e()],1)],1)],1),a("b-row",[a("b-col",{attrs:{sm:"6"}},[a("b-form-group",[a("label",{attrs:{for:"confpassword"}},[t._v(t._s(t.get_text("new_password_repeat@updateCredential@l"))+"*")]),a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|confirmed:password",expression:"'required|confirmed:password'"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&t.errors.has("confpassword")},attrs:{type:"password","data-vv-as":"password",name:"confpassword",placeholder:t.get_text("enter_confirm_password@updateCredential@l"),autocomplete:"username email"},model:{value:t.data.body.confpassword,callback:function(e){t.$set(t.data.body,"confpassword",e)},expression:"data.body.confpassword"}}),t.submitted&&t.errors.has("confpassword")?a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.first("confpassword")))]):t._e()],1)],1)],1),a("b-row",[a("b-col",{staticClass:"text-center",attrs:{cols:"12"}},[a("b-button",{staticClass:"px-4",attrs:{type:"submit",disabled:t.updateProfileBtn,variant:"primary"}},[t._v("\n                                "+t._s(t.get_text("update_password@updateCredential@l"))+"\n                            ")]),a("img",{directives:[{name:"show",rawName:"v-show",value:t.updateProfileBtn,expression:"updateProfileBtn"}],attrs:{src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}})],1)],1)],1)],1)],1)],1)],1)},o=[],r=(a("28a5"),a("a592")),i=a("a026"),n=(a("0fae"),a("5c96")),d=a.n(n),l=a("9062"),c=a.n(l);a("e40d");i["default"].use(c.a),i["default"].use(d.a);var u={name:"Profile",store:r["a"],components:{loading:c.a},data:function(){return{context:"Profile Update context",data:{body:{authenticatedUserPassword:"",password:"",confpassword:""}},submitted:!1,error:null,errorMessage:null,successMessage:null,updateProfileBtn:null,translation:[]}},beforeMount:function(){localStorage.getItem("translation")&&(this.translation=JSON.parse(localStorage.getItem("translation")))},methods:{get_text:function(t){var e=this.translation[this.$i18n.locale][t];if(e)return e;var a=t.split("@");if(a.length>2){var s=a[0]+"@l",o=this.translation[this.$i18n.locale][s];return o||"!"+t}return"!"+t},handleSubmit:function(t){var e=this;this.submitted=!0,this.$validator.validate().then((function(t){t&&(e.$store.state.isLoading=!0,i["default"].axios.put("/user/".concat(e.$auth.user().id,"/credentials"),{password:e.data.body.password,authenticatedUserPassword:e.data.body.authenticatedUserPassword}).then((function(t){console.log("Update user",t.data.code,"from the server"),i["default"].prototype.$notify({title:"Success",message:t.data.msg,type:"success",position:"top-right"}),e.$store.state.isLoading=!1,e.body})))}))}}},p=u,m=a("2877"),f=Object(m["a"])(p,s,o,!1,null,null,null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-21fcda43.1fd881f4.js.map