(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-885851ec"],{"457f":function(t,e,a){},"6a07":function(t,e,a){t.exports=a.p+"img/background.b37d0f28.jpg"},"7f7f":function(t,e,a){var s=a("86cc").f,i=Function.prototype,r=/^\s*function ([^ (]*)/,o="name";o in i||a("9e1e")&&s(i,o,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},"816b":function(t,e,a){"use strict";var s=a("457f"),i=a.n(s);i.a},"995a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app animated fadeIn"},[s("loading",{attrs:{active:this.$store.state.isLoading,"can-cancel":!0,"is-full-page":this.$store.state.fullPage},on:{"update:active":function(e){return t.$set(this.$store.state,"isLoading",e)}}}),s("b-row",[s("b-col",{attrs:{xl:"4",lg:"5",md:"6"}},[s("div",{staticClass:"card card-user"},[s("div",{staticClass:"card-image"},[s("div",[s("img",{attrs:{src:a("6a07"),alt:"..."}})])]),s("div",{staticClass:"card-body"},[s("div",[s("div",{staticClass:"author"},[t.imagePath?s("img",{staticClass:"avatar border-white",attrs:{src:t.imagePath,onerror:"this.src='img/avatars/no_user.png'",alt:"..."}}):t._e(),t.imagePath?t._e():s("img",{staticClass:"avatar border-white",attrs:{src:a("de37"),alt:"..."}}),s("h4",{staticClass:"title"},[t._v(t._s(t.$auth.user().name)+"\n\n                                "),s("br"),s("a",{attrs:{href:"#"}},[s("small",[t._v(t._s(t.$auth.user().email))])])])]),s("p",{staticClass:"description text-center"},[t._v('\n                            "I like the way you work it\n                            '),s("br"),t._v(" No diggity\n                            "),s("br"),t._v(' I wanna bag it up"\n                        ')])])])])]),s("b-col",{attrs:{xl:"8",lg:"7",md:"6"}},[s("b-form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[s("b-card",[s("div",{attrs:{slot:"header"},slot:"header"},[s("h4",{staticClass:"card-title"},[t._v(t._s(t.get_text("title@profile@l")))])]),s("b-row",[s("b-col",{attrs:{sm:"6"}},[s("b-form-group",[s("label",{attrs:{for:"id"}},[t._v(t._s(t.get_text("user_id@profile@l")))]),s("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.submitted&&t.errors.has("id")},attrs:{type:"text",name:"id",id:"username",placeholder:t.get_text("enter_your_username@profile@l"),readonly:""},model:{value:t.data.body.id,callback:function(e){t.$set(t.data.body,"id",e)},expression:"data.body.id"}}),t.submitted&&t.errors.has("id")?s("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.first("id"))+"\n                                ")]):t._e()],1)],1),s("b-col",{attrs:{sm:"6"}},[s("b-form-group",[s("label",{attrs:{for:"email"}},[t._v(t._s(t.get_text("email@profile@l")))]),s("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.submitted&&t.errors.has("email")},attrs:{type:"text",id:"email",placeholder:t.get_text("enter_your_email@profile@l"),name:"email"},model:{value:t.data.body.email,callback:function(e){t.$set(t.data.body,"email",e)},expression:"data.body.email"}}),t.submitted&&t.errors.has("email")?s("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.first("email"))+"\n                                ")]):t._e()],1)],1)],1),s("b-row",[s("b-col",{attrs:{sm:"4"}},[s("b-form-group",[s("label",{attrs:{for:"first-name"}},[t._v(t._s(t.get_text("first_name@profile@l")))]),s("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.submitted&&t.errors.has("name")},attrs:{type:"text",id:"first-name",placeholder:t.get_text("enter_your_first_name@profile@l"),name:"name"},model:{value:t.data.body.name,callback:function(e){t.$set(t.data.body,"name",e)},expression:"data.body.name"}}),t.submitted&&t.errors.has("name")?s("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.first("name"))+"\n                                ")]):t._e()],1)],1),s("b-col",{attrs:{sm:"4"}},[s("b-form-group",[s("label",{attrs:{for:"second-name"}},[t._v(t._s(t.get_text("second_name@profile@l")))]),s("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.submitted&&t.errors.has("second_name")},attrs:{type:"text",id:"second-name",placeholder:t.get_text("enter_your_second_name@profile@l"),name:"second_name"},model:{value:t.data.body.second_name,callback:function(e){t.$set(t.data.body,"second_name",e)},expression:"data.body.second_name"}}),t.submitted&&t.errors.has("second_name")?s("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.first("second_name@l"))+"\n                                ")]):t._e()],1)],1),s("b-col",{attrs:{sm:"4"}},[s("b-form-group",[s("label",{attrs:{for:"last-name"}},[t._v(t._s(t.get_text("last_name@profile@l")))]),s("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.submitted&&t.errors.has("last_name")},attrs:{type:"text",id:"last-name",placeholder:t.get_text("enter_your_last_name@profile@l"),name:"last_name"},model:{value:t.data.body.last_name,callback:function(e){t.$set(t.data.body,"last_name",e)},expression:"data.body.last_name"}}),t.submitted&&t.errors.has("last_name")?s("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.first("last_name"))+"\n                                ")]):t._e()],1)],1)],1),t.imagePath?s("b-row",[s("b-col",{attrs:{xs:"6"}},[s("img",{staticClass:"img-responsive",attrs:{src:t.imagePath,onerror:"this.src='img/avatars/no_user.png'",height:"100",width:"100"}}),s("br"),s("b-button",{staticClass:"btn-pill",attrs:{variant:"danger",size:"md",type:"button"},on:{click:t.removeImage}},[t._v(t._s(t.get_text("remove@profile@l")))])],1)],1):s("b-row",[s("b-form-group",[s("b-col",{attrs:{xs:"6"}},[s("h2",[t._v(t._s(t.get_text("select_an_image@profile@l")))]),s("b-form-file",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.submitted&&t.errors.has("image")},attrs:{placeholder:t.get_text("please_select_image@profile@l"),name:"image"},on:{change:t.onImageChange},model:{value:t.data.image,callback:function(e){t.$set(t.data,"image",e)},expression:"data.image"}}),t.submitted&&t.errors.has("image")?s("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.first("image"))+"\n                                    ")]):t._e(),s("span",{staticClass:"error"},[t._v(t._s(t.errors.first("size_test")))])],1)],1)],1),s("b-row",[s("b-col",{staticClass:"text-center",attrs:{cols:"12"}},[s("b-button",{staticClass:"px-4",attrs:{type:"submit",disabled:t.updateProfileBtn,variant:"primary"}},[t._v("\n                                "+t._s(t.get_text("update@profile@l"))+"\n                            ")]),s("img",{directives:[{name:"show",rawName:"v-show",value:t.updateProfileBtn,expression:"updateProfileBtn"}],attrs:{src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}})],1)],1)],1)],1)],1)],1)],1)},i=[],r=(a("7f7f"),a("28a5"),a("a592")),o=a("a026"),n=(a("0fae"),a("5c96")),l=a.n(n),d=a("9062"),c=a.n(d);a("e40d");o["default"].use(c.a),o["default"].use(l.a);var m={name:"Profile",store:r["a"],components:{loading:c.a},data:function(){return{context:"Profile Update context",data:{body:{email:"",username:"",name:"",second_name:"",last_name:"",address:"",aboutMe:""}},image:"",imagePath:"",imageName:"",submitted:!1,error:null,errorMessage:null,successMessage:null,updateProfileBtn:null,translation:[]}},beforeMount:function(){localStorage.getItem("translation")&&(this.translation=JSON.parse(localStorage.getItem("translation")))},created:function(){this.loadUsersProfile(this.$auth.user()),this.imagePath=this.$auth.user().url+"/images/"+this.$auth.user().file_name,this.imageName=this.$auth.user().file_name},methods:{get_text:function(t){var e=this.translation[this.$i18n.locale][t];if(e)return e;var a=t.split("@");if(a.length>2){var s=a[0]+"@l",i=this.translation[this.$i18n.locale][s];return i||"!"+t}return"!"+t},onImageChange:function(t){console.log(t.target.files[0]),this.image=t.target.files[0];var e=t.target.files||t.dataTransfer.files;e.length&&this.createImage(e[0])},createImage:function(t){var e=new FileReader,a=this;e.onload=function(t){a.imagePath=t.target.result},e.readAsDataURL(t)},removeImage:function(t){this.image="",this.imagePath=""},loadUsersProfile:function(t){var e=this;this.$store.state.isLoading=!0,o["default"].axios.get("/user/".concat(t.id,"/profile")).then((function(t){console.log(t.data.data),e.data.body=t.data.data,e.$store.state.isLoading=!1})).catch((function(t){console.log(t)}))},handleSubmit:function(t){var e=this;t.preventDefault(),this.submitted=!0,this.$validator.validate().then((function(t){if(t){var a=new FormData;a.append("image",e.image),a.append("name",e.data.body.name),a.append("second_name",e.data.body.second_name),a.append("last_name",e.data.body.last_name),a.append("email",e.data.body.email),e.$store.dispatch("updateUserProfile",{where:e.$auth.user().id,data:a})}}))}}},u=m,g=(a("816b"),a("2877")),f=Object(g["a"])(u,s,i,!1,null,null,null);e["default"]=f.exports},a592:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));a("7f7f");var s=a("a026"),i=a("2f62"),r=a("5c96"),o=a.n(r),n=a("d3a4");s["default"].use(i["a"]),s["default"].use(o.a),s["default"].prototype.$notify=r["Notification"];var l=new i["a"].Store({state:{translations:{en:{hello:"Hello World"},ar:{hello:"Hallo Verden"}},loading:!1,users:[],userProfile:[],groups:[],parents:[],isLoading:!1,fullPage:!0,title:"",message:""},mutations:{SET_USERS:function(t,e){t.users=e},SET_USER_PROFILE:function(t,e){t.userProfile=e},SET_GROUP:function(t,e){t.groups=e.map((function(t){return{text:t.name,value:t.id}}))},REMOVE_USER:function(t,e){var a=t.users;a.splice(a.indexOf(e),1)},UPDATE_USER:function(t,e){console.log(e)},CREATED_USER:function(t,e){console.log("add User",e),this.dispatch("loadUsers"),console.log("after User",t.users)},SET_PARENT_TANENTS:function(t,e){t.parents=e},SET_GROUP_TANENTS:function(t,e){console.log(e),t.groupTanent=e.map((function(t){return{text:t.name,value:t.name}}))},GET_TEXT_TITLE:function(t,e){return t.title=e},GET_TEXT_MSG:function(t,e){return t.message=e}},getters:{users:function(t){return t.users},getRowCount:function(t){return t.users.length}},actions:{get_text_title:function(t,e){var a=t.commit,s=this.state.translations[n["a"].locale][e];a("GET_TEXT_TITLE",s||"!"+e)},get_text_message:function(t,e){var a=t.commit,s=this.state.translations[n["a"].locale][e];a("GET_TEXT_MSG",s||"!"+e)},loadUsers:function(t){var e=this,a=t.commit;this.state.isLoading=!0,s["default"].axios({url:"user",method:"GET"}).then((function(t){200==t.data.code?a("SET_USERS",t.data.data):(e.dispatch("get_text_title","Error"),e.dispatch("get_text_message",t.data.msg),s["default"].prototype.$notify.error({title:e.state.title,message:e.state.message,type:"Error",position:"top-right"})),e.state.isLoading=!1}))},loadGroups:function(t){var e=this,a=t.commit;s["default"].axios({url:"allGroup",method:"GET"}).then((function(t){200==t.data.code&&(e.state.loading=!0,a("SET_GROUP",t.data.groups))}))},loadParentTenant:function(t){var e=this,a=t.commit;s["default"].axios({url:"allTenant",method:"GET"}).then((function(t){200==t.data.code&&(e.state.loading=!0,a("SET_PARENT_TANENTS",t.data.subTenants))}))},loadUsersProfile:function(t,e){var a=this,i=t.commit;this.state.isLoading=!0,s["default"].axios({url:"/user/".concat(e.id,"/profile"),method:"GET"}).then((function(t){alert(t.data.code),200==t.data.code?i("SET_USER_PROFILE",t.data.data):(a.dispatch("get_text_title","Error@m"),a.dispatch("get_text_message",t.data.msg+"@m"),s["default"].prototype.$notify.error({title:a.state.title,message:a.state.message,type:"Error",position:"top-right"})),a.state.isLoading=!1}))},loadGroupsTenant:function(t){var e=this,a=t.commit;s["default"].axios({url:"rolesList",method:"GET"}).then((function(t){200==t.data.code&&(console.log(t.data),e.state.loading=!0,a("SET_GROUP_TANENTS",t.data.roles))}))},updateUserProfile:function(t,e){var a=this,i=(t.commit,{headers:{"content-type":"multipart/form-data"}});this.state.isLoading=!0,s["default"].axios.post("/user/".concat(e.where,"/profile"),e.data,i).then((function(t){204==t.data.code?(a.dispatch("get_text_title","Success@m"),a.dispatch("get_text_message",t.data.msg+"@m"),console.log("Update user",t.data.code,"from the server"),s["default"].prototype.$notify({title:a.state.title,message:a.state.message,type:"success",position:"top-right"})):(a.dispatch("get_text_title","Error@m"),a.dispatch("get_text_message",t.data.msg+"@m"),s["default"].prototype.$notify.error({title:a.state.title,message:a.state.message,type:"Error",position:"top-right"})),a.state.isLoading=!1}))},updateUserPassword:function(t,e){var a=this;t.commit;this.state.isLoading=!0,s["default"].axios.put("/user/".concat(e.where,"/credentials"),e.data).then((function(t){console.log("Update user",t.data.code,"from the server"),a.dispatch("get_text_title","Success@m"),a.dispatch("get_text_message",t.data.msg+"@m"),console.log("Update user",t.data.code,"from the server"),s["default"].prototype.$notify({title:a.state.title,message:a.state.message,type:"success",position:"top-right"}),a.state.isLoading=!1}))},removeUser:function(t,e){var a=this,i=t.commit;this.state.isLoading=!0,s["default"].axios.delete("/user/".concat(e.id)).then((function(t){a.state.isLoading=!1,200==t.data.code?(console.log("removed user",t.data.code,"from the server"),a.dispatch("get_text_title","Success@m"),a.dispatch("get_text_message",t.data.msg+"@m"),s["default"].prototype.$notify({title:a.state.title,message:a.state.message,type:"success",position:"top-right"}),i("REMOVE_USER",e)):(a.dispatch("get_text_title","Error@m"),a.dispatch("get_text_message",t.data.msg+"@m"),s["default"].prototype.$notify.error({title:a.state.title,message:a.state.message,type:"Error",position:"top-right"}))}))},updateUser:function(t,e){var a=this,i=t.commit;this.state.isLoading=!0,s["default"].axios.put("/user/".concat(e.where),e.data).then((function(t){a.state.isLoading=!1,console.log("Update user",t.data.code,"from the server"),a.dispatch("get_text_title","Success@m"),a.dispatch("get_text_message",t.data.msg+"@m"),s["default"].prototype.$notify({title:a.state.title,message:a.state.message,type:"success",position:"top-right"}),i("UPDATE_USER",e.data)}))},createUser:function(t,e){var a=this,i=t.commit;this.state.isLoading=!0,s["default"].axios.post("/user",e.data).then((function(t){a.state.isLoading=!1,200==t.data.code?(a.dispatch("get_text_title","Success@m"),a.dispatch("get_text_message",t.data.msg+"@m"),console.log("Created user",t.data.code,"from the server"),s["default"].prototype.$notify({title:a.state.title,message:a.state.message,type:"success",position:"top-right"}),i("CREATED_USER",e.data)):(a.dispatch("get_text_title","Error@m"),a.dispatch("get_text_message",t.data.msg+"@m"),s["default"].prototype.$notify.error({title:a.state.title,message:a.state.message,type:"Error",position:"top-right"}))}))},translation:function(){var t=this;s["default"].axios.get("/gettranslations").then((function(e){if(t.state.isLoading=!1,200==e.data.code){JSON.stringify(e.data.data);t.state.translations=e.data.data}else t.dispatch("get_text_title","Error@m"),t.dispatch("get_text_message",e.data.msg+"@m"),s["default"].prototype.$notify.error({title:t.state.title,message:t.state.message,type:"Error",position:"top-right"})})).catch((function(e){t.state.isLoading=!1,422==e.response.status&&(t.dispatch("get_text_title","Error@m"),t.dispatch("get_text_message",e.response.data.errors.Type[0]+"@m"),s["default"].prototype.$notify.error({title:t.state.title,message:t.state.message,type:"Error",position:"top-right"}))}))}}})},de37:function(t,e,a){t.exports=a.p+"img/user.119d7ee6.jpg"}}]);
//# sourceMappingURL=chunk-885851ec.32b63947.js.map