(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0eb55f7f"],{"03e0":function(t,e,i){"use strict";function n(t){return o[t.toString()]}i.d(e,"a",(function(){return n}));var o={Rectangle:"M0,0 L50,0 L50,50 L0,50 z",Ellipse:"M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",Hexagon:"M30,0 L60,0 L90,30 L60,60 L30,60 L0,30 L30,0 z",Parallelogram:"M30,0 L60,0 L45,30 L15,30 z",Triangle:"M45,0 L90,45 L0,45 L45,0 z",Plus:"M696.6084,158.2656 L674.8074,158.2656 L674.8074,136.4656 L658.4084,136.4656 L658.4084,158.2656 L636.6084,158.2656L636.6084,174.6646 L658.4084,174.6646 L658.4084,196.4656 L674.8074,196.4656 L674.8074,174.6646 L696.6084,174.6646L696.6084,158.2656 z",Star:"M540.3643,137.9336 L546.7973,159.7016 L570.3633,159.7296 L550.7723,171.9366 L558.9053,194.9966 L540.3643,179.4996L521.8223,194.9966 L529.9553,171.9366 L510.3633,159.7296 L533.9313,159.7016 L540.3643,137.9336 z",Pentagon:"M30,0 L60,30 L50,70 L10,70 L0,30 L30,0 z",Heptagon:"M223.7783,195.7134 L207.1303,174.8364 L213.0713,148.8034 L237.1303,137.2174 L261.1883,148.8034 L267.1303,174.8364L250.4813,195.7134 L223.7783,195.7134 z",Octagon:"M98.7319,196.4653 L81.1579,178.8923 L81.1579,154.0393 L98.7319,136.4653 L123.5849,136.4653L141.1579,154.0393 L141.1579,178.8923 L123.5849,196.4653 L98.7319,196.4653 z",Trapezoid:"M127.2842,291.4492 L95.0322,291.4492 L81.1582,256.3152 L141.1582,256.3152 L127.2842,291.4492 z",Decagon:"M657.3379,302.4141 L642.3369,291.5161 L636.6089,273.8821 L642.3369,256.2481 L657.3379,245.3511 L675.8789,245.3511L690.8789,256.2481 L696.6089,273.8821L690.8789,291.5161 L675.8789,302.4141 L657.3379,302.4141 z",RightTriangle:"M836.293,292.9238 L776.293,292.9238 L776.293,254.8408 L836.293,292.9238 z",Cylinder:"M 542.802,362.009C 542.802,368.452 525.341,373.676 503.802,373.676C 482.263,373.676 464.802,368.452 464.802,362.009L 464.802,466.484C 464.802,472.928 482.263,478.151 503.802,478.151C 525.341,478.151 542.802,472.928 542.802,466.484L 542.802,362.016C 542.802,368.459 525.341,373.534 503.802,373.534C 482.263,373.534 464.802,368.31 464.802,361.867L 464.802,362.016C 464.802,355.572 482.263,350.349 503.802,350.349C 525.341,350.349 542.802,355.572 542.802,362.016",Diamond:"M397.784,287.875 L369.5,316.159 L341.216,287.875 L369.5,259.591 L397.784,287.875 z"}},1257:function(t,e,i){"use strict";i.d(e,"i",(function(){return p})),i.d(e,"f",(function(){return u})),i.d(e,"d",(function(){return g})),i.d(e,"g",(function(){return m})),i.d(e,"c",(function(){return y})),i.d(e,"b",(function(){return v})),i.d(e,"a",(function(){return w})),i.d(e,"j",(function(){return O})),i.d(e,"h",(function(){return x})),i.d(e,"e",(function(){return j}));var n=i("9efe"),o=i("19be"),r=i("b239"),a=i("95f7"),s=i("1ce4"),c=i("d0e6"),h=i("c544"),d=i("b46f"),l=i("bccc");function p(t,e,i,n){var o,r=[],a=!1;if(y(t,e,!0)){t.protectPropertyChange(!0),o=t.nameTable[e.parentId];var s=o.wrapper;if(o&&"Canvas"===o.container.type){if(n||s.bounds.x<=i.x&&s.bounds.right>=i.x&&s.bounds.y<=i.y&&s.bounds.bottom>=i.y){var c=void 0,h=s.bounds.y,l=s.bounds.x,p=t.nameTable[o.parentId]||o,u=p.shape;if("SwimLane"===u.type)a=O(o,p,e,t,!0);else{var g=t.nameTable[o.parentId]||o,f=g.shape;c=g.wrapper,s.actualSize.width<s.outerBounds.width&&!(s.bounds.x>s.outerBounds.x)&&(void 0!==o.rowIndex?(g.columns.length-1,c.updateColumnWidth(o.columnIndex,s.outerBounds.width,!0),"Horizontal"===f.orientation&&f.phaseSize&&Object(d["v"])(g,t,s,o.columnIndex),Object(d["u"])(t,g),t.drag(g,l-s.bounds.x,h-s.bounds.y)):t.scale(o,1+(s.outerBounds.width-s.actualSize.width)/s.actualSize.width,1,s.outerBounds.x<s.bounds.x?{x:1,y:.5}:{x:0,y:.5})),s.actualSize.height<s.outerBounds.height&&!(s.bounds.y>s.outerBounds.y)&&(void 0!==o.rowIndex?(c.updateRowHeight(o.rowIndex,s.outerBounds.height,!0),t.drag(g,l-s.bounds.x,h-s.bounds.y)):t.scale(o,1,1+(s.outerBounds.height-s.actualSize.height)/s.actualSize.height,s.outerBounds.y<s.bounds.y?{x:.5,y:1}:{x:.5,y:0}))}}t.select([e]),Object(d["t"])(r,t)}t.protectPropertyChange(!1)}return a}function u(t,e,i,n){var o;if(y(t,e,!0)){var r="isProtectedOnChange",s=t[r];t.protectPropertyChange(!0),o=t.nameTable[e.parentId];var c=o.wrapper;if(o&&"Canvas"===o.container.type&&!n&&!(c.bounds.x<=i.x&&c.bounds.right>=i.x&&c.bounds.y<=i.y&&c.bounds.bottom>=i.y)){var h=Object(a["b"])(e);t.clearSelection(),b(t,e),e.parentId="";var d={type:"ChildCollectionChanged",category:"Internal",undoObject:h,redoObject:Object(a["b"])(e)};t.addHistoryEntry(d),t.commandHandler.isContainer&&(t.commandHandler.isContainer=!1,t.endGroupAction())}t.protectPropertyChange(s)}}function g(t,e,i){for(var n=new c["a"],o="SwimLane"===t.shape.type?t.wrapper.children[0].rows:t.wrapper.rows,r=i?1:0;r<o.length;r++)n.uniteRect(o[r].cells[e].bounds);return n}function f(t,e){for(var i,o={},r=0,a=Object.keys(e);r<a.length;r++){var c=a[r];o[c]=e[c]}return Object(s["x"])(e)===n["q"]&&(i=new n["q"](t,"nodes",o,!0),i.id=e.id,t.initObject(i)),t.updateDiagramObject(i),i}function m(t,e){var i,o,r;if(t.selectedObject.helperObject)r=t.selectedObject.helperObject;else if((t.selectedItems.nodes.length>0||t.selectedItems.connectors.length>0)&&(e instanceof n["t"]&&e.nodes.length+e.connectors.length===1?(i=e.nodes.length>0?e.nodes[0]:e.connectors[0],o=t.selectedItems.wrapper.children[0]):(i=e,o=t.selectedItems.wrapper),t.selectedObject.actualObject=i,!t.currentSymbol&&(y(t,i)||t.constraints&l["d"].LineRouting&&t.selectedItems.nodes.length>0))){var a={id:"helper",rotateAngle:o.rotateAngle,offsetX:o.offsetX,offsetY:o.offsetY,minWidth:o.minWidth,minHeight:o.minHeight,maxWidth:o.maxWidth,maxHeight:o.maxHeight,width:o.actualSize.width,height:o.actualSize.height,style:{strokeDashArray:"2 2",fill:"transparent",strokeColor:"#7D7D7D",strokeWidth:2}};r=f(t,a),t.selectedObject.helperObject=r}return r}function y(t,e,i){var n=i?t.nameTable[e.parentId]:t.nameTable[e.parentId]||e;return!(!n||!n.container)}function v(t,e){var i=t.nameTable[e.parentId];"Canvas"===i.container.type&&(e.margin.left=e.offsetX-i.wrapper.bounds.x-e.width/2,e.margin.top=e.offsetY-i.wrapper.bounds.y-e.height/2),t.nodePropertyChange(e,{},{width:e.width,height:e.height,offsetX:e.offsetX,offsetY:e.offsetY,margin:{left:e.margin.left,right:e.margin.right,top:e.margin.top,bottom:e.margin.bottom},rotateAngle:e.rotateAngle}),i.isLane||(i.wrapper.measure(new r["a"]),i.wrapper.arrange(i.wrapper.desiredSize))}function b(t,e){if(e.parentId&&""!==e.parentId){var i=t.nameTable[e.parentId];if(i.isLane&&i.parentId)for(var n=t.nameTable[i.parentId],o=i.id.slice(n.id.length),r=o.substring(0,o.length-1),a=n.shape.lanes,s=void 0,c=0;c<a.length;c++)if(s=a[c],r===s.id)for(var h=0;h<s.children.length;h++)s.children[h].id===e.id&&(s.children.splice(h,1),h--);t.deleteChild(e)}}function w(t,e,i,n,r){if(!t.currentSymbol){t.protectPropertyChange(!0);var s=t.nameTable[e.parentId];i=t.getObject(i.id)||i;var c=-1!==t.nodes.indexOf(i)?i.id:i;if("Canvas"!==e.container.type||r){if(s){var h=s.wrapper.bounds,d=e.wrapper.bounds;if("Horizontal"===s.shape.orientation)i.margin.left-=d.x-h.x;else{var p=e.parentId+s.shape.lanes[0].id+"_0_header";i.margin.top-=d.y-h.y-t.nameTable[p].wrapper.bounds.height}}}else{var u=i.wrapper.offsetX-i.wrapper.actualSize.width/2-(e.wrapper.offsetX-e.wrapper.actualSize.width/2),g=i.wrapper.offsetY-i.wrapper.actualSize.height/2-(e.wrapper.offsetY-e.wrapper.actualSize.height/2);i.margin.left=u,i.margin.top=g}var f=t.nameTable[e.id];if(f.children||(f.children=[]),-1===f.children.indexOf(i.id)){b(t,i),t.getObject(i.id)&&t.removeElements(i);var m=Object(a["b"])(i);if(t.addChild(f,c),i=t.getObject(i.id),f.isLane&&f.parentId){s=t.nameTable[f.parentId];for(var y=s.shape.lanes,v=f.id.slice(s.id.length),w=v.substring(0,v.length-1),x=0;x<y.length;x++)f.isLane&&w===y[x].id&&(i.parentObj instanceof o["a"]||(i.parentObj=y[x]),y[x].children.push(i))}if(t.updateDiagramObject(i),f.parentId?n||O(f,s,i,t):t.updateDiagramObject(f),!(t.diagramActions&l["c"].UndoRedo)){var j={type:"ChildCollectionChanged",category:"Internal",undoObject:m,redoObject:Object(a["b"])(i),historyAction:r?"AddNodeToLane":void 0};t.addHistoryEntry(j)}}t.protectPropertyChange(!1)}}function O(t,e,i,n,o){var r,s=Object(a["b"])(t),c=!1,h=e.shape.padding,p=t.wrapper.bounds,u=t.wrapper.outerBounds,g=i.wrapper.bounds;if(e&&"SwimLane"===e.shape.type&&(p.right<g.right+h||p.bottom<g.bottom+h)){var f=e.wrapper.children[0],m=f.bounds.x,y=f.bounds.y,v=void 0;if(p.right<g.right+h&&u.x<=p.x&&(v=g.right-p.right,r=!1,f.updateColumnWidth(t.columnIndex,p.width+v,!0,h)),p.bottom<g.bottom+h&&u.y<=p.y&&(v=g.bottom-p.bottom,r=!0,f.updateRowHeight(t.rowIndex,p.height+v,!0,h)),!(n.diagramActions&l["c"].UndoRedo)&&(o&&(n.startGroupAction(),c=!0),void 0!==r)){var b={category:"Internal",type:r?"RowHeightChanged":"ColumnWidthChanged",undoObject:s,redoObject:Object(a["b"])(t)};n.addHistoryEntry(b)}e.width=e.wrapper.width=f.width,e.height=e.wrapper.height=f.height,Object(d["r"])(e),"Horizontal"===e.shape.orientation&&Object(d["v"])(e,n,t.wrapper,t.columnIndex),Object(d["u"])(n,e),n.drag(e,m-f.bounds.x,y-f.bounds.y),Object(d["e"])(e,n),Object(d["d"])(e)}return Object(d["f"])(n,i,h),n.updateDiagramElementQuad(),c}function x(t,e,i,n,o,r){var a=Object(h["g"])(n.element.id);n.diagramRenderer.renderStackHighlighter(t,a,n.scroller.transform,e,i,o,r)}function j(t,e,i,n){var o=t,r=i.nameTable[o.parentId],a=i.nameTable[o.parentId];if(e&&a&&a.container&&"Stack"===a.container.type&&e.container&&"Stack"===e.container.type&&a.id!==e.parentId){var s=a.wrapper.children.indexOf(o.wrapper);s>-1&&(i.nameTable[o.id].parentId=e.id,a.wrapper.children.splice(s,1))}if(e&&e.parentId&&o.parentId&&"Drag"===n&&"Stack"===a.container.type){var c=r.wrapper.children.indexOf(e.wrapper),h=r.wrapper.children.indexOf(o.wrapper),d={targetIndex:c,target:e,sourceIndex:h,source:t};r.wrapper.children.splice(h,1),r.wrapper.children.splice(c,0,o.wrapper);var l={targetIndex:h,target:e,sourceIndex:c,source:t},p={type:"StackChildPositionChanged",redoObject:l,undoObject:d,category:"Internal"};i.commandHandler.addHistoryEntry(p)}}},"18f9":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("b239"),o=i("456d"),r=i("c544"),a=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s=function(t){function e(){var e=t.call(this)||this;return e.imageSource="",e.imageScale="None",e.imageAlign="None",e.stretch="Stretch",e}return a(e,t),Object.defineProperty(e.prototype,"source",{get:function(){return this.imageSource},set:function(t){this.imageSource=t,this.isDirt=!0},enumerable:!0,configurable:!0}),e.prototype.measure=function(t,e,i){return this.isDirt&&("Stretch"!==this.stretch||void 0===this.width&&void 0===this.height)&&(this.contentSize=Object(r["y"])(this.source,this.contentSize,e,i),this.isDirt=!1),void 0!==this.width&&void 0!==this.height?(this.desiredSize=new n["a"](this.width,this.height),this.contentSize=this.desiredSize):this.desiredSize=this.contentSize,this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.desiredSize},e.prototype.arrange=function(t){return this.actualSize=new n["a"](this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},e}(o["a"])},"19be":function(t,e,i){"use strict";var n=i("7de8"),o=i("b239"),r=i("be2f"),a=i("e464"),s=i("95f7"),c=i("c544"),h=function(){function t(){}return t.getContext=function(t){return t.getContext("2d")},t.setCanvasSize=function(t,e,i){t&&(t.setAttribute("width",e.toString()),t.setAttribute("height",i.toString()))},t.prototype.renderGradient=function(t,e,i,n){var o,r,a;if("None"!==t.gradient.type){for(var s=0;s<t.gradient.stops.length;s++)o=void 0!==o?t.gradient.stops[s].offset:Math.max(o,t.gradient.stops[s].offset),r=void 0!==r?t.gradient.stops[s].offset:Math.min(r,t.gradient.stops[s].offset);if("Linear"===t.gradient.type){var c=t.gradient;a=e.createLinearGradient(i+c.x1,n+c.y1,i+c.x2,n+c.y2)}else{var h=t.gradient;a=e.createRadialGradient(i+h.fx,n+h.fy,0,i+h.cx,n+h.cy,h.r)}for(s=0;s<t.gradient.stops.length;s++){var d=t.gradient.stops[s],l=r<0?(o+d.offset)/(2*o):d.offset/o;a.addColorStop(l,d.color)}e.fillStyle=a}return e},t.prototype.renderShadow=function(e,i,n){void 0===n&&(n=null);var o=t.getContext(i);o.save(),o.beginPath(),o.strokeStyle=o.fillStyle=e.shadow.color,o.globalAlpha=e.shadow.opacity;var a={x:0,y:0},s=r["a"].transform(a,e.shadow.angle,e.shadow.distance),c=e.x+s.x,h=e.y+s.y,d=c+e.width*e.pivotX,l=h+e.height*e.pivotY;this.rotateContext(i,e.angle,d,l),n?(o.translate(c,h),this.renderPath(i,e,n),o.translate(-c,-h)):(o.rect(c,h,e.width,e.height),o.fillRect(c,h,e.width,e.height)),o.fill(),o.stroke(),o.closePath(),o.restore()},t.createCanvas=function(t,e,i){var n=Object(c["b"])("canvas",{id:t});return this.setCanvasSize(n,e,i),n},t.prototype.setStyle=function(e,i){var n=t.getContext(e);"none"===i.fill&&(i.fill="transparent"),"none"===i.stroke&&(i.stroke="transparent"),n.strokeStyle=i.stroke,n.lineWidth=i.strokeWidth,0===i.strokeWidth&&(n.strokeStyle="transparent"),n.globalAlpha=i.opacity;var o=[];i.dashArray&&(o=this.parseDashArray(i.dashArray)),n.setLineDash(o),i.gradient&&"None"!==i.gradient.type?this.renderGradient(i,n,0,0):n.fillStyle=i.fill},t.prototype.rotateContext=function(e,i,n,o){var r=t.getContext(e);r.translate(n,o),r.rotate(i*Math.PI/180),r.translate(-n,-o)},t.prototype.setFontStyle=function(e,i){var n=t.getContext(e),o="";i.italic&&(o+="italic "),i.bold&&(o+="bold "),o+=i.fontSize+"px ",o+=i.fontFamily,n.font=o},t.prototype.parseDashArray=function(t){for(var e=[],i=-1!==t.indexOf(" ")?" ":",",n=t.split(i),o=0,r=n;o<r.length;o++){var a=r[o];e.push(Number(a))}return e},t.prototype.drawRectangle=function(e,i){if(!0===i.visible)if(i.cornerRadius)i.data=Object(a["c"])(i.cornerRadius,i.height,i.width),this.drawPath(e,i);else{var n=t.getContext(e);i.shadow&&this.renderShadow(i,e),n.save(),n.beginPath();i.cornerRadius;var o=i.x+i.width*i.pivotX,r=i.y+i.height*i.pivotY;this.rotateContext(e,i.angle,o,r),this.setStyle(e,i),n.rect(i.x,i.y,i.width,i.height),n.fillRect(i.x,i.y,i.width,i.height),n.fill(),n.stroke(),n.closePath(),n.restore()}},t.prototype.drawPath=function(e,i){var n=[];n=Object(a["e"])(i.data),n=Object(a["d"])(n),i.shadow&&this.renderShadow(i,e,n);var o=t.getContext(e);o.save(),o.beginPath();var r=i.y+i.height*i.pivotY,s=i.x+i.width*i.pivotX;"Horizontal"===i.flip||"Vertical"===i.flip?(o.translate(i.x+i.width/2,i.y+i.height/2),o.rotate(-i.angle*Math.PI/180),o.translate(-i.x-i.width/2,-i.y-i.height/2)):this.rotateContext(e,i.angle,s,r),this.setStyle(e,i),o.translate(i.x,i.y),"Horizontal"===i.flip?(o.scale(-1,1),o.translate(-1*i.width,0)):"Vertical"===i.flip?(o.scale(1,-1),o.translate(0,-1*i.height)):"Both"===i.flip&&(o.scale(-1,-1),o.translate(-1*i.width,-1*i.height)),this.renderPath(e,i,n),o.fill(),o.translate(-i.x,-i.y),o.stroke(),o.restore()},t.prototype.renderPath=function(e,i,n){if(!0===i.visible){var o,r=t.getContext(e),a=void 0,s=void 0,c=void 0,h=void 0,d=void 0,l=void 0,p=void 0,u=void 0,g=void 0,f=n;for(p=0,u=0,g=0,o=f.length;g<o;++g){var m=f[g],y=m,v=y.command;switch("x1"in y&&(c=y.x1),"x2"in y&&(d=y.x2),"y1"in y&&(h=y.y1),"y2"in y&&(l=y.y2),"x"in y&&(p=y.x),"y"in y&&(u=y.y),v){case"M":r.moveTo(p,u),y.x=p,y.y=u;break;case"L":r.lineTo(p,u),y.x=p,y.y=u;break;case"C":r.bezierCurveTo(c,h,d,l,p,u),y.x=p,y.y=u,y.x1=c,y.y1=h,y.x2=d,y.y2=l;break;case"Q":r.quadraticCurveTo(c,h,p,u),y.x=p,y.y=u,y.x1=c,y.y1=h;break;case"A":var b={x:a,y:s},w=y.r1,O=y.r2,x=y.angle*(Math.PI/180),j=y.largeArc,S=y.sweep,C={x:p,y:u},P={x:Math.cos(x)*(b.x-C.x)/2+Math.sin(x)*(b.y-C.y)/2,y:-Math.sin(x)*(b.x-C.x)/2+Math.cos(x)*(b.y-C.y)/2},T=Math.pow(P.x,2)/Math.pow(w,2)+Math.pow(P.y,2)/Math.pow(O,2);T>1&&(w*=Math.sqrt(T),O*=Math.sqrt(T));var I=Math.pow(O,2)*Math.pow(P.x,2),A=(j===S?-1:1)*Math.sqrt((Math.pow(w,2)*Math.pow(O,2)-Math.pow(w,2)*Math.pow(P.y,2)-I)/(Math.pow(w,2)*Math.pow(P.y,2)+Math.pow(O,2)*Math.pow(P.x,2)));isNaN(A)&&(A=0);var z={x:A*w*P.y/O,y:A*-O*P.x/w},L={x:(b.x+C.x)/2+Math.cos(x)*z.x-Math.sin(x)*z.y,y:(b.y+C.y)/2+Math.sin(x)*z.x+Math.cos(x)*z.y},E=this.a([1,0],[(P.x-z.x)/w,(P.y-z.y)/O]),D=[(P.x-z.x)/w,(P.y-z.y)/O],k=[(-P.x-z.x)/w,(-P.y-z.y)/O],R=this.a(D,k);this.r(D,k)<=-1&&(R=Math.PI),this.r(D,k)>=1&&(R=0);var M=S?1:-1,B=E+M*(R/2);L.x,Math.cos(B),L.y,Math.sin(B);if(y.centp=L,y.xAxisRotation=x,y.rx=w,y.ry=O,y.a1=E,y.ad=R,y.sweep=S,null!=r){var H=w>O?w:O,N=w>O?1:w/O,W=w>O?O/w:1;r.save(),r.translate(L.x,L.y),r.rotate(x),r.scale(N,W),r.arc(0,0,H,E,E+R,!S),r.scale(1/N,1/W),r.rotate(-x),r.translate(-L.x,-L.y),r.restore()}break;case"Z":case"z":r.closePath(),p=a,u=s;break}a=p,s=u}}},t.prototype.drawText=function(e,i,n,o,r,a,h){if(i.content&&!0===i.visible){var d=t.getContext(e);d.save(),this.setStyle(e,i),a&&(i.fontSize*=a);var l=i.x+i.width*i.pivotX,p=i.y+i.height*i.pivotY;this.rotateContext(e,i.angle,l,p),this.setFontStyle(e,i);var u=0,g=[];g=i.childNodes;var f=i.wrapBounds;if(d.fillStyle=i.color,f){var m=this.labelAlign(i,f,g);for(u=0;u<g.length;u++){var y=g[u];y.x=Object(c["G"])(y,g,u,i);var v=m.x+(a?y.x*a:y.x)-f.x,b=m.y+(a?y.dy*a:y.dy)*u+.8*i.fontSize;if(f.width>i.width&&"Wrap"!==i.textOverflow&&"NoWrap"===i.textWrapping&&(y.text=Object(s["h"])(y.text,i)),"Clip"!==i.textOverflow&&"Ellipsis"!==i.textOverflow||"Wrap"!==i.textWrapping)d.fillText(y.text,v,b);else if(b<h.actualSize.height+h.bounds.y){if("Ellipsis"===i.textOverflow&&g[u+1]){var w=g[u+1],O=m.y+w.dy*(u+1)+.8*i.fontSize;O>h.actualSize.height+h.bounds.y&&(y.text=y.text.slice(0,y.text.length-3),y.text=y.text.concat("..."))}d.fillText(y.text,v,b)}if("Underline"===i.textDecoration||"Overline"===i.textDecoration||"LineThrough"===i.textDecoration){var x=v,j=void 0,S=d.measureText(y.text).width,C=v+S,P=void 0;switch(i.textDecoration){case"Underline":j=b+2,P=b+2;break;case"Overline":j=m.y+y.dy*u,P=m.y+y.dy*u;break;case"LineThrough":j=(b+m.y+y.dy*u)/2+2,P=(b+m.y+y.dy*u)/2+2}d.beginPath(),d.moveTo(x,j),d.lineTo(C,P),d.strokeStyle=i.color,d.lineWidth=.08*i.fontSize,d.globalAlpha=i.opacity,d.stroke()}}}d.restore()}},t.prototype.loadImage=function(t,e,i,n,o){this.rotateContext(i,e.angle,n,o);var r=new Image;r.src=e.source,this.image(t,r,e.x,e.y,e.width,e.height,e)},t.prototype.drawImage=function(e,i,n,o){var r=this;if(i.visible){var a=t.getContext(e);a.save();var s=i.x+i.width*i.pivotX,c=i.y+i.height*i.pivotY,h=new Image;h.src=i.source;var d=a.canvas.id.split("_");d[d.length-1];o?h.onload=function(){r.loadImage(a,i,e,s,c)}:this.loadImage(a,i,e,s,c),a.restore()}},t.prototype.image=function(t,e,i,n,o,r,a){t.beginPath();var s=e.width,h=e.height,d=o,l=r,p=0,u=0;if(a&&"None"!==a.alignment){var g=a.alignment.toLowerCase().substr(1,3),f=a.alignment.toLowerCase().substr(5,3);if("Slice"===a.scale){var m=function(){p=d,u=h*d/s},y=function(){p=s*l/h,u=l};d>l?(m(),l>u&&y()):d===l?s>h?y():m():(y(),d>p&&m());var v=this.getSliceOffset(g,p,d,s),b=this.getSliceOffset(f,u,l,h),w=s-v,O=h-b,x=p-v*(p/s),j=u-b*(u/h),S=Object(c["b"])("canvas",{width:o.toString(),height:r.toString()}),C=S.getContext("2d");C.drawImage(e,v,b,w,O,0,0,x,j),t.drawImage(S,i,n,o,r)}else if("Meet"===a.scale){var P=h/s,T=l/d;p=T>P?d:l/P,u=T>P?d*P:l,i+=this.getMeetOffset(g,p,d),n+=this.getMeetOffset(f,u,l),t.drawImage(e,0,0,s,h,i,n,p,u)}else t.drawImage(e,i,n,o,r)}else if("None"!==a.flip){var I=1,A=1;"Horizontal"!==a.flip&&"Both"!==a.flip||(i=-i,o=-o,I=-1),"Vertical"!==a.flip&&"Both"!==a.flip||(n=-n,r=-r,A=-1),t.scale(I,A),t.drawImage(e,i,n,o,r)}else t.drawImage(e,i,n,o,r);t.closePath()},t.prototype.getSliceOffset=function(t,e,i,n){switch(t){case"min":return 0;case"mid":return(e-i)/2*n/e;case"max":return(e-i)*n/e;default:return 0}},t.prototype.getMeetOffset=function(t,e,i){var n=Math.max(e,i),o=Math.min(e,i);switch(t){case"min":return 0;case"mid":return(n-o)/2;case"max":return n-o;default:return 0}},t.prototype.m=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},t.prototype.r=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(this.m(t)*this.m(e))},t.prototype.a=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(this.r(t,e))},t.prototype.labelAlign=function(t,e,i){var n=new o["a"](e.width,i.length*(1.2*t.fontSize)),r={x:0,y:0},a=t.x,s=t.y,c=.5*t.width,h=.5*t.height,d=c,l=h;return"left"===t.textAlign?d=0:"center"===t.textAlign?d=e.width>t.width&&("Ellipsis"===t.textOverflow||"Clip"===t.textOverflow)&&"NoWrap"===t.textWrapping?0:.5*t.width:"right"===t.textAlign&&(d=1*t.width),r.x=a+d+(e?e.x:0),r.y=s+l-n.height/2,r},t}(),d=i("1ce4"),l=function(){function t(){}return t.prototype.renderShadow=function(t,e,i,n){void 0===i&&(i=null);var o,a,s={x:0,y:0},h=r["a"].transform(s,t.shadow.angle,t.shadow.distance),d=t.x+h.x,l=t.y+h.y;t.width,t.pivotX,t.height,t.pivotY;n&&(a=n.getElementById(e.id+"_shadow")),a||(o=i?"path":"rect",a=document.createElementNS("http://www.w3.org/2000/svg",o),e.appendChild(a));var p={id:e.id+"_shadow",fill:t.shadow.color,stroke:t.shadow.color,opacity:t.shadow.opacity.toString(),transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")translate("+(t.x+h.x)+","+(t.y+h.y)+")"};if(n){var u=n.getElementById(e.id);u&&u.insertBefore(a,u.firstChild)}Object(c["F"])(a,p),i?i&&this.renderPath(a,t,i):Object(c["F"])(a,{width:t.width,height:t.height})},t.prototype.parseDashArray=function(t){var e=[];return e},t.prototype.drawRectangle=function(t,e,i,n,o,r,a){var s,h,d;e.shadow&&!n&&this.renderShadow(e,t,void 0,r),s=e.id===t.id?e.id+"_container":e.id,r&&(h=r.getElementById(s)),h&&!o||(h=document.createElementNS("http://www.w3.org/2000/svg","rect"),t.appendChild(h)),r&&!e.shadow&&(d=r.getElementById(e.id+"_groupElement_shadow"),d&&d.parentNode.removeChild(d));var l={id:s,x:e.x.toString(),y:e.y.toString(),width:e.width.toString(),height:e.height.toString(),visibility:e.visible?"visible":"hidden",transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")",rx:e.cornerRadius||0,ry:e.cornerRadius||0,opacity:e.opacity,"aria-label":a||""};e.class&&(l["class"]=e.class);var p="pointer-events";a||(l[p]="none"),Object(c["F"])(h,l),this.setSvgStyle(h,e,i)},t.prototype.updateSelectionRegion=function(t,e){var i,n;i=t.parentNode.getElementById(e.id),n={id:e.id,x:e.x.toString(),y:e.y.toString(),width:e.width.toString(),height:e.height.toString(),transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")",class:"e-diagram-selected-region"},i||(i=document.createElementNS("http://www.w3.org/2000/svg","rect"),t.appendChild(i)),this.setSvgStyle(i,e),Object(c["F"])(i,n)},t.prototype.createGElement=function(t,e){var i=Object(c["d"])(t,e);return i},t.prototype.drawLine=function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","line");this.setSvgStyle(i,e);var n=e.x+e.width*e.pivotX,o=e.y+e.height*e.pivotY,r={id:e.id,x1:e.startPoint.x+e.x,y1:e.startPoint.y+e.y,x2:e.endPoint.x+e.x,y2:e.endPoint.y+e.y,stroke:e.stroke,"stroke-width":e.strokeWidth.toString(),opacity:e.opacity.toString(),transform:"rotate("+e.angle+" "+n+" "+o+")",visibility:e.visible?"visible":"hidden"};e.class&&(r["class"]=e.class),Object(c["F"])(i,r),t.appendChild(i)},t.prototype.drawCircle=function(t,e,i,n){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");this.setSvgStyle(o,e);var r=e.class||"";i||(r+=" e-disabled");var a={id:e.id,cx:e.centerX,cy:e.centerY,r:e.radius,visibility:e.visible?"visible":"hidden",class:r,"aria-label":n?n["aria-label"]:""};o.style.display=e.visible?"block":"none",Object(c["F"])(o,a),t.appendChild(o)},t.prototype.drawPath=function(t,e,i,n,o,r){var s=Math.floor(10*Math.random()+1);t.id,s.toString();var h,d,l=[];l=Object(a["e"])(e.data),l=Object(a["d"])(l),e.shadow&&this.renderShadow(e,t,l,o),o&&!e.shadow&&(h=o.getElementById(e.id+"_groupElement_shadow"),h&&h.parentNode.removeChild(h)),o&&(d=o.getElementById(e.id)),d&&!n||(d=document.createElementNS("http://www.w3.org/2000/svg","path"),t.appendChild(d)),this.renderPath(d,e,l);var p={id:e.id,transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")translate("+e.x+","+e.y+")",visibility:e.visible?"visible":"hidden",opacity:e.opacity,"aria-label":r||""};e.class&&(p["class"]=e.class),Object(c["F"])(d,p),this.setSvgStyle(d,e,i)},t.prototype.renderPath=function(t,e,i){var n,o,r,a,s,c,h,d,l=i,p="";for(s=0,c=0,d=0,h=l.length;d<h;++d){var u=l[d],g=u,f=g.command;switch("x1"in g&&(n=g.x1),"x2"in g&&(r=g.x2),"y1"in g&&(o=g.y1),"y2"in g&&(a=g.y2),"x"in g&&(s=g.x),"y"in g&&(c=g.y),f){case"M":p=p+"M"+s.toString()+","+c.toString()+" ";break;case"L":p=p+"L"+s.toString()+","+c.toString()+" ";break;case"C":p=p+"C"+n.toString()+","+o.toString()+","+r.toString()+","+a.toString()+",",p+=s.toString()+","+c.toString()+" ";break;case"Q":p=p+"Q"+n.toString()+","+o.toString()+","+s.toString()+","+c.toString()+" ";break;case"A":p=p+"A"+g.r1.toString()+","+g.r2.toString()+","+g.angle.toString()+",",p+=g.largeArc.toString()+","+g.sweep+","+s.toString()+","+c.toString()+" ";break;case"Z":case"z":p+="Z ";break}}t.setAttribute("d",p)},t.prototype.setSvgFontStyle=function(t,e){t.style.fontStyle=e.italic?"italic":"normal",t.style.fontWeight=e.bold?"bold":"normal",t.style.fontSize=e.fontSize.toString()+"px",t.style.fontFamily=e.fontFamily},t.prototype.drawText=function(t,e,i,n,o,r,a){if(void 0!==e.content){var h=void 0,d=void 0,l=void 0,p=void 0,u=void 0,g=void 0,f=0,m=0,y=0,v=void 0;if(i&&(v=i.getElementById(e.id+"_text")),v){if(e.doWrap)while(v.firstChild)v.removeChild(v.firstChild)}else e.doWrap=!0,v=document.createElementNS("http://www.w3.org/2000/svg","text"),"pre-wrap"===e.whiteSpace&&v.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),t.appendChild(v);var b=e.x+e.width*e.pivotX,w=e.y+e.height*e.pivotY;if(e.doWrap||"Wrap"!==e.textOverflow){var O=document.getElementById(e.id+"_text");for(O&&(O.innerHTML=""),this.setSvgStyle(v,e,o),this.setSvgFontStyle(v,e),h=document.createTextNode(e.content),d=e.childNodes,l=e.wrapBounds,p=this.svgLabelAlign(e,l,d),l.width>e.width&&"Wrap"!==e.textOverflow&&"NoWrap"===e.textWrapping&&(d[0].text=Object(s["h"])(e.content,e)),y=0;y<d.length;y++)if(g=document.createElementNS("http://www.w3.org/2000/svg","tspan"),h=document.createTextNode(d[y].text),u=d[y],u.x=Object(c["G"])(u,d,y,e),f=p.x+u.x-l.x,m=p.y+u.dy*y+.8*e.fontSize,"Clip"!==e.textOverflow&&"Ellipsis"!==e.textOverflow||"Wrap"!==e.textWrapping)this.setText(v,g,u,h,f,m);else{if(!(m<a.actualSize.height))break;if("Ellipsis"===e.textOverflow&&d[y+1]){var x=d[y+1],j=p.y+x.dy*(y+1)+.8*e.fontSize;j>a.actualSize.height&&(u.text=u.text.slice(0,u.text.length-3),u.text=u.text.concat("..."),h.data=u.text)}this.setText(v,g,u,h,f,m)}}e.textDecoration&&"LineThrough"===e.textDecoration&&(e.textDecoration=Object(s["n"])(e.textDecoration));var S={id:e.id+"_text",fill:e.color,visibility:e.visible?"visible":"hidden","text-decoration":e.textDecoration,transform:"rotate("+e.angle+","+b+","+w+")translate("+e.x+","+e.y+")",opacity:e.opacity,"aria-label":n||""};Object(c["F"])(v,S)}},t.prototype.setText=function(t,e,i,n,o,r){Object(c["F"])(e,{x:o.toString(),y:r.toString()}),t.setAttribute("fill",i.text),e.appendChild(n),t.appendChild(e)},t.prototype.drawImage=function(t,e,i,n){var o;e.id;i&&(o=i.getElementById(e.id+"image")),o||(o=document.createElementNS("http://www.w3.org/2000/svg","image"),t.appendChild(o));var r=new Image;r.src=e.source;var a="None"!==e.scale?e.scale:"",s=e.alignment,h=s.charAt(0).toLowerCase()+s.slice(1);a&&(h+=" "+a.charAt(0).toLowerCase()+a.slice(1));var d={id:e.id+"image",x:e.x.toString(),y:e.y.toString(),transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")",width:e.width.toString(),visibility:e.visible?"visible":"hidden",height:e.height.toString(),preserveAspectRatio:h,opacity:(e.opacity||1).toString()};Object(c["F"])(o,d),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r.src.toString())},t.prototype.drawHTMLContent=function(t,e,i,n,o){var r,a;if(e){var h=void 0,d=void 0,l=void 0;for(h=0;h<e.childNodes.length;h++)for(l=e.childNodes[h],d=0;d<l.childNodes.length;d++)l.childNodes[d].id===t.id+"_html_element"&&(r=l.childNodes[d])}if(!r){if(a=e.querySelector("#"+t.id+"_html_element")||e.querySelector("#"+t.nodeId+"_html_element"),!a){var p={id:t.nodeId+"_html_element",class:"foreign-object"};a=Object(c["b"])("div",p)}var u={id:t.id+"_html_element",class:"foreign-object"};r=Object(c["b"])("div",u),r.appendChild(t.template.cloneNode(!0)),void 0!==o&&e.childNodes.length>o&&e.insertBefore(r,e.childNodes[o]),a.appendChild(r),e.appendChild(a)}var g=Object(s["c"])(t).topLeft;r.setAttribute("style","height:"+t.actualSize.height+"px; width:"+t.actualSize.width+"px;left:"+g.x+"px; top:"+g.y+"px;position:absolute;transform:rotate("+(t.rotateAngle+t.parentTransform)+"deg);pointer-events:"+(n?"all":"none")+";visibility:"+(t.visible?"visible":"hidden")+";opacity:"+t.style.opacity+";")},t.prototype.drawNativeContent=function(t,e,i,n,o){var r,a;o&&(r=o.getElementById(t.id+"_native_element"),a=o.getElementById(t.id+"_clip")),r||(r=document.createElementNS("http://www.w3.org/2000/svg","g"),r.setAttribute("id",t.id+"_native_element"),r.appendChild(t.template.cloneNode(!0)),e.appendChild(r)),a&&r.removeChild(a),r.setAttribute("style","visibility:"+(t.visible?"visible":"hidden")+";opacity:"+t.style.opacity+";"),this.setNativTransform(t,r,i,n),"Slice"===t.scale&&this.drawClipPath(t,r,i,n,o),Object(c["F"])(r,t.description?{"aria-label":t.description}:{})},t.prototype.setNativTransform=function(t,e,i,n){var o=0!==t.contentSize.width?t.contentSize.width:1,r=0!==t.contentSize.height?t.contentSize.height:1,a=t.templatePosition.x*n/o,s=t.templatePosition.y*i/r;e.setAttribute("transform","rotate("+t.parentTransform+","+t.offsetX+","+t.offsetY+") translate("+(t.offsetX-a-n*t.pivot.x)+","+(t.offsetY-s-i*t.pivot.y)+") scale("+n/o+","+i/r+")")},t.prototype.drawClipPath=function(t,e,i,n,o){var r=t.contentSize.width,a=t.contentSize.height,s=(t.actualSize.width,t.actualSize.height,t.width/(n/r)),h=t.height/(i/a),l=t.templatePosition.x+(t.width>=t.height?0:(r-s)/2),p=t.templatePosition.y+(t.height>=t.width?0:(a-h)/2),u=o.getElementById(t.id+"_clip");u=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),u.setAttribute("id",t.id+"_clip"),e.appendChild(u);var g=o.getElementById(t.id+"_clip_rect");g=document.createElementNS("http://www.w3.org/2000/svg","rect"),u.appendChild(g);var f={id:t.id+"_clip_rect",width:s.toString(),height:h.toString(),x:l.toString(),y:p.toString()};return Object(c["F"])(g,f),Object(d["f"])()?e.setAttribute("clip-path","url("+location.href+"#"+t.id+"_clip)"):e.setAttribute("clip-path","url(#"+t.id+"_clip)"),e},t.prototype.renderGradient=function(t,e,i){var n,o,r,a,s,h=Object(c["j"])(i),l=h.getElementById(i+"gradient_pattern");if(l||(l=Object(c["d"])("defs",{id:i+"gradient_pattern"}),h.insertBefore(l,h.firstChild)),Object(d["K"])(e.id),"None"!==t.gradient.type){for(var p=0;p<t.gradient.stops.length;p++)n=n?Math.max(n,t.gradient.stops[p].offset):t.gradient.stops[p].offset,o=o?Math.min(o,t.gradient.stops[p].offset):t.gradient.stops[p].offset;"Linear"===t.gradient.type?(s=t.gradient,s.id=e.id+"_linear",r=this.createLinearGradient(s),l.appendChild(r)):(a=t.gradient,a.id=e.id+"_radial",r=this.createRadialGradient(a),l.appendChild(r));for(p=0;p<t.gradient.stops.length;p++){var u=t.gradient.stops[p],g=o<0?(n+u.offset)/(2*n):u.offset/n,f=document.createElementNS("http://www.w3.org/2000/svg","stop");Object(c["F"])(f,{offset:g.toString(),style:"stop-color:"+u.color}),r.appendChild(f)}}return r},t.prototype.createLinearGradient=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),i={id:t.id,x1:t.x1+"%",y1:t.y1+"%",x2:t.x2+"%",y2:t.y2+"%"};return Object(c["F"])(e,i),e},t.prototype.createRadialGradient=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),i={id:t.id,cx:t.cx+"%",cy:t.cy+"%",r:t.r+"%",fx:t.fx+"%",fy:t.fy+"%"};return Object(c["F"])(e,i),e},t.prototype.setSvgStyle=function(t,e,i){if(e.canApplyStyle||void 0===e.canApplyStyle){"none"===e.fill&&(e.fill="transparent"),"none"===e.stroke&&(e.stroke="transparent");var n=[],o=void 0;if(e.dashArray){var r=new h;n=r.parseDashArray(e.dashArray)}if(e.gradient&&"None"!==e.gradient.type){var a=this.renderGradient(e,t,i);o=Object(d["f"])()?"url("+location.href+"#"+a.id+")":"url(#"+a.id+")"}else o=e.fill;e.stroke&&t.setAttribute("stroke",e.stroke),void 0!==e.strokeWidth&&null!==e.strokeWidth&&t.setAttribute("stroke-width",e.strokeWidth.toString()),n&&t.setAttribute("stroke-dasharray",n.toString()||"none"),o&&t.setAttribute("fill",o)}},t.prototype.svgLabelAlign=function(t,e,i){var n=new o["a"](e.width,i.length*(1.2*t.fontSize)),r={x:0,y:0},a=0,s=1.2,c=.5*t.width,h=.5*t.height,d=c,l=h;return"left"===t.textAlign?d=0:"center"===t.textAlign?d=e.width>t.width&&("Ellipsis"===t.textOverflow||"Clip"===t.textOverflow)&&"NoWrap"===t.textWrapping?0:.5*t.width:"right"===t.textAlign&&(d=1*t.width),r.x=a+d+(e?e.x:0),r.y=s+l-n.height/2,r},t}(),p=i("6513"),u=i("18f9"),g=i("d454"),f=i("8905"),m=i("ab8c"),y=i("bccc"),v=i("88a2"),b=i("8214"),w=i("8d8a"),O=function(){function t(t,e,i){this.renderer=null,this.isSvgMode=!0,this.transform={x:0,y:0},this.diagramId=t,this.element=Object(c["m"])(this.diagramId),this.svgRenderer=e,this.isSvgMode=i,this.renderer=i?new l:new h}return t.prototype.setCursor=function(t,e){t.style.cursor=e},t.prototype.setLayers=function(){this.iconSvgLayer=this.element.getElementsByClassName("e-ports-expand-layer")[0],this.adornerSvgLayer=this.element.getElementsByClassName("e-adorner-layer")[0],this.nativeSvgLayer=this.element.getElementsByClassName("e-native-layer")[0],this.diagramSvgLayer=this.element.getElementsByClassName("e-diagram-layer")[0]},t.prototype.getAdornerLayer=function(){var t=Object(c["f"])(this.diagramId);return t},t.prototype.getParentSvg=function(t,e,i){return this.diagramId&&t&&t.id?t.id.split("_icon_content").length>1||t.id.split("_nodeport").length>1?this.iconSvgLayer:e&&"selector"===e?this.adornerSvgLayer:t instanceof v["a"]?this.nativeSvgLayer:this.diagramSvgLayer:i},t.prototype.getParentElement=function(t,e,i,n){var o=e;if(i&&this.diagramId&&t&&t.id){t.id.split("_icon_content").length>1?(o=i.getElementById(this.diagramId+"_diagramExpander"),e=null):t.id.split("_nodeport").length>1?o=i.getElementById(this.diagramId+"_diagramPorts"):t instanceof v["a"]?(o=i.getElementById(this.diagramId+"_nativeLayer"),e=null):o=i.getElementById(this.diagramId+"_diagramLayer");var r=this.getGroupElement(t,e||o,n);o=r.g,r.svg&&(i=r.svg)}return{g:o,svg:i}},t.prototype.getGroupElement=function(t,e,i){var n,o,r=this.getParentSvg(t);if(e&&r){if(r&&(n=r.getElementById(t.id+"_groupElement"),!n&&r!==this.nativeSvgLayer)){var a=this.nativeSvgLayer;n=a.getElementById(t.id+"_groupElement"),o=a}n||(n=this.svgRenderer.createGElement("g",{id:t.id+"_groupElement"}),void 0!==i&&e.childNodes.length>i?e.insertBefore(n,e.childNodes[i]):e.appendChild(n))}return{g:n,svg:o}},t.prototype.renderElement=function(t,e,i,n,o,r,a,s){t instanceof f["a"]?(!1,this.renderContainer(t,e,i,n,o,r,a,s)):t instanceof u["a"]?this.renderImageElement(t,e,n,o,a):t instanceof p["a"]?this.renderPathElement(t,e,n,o,a):t instanceof g["a"]?this.renderTextElement(t,e,n,o,a):t instanceof v["a"]?this.renderNativeElement(t,e,n,o,a):t instanceof b["a"]?this.renderHTMLElement(t,e,i,n,o,a,s):this.renderRect(t,e,n,o)},t.prototype.drawSelectionRectangle=function(t,e,i,n,o,r){t=(t+r.tx)*r.scale,e=(e+r.ty)*r.scale;var a={width:i*r.scale,height:n*r.scale,x:t+.5,y:e+.5,fill:"transparent",stroke:"gray",angle:0,pivotX:.5,pivotY:.5,strokeWidth:1,dashArray:"6 3",opacity:1,visible:!0,id:o.id+"_selected_region"},s=this.getAdornerLayer();this.svgRenderer.updateSelectionRegion(s,a)},t.prototype.renderHighlighter=function(t,e,i){var n=t.actualSize.width||2,o=t.actualSize.height||2,r=t.offsetX-n*t.pivot.x,a=t.offsetY-o*t.pivot.y;r=(r+i.tx)*i.scale,a=(a+i.ty)*i.scale;var s={width:n*i.scale,height:o*i.scale,x:r,y:a,fill:"transparent",stroke:"#8CC63F",angle:t.rotateAngle,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:4,dashArray:"",opacity:1,cornerRadius:0,visible:!0,id:e.id+"_highlighter",class:"e-diagram-highlighter"};this.svgRenderer.drawRectangle(e,s,this.diagramId,void 0,void 0,e)},t.prototype.renderStackHighlighter=function(t,e,i,n,o,r,s){var c,h=t.actualSize.width||2,d=t.offsetX-h*t.pivot.x,l=t.actualSize.height||2,p=t.offsetY-l*t.pivot.y;d=(d+i.tx)*i.scale;var u=t.bounds,g="";if(p=(p+i.ty)*i.scale,n)if(r){b=h*i.scale;c="M 0 0 L "+(b+2)+" 0 Z";var f=-u.x,m=-u.y,y=[];f=t.actualSize.width/Number(u.width?u.width:1)*i.scale,m=t.actualSize.height/Number(u.height?u.height:1)*i.scale;var v="M7,4 L8,4 8,7 11,7 11,8 8,8 8,11 7,11 7,8 4,8 4,7 7,7 z M7.5,0.99999994C3.9160004,1 1,3.9160004 0.99999994,7.5 1,11.084 3.9160004,14 7.5,14 11.084,14 14,11.084 14,7.5 14,3.9160004 11.084,1 7.5,0.99999994 z M7.5,0 C11.636002,0 15,3.3639984 15,7.5 15,11.636002 11.636002,15 7.5,15 3.3640003,15 0,11.636002 0,7.5 0,3.3639984 3.3640003,0 7.5,0 z";y=Object(a["e"])(v),y=Object(a["f"])(y),g=Object(a["g"])(y,f+b+2,m-8,!1,u.x,u.y,0,0),o.y>=t.offsetY&&(p+=l)}else{s&&o.y>=t.offsetY&&(p+=l);b=h*i.scale;c="M -10 -10 L 0 0 Z M -10 10 L 0 0 Z M 0 0 L "+b+" 0 Z M "+b+" 0 L "+(b+10)+" 10 Z L "+(b+10)+" -10 Z"}else{var b=l*i.scale;c="M 10 -10 L 0 0 Z M -10 -10 L 0 0 Z M 0 0 L 0 "+b+" Z M 0  "+b+" L -10  "+(b+10)+" Z L 10  "+(b+10)+" Z",o.x>=t.offsetX&&(d+=h)}var w={data:c+g,width:h*i.scale,height:l*i.scale,x:d,y:p,fill:"transparent",stroke:"#8CC63F",angle:t.rotateAngle,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:1,dashArray:"",opacity:1,visible:!0,id:e.id+"_stack_highlighter",class:"e-diagram-highlighter"};this.svgRenderer.drawPath(e,w,this.diagramId)},t.prototype.drawLine=function(t,e){this.svgRenderer.drawLine(t,e)},t.prototype.drawPath=function(t,e){this.svgRenderer.drawPath(t,e,this.diagramId)},t.prototype.renderResizeHandle=function(t,e,i,n,o,r,a,s,c,h){var l=t.offsetX-t.actualSize.width*t.pivot.x,p=t.offsetY-t.actualSize.height*t.pivot.y,u=t.actualSize.height,g=t.actualSize.width;!h&&i&y["r"].Rotate&&Object(w["k"])(this.rendererActions)&&!Object(w["a"])(this.rendererActions)&&(this.renderPivotLine(t,e,r,o,a),this.renderRotateThumb(t,e,r,o,a)),this.renderBorder(t,e,r,s,c,h);var f=t.actualSize.width*n,m=t.actualSize.height*n;c||!Object(w["k"])(this.rendererActions)||Object(w["a"])(this.rendererActions)||(f>=40&&m>=40&&(o&y["p"].ResizeNorthWest&&this.renderCircularHandle("resizeNorthWest",t,l,p,e,Object(d["e"])(o,"ResizeNorthWest"),i&y["r"].ResizeNorthWest,r,void 0,a,{"aria-label":"Thumb to resize the selected object on top left side direction"},void 0,"e-diagram-resize-handle e-northwest"),o&y["p"].ResizeNorthEast&&this.renderCircularHandle("resizeNorthEast",t,l+g,p,e,Object(d["e"])(o,"ResizeNorthEast"),i&y["r"].ResizeNorthEast,r,void 0,a,{"aria-label":"Thumb to resize the selected object on top right side direction"},void 0,"e-diagram-resize-handle e-northeast"),o&y["p"].ResizeSouthWest&&this.renderCircularHandle("resizeSouthWest",t,l,p+u,e,Object(d["e"])(o,"ResizeSouthWest"),i&y["r"].ResizeSouthWest,r,void 0,a,{"aria-label":"Thumb to resize the selected object on bottom left side direction"},void 0,"e-diagram-resize-handle e-southwest"),o&y["p"].ResizeSouthEast&&this.renderCircularHandle("resizeSouthEast",t,l+g,p+u,e,Object(d["e"])(o,"ResizeSouthEast"),i&y["r"].ResizeSouthEast,r,void 0,a,{"aria-label":"Thumb to resize the selected object on bottom right side direction"},void 0,"e-diagram-resize-handle e-southeast")),o&y["p"].ResizeNorth&&this.renderCircularHandle("resizeNorth",t,l+g/2,p,e,Object(d["e"])(o,"ResizeNorth"),i&y["r"].ResizeNorth,r,void 0,a,{"aria-label":"Thumb to resize the selected object on top side direction"},void 0,"e-diagram-resize-handle e-north"),o&y["p"].ResizeSouth&&this.renderCircularHandle("resizeSouth",t,l+g/2,p+u,e,Object(d["e"])(o,"ResizeSouth"),i&y["r"].ResizeSouth,r,void 0,a,{"aria-label":"Thumb to resize the selected object on bottom side direction"},void 0,"e-diagram-resize-handle e-south"),o&y["p"].ResizeWest&&this.renderCircularHandle("resizeWest",t,l,p+u/2,e,Object(d["e"])(o,"ResizeWest"),i&y["r"].ResizeWest,r,void 0,a,{"aria-label":"Thumb to resize the selected object on left side direction"},void 0,"e-diagram-resize-handle e-west"),o&y["p"].ResizeEast&&this.renderCircularHandle("resizeEast",t,l+g,p+u/2,e,Object(d["e"])(o,"ResizeEast"),i&y["r"].ResizeEast,r,void 0,a,{"aria-label":"Thumb to resize the selected object on right side direction"},void 0,"e-diagram-resize-handle e-east"))},t.prototype.renderEndPointHandle=function(t,e,i,n,o,a,s,c){var h,l,p=t.sourcePoint,u=t.targetPoint,g=t.wrapper;if(this.renderCircularHandle("connectorSourceThumb",g,p.x,p.y,e,Object(d["e"])(n,"ConnectorSourceThumb"),i&y["r"].ConnectorSource,o,a,void 0,{"aria-label":"Thumb to move the source point of the connector"},void 0,"e-diagram-endpoint-handle e-targetend"),this.renderCircularHandle("connectorTargetThumb",g,u.x,u.y,e,Object(d["e"])(n,"ConnectorTargetThumb"),i&y["r"].ConnectorTarget,o,s,void 0,{"aria-label":"Thumb to move the target point of the connector"},void 0,"e-diagram-endpoint-handle e-targetend"),c)if(("Straight"===t.type||"Bezier"===t.type)&&t.segments.length>0)for(h=0;h<t.segments.length-1;h++)l=t.segments[h],this.renderCircularHandle("segementThumb_"+(h+1),g,l.point.x,l.point.y,e,!0,i&y["r"].ConnectorSource,o,a,null,null,h);else for(h=0;h<t.segments.length;h++){var f=t.segments[h];this.renderOrthogonalThumbs("orthoThumb_"+(h+1),g,f,e,Object(d["e"])(n,"ConnectorSourceThumb"),o)}if("Bezier"===t.type)for(h=0;h<t.segments.length;h++){var m=t.segments[h],v=r["a"].isEmptyPoint(m.point1)?m.bezierPoint1:m.point1;this.renderCircularHandle("bezierPoint_"+(h+1)+"_1",g,v.x,v.y,e,Object(d["e"])(n,"ConnectorSourceThumb"),i&y["r"].ConnectorSource,o,void 0,void 0,{"aria-label":"Thumb to move the source point of the connector"},void 0,"e-diagram-bezier-handle e-source"),Object(d["e"])(n,"ConnectorSourceThumb")&&this.renderBezierLine("bezierLine_"+(h+1)+"_1",g,e,m.points[0],r["a"].isEmptyPoint(m.point1)?m.bezierPoint1:m.point1,o),v=r["a"].isEmptyPoint(m.point2)?m.bezierPoint2:m.point2,this.renderCircularHandle("bezierPoint_"+(h+1)+"_2",g,v.x,v.y,e,Object(d["e"])(n,"ConnectorTargetThumb"),i&y["r"].ConnectorTarget,o,void 0,void 0,{"aria-label":"Thumb to move the target point of the connector"},void 0,"e-diagram-bezier-handle e-target"),Object(d["e"])(n,"ConnectorTargetThumb")&&this.renderBezierLine("bezierLine_"+(h+1)+"_2",g,e,m.points[1],r["a"].isEmptyPoint(m.point2)?m.bezierPoint2:m.point2,o)}},t.prototype.renderOrthogonalThumbs=function(t,e,i,n,o,a){var s,c,h,d=0;for(d=0;d<i.points.length-1;d++)h=r["a"].distancePoints(i.points[d],i.points[d+1]),s=i.points[d].y.toFixed(2)===i.points[d+1].y.toFixed(2)?"horizontal":"vertical",c=!!(h>=50&&i.allowDrag),this.renderOrthogonalThumb(t+"_"+(d+1),e,(i.points[d].x+i.points[d+1].x)/2,(i.points[d].y+i.points[d+1].y)/2,n,c,s,a)},t.prototype.renderOrthogonalThumb=function(t,e,i,n,o,r,a,s){var c,h,d;"horizontal"===a?(c="M0,7 L15,0 L30,7 L15,14 z",h=-15,d=-7):(c="M7,0 L0,15 L7,30 L14,15 z",h=-7,d=-15);var l={x:(i+s.tx)*s.scale+h,y:(n+s.ty)*s.scale+d,angle:0,fill:"#e2e2e2",stroke:"black",strokeWidth:1,dashArray:"",data:c,width:20,height:20,pivotX:0,pivotY:0,opacity:1,visible:r,id:t};this.svgRenderer.drawPath(o,l,this.diagramId)},t.prototype.renderPivotLine=function(t,e,i,n,o){var r=t,a="2,3",s=!!(n&y["p"].Rotate);o&&(s=!1);var c=this.getBaseAttributes(r,i);c.fill="None",c.stroke="black",c.strokeWidth=1,c.dashArray=a,c.visible=s;var h=i.scale;c.x*=h,c.y*=h,c.width*=h,c.height*=h,c.id="pivotLine",c.class="e-diagram-pivot-line";var d={x:r.actualSize.width*r.pivot.x*h,y:-20},l={x:r.actualSize.width*r.pivot.x*h,y:0};c.startPoint=d,c.endPoint=l,this.svgRenderer.drawLine(e,c)},t.prototype.renderBezierLine=function(t,e,i,n,o,r){var a="3,3",s=this.getBaseAttributes(e,r);s.id=t,s.stroke="black",s.strokeWidth=1,s.dashArray=a,s.fill="None",s.class="e-diagram-bezier-line",s.x=0,s.y=0;var c=r.scale,h=(n.x+r.tx)*c,d=(n.y+r.ty)*c,l=(o.x+r.tx)*c,p=(o.y+r.ty)*c,u={x:h,y:d},g={x:l,y:p};s.startPoint=u,s.endPoint=g,this.svgRenderer.drawLine(i,s)},t.prototype.renderCircularHandle=function(t,e,i,n,o,r,a,s,c,h,d,l,p){var u=e,g=7,f={x:i,y:n};if(0!==u.rotateAngle||0!==u.parentTransform){var y=Object(m["a"])();Object(m["c"])(y,u.rotateAngle+u.parentTransform,u.offsetX,u.offsetY),f=Object(m["e"])(y,f)}var v=this.getBaseAttributes(u);v.stroke="black",v.strokeWidth=1,void 0!==l?(g=5,v.id="segmentEnd_"+l,v.fill="#e2e2e2"):(g=7,v.fill=c?"#8CC63F":"white"),v.centerX=(f.x+s.tx)*s.scale,v.centerY=(f.y+s.ty)*s.scale,v.radius=g,v.angle=0,v.id=t,v.visible=r,v.class=p,c&&(v.class+=" e-connected"),h&&(v.visible=!1),this.svgRenderer.drawCircle(o,v,a,d)},t.prototype.renderBorder=function(t,e,i,n,o,r){var a=t,s=this.getBaseAttributes(a,i);s.x*=i.scale,s.y*=i.scale,s.width*=i.scale,s.height*=i.scale,s.fill="transparent",s.stroke="#097F7F",s.strokeWidth=.6,s.dashArray="6,3",s.class="e-diagram-border",r&&(s.class+=" e-diagram-lane"),s.id="borderRect",s.id=this.rendererActions&y["o"].DrawSelectorBorder?"borderRect_symbol":"borderRect",n||(s.class+=" e-disabled"),o&&(s.class+=" e-thick-border"),s.cornerRadius=0;var c=this.getParentSvg(t,"selector");this.svgRenderer.drawRectangle(e,s,this.diagramId,void 0,!0,c)},t.prototype.renderUserHandler=function(t,e,i){for(var n=t.wrapper,r=0,s=t.userHandles;r<s.length;r++){var h=s[r],l=(new p["a"],void 0);if(l=Object(d["D"])(t,h,i),l.x=(l.x+i.tx)*i.scale,l.y=(l.y+i.ty)*i.scale,h.visible&&(h.visible=!!(t.constraints&y["p"].UserHandle)),""===h.content&&""===h.source){var g=h.pathData?h.pathData:h.content,f=this.getBaseAttributes(n);f.id=h.name+"_userhandle",f.fill=h.backgroundColor,f.stroke=h.borderColor,f.strokeWidth=h.borderWidth,f.centerX=l.x,f.centerY=l.y,f.radius=.5*h.size,f.class="e-diagram-userhandle-circle",f.angle=0,f.visible=h.visible,f.opacity=1,this.svgRenderer.drawCircle(e,f,1,{"aria-label":h.name+"user handle"});var m=5,b=[];b=Object(a["e"])(g),b=Object(a["f"])(b);var w=Object(c["B"])(g),O=(h.size-.45*h.size)/w.width,x=(h.size-.45*h.size)/w.height,j=Object(a["g"])(b,O,x,!0,w.x,w.y,0,0);w=Object(c["B"])(j);var S={x:l.x-w.width/2,y:l.y-w.height/2,angle:0,id:"",class:"e-diagram-userhandle-path",fill:h.pathColor,stroke:h.backgroundColor,strokeWidth:.5,dashArray:"",data:j,width:h.size-m,height:h.size-m,pivotX:0,pivotY:0,opacity:1,visible:h.visible};this.svgRenderer.drawPath(e,S,this.diagramId,void 0,void 0,{"aria-label":h.name+"user handle"})}else if(""!==h.content){var C=void 0;C=new v["a"](h.name,this.diagramId),C.content=h.content,C.offsetX=l.x,C.offsetY=l.y,C.height=h.size,C.width=h.size,C.id=h.name+"_shape",C.horizontalAlignment="Center",C.verticalAlignment="Center",C.visible=h.visible,C.setOffsetWithRespectToBounds(l.x,l.y,"Fraction"),C.relativeMode="Object",C.description=h.name||"User handle",C.measure(new o["a"](h.size,h.size)),C.arrange(C.desiredSize),this.svgRenderer.drawNativeContent(C,e,h.size,h.size,this.adornerSvgLayer)}else{var P=new u["a"];S=this.getBaseAttributes(P,i);S.width=h.size,S.height=h.size,S.x=l.x-h.size/2,S.y=l.y-h.size/2,S.sourceWidth=h.size,S.sourceHeight=h.size,S.alignment=P.imageAlign,S.source=h.source,S.scale=P.imageScale,S.description=h.name||"User handle",S.id=h.name+"_",this.renderer.drawImage(e,S,this.adornerSvgLayer,!1)}}},t.prototype.renderRotateThumb=function(t,e,i,n,r){new p["a"];var a,s=new o["a"];s.width=18,s.height=16;var c=t.offsetY-t.actualSize.height*t.pivot.y,h=t.offsetX-t.actualSize.width*t.pivot.x,d=!!(n&y["p"].Rotate);r&&(d=!1);var l="M 16.856144362449648 10.238890446662904 L 18.000144362449646 3.437890446662903L 15.811144362449646 4.254890446662903 C 14.837144362449646 2.5608904466629028 13.329144362449647  1.2598904466629026 11.485144362449645 0.5588904466629026 C 9.375144362449646 - 0.24510955333709716 7.071144362449646  - 0.18010955333709716 5.010144362449646 0.7438904466629028 C 2.942144362449646 1.6678904466629028 1.365144362449646 3.341890446662903 0.558144362449646 5.452890446662903 C - 0.244855637550354 7.567890446662903 - 0.17985563755035394 9.866890446662904 0.7431443624496461 11.930890446662904 C 1.6681443624496461 13.994890446662904 3.343144362449646 15.575890446662903 5.457144362449647 16.380890446662903 C 6.426144362449647 16.7518904466629 7.450144362449647 16.9348904466629 8.470144362449647 16.9348904466629 C 9.815144362449647 16.9348904466629 11.155144362449647 16.6178904466629 12.367144362449647 15.986890446662901 L 11.351144362449647 14.024890446662901 C 9.767144362449647 14.8468904466629 7.906144362449647 14.953890446662902 6.237144362449647 14.3178904466629 C 4.677144362449647 13.7218904466629 3.444144362449647 12.5558904466629 2.758144362449647 11.028890446662901 C 2.078144362449646 9.501890446662903 2.031144362449646 7.802890446662903 2.622144362449646 6.243890446662903 C 3.216144362449646 4.6798904466629025 4.387144362449646 3.442890446662903 5.914144362449646 2.760890446662903 C 7.437144362449646 2.078890446662903 9.137144362449646 2.0298904466629026 10.700144362449645 2.6258904466629027 C 11.946144362449646 3.100890446662903 12.971144362449646 3.9538904466629026 13.686144362449646 5.049890446662903 L 11.540144362449645 5.850890446662903 L 16.856144362449648 10.238890446662904 Z",u=h+t.pivot.x*t.actualSize.width,g=c;if(u=(u+i.tx)*i.scale,g=(g+i.ty)*i.scale,a={x:u-.5*s.width,y:g-30-.5*s.height},0!==t.rotateAngle||0!==t.parentTransform){var f=Object(m["a"])();Object(m["c"])(f,t.rotateAngle+t.parentTransform,(i.tx+t.offsetX)*i.scale,(i.ty+t.offsetY)*i.scale),a=Object(m["e"])(f,a)}var v={x:a.x,y:a.y,angle:t.rotateAngle+t.parentTransform,fill:"#231f20",stroke:"black",strokeWidth:.5,dashArray:"",data:l,width:20,height:20,pivotX:0,pivotY:0,opacity:1,visible:d,id:t.id,class:"e-diagram-rotate-handle"};v.id="rotateThumb",this.svgRenderer.drawPath(e,v,this.diagramId,!0,void 0,{"aria-label":"Thumb to rotate the selected object"})},t.prototype.renderPathElement=function(t,e,i,n,o){var r=this.getBaseAttributes(t,i);r.data=t.absolutePath,r.data=t.absolutePath;var a=t.description?t.description:t.id;if(this.isSvgMode||(r.x=t.flipOffset.x?t.flipOffset.x:r.x,r.y=t.flipOffset.y?t.flipOffset.y:r.y),t.isExport){var s=t.absoluteBounds;r.data=Object(c["I"])(t,s,void 0,r)}this.renderer.drawPath(e,r,this.diagramId,void 0,n,a)},t.prototype.renderSvgGridlines=function(t,e,i,n,o,r){var a=document.createElementNS("http://www.w3.org/2000/svg","pattern"),s=document.createElementNS("http://www.w3.org/2000/svg","defs");s.setAttribute("id",this.diagramId+"_grid_pattern_defn"),(t.constraints&y["q"].ShowHorizontalLines||t.constraints&y["q"].ShowVerticalLines)&&a.setAttribute("id",this.diagramId+"_pattern");var h=0,d=0,l=0,p=0,u=1,g=!1;if(n.showRulers&&n.dynamicGrid&&o&&r)l=r.updateSegmentWidth(i.scale),p=o.updateSegmentWidth(i.scale),t.horizontalGridlines.scaledIntervals=[l/o.interval],t.verticalGridlines.scaledIntervals=[p/r.interval],g=!0;else{for(var f=0,m=t.verticalGridlines.lineIntervals;f<m.length;f++){var v=m[f];h+=v}for(var b=0,w=t.horizontalGridlines.lineIntervals;b<w.length;b++){v=w[b];d+=v}u=this.scaleSnapInterval(t,i.scale)}h=g?p:h*u,d=g?l:d*u;var O={id:this.diagramId+"_pattern",x:0,y:0,width:h,height:d,patternUnits:"userSpaceOnUse"};Object(c["F"])(a,O),this.horizontalSvgGridlines(a,h,d,u,t,n,r,g),this.verticalSvgGridlines(a,h,d,u,t,n,o,g),s.appendChild(a),e.appendChild(s)},t.prototype.horizontalSvgGridlines=function(t,e,i,n,o,r,a,s){var h,d=0,l=[];if(o.constraints&y["q"].ShowHorizontalLines){var p=o.horizontalGridlines.lineIntervals;o.horizontalGridlines.lineColor;o.horizontalGridlines.lineDashArray&&(l=this.renderer.parseDashArray(o.horizontalGridlines.lineDashArray)),r.showRulers&&r.dynamicGrid&&a&&(p=this.updateLineIntervals(p,r,a,i));for(var u=0;u<p.length;u+=2){h=document.createElementNS("http://www.w3.org/2000/svg","path");var g=d+p[u]/2;g=s?g:g*n;var f={"stroke-width":p[u],stroke:o.horizontalGridlines.lineColor,d:"M0,"+g+" L"+e+","+g+" Z",dashArray:l.toString(),class:1.25===p[u]?"e-diagram-thick-grid":"e-diagram-thin-grid"};Object(c["F"])(h,f),t.appendChild(h),d+=p[u+1]+p[u]}}},t.prototype.verticalSvgGridlines=function(t,e,i,n,o,r,a,s){var h,d=0,l=[];if(o.constraints&y["q"].ShowVerticalLines){var p=o.verticalGridlines.lineIntervals;o.verticalGridlines.lineColor;o.verticalGridlines.lineDashArray&&(l=this.renderer.parseDashArray(o.verticalGridlines.lineDashArray)),r.showRulers&&r.dynamicGrid&&a&&(p=this.updateLineIntervals(p,r,a,e));for(var u=0;u<p.length;u+=2){h=document.createElementNS("http://www.w3.org/2000/svg","path");var g=d+p[u]/2;g=s?g:g*n;var f={"stroke-width":p[u],stroke:o.verticalGridlines.lineColor,d:"M"+g+",0 L"+g+","+i+" Z",dashArray:l.toString(),class:1.25===p[u]?"e-diagram-thick-grid":"e-diagram-thin-grid"};Object(c["F"])(h,f),t.appendChild(h),d+=p[u+1]+p[u]}}},t.prototype.updateGrid=function(t,e,i,n,o,r){var a,s=e.getElementById(this.diagramId+"_grid_rect"),h=!1;if(s){var d=e.getElementById(this.diagramId+"_pattern");d&&d.parentNode.removeChild(d);var l=0,p=0,u=1;n.showRulers&&n.dynamicGrid&&r&&o?(l=r.updateSegmentWidth(i.scale),p=o.updateSegmentWidth(i.scale),h=!0,t.horizontalGridlines.scaledIntervals=[l/o.interval],t.verticalGridlines.scaledIntervals=[p/r.interval]):u=this.scaleSnapInterval(t,i.scale);var g=0;for(a=0;a<t.horizontalGridlines.lineIntervals.length;a++)g+=t.horizontalGridlines.lineIntervals[a];var f=0;for(a=0;a<t.verticalGridlines.lineIntervals.length;a++)f+=t.verticalGridlines.lineIntervals[a];var m={x:-i.tx*i.scale,y:-i.ty*i.scale};Object(c["F"])(s,m),f=h?p:f*u,g=h?l:g*u,m={id:this.diagramId+"_pattern",x:0,y:0,width:f,height:g,patternUnits:"userSpaceOnUse"},d=document.createElementNS("http://www.w3.org/2000/svg","pattern"),Object(c["F"])(d,m),this.horizontalSvgGridlines(d,f,g,u,t,n,r,h),this.verticalSvgGridlines(d,f,g,u,t,n,o,h);var y=e.getElementById(this.diagramId+"_grid_pattern_defn");y&&y.appendChild(d)}},t.prototype.updateLineIntervals=function(t,e,i,n){for(var o=[],r=n/i.interval,a=0;a<2*i.interval;a++)o[a]=a%2===0?0===a?1.25:.25:r-o[a-1];return o},t.prototype.scaleSnapInterval=function(t,e){if(e>=2)while(e>=2)e/=2;else if(e<=.5)while(e<=.5)e*=2;var i;if(t.horizontalGridlines.scaledIntervals=t.horizontalGridlines.snapIntervals,t.verticalGridlines.scaledIntervals=t.verticalGridlines.snapIntervals,1!==e){var n=t.horizontalGridlines;for(n.scaledIntervals=[],i=0;i<n.snapIntervals.length;i++)n.scaledIntervals[i]=n.snapIntervals[i]*e;for(n=t.verticalGridlines,n.scaledIntervals=[],i=0;i<n.snapIntervals.length;i++)n.scaledIntervals[i]=n.snapIntervals[i]*e}return e},t.prototype.renderTextElement=function(t,e,i,n,o){var r=this.getBaseAttributes(t,i);r.cornerRadius=0,r.whiteSpace=Object(s["m"])(t.style.whiteSpace,t.style.textWrapping),r.content=t.content,r.breakWord=Object(s["n"])(t.style.textWrapping),r.textAlign=Object(s["l"])(t.style.textAlign),r.color=t.style.color,r.italic=t.style.italic,r.bold=t.style.bold,r.fontSize=t.style.fontSize,r.fontFamily=t.style.fontFamily,r.textOverflow=t.style.textOverflow,r.textWrapping=t.style.textWrapping,r.textDecoration=t.style.textDecoration,r.doWrap=t.doWrap,r.wrapBounds=t.wrapBounds,r.childNodes=t.childNodes,r.dashArray="",r.strokeWidth=0,r.fill=t.style.fill;var a=t.description?t.description:t.content?t.content:t.id;"Wrap"===t.style.textWrapping&&this.groupElement&&r.height>this.groupElement.actualSize.height&&("Clip"===t.style.textOverflow||"Ellipsis"===t.style.textOverflow)&&(r.y=r.y+(r.height-this.groupElement.actualSize.height)/2),this.renderer.drawRectangle(e,r,this.diagramId,void 0,void 0,n),this.renderer.drawText(e,r,n,a,this.diagramId,t.isExport&&Math.min(t.exportScaleValue.x||t.exportScaleValue.y),this.groupElement),this.isSvgMode&&(t.doWrap=!1)},t.prototype.renderNativeElement=function(t,e,i,n,o){var r,a,s=this.getParentSvg(t,void 0,e)||n,c=this.getParentElement(t,e,s).g||e,h=this.getBaseAttributes(t,i);switch(h.fill="transparent",h.cornerRadius=t.cornerRadius,h.stroke="transparent",this.renderer.drawRectangle(e,h,this.diagramId,void 0,void 0,n),t.scale){case"None":r=t.contentSize.width,a=t.contentSize.height;break;case"Stretch":r=t.actualSize.width,a=t.actualSize.height;break;case"Meet":r=a=t.actualSize.width<=t.actualSize.height?t.actualSize.width:t.actualSize.height;break;case"Slice":r=a=t.actualSize.width>=t.actualSize.height?t.actualSize.width:t.actualSize.height;break}this.svgRenderer&&this.svgRenderer.drawNativeContent(t,c,a,r,s)},t.prototype.renderHTMLElement=function(t,e,i,n,o,r,a){var s=this.getBaseAttributes(t,n);s.fill="transparent",s.cornerRadius=t.cornerRadius,s.stroke="transparent",this.renderer.drawRectangle(e,s,this.diagramId,void 0,void 0,o),this.svgRenderer&&this.svgRenderer.drawHTMLContent(t,i.children[0],n,Object(d["H"])(i),a)},t.prototype.renderImageElement=function(t,e,i,n,o){var r,a,s,c,h=this.getBaseAttributes(t,i);if(h.cornerRadius=0,this.renderer.drawRectangle(e,h,this.diagramId,void 0,void 0,n),"Stretch"===t.stretch)r=t.actualSize.width,a=t.actualSize.height;else{var d=t.contentSize.width,l=t.contentSize.height,p=h.width/d,u=h.height/l,g=void 0;switch(t.stretch){case"Meet":g=Math.min(p,u),r=d*g,a=l*g,h.x+=Math.abs(h.width-r)/2,h.y+=Math.abs(h.height-a)/2;break;case"Slice":p=h.width/d,u=h.height/l,g=Math.max(p,u),r=d*g,a=l*g,s=h.width/r*d,c=h.height/a*l;break;case"None":r=d,a=l;break}}h.width=r,h.height=a,h.sourceWidth=s,h.sourceHeight=c,h.source=t.source,h.alignment=t.imageAlign,h.scale=t.imageScale,h.description=t.description?t.description:t.id,this.renderer.drawImage(e,h,n,o)},t.prototype.renderContainer=function(t,e,i,n,o,r,a,s){var c={svg:o,g:e};if(this.diagramId&&(o=this.getParentSvg(t)||o,this.isSvgMode)){var h=void 0;h=this.getParentElement(t,e,o,s).g||e,o=this.getParentSvg(this.hasNativeParent(t.children))||o;var d=this.getParentElement(this.hasNativeParent(t.children),h,o,s);c.svg=d.svg||o,c.g=d.g||h,r?(o&&(o.getElementById(c.g.id)||e.appendChild(c.g)),e=c.g):e=c.g}if(this.renderRect(t,e,n,o),this.groupElement=t,t.hasChildren()){for(var l,p=void 0,u=void 0,f=0,m=t.children;f<m.length;f++){var v=m[f];o=this.getParentSvg(this.hasNativeParent(t.children)||v)||o,this.isSvgMode&&(l=this.getParentElement(this.hasNativeParent(t.children)||v,e,o),p=l.g||e,l.svg&&(o=l.svg)),this.isSvgMode||(v.flip=t.flip),this.renderElement(v,p||e,i,n,o,!0,a,s),v instanceof g["a"]&&p&&!(t.elementActions&y["g"].ElementIsGroup)&&(u=v.flip&&"None"!==v.flip?v.flip:t.flip,this.renderFlipElement(v,p,u)),v.elementActions&y["g"].ElementIsPort&&p&&(u=v.flip&&"None"!==v.flip?v.flip:t.flip,this.renderFlipElement(t,p,u)),!(v instanceof g["a"])&&"None"!==t.flip&&t.elementActions&y["g"].ElementIsGroup&&this.renderFlipElement(v,p||e,t.flip)}t.elementActions&y["g"].ElementIsGroup||this.renderFlipElement(t,e,t.flip)}},t.prototype.renderFlipElement=function(t,e,i){var n={},o=1,r=1,a=0,s=0,h=0,d=0;if("None"!==i?("Horizontal"!==i&&"Both"!==i||(a=t.bounds.center.x,h=-t.bounds.center.x,o=-1),"Vertical"!==i&&"Both"!==i||(s=t.bounds.center.y,d=-t.bounds.center.y,r=-1),n={transform:"translate("+a+","+s+") scale("+o+","+r+") translate("+h+","+d+")"}):n={transform:"translate(0,0)"},n)if(t&&t.children&&t.children.length&&t.children[0]instanceof b["a"]){var l=e.id.split("_preview"),p=document.getElementById(l[0]+"_html_div")||Object(c["r"])(this.diagramId).children[0];e=p.querySelector("#"+t.id+"_content_html_element"),e&&(e.style.transform="scale("+o+","+r+")")}else Object(c["F"])(e,n)},t.prototype.hasNativeParent=function(t,e){if(t&&t.length>0){var i=t[0];if(i instanceof v["a"])return i;i.children&&i.children.length&&this.hasNativeParent(i.children,e++||0)}},t.prototype.renderRect=function(t,e,i,n){var o=this.getBaseAttributes(t,i);o.cornerRadius=t.cornerRadius||0;var r=t.description?t.description:t.id;this.renderer.drawRectangle(e,o,this.diagramId,void 0,void 0,n,r)},t.prototype.drawRect=function(t,e){e.cornerRadius=0,this.svgRenderer.drawRectangle(t,e,this.diagramId)},t.prototype.getBaseAttributes=function(t,e){var i={width:t.actualSize.width,height:t.actualSize.height,x:t.offsetX-t.actualSize.width*t.pivot.x+.5,y:t.offsetY-t.actualSize.height*t.pivot.y+.5,fill:t.style.fill,stroke:t.style.strokeColor,angle:t.rotateAngle+t.parentTransform,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:t.style.strokeWidth,dashArray:t.style.strokeDashArray||"",opacity:t.style.opacity,shadow:t.shadow,gradient:t.style.gradient,visible:t.visible,id:t.id,description:t.description,canApplyStyle:t.canApplyStyle};return t.isExport&&(i.width*=t.exportScaleValue.x,i.height*=t.exportScaleValue.y,i.x*=t.exportScaleValue.x,i.y*=t.exportScaleValue.y,i.strokeWidth*=t.exportScaleValue.x),t.flip&&(i.flip=t.flip),e&&(i.x+=e.tx,i.y+=e.ty),i},t.renderSvgBackGroundImage=function(t,e,i,n,o,r){if(t.source){var a=Object(c["j"])(e.id),s=a.getElementById(e.id+"_image");if(!s){var h=Object(c["h"])(e.id);s=document.createElementNS("http://www.w3.org/2000/svg","image"),s.setAttribute("id",e.id+"_image"),h.appendChild(s)}var d=new Image;d.src=t.source,s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d.src.toString());var l="None"!==t.scale?t.scale:"",p=t.align,u=p.charAt(0).toLowerCase()+p.slice(1);l&&(u+=" "+l.charAt(0).toLowerCase()+l.slice(1));var g={id:e.id+"_image",x:i,y:n,width:o,height:r,preserveAspectRatio:u};Object(c["F"])(s,g)}},t.prototype.transformLayers=function(t,e){var i=t.tx*t.scale,n=t.ty*t.scale;if(i!==this.transform.x||n!==this.transform.y||0===i||0===n){if(e){var o=this.diagramSvgLayer.getElementById(this.diagramId+"_diagramLayer");o.setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+"),scale("+t.scale+")")}var r=Object(c["p"])(this.diagramId);r.setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+")");var a=this.iconSvgLayer.getElementById(this.diagramId+"_diagramPorts");a.setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+"),scale("+t.scale+")");var s=this.iconSvgLayer.getElementById(this.diagramId+"_diagramExpander");s.setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+"),scale("+t.scale+")");var h=this.nativeSvgLayer.getElementById(this.diagramId+"_nativeLayer");h.setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+"),scale("+t.scale+")");var d=Object(c["r"])(this.diagramId).children[0];return d.style.transform="translate("+t.tx*t.scale+"px,"+t.ty*t.scale+"px)scale("+t.scale+")",this.transform={x:t.tx*t.scale,y:t.ty*t.scale},!0}return!1},t.prototype.updateNode=function(t,e,i,n,o){this.renderElement(t,e,i,n,this.getParentSvg(t),void 0,void 0,o)},t}(),x=i("a630"),j=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),S=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return j(e,t),S([Object(n["p"])("")],e.prototype,"source",void 0),S([Object(n["p"])("transparent")],e.prototype,"color",void 0),S([Object(n["p"])("None")],e.prototype,"scale",void 0),S([Object(n["p"])("None")],e.prototype,"align",void 0),e}(n["d"]),P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return j(e,t),S([Object(n["p"])(null)],e.prototype,"width",void 0),S([Object(n["p"])(null)],e.prototype,"height",void 0),S([Object(n["g"])({},x["a"])],e.prototype,"margin",void 0),S([Object(n["p"])("Landscape")],e.prototype,"orientation",void 0),S([Object(n["p"])("Infinity")],e.prototype,"boundaryConstraints",void 0),S([Object(n["g"])({},C)],e.prototype,"background",void 0),S([Object(n["p"])(!1)],e.prototype,"multiplePage",void 0),S([Object(n["p"])(!1)],e.prototype,"showPageBreaks",void 0),e}(n["d"]),T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return j(e,t),S([Object(n["p"])(0)],e.prototype,"horizontalOffset",void 0),S([Object(n["p"])(0)],e.prototype,"verticalOffset",void 0),S([Object(n["p"])(1)],e.prototype,"currentZoom",void 0),S([Object(n["p"])(0)],e.prototype,"viewPortWidth",void 0),S([Object(n["p"])(0)],e.prototype,"viewPortHeight",void 0),S([Object(n["p"])(.2)],e.prototype,"minZoom",void 0),S([Object(n["p"])(30)],e.prototype,"maxZoom",void 0),S([Object(n["p"])("Diagram")],e.prototype,"scrollLimit",void 0),S([Object(n["p"])()],e.prototype,"scrollableArea",void 0),S([Object(n["p"])(!1)],e.prototype,"canAutoScroll",void 0),S([Object(n["g"])({left:15,right:15,top:15,bottom:15},x["a"])],e.prototype,"autoScrollBorder",void 0),S([Object(n["g"])({left:0,right:0,top:0,bottom:0},x["a"])],e.prototype,"padding",void 0),e}(n["d"]),I=function(){function t(){this.services={}}return t.prototype.register=function(t,e){this.services[t]=e},t.prototype.getService=function(t){return this.services[t]},t}(),A=i("9efe"),z=i("fd65"),L=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),E=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return L(e,t),E([Object(n["p"])("lightgray")],e.prototype,"lineColor",void 0),E([Object(n["p"])("")],e.prototype,"lineDashArray",void 0),E([Object(n["p"])([1.25,18.75,.25,19.75,.25,19.75,.25,19.75,.25,19.75])],e.prototype,"lineIntervals",void 0),E([Object(n["p"])([20])],e.prototype,"snapIntervals",void 0),e}(n["d"]),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return L(e,t),E([Object(n["g"])({},D)],e.prototype,"horizontalGridlines",void 0),E([Object(n["g"])({},D)],e.prototype,"verticalGridlines",void 0),E([Object(n["p"])(y["q"].All)],e.prototype,"constraints",void 0),E([Object(n["p"])(5)],e.prototype,"snapAngle",void 0),E([Object(n["p"])(5)],e.prototype,"snapObjectDistance",void 0),e}(n["d"]),R=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),M=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return R(e,t),M([Object(n["p"])(5)],e.prototype,"interval",void 0),M([Object(n["p"])(100)],e.prototype,"segmentWidth",void 0),M([Object(n["p"])("Horizontal")],e.prototype,"orientation",void 0),M([Object(n["p"])("RightOrBottom")],e.prototype,"tickAlignment",void 0),M([Object(n["p"])("red")],e.prototype,"markerColor",void 0),M([Object(n["p"])(25)],e.prototype,"thickness",void 0),M([Object(n["p"])(null)],e.prototype,"arrangeTick",void 0),e}(n["d"]),H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return R(e,t),M([Object(n["p"])(!1)],e.prototype,"showRulers",void 0),M([Object(n["p"])(!0)],e.prototype,"dynamicGrid",void 0),M([Object(n["g"])({orientation:"Horizontal"},B)],e.prototype,"horizontalRuler",void 0),M([Object(n["g"])({orientation:"Vertical"},B)],e.prototype,"verticalRuler",void 0),e}(n["d"]),N=i("48e5"),W=i("d0e6"),_=i("9dde"),X=i("6639"),Y=i("7682"),V=i("3aa5"),U=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),F=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return U(e,t),F([Object(n["p"])("")],e.prototype,"property",void 0),F([Object(n["p"])("")],e.prototype,"field",void 0),e}(n["d"]),q=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Z=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},Q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return q(e,t),Z([Object(n["p"])("")],e.prototype,"read",void 0),Z([Object(n["p"])("")],e.prototype,"create",void 0),Z([Object(n["p"])("")],e.prototype,"update",void 0),Z([Object(n["p"])("")],e.prototype,"destroy",void 0),Z([Object(n["p"])()],e.prototype,"customFields",void 0),e}(n["d"]),K=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return q(e,t),Z([Object(n["p"])("")],e.prototype,"id",void 0),Z([Object(n["p"])("")],e.prototype,"sourceID",void 0),Z([Object(n["p"])("")],e.prototype,"targetID",void 0),Z([Object(n["p"])(null)],e.prototype,"sourcePointX",void 0),Z([Object(n["p"])(null)],e.prototype,"sourcePointY",void 0),Z([Object(n["p"])(null)],e.prototype,"targetPointX",void 0),Z([Object(n["p"])(null)],e.prototype,"targetPointY",void 0),Z([Object(n["p"])(null)],e.prototype,"dataManager",void 0),Z([Object(n["g"])({},Q)],e.prototype,"crudAction",void 0),e}(n["d"]),J=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return q(e,t),Z([Object(n["p"])("")],e.prototype,"id",void 0),Z([Object(n["p"])(null)],e.prototype,"dataManager",void 0),Z([Object(n["p"])(null)],e.prototype,"dataSource",void 0),Z([Object(n["p"])("")],e.prototype,"root",void 0),Z([Object(n["p"])("")],e.prototype,"parentId",void 0),Z([Object(n["p"])()],e.prototype,"doBinding",void 0),Z([Object(n["e"])([],G)],e.prototype,"dataMapSettings",void 0),Z([Object(n["g"])({},Q)],e.prototype,"crudAction",void 0),Z([Object(n["g"])({},K)],e.prototype,"connectionDataSource",void 0),e}(n["d"]),$=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tt=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $(e,t),tt([Object(n["p"])("")],e.prototype,"fixedNode",void 0),tt([Object(n["p"])(30)],e.prototype,"horizontalSpacing",void 0),tt([Object(n["p"])(30)],e.prototype,"verticalSpacing",void 0),tt([Object(n["p"])(30)],e.prototype,"maxIteration",void 0),tt([Object(n["p"])(40)],e.prototype,"springFactor",void 0),tt([Object(n["p"])(50)],e.prototype,"springLength",void 0),tt([Object(n["g"])({left:50,top:50,right:0,bottom:0},x["a"])],e.prototype,"margin",void 0),tt([Object(n["p"])("Auto")],e.prototype,"horizontalAlignment",void 0),tt([Object(n["p"])("Auto")],e.prototype,"verticalAlignment",void 0),tt([Object(n["p"])("TopToBottom")],e.prototype,"orientation",void 0),tt([Object(n["p"])("Auto")],e.prototype,"connectionDirection",void 0),tt([Object(n["p"])("Default")],e.prototype,"connectorSegments",void 0),tt([Object(n["p"])("None")],e.prototype,"type",void 0),tt([Object(n["p"])()],e.prototype,"getLayoutInfo",void 0),tt([Object(n["p"])()],e.prototype,"layoutInfo",void 0),tt([Object(n["p"])()],e.prototype,"getBranch",void 0),tt([Object(n["p"])()],e.prototype,"bounds",void 0),tt([Object(n["p"])(!0)],e.prototype,"enableAnimation",void 0),tt([Object(n["p"])("")],e.prototype,"root",void 0),e}(n["d"]),it=i("6e4a"),nt=i("1257");function ot(t,e,i,n,o,r,a){n.selectedItems.connectors[0];if(r&&r.length>1&&o&&o.length>1)return"PinchZoom";if(n.currentSymbol)return"Drag";var s="eventHandler";if("PortDraw"===n[s].action&&(n.tool&=~y["f"].DrawOnce),(Object(w["j"])(n)||Object(w["c"])(n))&&n.drawingObject)return"Draw";if(lt(n)){var c=n.selectedItems;if(c.wrapper&&Object(d["e"])(c.constraints,"UserHandle"))for(var h=0,l=c.userHandles;h<l.length;h++){var p=l[h];if(p.visible){var u=Object(d["D"])(c,p,n.scroller.transform);if(dt(i,u,p.size/(2*n.scroller.transform.scale)))return p.name}}}if(lt(n)){var f=n.selectedItems.annotation?n.selectedItems.wrapper.children[0]:n.selectedItems.wrapper,v=f.bounds;c=n.selectedItems,u=new W["a"](v.x,v.y,v.width,v.height);if(pt(n)&&!n.selectedItems.annotation){var b=n.selectedItems.connectors[0],O=10/n.scrollSettings.currentZoom,x=10/n.scrollSettings.currentZoom;if(Object(d["e"])(c.constraints,"ResizeAll")){if(Object(d["e"])(c.constraints,"ConnectorSourceThumb")&&Object(w["g"])(b)&&dt(i,b.sourcePoint,O))return"ConnectorSourceEnd";if(Object(d["e"])(c.constraints,"ConnectorTargetThumb")&&Object(w["h"])(b)&&dt(i,b.targetPoint,x))return"ConnectorTargetEnd";var j=at(b,c,i,n);if(j)return j}}else{var S=10/n.scroller.currentZoom,C=Object(m["a"])();Object(m["c"])(C,f.rotateAngle+f.parentTransform,f.offsetX,f.offsetY);var P=f.offsetX-f.pivot.x*f.actualSize.width,T=f.offsetY-f.pivot.y*f.actualSize.height,I={x:P+(.5===f.pivot.x?2*f.pivot.x:f.pivot.x)*f.actualSize.width/2,y:T-30/n.scroller.currentZoom};I=Object(m["e"])(C,I);var L=!!n.selectedItems.annotation,E=!(!L||!Object(w["z"])(n.selectedItems.annotation));if(Object(d["e"])(c.constraints,"Rotate")&&dt(i,I,S)&&n.selectedItems.thumbsConstraints&y["r"].Rotate){if(L&&E)return"LabelRotate";if(!L)return"Rotate"}if(u.Inflate(S),u.containsPoint(i)){j=rt(n,f,i,C,P,T);if(j)return j}}}if(Object(w["G"])(n)&&!t)return"Pan";if(a instanceof it["a"]&&!Object(w["G"])(n)){j=st(n,a);if("None"!==j)return j}if((a instanceof X["c"]||a instanceof X["b"])&&!Object(w["G"])(n)&&Object(w["A"])(a))return ut(n,a,void 0,e)&&Object(w["o"])(a)?"LabelDrag":"LabelSelect";if(null!==t){if(!(t instanceof A["q"]||t instanceof z["b"]))return"Select";if(e&&e.id){var D=e.id.split(t.id)[1];if(D&&D.match("^_icon"))return"LayoutAnimation"}if(Object(w["o"])(t)&&e instanceof g["a"]&&e.hyperlink.link)return"Hyperlink";if(!Object(w["o"])(t)||!ut(n,t,!1)||void 0!==n.selectedItems.annotation)return t&&Object(w["G"])(n)&&!Object(w["I"])(n)?"Pan":n.selectedItems.nodes.length&&n.selectedItems.nodes[0].isLane&&n.selectedItems.wrapper&&n.selectedItems.wrapper.bounds.containsPoint(i)?"Drag":"Select";if(t instanceof z["b"]&&!dt(i,t.sourcePoint,t.hitPadding)&&!dt(i,t.targetPoint,t.hitPadding)||!(t instanceof z["b"]))return"Drag"}return"Select"}function rt(t,e,i,n,o,r){var a;return 1===t.selectedItems.nodes.length&&0===t.selectedItems.connectors.length&&t.selectedItems.nodes[0].container&&(a=ct(t,e,i,o,r)),a||t.selectedItems.nodes[0]&&(t.selectedItems.nodes[0].isPhase||t.selectedItems.nodes[0].isLane||"SwimLane"===t.selectedItems.nodes[0].shape.type)||(a=ht(t,e,i,n,o,r)),a||null}function at(t,e,i,n){var o=10/n.scrollSettings.currentZoom,a=10/n.scrollSettings.currentZoom;if("Bezier"===t.type)for(var s=0;s<t.segments.length;s++){var c=t.segments[s];if(dt(i,r["a"].isEmptyPoint(c.point1)?c.bezierPoint1:c.point1,a))return"BezierSourceThumb";if(dt(i,r["a"].isEmptyPoint(c.point2)?c.bezierPoint2:c.point2,o))return"BezierTargetThumb"}if(n.connectorEditingToolModule&&Object(w["f"])(t))if("Straight"===t.type||"Bezier"===t.type)for(s=0;s<t.segments.length;s++){c=void 0;if(c=t.segments[s],dt(i,c.point,10))return"SegmentEnd"}else for(s=0;s<t.segments.length;s++){c=void 0;var h={x:0,y:0};if(c=t.segments[s],c.allowDrag)for(var d=0;d<c.points.length-1;d++){var l=r["a"].distancePoints(c.points[d],c.points[d+1]);if(l>=50&&(h.x=(c.points[d].x+c.points[d+1].x)/2,h.y=(c.points[d].y+c.points[d+1].y)/2,dt(i,h,30)))return"OrthoThumb"}}return null}function st(t,e,i,n){if(Object(w["e"])(e,t)&&(Object(d["g"])(e,y["m"].Hover)||Object(d["g"])(e,y["m"].Visible))){if(e.constraints&y["l"].Drag)return"PortDrag"}else if(Object(w["i"])(e,t)&&(Object(d["g"])(e,y["m"].Hover)||Object(d["g"])(e,y["m"].Visible))&&e.constraints&y["l"].Draw){t.drawingObject={};var o={type:"Orthogonal",sourcePortID:e.id};return t.drawingObject=o,t.tool|=y["f"].DrawOnce,t.currentDrawingObject=o,"PortDraw"}return"None"}function ct(t,e,i,n,o){var r=10/t.scroller.currentZoom,a=40/t.scroller.currentZoom,s=t.selectedItems,c=e.actualSize.width,h=e.actualSize.height,l=new W["a"](n,o+20,e.style.strokeWidth,h-40),p=new W["a"](n+c,o+20,e.style.strokeWidth,h-40),u=new W["a"](n+20,o,c-40,e.style.strokeWidth),g=new W["a"](n+20,o+h,c-40,e.style.strokeWidth),f=Object(nt["c"])(t,t.selectedItems.nodes[0],!0)?t.nameTable[t.selectedItems.nodes[0].parentId]:t.selectedItems.nodes[0];if(c>=a&&h>=a){if(Object(d["d"])(s.constraints,"ResizeEast",s.thumbsConstraints,s)&&p.containsPoint(i,r))return"ResizeEast";if(Object(d["d"])(s.constraints,"ResizeSouth",s.thumbsConstraints,s)&&g.containsPoint(i,r))return"ResizeSouth";if("Grid"!==f.container.type){if(Object(d["d"])(s.constraints,"ResizeWest",s.thumbsConstraints,s)&&l.containsPoint(i,r))return"ResizeWest";if(Object(d["d"])(s.constraints,"ResizeNorth",s.thumbsConstraints,s)&&u.containsPoint(i,r))return"ResizeNorth"}}return null}function ht(t,e,i,n,o,r){var a=40/t.scroller.currentZoom,s=10/t.scroller.currentZoom,c=t.selectedItems,h=!!c.annotation;if(e.actualSize.width>=a&&e.actualSize.height>=a){if(Object(d["d"])(c.constraints,"ResizeSouthEast",c.thumbsConstraints,c)&&dt(i,Object(m["e"])(n,{x:o+e.actualSize.width,y:r+e.actualSize.height}),s))return h?"LabelResizeSouthEast":"ResizeSouthEast";if(Object(d["d"])(c.constraints,"ResizeSouthWest",c.thumbsConstraints,c)&&dt(i,Object(m["e"])(n,{x:o,y:r+e.actualSize.height}),s))return h?"LabelResizeSouthWest":"ResizeSouthWest";if(Object(d["d"])(c.constraints,"ResizeNorthEast",c.thumbsConstraints,c)&&dt(i,Object(m["e"])(n,{x:o+e.actualSize.width,y:r}),s))return h?"LabelResizeNorthEast":"ResizeNorthEast";if(Object(d["d"])(c.constraints,"ResizeNorthWest",c.thumbsConstraints,c)&&dt(i,Object(m["e"])(n,{x:o,y:r}),s))return h?"LabelResizeNorthWest":"ResizeNorthWest"}return Object(d["d"])(c.constraints,"ResizeEast",c.thumbsConstraints,c)&&dt(i,Object(m["e"])(n,{x:o+e.actualSize.width,y:r+e.actualSize.height/2}),s)?h?"LabelResizeEast":"ResizeEast":Object(d["d"])(c.constraints,"ResizeWest",c.thumbsConstraints,c)&&dt(i,Object(m["e"])(n,{x:o,y:r+e.actualSize.height/2}),s)?h?"LabelResizeWest":"ResizeWest":Object(d["d"])(c.constraints,"ResizeSouth",c.thumbsConstraints,c)&&dt(i,Object(m["e"])(n,{x:o+e.actualSize.width/2,y:r+e.actualSize.height}),s)?h?"LabelResizeSouth":"ResizeSouth":Object(d["d"])(c.constraints,"ResizeNorth",c.thumbsConstraints,c)&&dt(i,Object(m["e"])(n,{x:o+e.actualSize.width/2,y:r}),s)?h?"LabelResizeNorth":"ResizeNorth":null}function dt(t,e,i){return t.x>=e.x-i&&t.x<=e.x+i&&t.y>=e.y-i&&t.y<=e.y+i}function lt(t){return t.selectedItems.nodes.length>0||t.selectedItems.connectors.length>0}function pt(t){return 1===t.selectedItems.connectors.length&&!t.selectedItems.nodes.length}function ut(t,e,i,n){if(void 0===i&&(i=!0),e instanceof A["t"])return!0;if(e instanceof A["q"])while(e){if(-1!==t.selectedItems.nodes.indexOf(e)&&void 0===t.selectedItems.annotation)return!0;if(i)break;e=t.nameTable[e.parentId]}else if(e instanceof z["b"]){if(-1!==t.selectedItems.connectors.indexOf(e)&&void 0===t.selectedItems.annotation)return!0}else if((e instanceof X["c"]||e instanceof X["b"])&&t.selectedItems.annotation&&t.selectedItems.wrapper.children[0].id===n.id)return!0;return!1}function gt(t,e){if(e+=360,e%=360,-1===t.indexOf("Resize"))return ft[t];var i=ft[t];return e>=0&&e<25||e>=160&&e<=205||e>=340&&e<=360?i:e>=25&&e<=70||e>=205&&e<=250?"n-resize"===i||"s-resize"===i?"ne-resize":"nw-resize"===i||"se-resize"===i?"n-resize":"e-resize"===i||"w-resize"===i?"nw-resize":"e-resize":e>=70&&e<=115||e>=250&&e<=295?"n-resize"===i||"s-resize"===i?"e-resize":"nw-resize"===i||"se-resize"===i?"ne-resize":"e-resize"===i||"w-resize"===i?"n-resize":"nw-resize":e>=115&&e<=155||e>=295&&e<=340?"n-resize"===i||"s-resize"===i?"nw-resize":"nw-resize"===i||"se-resize"===i?"e-resize":"e-resize"===i||"w-resize"===i?"ne-resize":ft[t]:"n-resize"}var ft={None:"default",Rotate:"crosshair",Select:"default",Drag:"move",ResizeWest:"w-resize",ResizeEast:"e-resize",ResizeSouth:"s-resize",ResizeNorth:"n-resize",Draw:"crosshair",PortDraw:"crosshair",ResizeNorthEast:"ne-resize",ResizeNorthWest:"nw-resize",ResizeSouthEast:"se-resize",ResizeSouthWest:"sw-resize",ConnectorSourceEnd:"move",ConnectorTargetEnd:"move",BezierSourceThumb:"move",BezierTargetThumb:"move",OrthoThumb:"move",SegmentEnd:"move",Pan:"pointer",Hyperlink:"pointer",PortDrag:"pointer",LabelSelect:"pointer",LabelDrag:"move",LabelRotate:"crosshair",LabelResizeWest:"w-resize",LabelResizeEast:"e-resize",LabelResizeSouth:"s-resize",LabelResizeNorth:"n-resize",LabelResizeNorthEast:"ne-resize",LabelResizeNorthWest:"nw-resize",LabelResizeSouthEast:"se-resize",LabelResizeSouthWest:"sw-resize"},mt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),yt=function(){function t(t,e){void 0===e&&(e=!1),this.commandHandler=null,this.inAction=!1,this.isProtectChange=!1,this.currentElement=null,this.blocked=!1,this.isTooltipVisible=!1,this.childTable={},this.undoElement={nodes:[],connectors:[]},this.checkProperty=!0,this.undoParentElement={nodes:[],connectors:[]},this.commandHandler=t,this.isProtectChange=e}return t.prototype.startAction=function(t){this.currentElement=t,this.inAction=!0},t.prototype.mouseDown=function(t){this.currentElement=t.source,this.startPosition=this.currentPosition=this.prevPosition=t.position,this.isTooltipVisible=!0,this.startAction(t.source),this.checkProperty=!0},t.prototype.checkPropertyValue=function(){this.checkProperty&&this.commandHandler.startTransaction(this.isProtectChange)},t.prototype.mouseMove=function(t){return this.currentPosition=t.position,this.inAction&&(this.commandHandler.startTransaction(this.isProtectChange),this.checkProperty=!1),!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.currentPosition=t.position,this.isTooltipVisible=!1,this.commandHandler.endTransaction(this.isProtectChange),this.endAction()},t.prototype.endAction=function(){this.isTooltipVisible||this.commandHandler.closeTooltip(),this.commandHandler=null,this.currentElement=null,this.currentPosition=null,this.inAction=!1,this.blocked=!1},t.prototype.mouseWheel=function(t){this.currentPosition=t.position},t.prototype.mouseLeave=function(t){this.mouseUp(t)},t.prototype.updateSize=function(t,e,i,n,o,r){t=this.commandHandler.renderContainerHelper(t)||t;var a,s={snapped:!1,offset:0,left:!1,right:!1},c={snapped:!1,offset:0,top:!1,bottom:!1},h=this.currentPosition.x-this.startPosition.x,d=this.currentPosition.y-this.startPosition.y,l=!(t instanceof g["a"])&&this.commandHandler.snappingModule&&this.commandHandler.snappingModule.canSnap(),p=l?this.commandHandler.snappingModule.getLayer():null,u=t instanceof g["a"]?r:t.rotateAngle;a=Object(m["a"])(),Object(m["c"])(a,-u,0,0);t.offsetX,t.offsetY;var f=t.width,y=t.height;t.pivot.x,t.pivot.y;var v,b=0,w=0,O=t instanceof g["a"]?t.actualSize.width:t.width,x=t instanceof g["a"]?t.actualSize.height:t.height;switch(n){case"ResizeWest":v=Object(m["e"])(a,{x:h,y:d}),h=v.x,d=v.y,w=1,h=l?this.commandHandler.snappingModule.snapLeft(s,c,p,h,d,t,i===e,o):h,d=0,b=(o.width-h)/O;break;case"ResizeEast":v=Object(m["e"])(a,{x:h,y:d}),h=v.x,d=v.y,h=l?this.commandHandler.snappingModule.snapRight(s,c,p,h,d,t,i===e,o):h,d=0,b=(o.width+h)/O,w=1;break;case"ResizeNorth":b=1,v=Object(m["e"])(a,{x:h,y:d}),h=v.x,d=v.y,d=l?this.commandHandler.snappingModule.snapTop(s,c,p,h,d,t,i===e,o):d,w=(o.height-d)/x;break;case"ResizeSouth":b=1,v=Object(m["e"])(a,{x:h,y:d}),h=v.x,d=v.y,d=l?this.commandHandler.snappingModule.snapBottom(s,c,p,h,d,t,i===e,o):d,w=(o.height+d)/x;break;case"ResizeNorthEast":v=Object(m["e"])(a,{x:h,y:d}),h=v.x,d=v.y,h=l?this.commandHandler.snappingModule.snapRight(s,c,p,h,d,t,i===e,o):h,d=l?this.commandHandler.snappingModule.snapTop(s,c,p,h,d,t,i===e,o):d,b=(o.width+h)/O,w=(o.height-d)/x;break;case"ResizeNorthWest":v=Object(m["e"])(a,{x:h,y:d}),h=v.x,d=v.y,d=l?this.commandHandler.snappingModule.snapTop(s,c,p,h,d,t,i===e,o):d,h=l?this.commandHandler.snappingModule.snapLeft(s,c,p,h,d,t,i===e,o):h,b=(o.width-h)/O,w=(o.height-d)/x;break;case"ResizeSouthEast":v=Object(m["e"])(a,{x:h,y:d}),h=v.x,d=v.y,d=l?this.commandHandler.snappingModule.snapBottom(s,c,p,h,d,t,i===e,o):d,h=l?this.commandHandler.snappingModule.snapRight(s,c,p,h,d,t,i===e,o):h,w=(o.height+d)/x,b=(o.width+h)/O;break;case"ResizeSouthWest":v=Object(m["e"])(a,{x:h,y:d}),h=v.x,d=v.y,d=l?this.commandHandler.snappingModule.snapBottom(s,c,p,h,d,t,i===e,o):d,h=l?this.commandHandler.snappingModule.snapLeft(s,c,p,h,d,t,i===e,o):h,b=(o.width-h)/O,w=(o.height+d)/x;break}return{width:b,height:w}},t.prototype.getPivot=function(t){switch(t){case"ResizeWest":return{x:1,y:.5};case"ResizeEast":return{x:0,y:.5};case"ResizeNorth":return{x:.5,y:1};case"ResizeSouth":return{x:.5,y:0};case"ResizeNorthEast":return{x:0,y:1};case"ResizeNorthWest":return{x:1,y:1};case"ResizeSouthEast":return{x:0,y:0};case"ResizeSouthWest":return{x:1,y:0}}return{x:.5,y:.5}},t}(),vt=function(t){function e(e,i,n){var o=t.call(this,e,!0)||this;return o.action=n,o}return mt(e,t),e.prototype.mouseDown=function(e){this.inAction=!0,t.prototype.mouseDown.call(this,e)},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction&&!1===r["a"].equals(this.currentPosition,this.prevPosition)){var i=W["a"].toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.clearSelectedItems(),this.commandHandler.drawSelectionRectangle(i.x,i.y,i.width,i.height)}return!this.blocked},e.prototype.mouseUp=function(e){if(this.checkPropertyValue(),!1===r["a"].equals(this.currentPosition,this.prevPosition)&&this.inAction){var i=W["a"].toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.doRubberBandSelection(i)}else{var n=this.commandHandler.getSelectedObject();this.commandHandler.hasSelection()&&e.info&&e.info.ctrlKey?e&&e.source&&(this.commandHandler.isSelected(e.source)?1===e.clickCount&&this.commandHandler.unSelect(e.source):this.commandHandler.selectObjects([e.source],!0)):(this.commandHandler.clearSelection(null===e.source),"LabelSelect"===this.action?this.commandHandler.labelSelect(e.source,e.sourceWrapper):e.source&&this.commandHandler.selectObjects([e.source],!1,n))}this.inAction=!1,t.prototype.mouseUp.call(this,e)},e.prototype.mouseLeave=function(t){this.inAction&&this.mouseUp(t)},e}(yt),bt=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.endPoint=i,n}return mt(e,t),e.prototype.mouseDown=function(e){var i;if(this.inAction=!0,this.undoElement=void 0,this instanceof St||(this.undoElement=Object(s["b"])(e.source)),t.prototype.mouseDown.call(this,e),e.source&&e.source.connectors&&({x:this.prevPosition.x,y:this.prevPosition.y},i=e.source.connectors[0]),"BezierSourceThumb"===this.endPoint||"BezierTargetThumb"===this.endPoint)for(var n=0;n<i.segments.length;n++){var o=i.segments[n],a=r["a"].isEmptyPoint(o.point1)?o.bezierPoint1:o.point1,c=r["a"].isEmptyPoint(o.point2)?o.bezierPoint2:o.point2;(dt(this.currentPosition,a,i.hitPadding)||dt(this.currentPosition,c,i.hitPadding))&&(this.selectedSegment=o)}this.currentPosition=e.position},e.prototype.mouseUp=function(e){if(this.checkPropertyValue(),this.commandHandler.updateSelector(),this.commandHandler.removeSnap(),this.commandHandler.changeAnnotationDrag(e),this instanceof St||("ConnectorSourceEnd"!==this.endPoint||!e.source.connectors.length||r["a"].equals(e.source.connectors[0].sourcePoint,this.undoElement.connectors[0].sourcePoint)&&e.source.connectors[0].sourceID===this.undoElement.connectors[0].sourceID)&&("ConnectorTargetEnd"!==this.endPoint||r["a"].equals(e.source.connectors[0].targetPoint,this.undoElement.connectors[0].targetPoint)&&e.source.connectors[0].targetID===this.undoElement.connectors[0].targetID)){if(!(this instanceof St)&&("BezierTargetThumb"===this.endPoint||"BezierSourceThumb"===this.endPoint)&&this.undoElement&&e.source){u=void 0;u=Object(s["b"])(e.source);g={type:"SegmentChanged",redoObject:u,undoObject:this.undoElement,category:"Internal"};this.commandHandler.addHistoryEntry(g)}}else{var i=void 0,o=void 0;e.source&&e.source.connectors&&(i={x:this.prevPosition.x,y:this.prevPosition.y},o=e.source.connectors[0]);var a=void 0,c=void 0;if(e.target){var h=this.commandHandler.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===this.endPoint,!0);h instanceof it["a"]?a=h.id:c=h.id}var l={connector:o,state:"Completed",targetNode:c,oldValue:i,newValue:i,cancel:!1,targetPort:a};Object(n["D"])()&&(l={connector:Object(d["h"])(o),state:"Completed",targetNode:c,oldValue:Object(d["h"])(i),newValue:i,cancel:l.cancel,targetPort:a});var p="ConnectorSourceEnd"===this.endPoint?y["e"].sourcePointChange:y["e"].targetPointChange;if(this.commandHandler.triggerEvent(p,l),this.commandHandler.removeTerminalSegment(o,!0),this.undoElement&&e.source){var u=void 0;u=Object(s["b"])(e.source);var g={type:"ConnectionChanged",redoObject:Object(s["b"])(u),undoObject:Object(s["b"])(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(g)}}t.prototype.mouseUp.call(this,e)},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),!(this instanceof St)&&("ConnectorSourceEnd"===this.endPoint&&r["a"].equals(e.source.connectors[0].sourcePoint,this.undoElement.connectors[0].sourcePoint)||"ConnectorTargetEnd"===this.endPoint&&r["a"].equals(e.source.connectors[0].targetPoint,this.undoElement.connectors[0].targetPoint))){var i=void 0,o=void 0;e.source&&e.source.connectors&&(i={x:this.prevPosition.x,y:this.prevPosition.y},o=e.source.connectors[0]);var a=void 0,s=void 0;if(e.target){s=e.target.id;var c=this.commandHandler.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===this.endPoint,!0);c instanceof it["a"]||c instanceof A["h"]?a=c.id:s=c.id}var h={connector:o,state:"Start",targetNode:s,oldValue:i,newValue:i,cancel:!1,targetPort:a};Object(n["D"])()&&(h={connector:Object(d["h"])(o),state:"Start",targetNode:s,oldValue:i,newValue:i,cancel:h.cancel,targetPort:a});var l="ConnectorSourceEnd"===this.endPoint?y["e"].sourcePointChange:y["e"].targetPointChange;this.commandHandler.triggerEvent(l,h)}if(this.currentPosition=e.position,this.currentPosition&&this.prevPosition){var p=this.currentPosition.x-this.prevPosition.x,u=this.currentPosition.y-this.prevPosition.y,g=void 0,f=(i=void 0,void 0),m=void 0;this.currentPosition=this.commandHandler.snapConnectorEnd(this.currentPosition);var v=void 0;e.source&&e.source.connectors&&(g={x:this.currentPosition.x,y:this.currentPosition.y},i={x:this.prevPosition.x,y:this.prevPosition.y},v=e.source.connectors[0]);var b=void 0,O=void 0;if(e.target){c=this.commandHandler.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===this.endPoint,!0);c instanceof it["a"]?b=c.id:O=c.id}h={connector:v,state:"Progress",targetNode:O,oldValue:i,newValue:g,cancel:!1,targetPort:b};if(Object(n["D"])()&&(h={connector:Object(d["h"])(v),state:"Progress",targetNode:O,oldValue:i,newValue:g,cancel:h.cancel,targetPort:b}),!(this instanceof St)){l="ConnectorSourceEnd"===this.endPoint?y["e"].sourcePointChange:y["e"].targetPointChange;this.commandHandler.triggerEvent(l,h)}if(e.target&&(f=Object(d["v"])(e.target,!0),m=Object(d["v"])(e.target,!1)),!h.cancel&&this.inAction&&void 0!==this.endPoint&&0!==p||0!==u)if(this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,e.source,this.currentPosition,this.selectedSegment,e.target,b),this.commandHandler.updateSelector(),e.target&&("ConnectorSourceEnd"===this.endPoint&&(Object(w["q"])(e.target)||Object(w["w"])(m))||"ConnectorTargetEnd"===this.endPoint&&(Object(w["n"])(e.target)||Object(w["v"])(f)))){this.commandHandler.canDisconnect(this.endPoint,e,b,O)&&this.commandHandler.disConnect(e.source,this.endPoint);c=this.commandHandler.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===this.endPoint,!0);if(c instanceof A["q"])(Object(w["n"])(c)&&"ConnectorTargetEnd"===this.endPoint||Object(w["q"])(c)&&"ConnectorSourceEnd"===this.endPoint)&&this.commandHandler.connect(this.endPoint,e);else{var x=this.checkConnect(c);x&&this.commandHandler.connect(this.endPoint,e)}}else-1===this.endPoint.indexOf("Bezier")&&(this.commandHandler.disConnect(e.source,this.endPoint),this.commandHandler.updateSelector());if(this.commandHandler.canEnableDefaultTooltip()){var j=this.getTooltipContent(e.position);this.commandHandler.showTooltip(e.source,e.position,j,"ConnectTool",this.isTooltipVisible),this.isTooltipVisible=!1}}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.getTooltipContent=function(t){return"X:"+Math.round(t.x)+" Y:"+Math.round(t.y)},e.prototype.checkConnect=function(t){return!(!Object(w["v"])(t)||"ConnectorTargetEnd"!==this.endPoint)||(!(!Object(w["w"])(t)||"ConnectorSourceEnd"!==this.endPoint)||!(t.constraints&y["l"].None||Object(w["v"])(t)||Object(w["w"])(t)))},e.prototype.endAction=function(){t.prototype.endAction.call(this),this.prevPosition=null,this.endPoint=null},e}(yt),wt=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.currentTarget=null,n.objectType=i,n}return mt(e,t),e.prototype.mouseDown=function(e){if(e.source instanceof A["q"]||e.source instanceof z["b"]){var i=this.commandHandler.getSelectedObject();this.commandHandler.selectObjects([e.source],e.info&&e.info.ctrlKey,i);var n={nodes:[],connectors:[]};e.source instanceof A["q"]?n.nodes.push(Object(s["b"])(e.source)):n.connectors.push(Object(s["b"])(e.source)),this.undoElement=Object(s["b"])(n)}else this.undoElement=Object(s["b"])(e.source);this.undoParentElement=this.commandHandler.getSubProcess(e.source),"Port"===this.objectType&&(this.portId=e.sourceWrapper.id),t.prototype.mouseDown.call(this,e),this.initialOffset={x:0,y:0}},e.prototype.mouseUp=function(e,i){var o;this.checkPropertyValue();var r,a=!1,c={nodes:[],connectors:[]};if("Port"!==this.objectType){if(e.source instanceof A["q"]||e.source instanceof z["b"]){e.source instanceof A["q"]?c.nodes.push(Object(s["b"])(e.source)):c.connectors.push(Object(s["b"])(e.source)),o=Object(s["b"])(c);var h=e.source.wrapper;o.offsetX=h.offsetX,o.offsetY=h.offsetY}else o=Object(s["b"])(e.source);if(r=this.commandHandler.renderContainerHelper(e.source)||e.source,("helper"===r.id&&!o.nodes[0].isLane&&!o.nodes[0].isPhase||"helper"!==r.id)&&(r.offsetX!==this.undoElement.offsetX||r.offsetY!==this.undoElement.offsetY)){var l=void 0,p=void 0;e.source&&(p={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY},l={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY});var u={source:e.source,state:"Completed",oldValue:l,newValue:p,target:this.currentTarget,targetPosition:this.currentPosition,allowDrop:!0,cancel:!1};if(u={source:Object(d["h"])(e.source),state:"Completed",oldValue:Object(d["h"])(l),newValue:Object(d["h"])(p),target:Object(d["h"])(this.currentTarget),targetPosition:Object(d["h"])(this.currentPosition),allowDrop:u.allowDrop,cancel:u.cancel},Object(n["D"])()&&(u=this.getBlazorPositionChangeEventArgs(u,this.currentTarget)),this.commandHandler.triggerEvent(y["e"].positionChange,u),!i){this.commandHandler.startGroupAction(),a=!0;var g={type:"PositionChanged",redoObject:Object(s["b"])(o),undoObject:Object(s["b"])(this.undoElement),category:"Internal"};if(o.nodes[0]&&o.nodes[0].processId){var f={type:"SizeChanged",category:"Internal",undoObject:this.undoParentElement,redoObject:this.commandHandler.getSubProcess(e.source)};this.commandHandler.addHistoryEntry(f)}this.commandHandler.addHistoryEntry(g)}}this.commandHandler.snapPoint(this.prevPosition,this.currentPosition,0,0);if(this.commandHandler.removeSnap(),this.commandHandler.removeHighlighter(),e.source&&this.currentTarget&&Object(w["b"])(this.currentTarget)&&this.commandHandler.isDroppable(e.source,this.currentTarget)){this.commandHandler.drop(this.currentElement,this.currentTarget,this.currentPosition);u={element:e.source,target:this.currentTarget,position:this.currentPosition,cancel:!1};if(n["D"]&&(u=Object(d["t"])(e,u)),this.commandHandler.triggerEvent(y["e"].drop,u),!u.cancel&&e.source&&this.commandHandler.isParentAsContainer(this.currentTarget)){for(var m=e.source instanceof A["t"]?e.source.nodes:[e.source],v=!1,b=0;b<m.length;b++)m[b].container||(v=!0,this.commandHandler.dropChildToContainer(this.currentTarget,m[b]),this.commandHandler.renderContainerHelper(m[b]));a&&this.commandHandler.isContainer&&v&&this.commandHandler.endGroupAction()}}e.source&&this.currentTarget&&this.commandHandler.dropAnnotation(e.source,this.currentTarget),this.commandHandler.updateSelector(),a&&!this.commandHandler.isContainer&&this.commandHandler.endGroupAction()}else{c.nodes.push(Object(s["b"])(e.source)),o=Object(s["b"])(c);g={type:"PortPositionChanged",objectId:this.portId,redoObject:Object(s["b"])(o),undoObject:Object(s["b"])(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(g)}t.prototype.mouseUp.call(this,e)},e.prototype.getBlazorPositionChangeEventArgs=function(t,e){return t={source:Object(d["h"])(t.source),state:t.state,oldValue:t.oldValue,newValue:t.newValue,target:Object(d["x"])(e)===z["b"]?{connector:Object(d["h"])(e)}:{node:Object(d["h"])(e)},targetPosition:this.currentPosition,allowDrop:!0,cancel:!1},t},e.prototype.mouseMove=function(e){t.prototype.mouseMove.call(this,e);var i,o,a=!1;i=this.commandHandler.renderContainerHelper(e.source)||e.source,i instanceof A["q"]||i instanceof z["b"]?i instanceof A["q"]?i.offsetX===this.undoElement.nodes[0].offsetX&&i.offsetY===this.undoElement.nodes[0].offsetY&&(a=!0):r["a"].equals(i.sourcePoint,this.undoElement.connectors[0].sourcePoint)&&r["a"].equals(i.targetPoint,this.undoElement.connectors[0].targetPoint)&&(a=!0):i.wrapper.offsetX===this.undoElement.wrapper.offsetX&&i.wrapper.offsetY===this.undoElement.wrapper.offsetY&&(a=!0),i&&(o={offsetX:i.wrapper.offsetX,offsetY:i.wrapper.offsetY});var s={source:i,state:"Start",oldValue:o,newValue:o,target:e.target,targetPosition:e.position,allowDrop:!0,cancel:!1};if(s={source:Object(d["h"])(i),state:"Start",oldValue:Object(d["h"])(o),newValue:Object(d["h"])(o),target:e.target,targetPosition:e.position,allowDrop:s.allowDrop,cancel:s.cancel},Object(n["D"])()&&(s=this.getBlazorPositionChangeEventArgs(s,e.target)),a&&this.commandHandler.triggerEvent(y["e"].positionChange,s),this.currentPosition=e.position,"Port"!==this.objectType){this.currentPosition.x,this.prevPosition.x,this.currentPosition.y,this.prevPosition.y;var c,h=this.initialOffset.x+(this.currentPosition.x-this.prevPosition.x),l=this.initialOffset.y+(this.currentPosition.y-this.prevPosition.y);this.commandHandler.dragOverElement(e,this.currentPosition),this.commandHandler.disConnect(e.source),this.commandHandler.removeSnap();var p=void 0,u=this.commandHandler.snapPoint(this.prevPosition,this.currentPosition,h,l);this.initialOffset.x=h-u.x,this.initialOffset.y=l-u.y,i&&(c={offsetX:i.wrapper.offsetX,offsetY:i.wrapper.offsetY},p={offsetX:i.wrapper.offsetX+u.x,offsetY:i.wrapper.offsetY+u.y}),this.currentTarget&&e.target!==this.currentTarget&&this.commandHandler.removeChildFromBPmn(e.source,e.target,this.currentTarget),this.currentTarget=e.target;var g={source:i,state:"Progress",oldValue:c,newValue:p,target:e.target,targetPosition:e.position,allowDrop:!0,cancel:!1};if(Object(n["D"])()&&(g=this.getBlazorPositionChangeEventArgs(g,e.target)),this.commandHandler.triggerEvent(y["e"].positionChange,g),!g.cancel){this.blocked=!this.commandHandler.dragSelectedObjects(u.x,u.y);var f=!this.commandHandler.mouseOver(this.currentElement,this.currentTarget,this.currentPosition);this.blocked=this.blocked||f}if(this.commandHandler.removeStackHighlighter(),this.commandHandler.renderStackHighlighter(e),this.currentTarget&&e.source!==this.currentTarget&&this.commandHandler.isDroppable(e.source,this.currentTarget)&&"helper"!==e.source.id){var v=e.source instanceof A["t"]?e.source.nodes[0]:e.source;this.commandHandler.isParentAsContainer(v,!0)||"SwimLane"===v.shape.type||v.shape.isPhase||(this.currentTarget.isLane?this.commandHandler.renderStackHighlighter(e,this.currentTarget):this.commandHandler.drawHighlighter(this.currentTarget))}else this.commandHandler.removeHighlighter();if(this.commandHandler.canEnableDefaultTooltip()){var b=this.getTooltipContent(e.source);this.commandHandler.showTooltip(e.source,e.position,b,"MoveTool",this.isTooltipVisible),this.isTooltipVisible=!1}}else{var w=Object(m["a"])(),O=e.source;Object(m["c"])(w,-O.rotateAngle,O.offsetX,O.offsetY);var x=Object(m["e"])(w,{x:this.prevPosition.x,y:this.prevPosition.y}),j=Object(m["e"])(w,{x:e.position.x,y:e.position.y});this.commandHandler.portDrag(e.source,e.sourceWrapper,j.x-x.x,j.y-x.y)}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.getTooltipContent=function(t){return"X:"+Math.round(t.wrapper.bounds.x)+" Y:"+Math.round(t.wrapper.bounds.y)},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.endAction=function(){t.prototype.endAction.call(this),this.currentTarget=null,this.prevPosition=null},e}(yt),Ot=function(t){function e(e){return t.call(this,e,!0)||this}return mt(e,t),e.prototype.mouseDown=function(e){if(this.undoElement=Object(s["b"])(e.source),this.undoElement.nodes[0]&&this.undoElement.nodes[0].children)for(var i=[],n=this.commandHandler.getAllDescendants(this.undoElement.nodes[0],i),o=0;o<n.length;o++){var r=this.commandHandler.cloneChild(n[o].id);this.childTable[n[o].id]=Object(s["b"])(r)}t.prototype.mouseDown.call(this,e)},e.prototype.mouseUp=function(e){var i;if(this.checkPropertyValue(),i=this.commandHandler.renderContainerHelper(e.source)||e.source,this.undoElement.rotateAngle!==i.wrapper.rotateAngle){var n={rotateAngle:i.wrapper.rotateAngle},o={source:e.source,state:"Completed",oldValue:n,newValue:n,cancel:!1};this.commandHandler.triggerEvent(y["e"].rotateChange,o);var r=void 0;r=Object(s["b"])(e.source);var a={type:"RotationChanged",redoObject:Object(s["b"])(r),undoObject:Object(s["b"])(this.undoElement),category:"Internal",childTable:this.childTable};this.commandHandler.addHistoryEntry(a),this.commandHandler.updateSelector()}t.prototype.mouseUp.call(this,e)},e.prototype.mouseMove=function(e){var i;if(t.prototype.mouseMove.call(this,e),i=this.commandHandler.renderContainerHelper(e.source)||e.source,this.undoElement.rotateAngle===i.wrapper.rotateAngle){var n={rotateAngle:i.wrapper.rotateAngle},o={source:e.source,state:"Start",oldValue:n,newValue:n,cancel:!1};this.commandHandler.triggerEvent(y["e"].rotateChange,o)}this.currentPosition=e.position;var a={x:i.wrapper.offsetX,y:i.wrapper.offsetY},s=r["a"].findAngle(a,this.currentPosition)+90,c=this.commandHandler.snapAngle(s);s=0!==c?c:s,s=(s+360)%360;var h={rotateAngle:i.wrapper.rotateAngle},l={rotateAngle:s},p={source:e.source,state:"Progress",oldValue:h,newValue:l,cancel:!1},u={source:Object(d["h"])(e.source),state:"Progress",oldValue:Object(d["h"])(h),newValue:Object(d["h"])(l),cancel:p.cancel};if(this.commandHandler.triggerEvent(y["e"].rotateChange,u),u.cancel||(this.blocked=!this.commandHandler.rotateSelectedItems(s-i.wrapper.rotateAngle)),this.commandHandler.canEnableDefaultTooltip()){var g=this.getTooltipContent(e.source);this.commandHandler.showTooltip(e.source,e.position,g,"RotateTool",this.isTooltipVisible),this.isTooltipVisible=!1}return!this.blocked},e.prototype.getTooltipContent=function(t){return Math.round(t.rotateAngle%360).toString()+"°"},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e}(yt),xt=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.initialBounds=new W["a"],n.corner=i,n}return mt(e,t),e.prototype.mouseDown=function(e){if(this.undoElement=Object(s["b"])(e.source),this.undoParentElement=this.commandHandler.getSubProcess(e.source),t.prototype.mouseDown.call(this,e),this.undoElement.nodes[0]&&this.undoElement.nodes[0].children)for(var i=[],n=this.commandHandler.getAllDescendants(this.undoElement.nodes[0],i),o=0;o<n.length;o++){var r=this.commandHandler.cloneChild(n[o].id);this.childTable[n[o].id]=Object(s["b"])(r)}this.commandHandler.checkSelection(e.source,this.corner),t.prototype.mouseDown.call(this,e),this.initialBounds.x=e.source.wrapper.offsetX,this.initialBounds.y=e.source.wrapper.offsetY,this.initialBounds.height=e.source.wrapper.actualSize.height,this.initialBounds.width=e.source.wrapper.actualSize.width},e.prototype.mouseUp=function(e,i){var n;if(this.checkPropertyValue(),this.commandHandler.removeSnap(),this.commandHandler.updateSelector(),n=this.commandHandler.renderContainerHelper(e.source)||e.source,this.undoElement.offsetX!==n.wrapper.offsetX||this.undoElement.offsetY!==n.wrapper.offsetY){var o=this.updateSize(e.source,this.currentPosition,this.prevPosition,this.corner,this.initialBounds);this.blocked=this.scaleObjects(o.width,o.height,this.corner,this.currentPosition,this.prevPosition,n);var r={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY,width:e.source.wrapper.actualSize.width,height:e.source.wrapper.actualSize.height},a={source:e.source,state:"Completed",oldValue:r,newValue:r,cancel:!1};this.commandHandler.triggerEvent(y["e"].sizeChange,a);var c=Object(s["b"])(e.source),h={type:"SizeChanged",redoObject:Object(s["b"])(c),undoObject:Object(s["b"])(this.undoElement),category:"Internal",childTable:this.childTable};if(!i){if(this.commandHandler.startGroupAction(),this.commandHandler.addHistoryEntry(h),c.nodes[0]&&c.nodes[0].processId){var d={type:"SizeChanged",redoObject:this.commandHandler.getSubProcess(e.source),undoObject:this.undoParentElement,category:"Internal"};this.commandHandler.addHistoryEntry(d)}this.commandHandler.endGroupAction()}}return t.prototype.mouseUp.call(this,e),!this.blocked},e.prototype.mouseMove=function(e){var i;if(t.prototype.mouseMove.call(this,e),i=this.commandHandler.renderContainerHelper(e.source)||e.source,this.undoElement.offsetX===i.wrapper.offsetX&&this.undoElement.offsetY===i.wrapper.offsetY){var n={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY,width:e.source.wrapper.actualSize.width,height:e.source.wrapper.actualSize.height},o={source:e.source,state:"Start",oldValue:n,newValue:this.currentElement,cancel:!1};this.commandHandler.triggerEvent(y["e"].sizeChange,o)}this.currentPosition=e.position;var r=this.currentPosition.x-this.startPosition.x,a=this.currentPosition.y-this.startPosition.y,c={x:r,y:a};c=Object(s["j"])(-this.currentElement.wrapper.rotateAngle,void 0,void 0,c);this.currentElement.wrapper.actualSize.width,c.x,this.currentElement.wrapper.actualSize.width,this.currentElement.wrapper.actualSize.height,c.y,this.currentElement.wrapper.actualSize.height;c=this.getChanges(c),this.commandHandler.removeSnap();var h=this.updateSize(e.source,this.startPosition,this.currentPosition,this.corner,this.initialBounds);if(this.blocked=!this.scaleObjects(h.width,h.height,this.corner,this.startPosition,this.currentPosition,i),this.commandHandler.canEnableDefaultTooltip()){var d=this.getTooltipContent(e.source);this.commandHandler.showTooltip(e.source,e.position,d,"ResizeTool",this.isTooltipVisible),this.isTooltipVisible=!1}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.getTooltipContent=function(t){return"W:"+Math.round(t.wrapper.bounds.width)+" H:"+Math.round(t.wrapper.bounds.height)},e.prototype.getChanges=function(t){switch(this.corner){case"ResizeEast":return{x:t.x,y:0};case"ResizeSouthEast":return t;case"ResizeSouth":return{x:0,y:t.y};case"ResizeNorth":return{x:0,y:-t.y};case"ResizeNorthEast":return{x:t.x,y:-t.y};case"ResizeNorthWest":return{x:-t.x,y:-t.y};case"ResizeWest":return{x:-t.x,y:0};case"ResizeSouthWest":return{x:-t.x,y:t.y}}return t},e.prototype.scaleObjects=function(t,e,i,n,o,r){r instanceof A["t"]&&1===r.nodes.length&&r.nodes[0].constraints&y["k"].AspectRatio&&("ResizeWest"===i||"ResizeEast"===i||"ResizeNorth"===i||"ResizeSouth"===i?1===e&&1===t||(e=t=Math.max(1===e?0:e,1===t?0:t)):e=t=n!==o?Math.max(e,t):0);var a={offsetX:r.offsetX,offsetY:r.offsetY,width:r.width,height:r.height};this.blocked=this.commandHandler.scaleSelectedItems(t,e,this.getPivot(this.corner));var s,c,h={offsetX:r.offsetX,offsetY:r.offsetY,width:r.width,height:r.height};return s={source:r,state:"Progress",oldValue:a,newValue:h,cancel:!1},c={source:Object(d["h"])(r),state:"Progress",oldValue:Object(d["h"])(a),newValue:Object(d["h"])(h),cancel:s.cancel},this.commandHandler.triggerEvent(y["e"].sizeChange,c),c.cancel&&this.commandHandler.scaleSelectedItems(1/t,1/e,this.getPivot(this.corner)),this.blocked},e}(yt),jt=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.sourceObject=i,n}return mt(e,t),e.prototype.mouseDown=function(e){t.prototype.mouseDown.call(this,e),this.inAction=!0},e.prototype.mouseMove=function(e){var i;t.prototype.mouseMove.call(this,e);var n={offsetX:this.currentPosition.x,width:3,height:3,offsetY:this.currentPosition.y};if(this.drawingObject||(this.drawingObject=this.commandHandler.drawObject(n)),this.inAction&&!1===r["a"].equals(this.currentPosition,this.prevPosition)){var o=W["a"].toBounds([this.prevPosition,this.currentPosition]);i=this.commandHandler.checkBoundaryConstraints(void 0,void 0,o),i&&this.commandHandler.updateNodeDimension(this.drawingObject,o)}return i},e.prototype.mouseUp=function(e){this.checkPropertyValue();var i=W["a"].toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.checkBoundaryConstraints(void 0,void 0,i),this.drawingObject&&this.drawingObject instanceof A["q"]&&(this.commandHandler.addObjectToDiagram(this.drawingObject),this.drawingObject=null),t.prototype.mouseUp.call(this,e),this.inAction=!1},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e.prototype.mouseLeave=function(t){this.inAction&&this.mouseUp(t)},e}(yt),St=function(t){function e(e,i,n){var o=t.call(this,e,i)||this;return o.sourceObject=n,o}return mt(e,t),e.prototype.mouseDown=function(e){t.prototype.mouseDown.call(this,e),this.inAction=!0},e.prototype.mouseMove=function(e){if(this.inAction){var i={sourcePoint:this.currentPosition,targetPoint:this.currentPosition};this.drawingObject||(this.drawingObject=this.commandHandler.drawObject(i)),e.source=this.drawingObject,e.target&&("ConnectorTargetEnd"!==this.endPoint||Object(w["n"])(e.target))&&this.commandHandler.connect(this.endPoint,e),this.endPoint="ConnectorTargetEnd"}return this.inAction||(this.commandHandler.updateSelector(),e.source&&e.sourceWrapper&&this.commandHandler.renderHighlighter(e,!0)),t.prototype.mouseMove.call(this,e),!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.drawingObject&&this.drawingObject instanceof z["b"]&&(this.commandHandler.addObjectToDiagram(this.drawingObject),this.drawingObject=null),this.inAction=!1,t.prototype.mouseUp.call(this,e)},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e.prototype.mouseLeave=function(t){this.inAction&&this.mouseUp(t)},e}(bt),Ct=function(t){function e(e){return t.call(this,e,!0)||this}return mt(e,t),e.prototype.mouseDown=function(e){t.prototype.mouseDown.call(this,e),this.commandHandler.clearSelection();var i={shape:{type:"Text"},offsetX:this.currentPosition.x,offsetY:this.currentPosition.y};e.source||(this.drawingNode=this.commandHandler.drawObject(i))},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.drawingNode)this.drawingNode.style.strokeColor="black",this.drawingNode.style.strokeDashArray="2 2",this.drawingNode.style.fill="transparent";else{var i={shape:{type:"Text"},offsetX:this.currentPosition.x,width:30,height:30,style:{strokeDashArray:"2 2",fill:"transparent"},offsetY:this.currentPosition.y};this.drawingNode=this.commandHandler.drawObject(i)}if(this.inAction&&!1===r["a"].equals(this.currentPosition,this.prevPosition)){var n=W["a"].toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.updateNodeDimension(this.drawingNode,n)}return!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.drawingNode?(this.drawingNode.style.strokeColor="none",this.drawingNode.style.fill="none"):this.drawingNode=e.source,this.drawingNode&&(this.drawingNode instanceof A["q"]||this.drawingNode instanceof z["b"])&&this.commandHandler.addText(this.drawingNode,this.currentPosition),t.prototype.mouseUp.call(this,e),this.inAction=!1},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e}(yt),Pt=function(t){function e(e,i){var n=t.call(this,e)||this;return n.zooming=i,n}return mt(e,t),e.prototype.mouseDown=function(e){t.prototype.mouseDown.call(this,e),this.inAction=!0},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction)if(this.zooming||!1!==r["a"].equals(this.currentPosition,this.prevPosition)){if(e.moveTouches&&e.moveTouches.length&&e.moveTouches.length>=2){var i=e.startTouches[0],n=e.startTouches[1],o=e.moveTouches[0],a=e.moveTouches[1],s=this.getDistance(o,a)/this.getDistance(i,n),c=e.position;this.commandHandler.zoom(s,0,0,c),this.updateTouch(i,o),this.updateTouch(n,a)}}else{var h=this.currentPosition.x-this.prevPosition.x,d=this.currentPosition.y-this.prevPosition.y;this.commandHandler.scroll(h,d,this.currentPosition)}return!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue(),t.prototype.mouseUp.call(this,e),this.inAction=!1},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e.prototype.getDistance=function(t,e){var i=e.pageX-t.pageX,n=e.pageY-t.pageY;return Math.sqrt(i*i+n*n)},e.prototype.updateTouch=function(t,e){t.pageX=e.pageX,t.pageY=e.pageY},e}(yt),Tt=function(t){function e(e){return t.call(this,e,!0)||this}return mt(e,t),e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.commandHandler.initExpand(e),t.prototype.mouseUp.call(this,e)},e}(yt),It=function(t){function e(e){return t.call(this,e,!0)||this}return mt(e,t),e.prototype.mouseUp=function(e){this.checkPropertyValue();var i=window.open(e.sourceWrapper.hyperlink.link,"_blank");i.focus(),t.prototype.mouseUp.call(this,e)},e}(yt),At=function(t){function e(e){return t.call(this,e,!0)||this}return mt(e,t),e.prototype.mouseDown=function(e){if(t.prototype.mouseDown.call(this,e),this.inAction=!0,this.drawingObject){var i=void 0,n=this.drawingObject.shape;i=n.points[n.points.length-1],i={x:i.x,y:i.y},this.drawingObject.shape.points.push(i)}else{this.startPoint={x:this.startPosition.x,y:this.startPosition.y};var o={offsetX:this.currentPosition.x,offsetY:this.currentPosition.y,width:5,height:5,style:{strokeColor:"black",strokeWidth:1},shape:{type:"Basic",shape:"Polygon",points:[{x:this.startPoint.x,y:this.startPoint.y},{x:this.currentPosition.x,y:this.currentPosition.y}]}};this.drawingObject=this.commandHandler.drawObject(o)}},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction){var i=this.drawingObject.shape;if(this.drawingObject&&this.currentPosition&&(i.points[i.points.length-1].x=this.currentPosition.x,i.points[i.points.length-1].y=this.currentPosition.y,this.drawingObject.wrapper.children[0].data=Object(a["b"])(this.drawingObject.shape.points),this.inAction&&!1===r["a"].equals(this.currentPosition,this.prevPosition))){var n=W["a"].toBounds(this.drawingObject.shape.points);this.commandHandler.updateNodeDimension(this.drawingObject,n)}}return!0},e.prototype.mouseUp=function(e,i){this.checkPropertyValue(),t.prototype.mouseMove.call(this,e),this.inAction&&(this.inAction=!1,this.drawingObject&&this.commandHandler.addObjectToDiagram(this.drawingObject)),this.endAction()},e.prototype.mouseWheel=function(e){t.prototype.mouseWheel.call(this,e),this.mouseMove(e)},e.prototype.endAction=function(){this.inAction=!1,this.drawingObject=null},e}(yt),zt=function(t){function e(e){return t.call(this,e,!0)||this}return mt(e,t),e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction){var i=this.drawingObject;i.targetPoint=this.currentPosition,this.commandHandler.updateConnectorPoints(i)}return!0},e.prototype.mouseDown=function(e){if(t.prototype.mouseDown.call(this,e),this.inAction=!0,this.drawingObject){var i=this.drawingObject,n=void 0;n=new z["d"](i,"segments",{type:"Straight"},!0),n.point=this.currentPosition,i.segments[i.segments.length-1]=n}else{var o={id:"Connector",type:"Straight",sourcePoint:this.currentPosition,targetPoint:this.currentPosition};this.drawingObject=this.commandHandler.drawObject(o)}},e.prototype.mouseWheel=function(e){t.prototype.mouseWheel.call(this,e),this.mouseMove(e)},e.prototype.mouseUp=function(e){this.checkPropertyValue(),t.prototype.mouseMove.call(this,e),this.inAction&&this.drawingObject&&this.commandHandler.addObjectToDiagram(this.drawingObject),this.endAction()},e.prototype.endAction=function(){this.drawingObject=null,this.inAction=!1},e}(yt),Lt=function(t){function e(e){return t.call(this,e,!0)||this}return mt(e,t),e.prototype.mouseDown=function(e){this.inAction=!0,this.undoElement=Object(s["b"])(e.source),this.annotationId=e.sourceWrapper.id,t.prototype.mouseDown.call(this,e)},e.prototype.mouseMove=function(e){t.prototype.mouseMove.call(this,e);var i=this.currentPosition.x-this.prevPosition.x,n=this.currentPosition.y-this.prevPosition.y,o=e.source;if(o instanceof A["q"]){var r=Object(m["a"])();Object(m["c"])(r,-o.rotateAngle,0,0);var a=Object(m["e"])(r,{x:i,y:n});i=a.x,n=a.y}return this.inAction&&(this.commandHandler.labelDrag(e.source,e.sourceWrapper,i,n),this.commandHandler.updateSelector()),this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue();var i=e.source;this.inAction=!1;var n={type:"AnnotationPropertyChanged",objectId:this.annotationId,undoObject:Object(s["b"])(this.undoElement),category:"Internal",redoObject:Object(s["b"])(i)};this.commandHandler.addHistoryEntry(n),t.prototype.mouseUp.call(this,e)},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e}(yt),Et=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.corner=i,n}return mt(e,t),e.prototype.mouseDown=function(e){this.inAction=!0;var i=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0];this.annotationId=e.source.wrapper.children[0].id,this.undoElement=Object(s["b"])(i);var n=e.source.wrapper.children[0];this.initialBounds={x:n.offsetX,y:n.offsetY,width:n.actualSize.width,height:n.actualSize.height},t.prototype.mouseDown.call(this,e)},e.prototype.mouseMove=function(e){return t.prototype.mouseMove.call(this,e),this.inAction&&this.resizeObject(e),!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue();var i=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0];this.inAction=!1;var n={type:"AnnotationPropertyChanged",objectId:this.annotationId,redoObject:Object(s["b"])(i),undoObject:Object(s["b"])(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(n),t.prototype.mouseUp.call(this,e)},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.resizeObject=function(t){var e;e=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0];var i,n,o=t.source.wrapper.children[0],r={x:o.offsetX,y:o.offsetY},a=o.rotateAngle;a+=e instanceof A["q"]?e.rotateAngle:0,a=(a+360)%360;var s=Object(m["a"])();Object(m["c"])(s,a,r.x,r.y);var c=this.corner.slice(5),h=this.updateSize(o,this.startPosition,this.currentPosition,c,this.initialBounds,a),d=o.offsetX-o.actualSize.width*o.pivot.x,l=o.offsetY-o.actualSize.height*o.pivot.y,p=this.getPivot(c);p={x:d+o.actualSize.width*p.x,y:l+o.actualSize.height*p.y};var u=Object(m["e"])(s,p);h.x=u.x,h.y=u.y,i=h.width,n=h.height,i=i<0?1:i,n=n<0?1:n,this.commandHandler.labelResize(e,t.source.annotation,i,n,h,t.source),this.commandHandler.updateSelector()},e}(yt),Dt=function(t){function e(e){return t.call(this,e,!0)||this}return mt(e,t),e.prototype.mouseDown=function(e){this.inAction=!0,this.annotationId=e.source.wrapper.children[0].id;var i=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0];this.undoElement=Object(s["b"])(i),t.prototype.mouseDown.call(this,e)},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),e.source&&this.inAction){var i=e.source.nodes[0]?e.source.nodes[0]:e.source.connectors[0],n=void 0;n=e.source.annotation,this.commandHandler.labelRotate(i,n,this.currentPosition,e.source),this.commandHandler.updateSelector()}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.inAction=!1;var i=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0],n={type:"AnnotationPropertyChanged",objectId:this.annotationId,redoObject:Object(s["b"])(i),undoObject:Object(s["b"])(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(n),t.prototype.mouseUp.call(this,e)},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e}(yt),kt=i("3b21"),Rt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Mt=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.endPoint=i,n}return Rt(e,t),e.prototype.mouseDown=function(e){var i,n=!0;if(e.source&&e.source.connectors&&(i=e.source.connectors[0]),e.info&&(n=e.info.ctrlKey&&"Orthogonal"!==e.actualObject.type),i&&n){this.inAction=!0,this.undoElement=Object(s["b"])(e.source),t.prototype.mouseDown.call(this,e);for(var o=0;o<i.segments.length;o++){var r=i.segments[o];if("OrthoThumb"===this.endPoint)for(var a=0;a<r.points.length-1;a++){var c={x:0,y:0};c.x=(r.points[a].x+r.points[a+1].x)/2,c.y=(r.points[a].y+r.points[a+1].y)/2,dt(this.currentPosition,c,30)&&(this.selectedSegment=r,this.segmentIndex=a)}else dt(this.currentPosition,r.point,10)&&(this.selectedSegment=r)}}},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.currentPosition=e.position,this.currentPosition&&this.prevPosition){var i=this.currentPosition.y-this.prevPosition.y,n=this.currentPosition.x-this.prevPosition.x;this.currentPosition=this.commandHandler.snapConnectorEnd(this.currentPosition);var o=void 0;if(e.source&&e.source.connectors&&(o=e.source.connectors[0]),this.inAction&&void 0!==this.selectedSegment&&void 0!==this.endPoint&&(0!==n||0!==i)){if("OrthoThumb"===this.endPoint)this.blocked=!this.dragOrthogonalSegment(o,this.selectedSegment,this.currentPosition,this.segmentIndex);else{var r=this.currentPosition.x-this.selectedSegment.point.x,a=this.currentPosition.y-this.selectedSegment.point.y,s=o.segments.indexOf(this.selectedSegment);this.blocked=!this.commandHandler.dragControlPoint(o,r,a,!1,s)}this.commandHandler.updateSelector()}}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseUp=function(e){var i,n;if(e.source&&e.source.connectors&&(i=e.source.connectors[0],n={segments:i.segments}),e&&e.source&&e.info&&e.info.ctrlKey&&e.info.shiftKey&&"Straight"===i.type)this.addOrRemoveSegment(i,this.currentPosition);else if("OrthoThumb"===this.endPoint&&this.selectedSegment){var o=i.segments.indexOf(this.selectedSegment),a=i.segments[o-1],c=i.segments[o+1];if(o===i.segments.length-2&&this.updateLastSegment(i,this.selectedSegment))i.segments.splice(i.segments.length-2,1);else if(a&&Math.abs(a.length)<5)1!==o&&this.removePrevSegment(i,o);else if(c){var h=r["a"].distancePoints(c.points[0],c.points[1]),d=c.length||0===c.length?c.length:h;Math.abs(d)<=5&&this.removeNextSegment(i,o)}this.commandHandler.updateEndPoint(i,n)}if(this.undoElement){var l=void 0;l=Object(s["b"])(e.source);var p={type:"SegmentChanged",redoObject:l,undoObject:this.undoElement,category:"Internal"};this.commandHandler.addHistoryEntry(p)}t.prototype.mouseUp.call(this,e)},e.prototype.removePrevSegment=function(t,e){var i=t.segments[e-2],o=t.segments[e+1],a=o.length||0===o.length?o.length:r["a"].distancePoints(o.points[0],o.points[1]);if(!(a<=5)){var s=t.segments.slice(e-1,e+1),c={element:t,removeSegments:s,type:"Removal",cancel:!1};if(Object(n["D"])()&&(c={element:Object(d["h"])(t),removeSegments:Object(d["h"])(s),type:"Removal",cancel:c.cancel}),this.commandHandler.triggerEvent(y["e"].segmentCollectionChange,c),!c.cancel){var h=t.segments[e+1];t.segments.splice(e-1,2);var l=this.selectedSegment;"Left"===l.direction||"Right"===l.direction?(i.points[i.points.length-1].x=h.points[0].x,h.points[0].y=i.points[i.points.length-1].y):(i.points[i.points.length-1].y=h.points[0].y,h.points[0].x=i.points[i.points.length-1].x),(l.length||0===l.length)&&this.findSegmentDirection(i),this.findSegmentDirection(h)}}},e.prototype.findSegmentDirection=function(t){t.direction&&(t.length||0===t.length)&&(t.length=r["a"].distancePoints(t.points[0],t.points[t.points.length-1]),t.direction=r["a"].direction(t.points[0],t.points[t.points.length-1]))},e.prototype.removeNextSegment=function(t,e){var i,o,a=this.selectedSegment,s=t.segments[e-1],c=t.segments[e+2],h=t.segments[e+1];if(h.length||0===h.length?(i=t.segments.slice(e,2),o={element:t,removeSegments:i,type:"Removal",cancel:!1},o={element:Object(d["h"])(t),removeSegments:Object(d["h"])(i),type:"Removal",cancel:!1},Object(n["D"])()&&(o={element:Object(d["h"])(t),removeSegments:Object(d["h"])(i),type:"Removal",cancel:!1}),this.commandHandler.triggerEvent(y["e"].segmentCollectionChange,o),o.cancel||(t.segments.splice(e,2),"Top"===a.direction||"Bottom"===a.direction?(c.points[0].y=a.points[0].y,s.points[s.points.length-1].x=c.points[0].x):(c.points[0].x=a.points[0].x,s.points[s.points.length-1].y=c.points[0].y))):(i=t.segments.slice(e+1,1),o={element:t,removeSegments:i,type:"Removal",cancel:!1},Object(n["D"])()&&(o={element:t,removeSegments:i,type:"Removal",cancel:!1}),this.commandHandler.triggerEvent(y["e"].segmentCollectionChange,o),o.cancel||(t.segments.splice(e+1,1),"Top"===a.direction||"Bottom"===a.direction?s.points[s.points.length-1].x=h.points[h.points.length-1].x:s.points[s.points.length-1].y=h.points[h.points.length-1].y,this.findSegmentDirection(s),a.length=a.direction=null)),s&&c&&!o.cancel&&(s.length=r["a"].distancePoints(s.points[0],c.points[0]),s.direction=r["a"].direction(s.points[0],c.points[0]),c.length||0===c.length)){c.length=r["a"].distancePoints(s.points[s.points.length-1],c.points[c.points.length-1]);var l=s.points,p=c.points;c.direction=r["a"].direction(l[l.length-1],p[p.length-1])}},e.prototype.addOrRemoveSegment=function(t,e){for(var i,n,o={segments:t.segments},r=0;r<t.segments.length;r++){var a=t.segments[r];dt(e,a.point,t.hitPadding)&&(n=r,i=!0)}if(i&&void 0!==n){if(t.segments&&t.segments[n]&&"Straight"===t.segments[n].type){a=t.segments[n];var s=t.segments[n+1];s&&(t.segments.splice(n,1),s.points[0]=a.points[0])}}else{var c=this.findIndex(t,e);if(t.segments&&t.segments[c]&&"Straight"===t.segments[c].type){a=t.segments[c];var h=new z["d"](t,"segments",{type:"Straight",point:e},!0);h.points[0]=a.points[0],h.points[1]=e,a.points[0]=e,t.segments.splice(c,0,h),i=!0}}i&&this.commandHandler.updateEndPoint(t,o)},e.prototype.findIndex=function(t,e){for(var i=[],n=0;n<t.segments.length;n++){var o=t.segments[n],r=W["a"].toBounds([o.points[0],o.points[1]]);r.Inflate(t.hitPadding),r.containsPoint(e)&&i.push(o)}if(1===i.length)return t.segments.indexOf(i[0]);var a=void 0,s=void 0,c=void 0,h=void 0,d=void 0,l=void 0;for(n=0;n<i.length;n++)h=i[n],d=(e.y-h.points[0].y)/(h.points[1].y-e.y),l=(e.x-h.points[0].x)/(h.points[1].x-e.x),a=Math.abs(d-l),0===n&&(s=a,c=0),a<s&&(s=a,c=n);return t.segments.indexOf(i[c])},e.prototype.dragOrthogonalSegment=function(t,e,i,n){var o={x:0,y:0},r={segments:t.segments};o.x=(e.points[n].x+e.points[n+1].x)/2,o.y=(e.points[n].y+e.points[n+1].y)/2;var a=i.y-o.y,s=i.x-o.x,c=t.segments.indexOf(e),h=!1;e.points[0].y.toFixed(2),e.points[1].y.toFixed(2);return-1!==c&&(0===c&&1===t.segments.length&&2===e.points.length?(c=this.addSegments(t,e,s,a,c),h=!0):c!==t.segments.length-1||null!==e.direction&&null!==e.length?0===c&&(c=this.insertFirstSegment(t,e,s,a,c),h=!0):(c=this.addTerminalSegment(t,e,s,a,n),h=!0),c&&(h&&(this.selectedSegment=e=t.segments[c],this.segmentIndex=0),this.updateAdjacentSegments(t,c,s,a),this.commandHandler.updateEndPoint(t,r))),!0},e.prototype.addSegments=function(t,e,i,o,a){var s,c,h,l=[],p=r["a"].distancePoints(e.points[0],e.points[1]),u=r["a"].direction(e.points[0],e.points[1]);l.push(new z["c"](t,"segments",{type:"Orthogonal",direction:u,length:p/4},!0)),c=e.points[0].y===e.points[1].y?o>0?"Bottom":"Top":i>0?"Right":"Left",h=e.points[0].x===e.points[1].x?o:i,l.push(new z["c"](t,"segments",{type:"Orthogonal",direction:c,length:h},!0)),l.push(new z["c"](t,"segments",{type:"Orthogonal",direction:u,length:p/2},!0));var g={element:t,addSegments:l,type:"Addition",cancel:!1};return Object(n["D"])()&&(g={addSegments:Object(d["h"])(l),type:"Addition",cancel:g.cancel,element:Object(d["h"])(t)}),this.commandHandler.triggerEvent(y["e"].segmentCollectionChange,g),g.cancel||(t.segments=l.concat(t.segments),s=a+2),s},e.prototype.insertFirstSegment=function(t,e,i,o,a){var s,c,h,l,p,u=[];if(t.sourcePortID&&e.length&&t.segments[0].points.length>2)for(var g=void 0,f=0;f<e.points.length-1;f++){var m=r["a"].distancePoints(e.points[f],e.points[f+1]),v=r["a"].direction(e.points[f],e.points[f+1]);p=new z["c"](t,"segments",{type:"Orthogonal",direction:v,length:m},!0),0===p.length&&(!g||"Top"!==g.direction&&"Bottom"!==g.direction?p.direction=o>0?"Bottom":"Top":p.direction=i>0?"Right":"Left"),g=p,u.push(p)}else h={type:"Orthogonal",direction:e.direction,length:e.length/3},u.push(new z["c"](t,"segments",h,!0)),"Bottom"===e.direction||"Top"===e.direction?(c=Math.abs(i),s=i>0?"Right":"Left"):(c=Math.abs(o),s=o>0?"Bottom":"Top"),p=new z["c"](t,"segments",{type:"Orthogonal",direction:s,length:c},!0),u.push(p);var b={element:t,addSegments:u,type:"Addition",cancel:!1};if(Object(n["D"])()&&(b={element:Object(d["h"])(t),addSegments:Object(d["h"])(u),type:"Addition",cancel:b.cancel}),this.commandHandler.triggerEvent(y["e"].segmentCollectionChange,b),!b.cancel){if(t.sourcePortID&&e.length&&t.segments[0].points.length>2)t.segments.splice(0,1),l=1;else{var w=t.segments[1];w&&w.length&&(w.length=s!==w.direction?w.length+c:w.length-c),l=2,e.length=2*e.length/3}t.segments=u.concat(t.segments)}return l},e.prototype.updateAdjacentSegments=function(t,e,i,n){var o=t.segments[e],r=o.points[o.points.length-1],a=o.points[0],s=!0;if("Orthogonal"===o.type){o.points[0]=a,o.points[o.points.length-1]=r;var c=t.segments[e-1];if(c&&(s=this.updatePreviousSegment(i,n,t,e)),t.segments.length-1>e&&s){var h=t.segments[e+1];this.updateNextSegment(t,o,h,i,n)}}},e.prototype.addTerminalSegment=function(t,e,i,o,a){t.segments;var s,c,h,l,p=t.segments.indexOf(e),u=[],g=t.segments.pop(),f=t.segments[t.segments.length-1];s=f&&"Orthogonal"===f.type?f:null;for(var m=0;m<e.points.length-2;m++)h=r["a"].distancePoints(e.points[m],e.points[m+1]),l=r["a"].direction(e.points[m],e.points[m+1]),c=new z["c"](t,"segments",{type:"Orthogonal",length:h,direction:l},!0),u.push(c),s=c;var v=a;if((2===e.points.length||v===e.points.length-2)&&(s&&(s.length+=5),void 0!==v)){var b=void 0;h=2*r["a"].distancePoints(e.points[e.points.length-2],e.points[e.points.length-1])/3,l=r["a"].direction(e.points[e.points.length-2],e.points[e.points.length-1]),b=new z["c"](t,"segments",{type:"Orthogonal",length:h,direction:l}),u.push(b)}var w=new z["c"](t,"segments",{type:"Orthogonal"},!0);u.push(w);var O,x={element:t,addSegments:u,type:"Addition",cancel:!1};return O={element:Object(d["h"])(t),addSegments:Object(d["h"])(u),type:"Addition",cancel:x.cancel},Object(n["D"])()&&(O={element:Object(d["h"])(t),addSegments:Object(d["h"])(u),type:"Addition",cancel:x.cancel}),this.commandHandler.triggerEvent(y["e"].segmentCollectionChange,O),O.cancel?t.segments.push(g):(t.segments=t.segments.concat(u),p+=a),this.commandHandler.updateEndPoint(t),p},e.prototype.updatePortSegment=function(t,e,i,n,o){if(1===i&&2===t.points.length&&t.length<0){var r=e.sourceWrapper.corners,a=e.segments[i],s=e.segments[i+1],c=void 0,h=[];c=new z["c"](e,"segments",{type:"Orthogonal",length:13,direction:t.direction}),h.push(c);var d=void 0;d="Left"===a.direction?a.points[0].x-(r.middleLeft.x-20):"Right"===a.direction?r.middleRight.x+20-a.points[0].x:"Bottom"===a.direction?r.bottomCenter.y+20-a.points[0].y:a.points[0].y-(r.topCenter.y-20);a.direction;c=new z["c"](e,"segments",{type:"Orthogonal",length:d,direction:a.direction}),h.push(c),a.length=a.length-d,s&&s.length&&s.direction&&(s.direction===t.direction?s.length-=13:s.direction===Object(kt["e"])(t.direction)&&(s.length+=13)),e.segments=h.concat(e.segments),this.selectedSegment=e.segments[3]}},e.prototype.updatePreviousSegment=function(t,e,i,n){var o=i.segments[n],r=i.segments[n-1];r.points[r.points.length-1]=o.points[0];var a=!i.sourceID||""!==i.sourcePortID,s=!0;return"Orthogonal"===r.type&&("Bottom"===r.direction?r.length+=e:"Top"===r.direction?r.length-=e:"Right"===r.direction?r.length+=t:r.length-=t,""!==i.sourcePortID&&r.length<0?this.updatePortSegment(r,i,n,t,e):i.sourceID&&""===i.sourcePortID&&r.length<0&&1===n&&(s=!1,this.updateFirstSegment(i,o)),a&&this.changeSegmentDirection(r)),s},e.prototype.changeSegmentDirection=function(t){t.length<0&&(t.direction=Object(kt["e"])(t.direction),t.length*=-1)},e.prototype.updateNextSegment=function(t,e,i,n,o){e.points[e.points.length-1];i.points[0]=e.points[e.points.length-1],i&&"Orthogonal"===i.type&&(i.length||0===i.length)&&("Left"===i.direction||"Right"===i.direction?0!==n&&(i.length="Right"===i.direction?i.length-n:i.length+n,(i.length||0===i.length)&&this.changeSegmentDirection(i)):0!==o&&(i.length="Bottom"===i.direction?i.length-o:i.length+o,(i.length||0===i.length)&&this.changeSegmentDirection(i)))},e.prototype.updateFirstSegment=function(t,e){var i,n=t.segments.indexOf(e),o=!1,a=t.segments[n],s=t.segments[n-1],c={segments:t.segments};if(s.length<0&&t.sourceID){var h=t.sourceWrapper.corners,d=[],l=void 0,p=!1;this.changeSegmentDirection(a);var u=t.segments[n+1],g=t.segments[n+2];switch(u&&this.changeSegmentDirection(u),g&&this.changeSegmentDirection(g),s.direction){case"Top":case"Bottom":i=a.length>0&&"Left"===a.direction?h.middleLeft:h.middleRight,a.length>h.width/2?Math.abs(s.length)<h.height/2&&(s.length=r["a"].distancePoints(h.center,s.points[s.points.length-1]),a.points[0].x=i.x,a.length=r["a"].distancePoints(a.points[0],a.points[a.points.length-1]),a.length-=20,o=!0):(u&&u.direction&&u.length&&(u.points[0].y=i.y,u.points[0].x=u.points[u.points.length-1].x="Right"===a.direction?i.x+20:i.x-20),o=!0,p=!0);break;case"Left":case"Right":i=a.length>0&&"Top"===a.direction?h.topCenter:h.bottomCenter,a.length>h.height/2?Math.abs(s.length)<h.width/2&&(s.length=r["a"].distancePoints(h.center,s.points[s.points.length-1]),a.points[0].y=i.y,a.length=r["a"].distancePoints(a.points[0],a.points[a.points.length-1]),a.length-=20,o=!0):(u&&u.direction&&u.length&&(u.points[0].x=i.x,u.points[0].y=u.points[u.points.length-1].y="Bottom"===a.direction?i.y+20:i.y-20),o=!0,p=!0);break}this.changeSegmentDirection(s),this.changeSegmentDirection(a),o&&(l={type:"Orthogonal",direction:a.direction,length:20},d.push(new z["c"](t,"segments",l,!0)),p&&(u&&u.direction&&u.length&&(u.length=r["a"].distancePoints(u.points[0],u.points[u.points.length-1])),g&&g.direction&&g.length&&(g.length=r["a"].distancePoints(u.points[u.points.length-1],g.points[g.points.length-1])),t.segments.splice(n-1,2)),t.segments=d.concat(t.segments)),this.selectedSegment=p?t.segments[n-1]:t.segments[n+1],this.commandHandler.updateEndPoint(t,c)}},e.prototype.updateLastSegment=function(t,e){if(t.targetID&&""===t.targetPortID){var i=void 0,n=void 0,o=void 0,r=void 0,a=t.targetWrapper.corners,s=e.points[0],c=e.points[e.points.length-1];"Right"===e.direction||"Left"===e.direction?(i={x:s.x,y:s.y},n={x:"Left"===e.direction?c.x-a.width/2:c.x+a.width/2,y:c.y},o={x:a.center.x,y:a.center.y-a.height},r={x:a.center.x,y:a.center.y+a.height}):(i={x:s.x,y:s.y},n={x:c.x,y:"Bottom"===e.direction?c.y+a.height/2:c.y-a.height/2},o={x:a.center.x-a.width,y:a.center.y},r={x:a.center.x+a.width,y:a.center.y});var h={x1:i.x,y1:i.y,x2:n.x,y2:n.y},l={x1:o.x,y1:o.y,x2:r.x,y2:r.y};return Object(d["G"])(h,l).enabled}return!1},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"ConnectorEditingTool"},e}(yt),Bt=i("f1ba"),Ht=i("b46f"),Nt=function(){function t(t,e){this.currentAction="None",this.previousAction="None",this.focus=!1,this.isBlocked=!1,this.isMouseDown=!1,this.inAction=!1,this.doingAutoScroll=!1,this.diagram=null,this.objectFinder=null,this.tool=null,this.eventArgs=null,this.diagram=t,this.objectFinder=new Wt,this.commandHandler=e}return Object.defineProperty(t.prototype,"action",{get:function(){return this.currentAction},set:function(t){t!==this.currentAction&&("PortDraw"===this.currentAction&&(this.diagram.tool&=~y["f"].DrawOnce,this.tool&&this.tool.mouseUp({position:this.currentPosition}),this.tool=null),"Rotate"===t||"LabelRotate"===t?this.diagram.diagramCanvas.classList.add("e-diagram-rotate"):"Rotate"!==this.currentAction&&"LabelRotate"!==this.currentAction||this.diagram.diagramCanvas.classList.remove("e-diagram-rotate"),this.currentAction=t,"None"===this.currentAction||"Select"===this.currentAction||this.diagram.diagramActions&y["c"].TextEdit?this.diagram.diagramActions=this.diagram.diagramActions&~y["c"].ToolAction:this.diagram.diagramActions=this.diagram.diagramActions|y["c"].ToolAction,this.diagram.setCursor(this.diagram.getCursor(t,this.inAction)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blocked",{get:function(){return this.isBlocked},set:function(t){this.isBlocked=t,this.blocked?this.diagram.setCursor("not-allowed"):this.diagram.setCursor(this.diagram.getCursor(this.action,this.inAction))},enumerable:!0,configurable:!0}),t.prototype.getMousePosition=function(t){var e,i,n;-1!==t.type.indexOf("touch")?(e=t,i=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY):(i=t.clientX,n=t.clientY);var r=new o["a"];r=Object(N["b"])(this.diagram);var a=this.diagram.element.getBoundingClientRect();return i=i+this.diagram.diagramCanvas.scrollLeft-a.left-r.width,n=n+this.diagram.diagramCanvas.scrollTop-a.top-r.height,i/=this.diagram.scroller.transform.scale,n/=this.diagram.scroller.transform.scale,i-=this.diagram.scroller.transform.tx,n-=this.diagram.scroller.transform.ty,{x:i,y:n}},t.prototype.windowResize=function(t){var e=this;return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout((function(){e.updateViewPortSize(e.diagram.element)}),300),!1},t.prototype.updateViewPortSize=function(t){var e=document.getElementById(t.id);if(e){var i=e.getBoundingClientRect();this.diagram.scroller.setViewPortSize(i.width,i.height);var n=new o["a"];n=Object(N["b"])(this.diagram);var r=this.diagram.getSizeValue(this.diagram.width,n.width),a=this.diagram.getSizeValue(this.diagram.height,n.height);this.diagram.diagramCanvas.style.width=r,this.diagram.diagramCanvas.style.height=a,this.diagram.scroller.setSize(),this.diagram.transformLayers(),this.diagram.rulerSettings.showRulers&&Object(N["g"])(this.diagram)}},t.prototype.canHideResizers=function(){return(this.tool instanceof wt||this.tool instanceof Ot)&&this.isMouseDown},t.prototype.updateCursor=function(){if(1===this.diagram.selectedItems.nodes.length||1===this.diagram.selectedItems.connectors.length){var t=[];t=t.concat(this.diagram.selectedItems.nodes,this.diagram.selectedItems.connectors),this.blocked=this.isMouseDown&&1===t.length&&this.tool instanceof vt&&!Object(w["o"])(t[0])}},t.prototype.isForeignObject=function(t,e){var i=t;if(i)while(null!==i.parentNode){if("string"===typeof i.className&&(!e&&-1!==i.className.indexOf("foreign-object")||e&&-1!==i.className.indexOf("e-diagram-text-edit")))return i;i=i.parentNode}return null},t.prototype.isMetaKey=function(t){return navigator.platform.match("Mac")?t.metaKey:t.ctrlKey},t.prototype.renderUmlHighLighter=function(t){this.diagram.commandHandler.removeStackHighlighter();var e=this.diagram.selectedItems.nodes[0];if(e&&e.container&&"Stack"===e.container.type&&"UmlClassifier"===e.shape.type){var i=e.wrapper.bounds;if(!i.containsPoint(this.currentPosition)){var n=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x-20,y:this.currentPosition.y}),o=this.diagram.findObjectUnderMouse(n,this.action,this.inAction);if(o&&o.parentId&&o.parentId===e.id){var r="Vertical"===this.diagram.nameTable[o.parentId].container.orientation;Object(nt["h"])(o.wrapper,r,t.position,this.diagram,!0)}}}},t.prototype.isDeleteKey=function(t,e){return navigator.platform.match("Mac")&&"Backspace"===t&&"delete"===e},t.prototype.isMouseOnScrollBar=function(t){var e,i,n,o,r,a=t.offsetX,s=t.offsetY,c=this.diagram.diagramCanvas,h=c.offsetHeight,d=c.offsetWidth;return!!(h<c.scrollHeight&&(e={x:d-17,y:0},i={x:d,y:0},n={x:d-17,y:h},o={x:d,y:h},r=W["a"].toBounds([e,i,n,o]),r.containsPoint({x:a,y:s})))||!!(d<c.scrollWidth&&(e={x:0,y:h-17},i={x:d,y:h-17},n={x:0,y:h},o={x:d,y:h},r=W["a"].toBounds([e,i,n,o]),r.containsPoint({x:a,y:s})))},t.prototype.updateVirtualization=function(){var t,e=this,i=50;t=setInterval((function(i){e.diagram.removeVirtualObjects(t)}),i),setTimeout((function(){e.diagram.deleteVirtualObject=!0}),i)},t.prototype.checkPreviousAction=function(){if(this.action!==this.previousAction&&this.diagram.selectedItems.userHandles.length)for(var t=0;t<this.diagram.selectedItems.userHandles.length;t++)this.previousAction&&this.diagram.selectedItems.userHandles[t]&&(this.checkUserHandleEvent(y["e"].onUserHandleMouseLeave),this.previousAction="None")},t.prototype.checkUserHandleEvent=function(t){if(this.diagram.selectedItems&&this.diagram.selectedItems.userHandles.length>0)for(var e=t===y["e"].onUserHandleMouseLeave?this.previousAction:this.action,i={element:void 0},n=0;n<this.diagram.selectedItems.userHandles.length;n++)e===this.diagram.selectedItems.userHandles[n].name&&(i.element=this.diagram.selectedItems.userHandles[n],t===y["e"].onUserHandleMouseEnter&&(this.previousAction=this.action),this.diagram.triggerEvent(t,i))},t.prototype.mouseDown=function(t){var e;if(this.focus=!0,e=t.touches,this.isMouseOnScrollBar(t))return this.isScrolling=!0,void t.preventDefault();if(this.checkUserHandleEvent(y["e"].onUserHandleMouseDown),!this.checkEditBoxAsTarget(t)&&Object(w["D"])(this.diagram)||Object(w["G"])(this.diagram)&&!Object(w["I"])(this.diagram))if("Select"!==this.action&&"Drag"!==this.action||this.diagram.updatePortVisibility(this.hoverElement,y["m"].Hover,!0),!(this.tool instanceof At||this.tool instanceof zt)||2!==t.button&&2!==t.buttons)if(!0===this.inAction&&!0===this.isMouseDown&&(this.tool instanceof At||this.tool instanceof zt))this.isMouseDown=!0,this.eventArgs={},this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.eventArgs.position=this.currentPosition,this.tool.mouseDown(this.eventArgs);else{this.isMouseDown=!0,this.currentPosition=this.prevPosition=this.getMousePosition(t),this.eventArgs={},this.diagram.textEditing&&!this.isMouseOnScrollBar(t)&&(this.diagram.endEdit(),this.diagram.textEditing=!1);var i=void 0,n=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action),o=this.objectFinder.findObjectUnderMouse(this.diagram,n,this.action,this.inAction,this.eventArgs,t),r=null;null!==o&&(r=this.diagram.findElementUnderMouse(o,this.currentPosition),r&&(i=this.commandHandler.findTarget(r,o))),this.action=this.diagram.findActionToBeDone(o,r,this.currentPosition,i);var a=this.isMetaKey(t);if(a&&t.shiftKey&&this.diagram.connectorEditingToolModule?this.action="SegmentEnd":!a&&!t.shiftKey||Object(w["G"])(this.diagram)||(this.action="Select"),this.tool=this.diagram.getTool(this.action),this.tool||(this.action="Select",this.tool=this.diagram.getTool(this.action)),this.getMouseEventArgs(this.currentPosition,this.eventArgs),a||t.shiftKey){var s=a&&t.shiftKey?{ctrlKey:a,shiftKey:t.shiftKey}:{ctrlKey:!0};this.eventArgs.info=s}this.eventArgs.position=this.currentPosition,this.tool.mouseDown(this.eventArgs),this.initialEventArgs={source:this.eventArgs.source,sourceWrapper:this.eventArgs.sourceWrapper},this.initialEventArgs.position=this.currentPosition,this.initialEventArgs.info=this.eventArgs.info,this.inAction=!1,"touchstart"===t.type&&(e&&e.length>=2&&(this.touchStartList=Object(c["a"])(this.touchStartList,t,e)),e||t.preventDefault())}else{Object(d["h"])(this.diagram),Object(d["h"])(this.currentPosition),t.buttons,Object(d["h"])(this.eventArgs.actualObject);this.inAction=!1,this.tool.mouseUp(this.eventArgs)}this.isForeignObject(t.target)||this.isForeignObject(t.target,!0)||e||t.preventDefault()},t.prototype.mouseMoveExtend=function(t,e){(this.tool instanceof At||this.tool instanceof zt)&&this.tool.mouseMove(this.eventArgs),this.diagram.scrollSettings.canAutoScroll?this.checkAutoScroll(t):this.blocked||this.tool.mouseMove(this.eventArgs),this.eventArgs.target&&(this.hoverElement=this.eventArgs.target);var i=!(this.eventArgs.target instanceof A["q"]&&e instanceof A["q"]);this.tool instanceof bt&&this.diagram.updatePortVisibility(this.hoverElement instanceof A["q"]?this.hoverElement:this.hoverNode,y["m"].Connect|y["m"].Hover,i),this.hoverElement instanceof A["q"]&&this.hoverNode instanceof A["q"]&&this.hoverNode&&this.hoverNode.id!==this.hoverElement.id&&this.diagram.updatePortVisibility(this.hoverNode,y["m"].Connect|y["m"].Hover,!0),this.hoverElement=i?null:e,this.hoverNode=i?null:e},t.prototype.checkAction=function(t){if("LabelSelect"===this.action&&this.eventArgs.sourceWrapper&&(this.eventArgs.sourceWrapper instanceof g["a"]||this.eventArgs.sourceWrapper instanceof b["a"])){var e=this.commandHandler.findTarget(this.eventArgs.sourceWrapper,this.eventArgs.source);!ut(this.diagram,e,!1,this.eventArgs.sourceWrapper)&&Object(w["o"])(e)&&(this.action="LabelDrag",this.tool=this.getTool(this.action),this.tool.mouseDown(this.initialEventArgs))}else Object(w["o"])(t)&&Object(w["A"])(t)&&this.initialEventArgs&&this.initialEventArgs.source&&"Select"===this.action&&(!ut(this.diagram,this.eventArgs.source,!1)&&this.eventArgs.source instanceof A["t"]&&this.getMouseEventArgs(this.currentPosition,this.eventArgs),t instanceof z["b"]&&(!(t instanceof z["b"])||dt(this.currentPosition,t.sourcePoint,t.hitPadding)||dt(this.currentPosition,t.targetPoint,t.hitPadding))||(this.action="Drag"),this.tool=this.getTool(this.action),this.tool.mouseDown(this.initialEventArgs))},t.prototype.isSwimlaneElements=function(t){return!t||!(t.isLane||t.isPhase||t.isHeader)},t.prototype.mouseMove=function(t,e){if(this.focus=!0,this.isScrolling)t.preventDefault();else if(Object(w["D"])(this.diagram)||Object(w["G"])(this.diagram)&&!Object(w["I"])(this.diagram)){this.currentPosition=this.getMousePosition(t);var i=this.diagram.findObjectsUnderMouse(this.currentPosition),n=this.diagram.findObjectUnderMouse(i,this.action,this.inAction);Object(N["a"])(this.diagram,this.currentPosition);var o=!1,a=void 0;if("touchmove"===t.type&&(e=t.touches,e&&e.length>1&&(this.touchMoveList=Object(c["a"])(this.touchMoveList,t,e),"PinchZoom"!==this.action&&(o=!0))),!1===r["a"].equals(this.currentPosition,this.prevPosition)||this.inAction){if(!1===this.isMouseDown||o){this.eventArgs={};var s=null;if(null!==n){if(s=this.diagram.findElementUnderMouse(n,this.currentPosition),n!==this.hoverElement){var h=this.getContent();this.hoverElement&&"Auto"===this.hoverElement.tooltip.openOn&&""!==h&&(this.elementLeave(),this.diagram.updatePortVisibility(this.hoverElement,y["m"].Hover,!0)),n instanceof A["q"]&&(this.hoverNode=n);var d=!0;!this.isSwimlaneElements(n)&&this.hoverElement&&this.isSwimlaneElements(this.hoverElement)&&(d=!1),this.hoverElement=d?n:this.hoverElement,this.elementEnter(this.currentPosition,!1)}else this.hoverElement||this.hoverElement!==n||this.elementEnter(this.currentPosition,!0);s&&(a=this.commandHandler.findTarget(s,n))}this.action=this.diagram.findActionToBeDone(n,s,this.currentPosition,a),this.checkUserHandleEvent(y["e"].onUserHandleMouseEnter),this.checkPreviousAction(),this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.tool=this.getTool(this.action),this.mouseEvents(),this.tool instanceof St||this.tool instanceof zt||this.tool instanceof At?this.tool.mouseMove(this.eventArgs):e&&this.tool instanceof Pt&&this.tool.mouseDown(this.eventArgs),this.updateCursor(),this.renderUmlHighLighter(this.eventArgs);var l=!1;(!this.hoverElement||this.tool instanceof Pt||!(n instanceof A["q"])||!this.isSwimlaneElements(n)||0!==this.diagram.selectedItems.nodes.length&&ut(this.diagram,this.hoverElement))&&(l=!0),this.diagram.updatePortVisibility(this.hoverElement,y["m"].Hover,l);var p=this.getContent();null===n&&this.hoverElement&&"Auto"===this.hoverElement.tooltip.openOn&&p&&(this.hoverElement=null,this.elementLeave()),o=!1}else{if(this.eventArgs.position=this.currentPosition,"Drag"===this.action&&!ut(this.diagram,this.eventArgs.source,!1)&&this.eventArgs.source instanceof A["t"]&&this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.mouseEvents(),t.ctrlKey||t.shiftKey){var u=t.ctrlKey&&t.shiftKey?{ctrlKey:t.ctrlKey,shiftKey:t.shiftKey}:{ctrlKey:!0};this.eventArgs.info=u}this.checkAction(n),this.getMouseEventArgs(this.currentPosition,this.eventArgs,this.eventArgs.source),this.updateCursor(),this.inAction=!0,this.initialEventArgs=null,"Drag"!==this.action&&"Rotate"!==this.action||(this.diagram.diagramActions=this.diagram.diagramActions|y["c"].Interactions),this.mouseMoveExtend(t,n)}this.prevPosition=this.currentPosition,this.isForeignObject(t.target,!0)||t.preventDefault()}}},t.prototype.getContent=function(){var t=this.hoverElement instanceof A["q"]&&this.hoverElement.constraints&y["k"].Tooltip||this.hoverElement instanceof z["b"]&&this.hoverElement.constraints&y["b"].Tooltip,e=t?this.hoverElement.tooltip.content:this.diagram.tooltip.content;return e},t.prototype.checkAutoScroll=function(t){var e=this.startAutoScroll(t);if(!e&&this.doingAutoScroll)this.doingAutoScroll=!1,clearInterval(this.timeOutValue);else if(e){if((this.tool instanceof wt||this.tool instanceof xt||this.tool instanceof vt)&&this.inAction){var i=this,n=100;this.diagram.scrollSettings.canAutoScroll&&e&&!this.doingAutoScroll&&(this.doingAutoScroll=!0,this.timeOutValue=setInterval((function(o){i.doAutoScroll(e,t,n)}),n))}}else this.blocked=!this.tool.mouseMove(this.eventArgs)},t.prototype.mouseUp=function(t){var e;if(this.checkUserHandleEvent(y["e"].onUserHandleMouseUp),"SVG"===this.diagram.mode&&Object(w["E"])(this.diagram)&&this.updateVirtualization(),this.diagram.previousSelectedObject=null,this.diagram.diagramRenderer.rendererActions=this.diagram.removeConstraints(this.diagram.diagramRenderer.rendererActions,y["o"].DrawSelectorBorder),e=t.touches,this.isScrolling)return this.isScrolling=!1,void t.preventDefault();if(!this.checkEditBoxAsTarget(t)&&Object(w["D"])(this.diagram)||Object(w["G"])(this.diagram)&&!Object(w["I"])(this.diagram)){if(this.tool&&(!(this.tool instanceof At||this.tool instanceof zt)||(this.tool instanceof At||this.tool instanceof zt)&&2===t.detail)){if(!this.isForeignObject(t.target)&&this.isMouseDown&&document.getElementById(this.diagram.element.id+"content").focus(),!this.inAction&&3!==t.which&&"Drag"===this.action){this.action="Select";var i=this.diagram.findObjectsUnderMouse(this.currentPosition),o=this.diagram.findObjectUnderMouse(i,this.action,this.inAction),r=!0;!t.ctrlKey&&this.isMouseDown&&this.diagram.selectedItems.nodes.length+this.diagram.selectedItems.connectors.length>1&&1===t.which&&!Object(w["x"])(this.diagram.diagramActions)&&(r=!1,this.commandHandler.clearSelection()),ut(this.diagram,o)&&r||this.commandHandler.selectObjects([o])}var a=this.updateContainerProperties(),s=void 0;if(this.addUmlNode(),this.inAction=!1,this.isMouseDown=!1,this.currentPosition=this.getMousePosition(t),this.diagram.selectedObject.helperObject&&(s=this.updateContainerBounds()),this.tool&&(this.tool.prevPosition||this.tool instanceof It)){this.eventArgs.position=this.currentPosition,this.getMouseEventArgs(this.currentPosition,this.eventArgs,this.eventArgs.source);var c=this.isMetaKey(t);if(c||t.shiftKey){var h=c&&t.shiftKey?{ctrlKey:c,shiftKey:t.shiftKey}:{ctrlKey:!0};this.eventArgs.info=h}if(this.diagram.diagramActions&y["c"].Interactions&&(this.diagram.diagramActions=this.diagram.diagramActions&~y["c"].Interactions),this.eventArgs.clickCount=t.detail,this.diagram.selectedObject.helperObject&&(this.tool instanceof wt||this.tool instanceof xt)){if(this.diagram.selectedObject.actualObject&&""!==this.diagram.selectedObject.actualObject.parentId){var l=this.diagram.getObject(this.diagram.selectedObject.actualObject.parentId);l&&l.isLane&&(this.commandHandler.isContainer=!0)}this.tool.mouseUp(this.eventArgs,a.isPreventHistory)}else this.tool.mouseUp(this.eventArgs),!this.diagram.checkMenu||-1===window.navigator.userAgent.indexOf("Linux")&&-1===window.navigator.userAgent.indexOf("X11")||(this.diagram.contextMenuModule.contextMenu.open(t.pageY,t.pageX,this.diagram.element),this.diagram.checkMenu=!1);a.hasStack&&this.diagram.endGroupAction()}if(s&&this.diagram.endGroupAction(),this.updateContainerBounds(!0),this.commandHandler.updateSelectedNodeProperties(this.eventArgs.source),this.diagram.selectedObject&&this.diagram.selectedObject.helperObject&&(this.diagram.remove(this.diagram.selectedObject.helperObject),this.diagram.selectedObject={helperObject:void 0,actualObject:void 0}),this.blocked=!1,this.hoverElement){var p=y["m"].Connect;ut(this.diagram,this.hoverElement)&&(p|=y["m"].Hover),this.diagram.updatePortVisibility(this.hoverElement,p,!0),this.hoverElement=null}this.touchStartList=null,this.touchMoveList=null,this.tool instanceof Ct||(this.tool=null)}e||t.preventDefault(),this.diagram.currentDrawingObject=void 0;var u=this.diagram.selectedItems;if(!this.inAction&&u.wrapper&&u.userHandles.length>0&&this.diagram.renderSelector(!0),!this.inAction&&!this.diagram.currentSymbol&&this.eventArgs){var g={element:Object(d["h"])(this.eventArgs.source)||Object(d["h"])(this.diagram),position:Object(d["h"])(this.eventArgs.position),count:t.detail,actualObject:Object(d["h"])(this.eventArgs.actualObject)};Object(n["D"])()&&(g=this.getBlazorClickEventArgs(g)),this.diagram.triggerEvent(y["e"].click,g)}this.eventArgs={}}this.eventArgs={},this.diagram.commandHandler.removeStackHighlighter()},t.prototype.getBlazorClickEventArgs=function(t){return t={element:this.eventArgs.source?{selector:Object(d["h"])(this.eventArgs.source)}:{diagram:Object(d["h"])(this.diagram)},position:Object(d["h"])(this.eventArgs.position),count:t.count,actualObject:this.eventArgs.actualObject?{selector:Object(d["h"])(this.eventArgs.actualObject)}:{diagram:Object(d["h"])(this.diagram)}},t},t.prototype.addSwimLaneObject=function(t){var e,i,n,o,r,a,c=0,h=t.shape,d=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action);if(i||(i=this.diagram.findObjectUnderMouse(d,this.action,this.inAction)),this.diagram.clearSelectorLayer(),i&&!(i.isLane||i.isPhase||i.isHeader))for(var l=0;l<d.length;l++){var p=this.diagram.nameTable[d[l].id];(p.isLane||p.isPhase||p.isHeader)&&(i=p)}if(i&&(h.isPhase||h.isLane&&i.isLane)){var u=i.parentId;e=this.diagram.nameTable[u]}if(e&&(n=e.shape,r=h.isLane?h.orientation===n.orientation:h.orientation!==n.orientation),r&&i){if(n.header&&n.hasHeader&&"Horizontal"===n.orientation&&(c=1),n.phases.length>0&&(c+=1),h.isPhase){a="Horizontal"===n.orientation?this.currentPosition.x-e.wrapper.bounds.x:this.currentPosition.y-(e.wrapper.bounds.y+n.header.height);var g={id:Object(s["i"])(),offset:a,header:{annotation:{content:"Phase"}}};this.diagram.addPhases(e,[g])}else{h.lanes[0].header.height;var f={id:Object(s["i"])(),style:h.lanes[0].style,header:{annotation:{content:h.lanes[0].header.annotation.content,style:h.lanes[0].header.annotation.style},style:h.lanes[0].header.style}},m="Horizontal"===h.orientation;m?f.height=h.lanes[0].height:f.width=h.lanes[0].width,"Horizontal"===n.orientation?(o=i.rowIndex?i.rowIndex:this.diagram.nameTable[i.parentId].rowIndex,i.wrapper.offsetY<this.currentPosition.y&&(o+=1)):(o=i.columnIndex?i.columnIndex:this.diagram.nameTable[i.parentId].columnIndex,this.currentPosition.x<i.wrapper.bounds.center.x&&(o-=1)),n.lanes.length>o-c?(f.header.width=n.lanes[o-c].header.width,f.header.height=n.lanes[o-c].header.height):(f.header.width=n.lanes[o-c-1].header.width,f.header.height=n.lanes[o-c-1].header.height),this.diagram.addLanes(e,[f],o-c)}this.commandHandler.select(e)}else if(h.isLane){var y={id:Object(s["i"])(),width:t.width,height:t.height,shape:{type:"SwimLane",header:{annotation:{content:"Header"},height:50,style:h.lanes[0].header.style},phases:[{id:Object(s["i"])(),header:{annotation:{content:"Phase"}}}],lanes:[{id:Object(s["i"])(),height:t.height,width:t.width,style:h.lanes[0].style,header:{annotation:{content:h.lanes[0].header.annotation.content,style:h.lanes[0].header.annotation.style},style:h.lanes[0].header.style}}],orientation:h.orientation}};"Vertical"===h.orientation&&(y.width+=20),y.offsetX=this.currentPosition.x+y.width/2,y.offsetY=this.currentPosition.y+y.height/2,this.diagram.add(y)}},t.prototype.mouseLeave=function(t){if(this.tool&&this.inAction&&this.tool.mouseLeave(this.eventArgs),this.diagram.selectedObject.helperObject){this.updateContainerProperties();var e=this.updateContainerBounds();e&&this.diagram.endGroupAction()}this.eventArgs&&this.eventArgs.source&&(this.diagram.updatePortVisibility(this.eventArgs.source,y["m"].Hover,!0),this.hoverElement=null),this.tool instanceof bt&&this.eventArgs&&this.eventArgs.target&&this.eventArgs.target instanceof A["q"]&&(this.diagram.updatePortVisibility(this.eventArgs.target,y["m"].Hover|y["m"].Connect,!0),this.hoverElement=null);var i=this.diagram.selectedItems;i&&i.wrapper&&this.diagram.renderSelector(!0),(this.diagram.diagramActions&y["c"].Interactions||this.diagram.diagramActions&y["c"].ToolAction)&&(this.diagram.diagramActions=this.diagram.diagramActions&~y["c"].ToolAction),this.isMouseDown=!1,this.focus=!1,this.touchStartList=null,this.touchMoveList=null,this.commandHandler.removeSnap(),this.inAction=!1,this.eventArgs={},this.diagram.selectedObject&&this.diagram.selectedObject.helperObject&&(this.diagram.remove(this.diagram.selectedObject.helperObject),this.diagram.selectedObject={helperObject:void 0,actualObject:void 0}),this.tool=null,Object(N["d"])(),"Rotate"===this.action&&this.diagram.diagramCanvas.classList.remove("e-diagram-rotate"),t.preventDefault()},t.prototype.mouseWheel=function(t){var e=t.wheelDelta>0||-40*t.detail>0,i=this.getMousePosition(t);this.diagram.tooltipObject.close();var n=this.isMetaKey(t);if(n)this.diagram.zoom(e?1.2:1/1.2,i),t.preventDefault();else{var o=this.diagram.scroller.horizontalOffset,r=this.diagram.scroller.verticalOffset,a=e?20:-20;this.tool&&(this.tool instanceof At||this.tool instanceof zt)&&(this.eventArgs={},this.getMouseEventArgs(i,this.eventArgs),this.eventArgs.position=i,this.tool.mouseWheel(this.eventArgs)),t.shiftKey?this.diagram.scroller.zoom(1,a,0,i):this.diagram.scroller.zoom(1,0,a,i),o===this.diagram.scroller.horizontalOffset&&r===this.diagram.scroller.verticalOffset||t.preventDefault()}if(this.diagram.textEditing){if(this.diagram.isTriggerEvent=!0,this.diagram.activeLabel.parentId){var s=this.diagram.getObject(this.diagram.activeLabel.parentId);this.diagram.startTextEdit(s,this.diagram.activeLabel.id)}this.diagram.isTriggerEvent=!1}},t.prototype.keyDown=function(t){if(!(this.diagram.diagramActions&y["c"].TextEdit)&&!this.checkEditBoxAsTarget(t)||"Escape"===t.key||27===t.keyCode){var e=void 0,i=t.keyCode?t.keyCode:t.which,o=t.key,r=this.isMetaKey(t);if(this.diagram.commandManager&&this.diagram.commands)for(var a=this.diagram.commands,c=0,h=Object.keys(a);c<h.length;c++){var l=h[c];if(e=this.diagram.commands[l],e&&(e.gesture.keyModifiers||e.gesture.key)&&(i===e.gesture.key||o===y["i"][e.gesture.key]||this.isDeleteKey(o,l))&&(!e.gesture.keyModifiers&&!t.altKey&&!t.shiftKey&&!r||e.gesture.keyModifiers&&(r||t.altKey||t.shiftKey)&&this.altKeyPressed(e.gesture.keyModifiers)&&t.altKey||this.shiftKeyPressed(e.gesture.keyModifiers)&&t.shiftKey||this.ctrlKeyPressed(e.gesture.keyModifiers)&&r)){var p=Object(s["f"])(e.canExecute);if(p&&p({keyDownEventArgs:KeyboardEvent,parameter:e.parameter}||Object(n["D"])())){if(t.preventDefault(),"Escape"===t.key)if(this.checkEditBoxAsTarget(t))document.getElementById(this.diagram.diagramCanvas.id).focus();else if(this.diagram.currentSymbol){var u="selectedSymbols",g="sourceElement",f="intDestroy";this.diagram.removeFromAQuad(this.diagram.currentSymbol),this.diagram.removeObjectsFromLayer(this.diagram.nameTable[this.diagram.currentSymbol.id]),this.diagram.removeElements(this.diagram.currentSymbol),Object(d["J"])(this.diagram.currentSymbol,this.diagram),delete this.diagram.nameTable[this.diagram.currentSymbol.id];var m=this.diagram.droppable[g];m.draggable[f]();var v=this.diagram.droppable[u];v.parentNode.removeChild(v);var b=this.diagram.diagramActions;this.diagram.diagramActions=this.diagram.addConstraints(b,y["c"].PreventClearSelection),this.tool.mouseUp(this.eventArgs),this.diagram.diagramRenderer.rendererActions=this.diagram.removeConstraints(this.diagram.diagramRenderer.rendererActions,y["o"].DrawSelectorBorder),this.diagram.previousSelectedObject&&this.diagram.select(this.diagram.previousSelectedObject),this.action="Select",this.diagram.previousSelectedObject=null,this.diagram.currentSymbol=null,this.diagram.diagramActions=this.diagram.removeConstraints(b,y["c"].PreventClearSelection),this.isMouseDown=!1}if(e.execute){var w=Object(s["f"])(e.execute);w({keyDownEventArgs:KeyboardEvent,parameter:e.parameter})}if(Object(n["D"])()){var O={gesture:e.gesture};this.diagram.triggerEvent(y["e"].commandExecute,O)}break}}}}},t.prototype.startAutoScroll=function(t){var e=this.getMousePosition(t);e.x*=this.diagram.scroller.currentZoom,e.y*=this.diagram.scroller.currentZoom;var i,o=Object(N["b"])(this.diagram),r=this.diagram.scrollSettings.autoScrollBorder;if("mozilla"===n["c"].info.name&&0===this.diagram.scroller.viewPortWidth){var a=document.getElementById(this.diagram.element.id).getBoundingClientRect();a.width!==this.diagram.scroller.viewPortWidth&&this.diagram.scroller.setViewPortSize(a.width,a.height)}return this.diagram.scrollSettings.canAutoScroll&&(e.x+this.diagram.scroller.horizontalOffset+r.right+o.width>=this.diagram.scroller.viewPortWidth-18?i="right":e.x+this.diagram.scroller.horizontalOffset<r.left?i="left":e.y+this.diagram.scroller.verticalOffset+r.bottom+o.height>this.diagram.scroller.viewPortHeight-18?i="bottom":e.y+this.diagram.scroller.verticalOffset<r.top&&(i="top")),i},t.prototype.doAutoScroll=function(t,e,i,n){var o=t;if((this.tool instanceof wt||this.tool instanceof xt||this.tool instanceof vt)&&this.inAction){var r=this.getMousePosition(e),a=(this.diagram.scrollSettings.autoScrollBorder,0),s=0,c={x:r.x,y:r.y};switch(o){case"right":c.x=r.x+10,a=10;break;case"left":c.x=r.x-10,a=-10;break;case"bottom":c.y=r.y+10,s=10;break;case"top":c.y=r.y-10,s=-10;break}this.eventArgs.position={x:c.x,y:c.y},this.currentPosition=this.eventArgs.position;var h=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action);this.eventArgs.target=this.diagram.findObjectUnderMouse(h,this.action,this.inAction),this.tool.mouseMove(this.eventArgs),this.diagram.scroller.zoom(1,-a,-s,r)}},t.prototype.mouseEvents=function(){for(var t=this.diagram.findObjectsUnderMouse(this.currentPosition),e=0;e<t.length;e++)this.eventArgs.actualObject===t[e]&&t.splice(e,1);var i={targets:Object(d["h"])(t),element:Object(d["h"])(this.eventArgs.source===this.eventArgs.actualObject?void 0:this.eventArgs.source),actualObject:Object(d["h"])(this.eventArgs.actualObject)};if(Object(n["D"])()&&(i.targets.connector=[],i.targets.node=[],this.getBlazorCollectionObject(t,i)),this.lastObjectUnderMouse&&(!this.eventArgs.actualObject||this.lastObjectUnderMouse!==this.eventArgs.actualObject)){var o={targets:void 0,element:Object(d["h"])(this.lastObjectUnderMouse),actualObject:void 0};Object(n["D"])()&&(o={targets:void 0,element:Object(d["x"])(this.lastObjectUnderMouse)===z["b"]?{connector:Object(d["h"])(t)}:{node:Object(d["h"])(this.lastObjectUnderMouse)},actualObject:void 0}),this.diagram.triggerEvent(y["e"].mouseLeave,o),this.lastObjectUnderMouse=null}(!this.lastObjectUnderMouse&&this.eventArgs.source||this.lastObjectUnderMouse!==this.eventArgs.actualObject)&&(this.lastObjectUnderMouse=this.eventArgs.actualObject,this.diagram.triggerEvent(y["e"].mouseEnter,i)),this.eventArgs.actualObject&&this.diagram.triggerEvent(y["e"].mouseOver,i)},t.prototype.getBlazorCollectionObject=function(t,e){if(t)for(var i=0;i<t.length;i++)Object(d["x"])(t[i])===z["b"]?e.targets.connector.push(Object(d["h"])(t[i])):e.targets.node.push(Object(d["h"])(t[i]))},t.prototype.elementEnter=function(t,e){if(!e){var i=this.hoverElement instanceof A["q"]&&this.hoverElement.constraints&y["k"].Tooltip||this.hoverElement instanceof z["b"]&&this.hoverElement.constraints&y["b"].Tooltip,n=this.getContent();"Auto"===this.hoverElement.tooltip.openOn&&""!==n&&Object(Bt["c"])(this.diagram,i?this.hoverElement:void 0);var o=Object(d["B"])(this.diagram,t,this.hoverElement);"Auto"===this.hoverElement.tooltip.openOn&&""!==n&&(this.diagram.tooltipObject.close(),this.diagram.tooltipObject.offsetX=o.x,this.diagram.tooltipObject.offsetY=o.y,this.diagram.tooltipObject.dataBind()),Object(w["m"])(this.hoverElement,this.diagram)&&"Auto"===this.hoverElement.tooltip.openOn&&this.diagram.tooltipObject.open(this.diagram.element)}},t.prototype.elementLeave=function(){this.diagram.tooltipObject.close()},t.prototype.altKeyPressed=function(t){return!!(t&y["h"].Alt)},t.prototype.ctrlKeyPressed=function(t){return!!(t&y["h"].Control)},t.prototype.shiftKeyPressed=function(t){return!!(t&y["h"].Shift)},t.prototype.scrolled=function(t){this.diagram.updateScrollOffset()},t.prototype.doubleClick=function(t){if(Object(w["D"])(this.diagram)){var e=void 0,i=this.diagram.findObjectsUnderMouse(this.currentPosition),o=this.diagram.findObjectUnderMouse(i,this.action,this.inAction);if(null!==o&&Object(w["D"])(this.diagram)){if(e=this.diagram.findElementUnderMouse(o,this.currentPosition),this.tool&&(this.tool instanceof At||this.tool instanceof zt)){Object(d["h"])(o)||Object(d["h"])(this.diagram),this.currentPosition,t.detail;this.tool.mouseUp(this.eventArgs),this.isMouseDown=!1,this.eventArgs={},this.tool=null,t.preventDefault()}else{var r=this.diagram.commandHandler.getObjectLayer(o.id);if(r&&!r.lock&&r.visible&&!(this.diagram.diagramActions&y["c"].TextEdit)){var a="";"TextAnnotation"===o.shape.shape&&(a=o.id.split("_textannotation_")[1]),this.diagram.startTextEdit(o,a||(e instanceof g["a"]?e.id.split(o.id+"_")[1]:void 0))}}}var s={source:Object(d["h"])(o)||Object(d["h"])(this.diagram),position:this.currentPosition,count:t.detail};Object(n["D"])()&&(s={source:{selector:Object(d["h"])(o)}||{diagram:Object(d["h"])(this.diagram)},position:this.currentPosition,count:t.detail}),this.diagram.triggerEvent(y["e"].doubleClick,s)}},t.prototype.itemClick=function(t,e){var i=t;return Object(nt["c"])(this.diagram,i,!0)?i:null},t.prototype.inputChange=function(t){var e,i,n,o,r,a,s,h,d,l=90,p=12,u=document.getElementById(this.diagram.element.id+"_editBox"),g=document.getElementById(this.diagram.element.id+"_editTextBoxDiv"),f=u.value,m=f.split("\n");o=this.diagram.selectedItems.nodes[0]?this.diagram.selectedItems.nodes[0]:this.diagram.selectedItems.connectors[0],(!o&&this.tool instanceof Ct||"SwimLane"===o.shape.type)&&(o=this.diagram.nameTable[this.diagram.activeLabel.parentId]),o&&("Text"!==o.shape.type&&o.annotations.length>0||"Text"===o.shape.type)&&(n=this.diagram.getWrapper(o.wrapper,this.diagram.activeLabel.id),e=o.wrapper.bounds.width<n.bounds.width?o.wrapper.bounds.width:n.bounds.width,e=e>l?e:l,s=Object(c["x"])(n.style,f,void 0,void 0,e),i=Number(u.style.fontSize.split("px")[0]),m.length>1&&""===m[m.length-1]&&(s.height=s.height+i),h=this.diagram.scroller.transform,d=Object(w["H"])(this.diagram)?h.scale:1,a=s.width,a=(l>a?l:a)*d,r=(p>s.height?p:s.height)*d,g.style.left=(n.bounds.center.x+h.tx)*h.scale-a/2-2.5+"px",g.style.top=(n.bounds.center.y+h.ty)*h.scale-r/2-3+"px",g.style.width=a+"px",g.style.height=r+"px",u.style.minHeight=p+"px",u.style.minWidth=l+"px",u.style.width=a+"px",u.style.height=r+"px")},t.prototype.isAddTextNode=function(t,e){return!!(this.tool instanceof Ct||e)&&(this.tool=null,t&&!Object(w["c"])(this.diagram)&&(this.diagram.drawingObject=void 0,this.diagram.currentDrawingObject=void 0),!(Object(d["w"])(this.diagram.nodes,t.id)||Object(d["w"])(this.diagram.connectors,t.id)||this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(t)>-1))},t.prototype.checkEditBoxAsTarget=function(t){return!(!t.target||t.target.id!==this.diagram.element.id+"_editBox")},t.prototype.getMouseEventArgs=function(t,e,i){var n,o,r;return e.position=t,i?(o=this.diagram.findObjectsUnderMouse(this.currentPosition,i),n=this.diagram.findTargetObjectUnderMouse(o,this.action,this.inAction,e.position,i)):"Drag"===this.action||"ConnectorSourceEnd"===this.action||"SegmentEnd"===this.action||"OrthoThumb"===this.action||"BezierSourceThumb"===this.action||"BezierTargetThumb"===this.action||"ConnectorTargetEnd"===this.action||-1!==this.action.indexOf("Rotate")||-1!==this.action.indexOf("Resize")?(n=this.diagram.selectedItems,!this.diagram.currentSymbol&&"Drag"===this.action&&n&&this.diagram.selectedItems.nodes.length>0&&"SwimLane"===this.diagram.selectedItems.nodes[0].shape.type&&(o=this.diagram.findObjectsUnderMouse(this.currentPosition),n=this.diagram.findObjectUnderMouse(o,this.action,this.inAction))):(o=this.diagram.findObjectsUnderMouse(this.currentPosition),n=this.diagram.findObjectUnderMouse(o,this.action,this.inAction)),n&&n.isHeader&&(n=this.diagram.nameTable[n.parentId],this.eventArgs.actualObject=n),n&&(r=this.diagram.findElementUnderMouse(n,this.currentPosition)),i?(e.target=n,e.targetWrapper=r):(e.source=n,e.sourceWrapper=r),e.actualObject=this.eventArgs.actualObject,e.startTouches=this.touchStartList,e.moveTouches=this.touchMoveList,e},t.prototype.resetTool=function(){this.action="Select",this.hoverElement=null,this.hoverNode=null,this.tool=this.diagram.getTool(this.action),this.updateCursor()},t.prototype.getTool=function(t){switch(t){case"Select":return new vt(this.commandHandler,!0);case"Drag":return new wt(this.commandHandler);case"Rotate":return new Ot(this.commandHandler);case"LayoutAnimation":return new Tt(this.commandHandler);case"Hyperlink":return new It(this.commandHandler);case"ResizeSouthEast":case"ResizeSouthWest":case"ResizeNorthEast":case"ResizeNorthWest":case"ResizeSouth":case"ResizeNorth":case"ResizeWest":case"ResizeEast":return new xt(this.commandHandler,t);case"ConnectorSourceEnd":case"ConnectorTargetEnd":case"BezierSourceThumb":case"BezierTargetThumb":return new bt(this.commandHandler,t);case"SegmentEnd":case"OrthoThumb":return new Mt(this.commandHandler,t);case"Draw":var e="shape",i=Object(d["o"])(this.diagram.drawingObject);if("Node"===i&&"Text"===this.diagram.drawingObject.shape.type)return new Ct(this.commandHandler);if("Node"===i&&"Polygon"===this.diagram.drawingObject.shape[e]&&!this.diagram.drawingObject.shape.points)return new At(this.commandHandler);if("Node"===i||"Node"===i&&"Polygon"===this.diagram.drawingObject.shape[e]&&this.diagram.drawingObject.shape.points)return new jt(this.commandHandler,this.diagram.drawingObject);if("Connector"===i&&"Polyline"===this.diagram.drawingObject.type)return new zt(this.commandHandler);if("Connector"===i)return new St(this.commandHandler,"ConnectorSourceEnd",this.diagram.drawingObject);break;case"Pan":return new Pt(this.commandHandler,!1);case"PinchZoom":return new Pt(this.commandHandler,!0);case"PortDrag":return new wt(this.commandHandler,"Port");case"PortDraw":return new St(this.commandHandler,"ConnectorSourceEnd",this.diagram.drawingObject);case"LabelSelect":return new vt(this.commandHandler,!0,"LabelSelect");case"LabelDrag":return new Lt(this.commandHandler);case"LabelResizeSouthEast":case"LabelResizeSouthWest":case"LabelResizeNorthEast":case"LabelResizeNorthWest":case"LabelResizeSouth":case"LabelResizeNorth":case"LabelResizeWest":case"LabelResizeEast":return new Et(this.commandHandler,t);case"LabelRotate":return new Dt(this.commandHandler)}return null},t.prototype.getCursor=function(t){var e=this.diagram.selectedItems.annotation?this.diagram.selectedItems.wrapper.children[0]:this.diagram.selectedItems,i=this.diagram.selectedItems.annotation?e.rotateAngle+e.parentTransform:e.rotateAngle;return gt(t,i)},t.prototype.findElementUnderMouse=function(t,e){return this.objectFinder.findElementUnderSelectedItem(t,e)},t.prototype.findObjectsUnderMouse=function(t,e){return this.objectFinder.findObjectsUnderMouse(t,this.diagram,this.eventArgs,e)},t.prototype.findObjectUnderMouse=function(t,e,i){return this.objectFinder.findObjectUnderMouse(this.diagram,t,e,i,this.eventArgs,this.currentPosition)},t.prototype.findTargetUnderMouse=function(t,e,i,n,o){return this.objectFinder.findObjectUnderMouse(this.diagram,t,e,i,this.eventArgs,n,o)},t.prototype.findActionToBeDone=function(t,e,i,n){return ot(t,e,this.currentPosition,this.diagram,this.touchStartList,this.touchMoveList,n)},t.prototype.updateContainerBounds=function(t){var e=!1;if(this.diagram.selectedObject.helperObject&&this.diagram.selectedObject.actualObject instanceof A["q"]){var i=this.tool instanceof xt,n=this.diagram.selectedObject.actualObject,o=this.diagram.nameTable[n.parentId];t?Object(nt["f"])(this.diagram,n,this.currentPosition,i):((!o||o&&"SwimLane"!==o.shape.type)&&this.diagram.updateDiagramObject(n),e=Object(nt["i"])(this.diagram,n,this.currentPosition,i),this.diagram.updateSelector(),(n.isLane||n.isPhase)&&(this.diagram.clearSelection(),this.commandHandler.selectObjects([n])))}return e},t.prototype.updateContainerProperties=function(){var t,e,i,n,o=!1,r=!1,a={hasStack:!1,isPreventHistory:!1};if(this.diagram.selectedObject.helperObject){var c=this.diagram.findObjectsUnderMouse(this.currentPosition),h=this.diagram.findObjectUnderMouse(c,this.action,this.inAction);if(t=this.diagram.selectedObject.helperObject,n=this.diagram.selectedObject.actualObject,n instanceof A["q"]){if("SwimLane"===n.shape.type&&(i=Object(Ht["h"])(this.diagram,n.wrapper.children[0],0,!0)),"SwimLane"!==n.shape.type&&n.parentId&&"SwimLane"===this.diagram.getObject(n.parentId).shape.type&&h instanceof A["q"]&&this.diagram.getObject(h.parentId)&&"SwimLane"!==this.diagram.getObject(h.parentId).shape.type&&(h=this.diagram.getObject(h.parentId)),"Drag"===this.currentAction&&n.container&&"Canvas"===n.container.type&&n.parentId&&"SwimLane"===this.diagram.getObject(n.parentId).shape.type&&h&&h!==n&&h.container&&"Canvas"===h.container.type&&h.isLane&&n.isLane&&h.parentId===n.parentId)Object(Ht["k"])(this.diagram,n,h,this.currentPosition),a.isPreventHistory=!0;else{var d=this.diagram.nameTable[n.parentId];(!d||d&&"SwimLane"!==d.shape.type)&&(n.offsetX=t.offsetX,n.offsetY=t.offsetY,n&&n.shape&&"UmlClassifier"!==n.shape.type&&(n.width=t.width,n.height=t.height),n.rotateAngle=t.rotateAngle);var l=void 0;if(d&&d.container&&"Stack"===d.container.type&&(this.diagram.startGroupAction(),r=!0),!h&&d&&d.container&&"Stack"===d.container.type&&"Drag"===this.action){var p=d.wrapper.children.indexOf(n.wrapper);if(l={targetIndex:void 0,target:void 0,sourceIndex:p,source:Object(s["b"])(n)},p>-1){var u=d.children;u.splice(u.indexOf(n.id),1),this.diagram.nameTable[n.id].parentId="",e=!0,d.wrapper.children.splice(p,1)}}if(Object(nt["e"])(n,h,this.diagram,this.action),d=Object(nt["c"])(this.diagram,n)?this.diagram.nameTable[n.parentId]:this.diagram.nameTable[n.parentId]||n,d&&d.container&&"Canvas"===d.container.type&&(d.wrapper.maxWidth=d.maxWidth=d.wrapper.actualSize.width,d.wrapper.maxHeight=d.maxHeight=d.wrapper.actualSize.height,o=!0),Object(nt["c"])(this.diagram,n,!0)&&d&&"Canvas"===d.container.type?Object(nt["b"])(this.diagram,n):a=this.updateContainerPropertiesExtend(d,n,i,t,a),n.shape.lanes&&this.updateLaneChildNode(n),o&&(d.maxWidth=d.wrapper.maxWidth=void 0,d.maxHeight=d.wrapper.maxHeight=void 0),e){this.diagram.nodePropertyChange(d,{},{offsetX:d.offsetX,offsetY:d.offsetY,width:d.width,height:d.height,rotateAngle:d.rotateAngle});var g={redoObject:{sourceIndex:void 0,source:l.source},type:"StackChildPositionChanged",undoObject:l,category:"Internal"};this.diagram.diagramActions&y["c"].UndoRedo||this.diagram.addHistoryEntry(g)}n&&n.container&&("Stack"===n.container.type||"Canvas"===n.container.type&&""===n.parentId)&&(n&&n.shape&&"UmlClassifier"===n.shape.type&&(n.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(n,{},{offsetX:n.offsetX,offsetY:n.offsetY,width:n.width,height:n.height,rotateAngle:n.rotateAngle}),n&&n.shape&&"UmlClassifier"===n.shape.type&&(n.wrapper.measureChildren=!1))}Object(Ht["t"])(i,this.diagram),a.hasStack=r}}return n&&(n.isPhase||n.isLane||n.shape&&"SwimLane"===n.shape.type)&&this.diagram.updateDiagramElementQuad(),a},t.prototype.updateLaneChildNode=function(t){for(var e=0;e<t.shape.lanes.length;e++)if(t.shape.lanes[e].children&&t.shape.lanes[e].children.length>0)for(var i=0;i<t.shape.lanes[e].children.length;i++){var n=t.shape.lanes[e].children[i].id,o=this.diagram.nameTable[n];o.offsetX=o.wrapper.offsetX,o.offsetY=o.wrapper.offsetY}},t.prototype.updateContainerPropertiesExtend=function(t,e,i,n,r){if("ResizeEast"===this.currentAction||"ResizeSouth"===this.currentAction||"SwimLane"===e.shape.type){var a=Object(s["b"])(e),c=!1;if(t&&t.container&&"Grid"===t.container.type){var h="SwimLane"===t.shape.type,d=h?t.wrapper.children[0]:t.wrapper,l=h?t.shape.padding:void 0,p=t.wrapper.bounds.x,u=t.wrapper.bounds.y;if(void 0!==e.columnIndex&&"Horizontal"===t.container.orientation&&(h&&e.isPhase||!h&&1===e.rowIndex)||"Vertical"===t.container.orientation&&(!h&&e.rowIndex>0&&e.columnIndex>0||h&&e.isLane)){if("Horizontal"===t.container.orientation&&e.isPhase&&e.wrapper.width>e.maxWidth&&(e.maxWidth=e.wrapper.width,e.wrapper.maxWidth=e.wrapper.width),Object(Ht["w"])(this.diagram,e,t,n),d.updateColumnWidth(e.columnIndex,n.width,!0,l),e.isPhase){var g=t.shape.phases[e.columnIndex].header.id,f=this.diagram.nameTable[g];f.maxWidth<n.width&&(f.maxWidth=n.width,f.wrapper.maxWidth=n.width)}"SwimLane"===t.shape.type&&(t.width=t.width?d.width:t.width,Object(Ht["u"])(this.diagram,t),t.wrapper.width=t.width,i=Object(Ht["h"])(this.diagram,d,e.rowIndex,!1))}else void 0!==e.rowIndex&&(c=!0,Object(Ht["w"])(this.diagram,e,t,n),d.updateRowHeight(e.rowIndex,n.height,!0,l),"SwimLane"===t.shape.type&&(t.height=t.height?d.height:t.height,t.wrapper.height=t.height,i=Object(Ht["h"])(this.diagram,d,e.rowIndex,!0)));"SwimLane"===t.shape.type&&(r.isPreventHistory=!0),this.diagram.nodePropertyChange(t,{},{offsetX:t.offsetX,offsetY:t.offsetY,rotateAngle:t.rotateAngle}),this.diagram.drag(t,p-t.wrapper.bounds.x,u-t.wrapper.bounds.y)}else e&&e.shape&&"UmlClassifier"===e.shape.type&&(e.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(e,{},{offsetX:e.offsetX,offsetY:e.offsetY,width:e.width,height:e.height,rotateAngle:e.rotateAngle}),e.wrapper.measureChildren=!1;if(e.wrapper.measure(new o["a"](e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize),"ResizeEast"===this.currentAction||"ResizeSouth"===this.currentAction){var m=Object(s["b"])(e),y={category:"Internal",type:c?"RowHeightChanged":"ColumnWidthChanged",undoObject:a,redoObject:m};this.diagram.addHistoryEntry(y)}}return Object(Ht["t"])(i,this.diagram),r},t.prototype.addUmlNode=function(){var t=this.diagram.selectedItems.nodes[0],e=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x+20,y:this.currentPosition.y}),i=this.diagram.findObjectUnderMouse(e,this.action,this.inAction);if(i||(e=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x-20,y:this.currentPosition.y}),i=this.diagram.findObjectUnderMouse(e,this.action,this.inAction)),t&&t.container&&"Stack"===t.container.type&&i&&i.parentId&&i.parentId===t.id){var n=i,o=Object(c["g"])(this.diagram.element.id),r=o.getElementById(o.id+"_stack_highlighter");if(r){var a=t.wrapper.children.indexOf(i.wrapper)+1,h=new A["q"](this.diagram,"nodes",{style:{fill:t.style.fill,strokeColor:"#ffffff00"},annotations:i.annotations,verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(y["k"].Default|y["k"].HideThumbs)&~(y["k"].Rotate|y["k"].Drag|y["k"].Resize),minHeight:25},!0);h.annotations[0].content=" + Name : Type";n.id.split("_");h.id=Object(s["i"])()+h.id,h.parentId=t.id,h.zIndex=-1,h.umlIndex=a,this.diagram.startGroupAction();t.wrapper.children.indexOf(h.wrapper);this.diagram.add(h),this.diagram.updateConnectorEdges(t),this.diagram.clearSelection(),this.diagram.select([this.diagram.nameTable[h.id]]),this.diagram.endGroupAction(),this.diagram.startTextEdit()}}},t}(),Wt=function(){function t(){}return t.prototype.findObjectsUnderMouse=function(t,e,i,n,o){var r,a,c,h,l=[];n&&n instanceof A["t"]&&n.nodes.length+n.connectors.length===1&&(n=n.nodes[0]||n.connectors[0],n.children&&0===n.children.length&&(i.actualObject=n));for(var p,u=e.spatialSearch.findObjects(new W["a"](t.x-50,t.y-50,100,100)),g={},f=0,y=u;f<y.length;f++){var v=y[f],b=t;a=v.wrapper.outerBounds;var O=!v.rotateAngle&&a.containsPoint(b);if((v!==n||e.currentDrawingObject instanceof z["b"])&&v instanceof z["b"]?v!==e.currentDrawingObject:v.wrapper.visible){var x=e.commandHandler.getObjectLayer(v.id);if(x&&!x.lock&&x.visible){if(p=g[x.zIndex]=g[x.zIndex]||[],v.rotateAngle){r=v.wrapper,a=Object(s["c"])(r);for(var j=0,S=r.children;j<S.length;j++)c=S[j],h=Object(m["a"])(),Object(m["c"])(h,-(c.rotateAngle+c.parentTransform),c.offsetX,c.offsetY),b=Object(m["e"])(h,t),Object(s["c"])(c).containsPoint(b)&&(O=!0)}if((!n||!1===ut(e,v))&&Object(w["l"])(v,e)&&(v instanceof z["b"]?Object(d["I"])(v,t):O)){var C=v instanceof z["b"]&&v.hitPadding||0,P=void 0;P=this.findElementUnderMouse(v,t,C),P&&"helper"!==v.id&&Object(d["E"])(v,"zIndex",p)}}}}for(var T=0,I=e.layers;T<I.length;T++){x=I[T];l=l.concat(g[x.zIndex]||[]);for(var L=0,E=l;L<E.length;L++){v=E[L];var D="eventHandler";if("Bpmn"===v.shape.type&&v.processId&&(!(e[D].tool instanceof wt)||e[D].tool instanceof wt&&Object(w["b"])(v))){var k=l.indexOf(e.nameTable[v.processId]);k>-1&&l.splice(k,1)}if("UmlClassifier"===v.shape.type&&v.container&&"Stack"===v.container.type){k=l.indexOf(e.nameTable[e.nameTable[v.id].wrapper.children[0].id]);k>-1&&l.splice(k,1)}}}for(var R=0;R<l.length;R++){var M=e.nameTable[l[R].parentId];if(M)for(var B=this.findElementUnderMouse(M,t),H=0;H<M.ports.length;H++)if(B.id.match("_"+M.ports[H].id+"$")){var N=M.ports[H];if(Object(w["e"])(N,e)||Object(w["i"])(N,e))return l}while(M){k=l.indexOf(M);if(-1===k)break;l.splice(k,1),M=e.nameTable[M.parentId]}}if(i&&!i.source)for(R=0;R<l.length;R++){var _=e.nameTable[l[R].parentId];if(_&&"SwimLane"===_.shape.type)for(H=0;H<l.length;H++){var X=l[H];X instanceof z["b"]&&l.splice(R,1)}}return l},t.prototype.isTarget=function(t,e,i){var n,o=e.selectedItems.connectors[0];if(n="ConnectorSourceEnd"===i?e.nameTable[o.targetID]:n=e.nameTable[o.sourceID],!n||(n.processId||t.processId)&&n.processId===t.processId||(n.processId!==t.processId&&(t=null),t&&t.parentId&&"UmlClassifier"===e.nameTable[t.parentId].shape.type&&(t=e.nameTable[t.parentId])),"ConnectorSourceEnd"===i&&o.targetID){var r=e.nameTable[o.targetID];if(r&&r.shape&&"TextAnnotation"===r.shape.shape){var a=o.id.split("_");("Bpmn"===r.shape.type&&"Bpmn"!==t.shape.type||a[0]===t.id||"TextAnnotation"===t.shape.shape)&&(t=null),t.parentId&&"UmlClassifier"===e.nameTable[t.parentId].shape.type&&(t=e.nameTable[t.parentId])}}return t},t.prototype.findObjectUnderMouse=function(t,e,i,n,o,r,a){var s,c,h="eventHandler",l=null;if(0!==e.length)if(a&&a instanceof A["t"]&&a.nodes.length+a.connectors.length===1&&(a=a.nodes[0]||a.connectors[0]),"ConnectorSourceEnd"===i&&a||"PortDraw"===i||(Object(w["j"])(t)||Object(w["c"])(t))&&Object(d["x"])(t.drawingObject)===z["b"]){for(var p=t.selectedItems.connectors[0],u=e.length-1;u>=0;u--)if(c=Object(d["v"])(e[u],!1),e[u]instanceof A["q"]&&(Object(w["q"])(e[u])||Object(w["w"])(c)))return l=e[u],p&&(l=this.isTarget(l,t,i)),o.actualObject=l,l}else if("ConnectorTargetEnd"===i&&a){for(u=e.length-1;u>=0;u--)if(s=Object(d["v"])(e[u],!0),e[u]instanceof A["q"]&&(Object(w["n"])(e[u])||Object(w["v"])(s)))return l=e[u],l=this.isTarget(l,t,i),o.actualObject=l,l}else{if(a&&("Drag"===i||t[h].tool instanceof wt)){var g=0;for(u=0;u<e.length;u++){var f=e[u];a!==f&&(f instanceof z["b"]||!r||f.wrapper.bounds.containsPoint(r))&&Object(w["b"])(f)&&(l?(l=g>=f.zIndex?l:f,g=Math.max(g,f.zIndex)):(l=f,g=l.zIndex))}return l&&"Bpmn"===l.shape.type&&(l=t.selectedItems.nodes.length>0&&"Bpmn"===t.selectedItems.nodes[0].shape.type?l:null),l&&(o.actualObject=l),l}if("Select"===i&&t[h].tool){for(u=e.length-1;u>=0;u--)if(e[u]instanceof z["b"]&&e[u-1]instanceof A["q"]&&e[u-1].ports){var m=this.findTargetElement(e[u-1].wrapper,r,void 0);if(m&&(m.id.match("_icon_content_shape$")||m.id.match("_icon_content_rect$")))return e[u-1];for(var y=0;y<e[u-1].ports.length;y++)if(m&&m.id.match("_"+e[u-1].ports[y].id+"$")&&Object(w["i"])(e[u-1].ports[y],t))return e[u-1]}if(l=e[e.length-1],o.actualObject=l,!t[h].itemClick(l,!0)&&l.parentId){var v=l,b=ut(t,v);while(v){if(ut(t,v)&&!b)break;l=v,v=t.nameTable[v.parentId]}}}else if("Pan"===i||"LayoutAnimation"===i){for(u=e.length-1;u>=0;u--)if(e[u]instanceof A["q"]){m=this.findTargetElement(e[u].wrapper,r,void 0);if("LayoutAnimation"===i||"Pan"===i||m&&(m.id.match("_icon_content_shape$")||m.id.match("_icon_content_rect$")))return e[u]}}else l=e[e.length-1],o&&l&&(o.actualObject=l)}return l},t.prototype.findElementUnderSelectedItem=function(t,e){return t instanceof A["t"]?1!==t.nodes.length||t.connectors&&t.connectors.length?t.nodes&&!t.nodes.length||1!==t.connectors.length?null:this.findElementUnderMouse(t.connectors[0],e):this.findElementUnderMouse(t.nodes[0],e):this.findElementUnderMouse(t,e)},t.prototype.findElementUnderMouse=function(t,e,i){return this.findTargetElement(t.wrapper,e,i)},t.prototype.findTargetElement=function(t,e,i){for(var n=t.children.length-1;n>=0;n--){var o=t.children[n];if(o&&o.outerBounds.containsPoint(e)){if(o instanceof f["a"]){var r=this.findTargetElement(o,e);if(r)return r}if(o.bounds.containsPoint(e))return o}}return t.bounds.containsPoint(e,i)&&"none"!==t.style.fill?t:null},t}(),_t=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xt=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},Yt=function(t){function e(e,i,n,o){var r=t.call(this,e,i,n,o)||this;return r.objectZIndex=-1,r.zIndexTable={},r.objects=[],r}return _t(e,t),Xt([Object(n["p"])("")],e.prototype,"id",void 0),Xt([Object(n["p"])(!0)],e.prototype,"visible",void 0),Xt([Object(n["p"])(!1)],e.prototype,"lock",void 0),Xt([Object(n["p"])()],e.prototype,"objects",void 0),Xt([Object(n["p"])()],e.prototype,"addInfo",void 0),Xt([Object(n["p"])(-1)],e.prototype,"zIndex",void 0),e}(n["d"]),Vt=function(){function t(t){this.clipboardData={},this.connectorsTable=[],this.processTable={},this.isContainer=!1,this.childTable={},this.parentTable={},this.diagram=t}return Object.defineProperty(t.prototype,"snappingModule",{get:function(){return this.diagram.snappingModule},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layoutAnimateModule",{get:function(){return this.diagram.layoutAnimateModule},enumerable:!0,configurable:!0}),t.prototype.startTransaction=function(t){this.state={element:this.diagram.selectedItems,backup:null},t&&this.diagram.protectPropertyChange(!0),Object(c["f"])(this.diagram.element.id).style.pointerEvents="none"},t.prototype.endTransaction=function(t){this.state=null,t&&this.diagram.protectPropertyChange(!1),Object(c["f"])(this.diagram.element.id).style.pointerEvents="all"},t.prototype.showTooltip=function(t,e,i,n,o){var r=this;if(o&&(this.diagram.tooltipObject.position="BottomCenter",this.diagram.tooltipObject.animation={open:{delay:0,duration:0}},this.diagram.tooltip.relativeMode="ConnectTool"===n?"Mouse":"Object",this.diagram.tooltipObject.openDelay=0,this.diagram.tooltipObject.closeDelay=0),this.diagram.selectedItems.setTooltipTemplate){var a=void 0,c=Object(s["f"])(this.diagram.selectedItems.setTooltipTemplate);c&&(a=c(t,this.diagram)),i=a instanceof HTMLElement?a.cloneNode(!0):a||i}this.diagram.tooltipObject.content=i;var h=Object(d["B"])(this.diagram,{x:e.x,y:e.y},t);this.diagram.tooltipObject.offsetX=h.x+("ConnectTool"===n?10:0),this.diagram.tooltipObject.offsetY=h.y+10,this.diagram.tooltipObject.dataBind(),o&&setTimeout((function(){r.diagram.tooltipObject.open(r.diagram.element)}),1)},t.prototype.closeTooltip=function(){this.diagram.tooltipObject.close()},t.prototype.canEnableDefaultTooltip=function(){return!!(this.diagram.selectedItems.constraints&y["p"].ToolTip)},t.prototype.updateSelector=function(){this.diagram.updateSelector()},t.prototype.triggerEvent=function(t,e){if(t===y["e"].drop||t===y["e"].positionChange||t===y["e"].connectionChange){if(this.diagram.currentSymbol)return;if(t===y["e"].drop&&(e.source=this.diagram),this.diagram.currentDrawingObject)return}this.diagram.triggerEvent(t,e)},t.prototype.dragOverElement=function(t,e){if(this.diagram.currentSymbol){var i={element:Object(d["h"])(t.source),target:Object(d["h"])(t.target),mousePosition:Object(d["h"])(e),diagram:Object(d["h"])(this.diagram)};this.triggerEvent(y["e"].dragOver,i)}},t.prototype.disConnect=function(t,e){var i,o,r={},a={};if(t instanceof A["t"]?(i=t,o=i.connectors[0]):t instanceof z["b"]&&this.diagram.currentDrawingObject&&(o=this.diagram.currentDrawingObject),t&&o&&(pt(this.diagram)||this.diagram.currentDrawingObject))if(!e||"ConnectorSourceEnd"!==e&&"ConnectorTargetEnd"!==e){if("OrthoThumb"!==e&&"SegmentEnd"!==e&&(o.sourceID||o.targetID)){r={sourceID:o.sourceID,sourcePortID:o.sourcePortID,targetID:o.targetID,targetPortID:o.targetPortID},o.sourceID="",o.sourcePortID="",o.targetID="",o.targetPortID="",a={sourceID:o.sourceID,sourcePortID:o.sourcePortID,targetID:o.targetID,targetPortID:o.targetPortID};var s={connector:Object(d["h"])(o),oldValue:r,newValue:a,cancel:!1,state:"Changing",connectorEnd:e};Object(n["D"])()&&(s={connector:Object(d["h"])(o),oldValue:{connector:Object(d["h"])(r)},newValue:{connector:Object(d["h"])(a)},cancel:!1,state:"Changed",connectorEnd:e}),this.triggerEvent(y["e"].connectionChange,s),s.cancel?(o.sourceID=r.sourceID,o.sourcePortID=r.sourcePortID,o.targetID=r.targetID,o.targetPortID=r.targetPortID):(this.diagram.connectorPropertyChange(o,r,a),this.diagram.updateDiagramObject(o),s={connector:o,oldValue:r,newValue:a,cancel:!1,state:"Changed",connectorEnd:e},Object(n["D"])()&&(s={connector:Object(d["h"])(o),oldValue:{connector:r},newValue:{connector:a},cancel:!1,state:"Changed",connectorEnd:e}),this.triggerEvent(y["e"].connectionChange,s))}}else{var c="ConnectorSourceEnd"===e?"sourceID":"targetID",h="ConnectorSourceEnd"===e?"sourcePortID":"targetPortID";o[c]&&(r[c]=o[c],o[c]="",a[c]=o[c],(o.sourcePortID||o.targetPortID)&&(r[h]=o[h],o[h]="",a[h]=o[h]),this.connectionEventChange(o,r,a,e))}},t.prototype.connectionEventChange=function(t,e,i,o){var r="ConnectorSourceEnd"===o?"sourceID":"targetID",a="ConnectorSourceEnd"===o?"sourcePortID":"targetPortID",s={connector:Object(d["h"])(t),oldValue:{nodeId:e[r],portId:e[a]},newValue:{nodeId:i[r],portId:i[a]},cancel:!1,state:"Changing",connectorEnd:o};Object(n["D"])()&&(s={connector:Object(d["h"])(t),cancel:!1,state:"Changing",connectorEnd:o,oldValue:{connectorTargetValue:{portId:e[a],nodeId:e[r]}},newValue:{connectorTargetValue:{portId:i[a],nodeId:i[r]}}}),this.triggerEvent(y["e"].connectionChange,s),s.cancel?(t[r]=e[r],t[a]=e[a],i=e):(this.diagram.connectorPropertyChange(t,e,i),this.diagram.updateDiagramObject(t),s={connector:Object(d["h"])(t),oldValue:{nodeId:e[r],portId:e[a]},newValue:{nodeId:i[r],portId:i[a]},cancel:!1,state:"Changed",connectorEnd:o},Object(n["D"])()&&(s={connector:Object(d["h"])(t),oldValue:{connectorTargetValue:{portId:e[a],nodeId:e[r]}},newValue:{connectorTargetValue:{portId:i[a],nodeId:i[r]}},cancel:!1,state:"Changed",connectorEnd:o}),this.triggerEvent(y["e"].connectionChange,s))},t.prototype.findTarget=function(t,e,i,n){if(e instanceof A["q"]){if(t&&t.id===e.id+"_content")return e;if(i&&"Bpmn"===e.shape.type&&"Activity"===e.shape.shape&&"Transaction"===e.shape.activity.subProcess.type){var o=e.shape.activity.subProcess.transaction;if(o.success.visible&&0===t.id.indexOf(e.id+"_success"))return o.success;if(o.cancel.visible&&0===t.id.indexOf(e.id+"_cancel"))return o.cancel;if(o.failure.visible&&0===t.id.indexOf(e.id+"_failure"))return o.failure}if(t instanceof p["a"])for(var r=0;r<e.ports.length;r++){var a=e.ports[r];if(t.id===e.id+"_"+a.id)return a}}if(!n){var s=void 0;for(r=0;r<e.annotations.length;r++)if(s=e.annotations[r],t.id===e.id+"_"+s.id)return s}return e},t.prototype.canDisconnect=function(t,e,i,n){var o,r;e.source instanceof A["t"]?(o=e.source,r=o.connectors[0]):e.source instanceof z["b"]&&this.diagram.currentDrawingObject&&(r=this.diagram.currentDrawingObject);this.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===t,!0);var a="ConnectorSourceEnd"===t?"sourceID":"targetID",s="ConnectorSourceEnd"===t?"sourcePortID":"targetPortID";return r[a]!==n||r[s]!==i},t.prototype.changeAnnotationDrag=function(t){var e,i;if(t.source&&t.source.connectors&&t.source.connectors.length&&this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(t.source.connectors[0])>-1){t.source instanceof A["t"]&&(e=t.source,i=e.connectors[0]);var n=i.id.split("_"),o=(n[n.length-1],n[n.length-3]||n[0]);if(t.target&&t.target.id!==o&&"TextAnnotation"!==t.target.shape.shape){this.diagram.startGroupAction();var a=this.diagram.nameTable[n[0]],c=this.getAnnotation(a,n[1]),h={id:n[1]+Object(s["i"])(),angle:r["a"].findAngle(i.intermediatePoints[0],i.intermediatePoints[1]),text:c.text,length:r["a"].distancePoints(i.intermediatePoints[0],i.intermediatePoints[1]),shape:{shape:"TextAnnotation",type:"Bpmn"},nodeId:c.nodeId},d=new A["c"](t.target.shape,"annotations",h,!0);this.diagram.bpmnModule.checkAndRemoveAnnotations(this.diagram.nameTable[i.targetID],this.diagram),this.diagram.refreshCanvasLayers(),d.id=n[1],this.diagram.addTextAnnotation(d,t.target),this.diagram.endGroupAction()}else i&&(i.sourceID=o,this.diagram.connectorPropertyChange(i,{},{sourceID:o}),this.diagram.updateDiagramObject(i))}},t.prototype.connect=function(t,e){var i,o,r,a,s={},c={};e.source instanceof A["t"]?(r=e.source,a=r.connectors[0]):e.source instanceof z["b"]&&this.diagram.currentDrawingObject&&(a=this.diagram.currentDrawingObject);var h=this.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===t,!0),l="ConnectorSourceEnd"===t?"sourceID":"targetID",p="ConnectorSourceEnd"===t?"sourcePortID":"targetPortID";if(h instanceof A["q"])c[l]=a[l],a[l]=h.id,s[l]=a[l],c[p]=a[p],this.connectionEventChange(a,c,s,t);else{i=a[l],o=a[p],a[p]=h.id,a[l]=e.target.id,s[l]=a[l],s[p]=a[p];var u={connector:Object(d["h"])(a),oldValue:{nodeId:i,portId:o},newValue:{nodeId:s[l],portId:s[p]},cancel:!1,state:"Changing",connectorEnd:t};Object(n["D"])()&&(u={connector:Object(d["h"])(a),oldValue:{connectorTargetValue:{portId:c[p],nodeId:c[l]}},newValue:{connectorTargetValue:{portId:s[p],nodeId:s[l]}},cancel:!1,state:"Changing",connectorEnd:t}),this.triggerEvent(y["e"].connectionChange,u),u.cancel?(a[l]=i,a[p]=o,s[l]=i,s[p]=o):(this.diagram.connectorPropertyChange(a,c,s),this.diagram.updateDiagramObject(a),u={connector:Object(d["h"])(a),oldValue:{nodeId:i,portId:o},newValue:{nodeId:s[l],portId:s[p]},cancel:!1,state:"Changed",connectorEnd:t},Object(n["D"])()&&(u={newValue:{connectorTargetValue:{portId:s[p],nodeId:s[l]}},connector:Object(d["h"])(a),oldValue:{connectorTargetValue:{portId:c[p],nodeId:c[l]}},cancel:!1,state:"Changed",connectorEnd:t}),this.triggerEvent(y["e"].connectionChange,u))}this.renderHighlighter(e,void 0,"ConnectorSourceEnd"===t)},t.prototype.cut=function(){this.clipboardData.pasteIndex=0,this.diagram.undoRedoModule&&this.diagram.historyManager.startGroupAction(),this.clipboardData.clipObject=this.copyObjects(),this.diagram.undoRedoModule&&this.diagram.historyManager.endGroupAction(),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer()},t.prototype.addLayer=function(t,e){t.id=t.id||Object(s["i"])(),t.zIndex=this.diagram.layers.length,t=new Yt(this.diagram,"layers",t,!0),t.objectZIndex=-1,t.zIndexTable={},this.diagram.layers.push(t),this.diagram.layerZIndexTable[t.zIndex]=t.id,this.diagram.activeLayer=t;t.objects;if(e)for(var i=0;i<e.length;i++)this.diagram.add(e[i])},t.prototype.getObjectLayer=function(t){for(var e=this.diagram.layers,i=0;i<e.length;i++){var n=e[i].objects.indexOf(t);if(n>-1)return e[i]}return this.diagram.activeLayer},t.prototype.getLayer=function(t){for(var e=this.diagram.layers,i=0;i<e.length;i++)if(e[i].id===t)return e[i]},t.prototype.removeLayer=function(t){var e=this.getLayer(t);if(e){for(var i=this.diagram.layers.indexOf(e),n=e.objects,o=n.length-1;o>=0;o--)this.diagram.unSelect(this.diagram.nameTable[n[o]]),this.diagram.remove(this.diagram.nameTable[n[o]]),"default_layer"!==e.id&&this.diagram.activeLayer.id===t&&(this.diagram.activeLayer=this.diagram.layers[this.diagram.layers.length-1]);delete this.diagram.layerZIndexTable[e.zIndex],this.diagram.layers.splice(i,1),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer()}},t.prototype.moveObjects=function(t,e){var i,n=this.getLayer(e)||this.diagram.activeLayer;this.diagram.setActiveLayer(n.id);for(var o=0,r=t;o<r.length;o++){var a=r[o],s=this.getObjectLayer(a),c=s.objects.indexOf(a);c>-1&&(i=this.diagram.nameTable[a],this.diagram.unSelect(i),this.diagram.remove(this.diagram.nameTable[a]),this.diagram.add(i))}},t.prototype.cloneLayer=function(t){this.diagram.layers;var e=this.getLayer(t);if(e){var i=[],n={id:t+"_"+Object(s["i"])(),objects:[],visible:!0,lock:!1};this.addLayer(n),n.zIndex=this.diagram.layers.length-1;i.length;for(var o=0,r=e.objects;o<r.length;o++){var a=r[o];i.push(this.diagram.nameTable[a])}this.paste(i)}},t.prototype.copy=function(){return this.clipboardData.pasteIndex=1,this.clipboardData.clipObject=this.copyObjects(),this.clipboardData.clipObject},t.prototype.copyObjects=function(){var t=[],e=[];if(this.clipboardData.childTable={},this.diagram.selectedItems.connectors.length>0){t=this.diagram.selectedItems.connectors;for(var i=0;i<t.length;i++){var n=void 0;n=this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(t[i])>-1?Object(s["b"])(this.diagram.nameTable[t[i].targetID]):Object(s["b"])(t[i]),e.push(n)}}if(this.diagram.selectedItems.nodes.length>0){t=t.concat(this.diagram.selectedItems.nodes);for(i=0;i<this.diagram.selectedItems.nodes.length;i++){var o=Object(s["b"])(this.diagram.selectedItems.nodes[i]);o.wrapper&&o.offsetX!==o.wrapper.offsetX&&(o.offsetX=o.wrapper.offsetX),o.wrapper&&o.offsetY!==o.wrapper.offsetY&&(o.offsetY=o.wrapper.offsetY);this.copyProcesses(o),e.push(Object(s["b"])(o));var r=Object(m["a"])();if(Object(m["c"])(r,-o.rotateAngle,o.offsetX,o.offsetY),o.children){for(var a=this.clipboardData.childTable,c=void 0,h=[],d=this.getAllDescendants(o,h,!0),l=0;l<d.length;l++){c=this.diagram.nameTable[d[l].id];var p=a[c.id]=Object(s["b"])(c),u=Object(m["e"])(r,{x:p.wrapper.offsetX,y:p.wrapper.offsetY});c instanceof A["q"]&&(p.offsetX=u.x,p.offsetY=u.y,p.rotateAngle-=o.rotateAngle)}this.clipboardData.childTable=a}if("SwimLane"===o.shape.type){var g=this.diagram.getObject(this.diagram.selectedItems.nodes[i].id),f=(a=this.clipboardData.childTable,Object(Ht["h"])(this.diagram,g.wrapper.children[0],0,!0));for(l=0;l<f.length;l++){var y=this.diagram.getObject(f[l]);a[y.id]=Object(s["b"])(y)}}if(o&&o.isLane){a=this.clipboardData.childTable,g=this.diagram.getObject(o.parentId);var v=Object(Ht["g"])(g,o);a[o.id]=Object(s["b"])(g.shape.lanes[v]),a[o.id].width=g.wrapper.actualSize.width}}}if(0===this.clipboardData.pasteIndex){this.startGroupAction();for(var b=0,w=t;b<w.length;b++){var O=w[b];this.diagram.nameTable[O.id]&&(this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(O)>-1?this.diagram.remove(this.diagram.nameTable[O.targetID]):this.diagram.remove(O))}this.endGroupAction()}return this.sortByZIndex(e,"zIndex"),e},t.prototype.copyProcesses=function(t){if("Bpmn"===t.shape.type&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0){for(var e=t.shape.activity.subProcess.processes,i=0,n=e;i<n.length;i++){var o=n[i];this.processTable[o]=Object(s["b"])(this.diagram.nameTable[o]),this.processTable[o].shape.activity.subProcess.processes&&this.processTable[o].shape.activity.subProcess.processes.length>0&&this.copyProcesses(this.processTable[o])}this.clipboardData.processTable=this.processTable}},t.prototype.group=function(){var t="isProtectedOnChange",e=this.diagram[t];this.diagram.protectPropertyChange(!0),this.diagram.diagramActions=this.diagram.diagramActions|y["c"].Group;var i,n=[],o={};o.id="group"+Object(s["i"])(),o=new A["q"](this.diagram,"nodes",o,!0),o.children=[],n=this.diagram.selectedItems.nodes,n=n.concat(this.diagram.selectedItems.connectors);for(var r=0;r<n.length;r++)n[r].parentId||o.children.push(n[r].id);i=this.diagram.add(o),i&&this.select(i);var a={type:"Group",undoObject:o,redoObject:o,category:"Internal"};this.addHistoryEntry(a),this.diagram.diagramActions=this.diagram.diagramActions&~y["c"].Group,this.diagram.protectPropertyChange(e)},t.prototype.unGroup=function(t){var e="isProtectedOnChange",i=this.diagram[e];this.diagram.protectPropertyChange(!0),this.diagram.diagramActions=this.diagram.diagramActions|y["c"].Group;var n=[];t?n.push(t):n=this.diagram.selectedItems.nodes;for(var o=0;o<n.length;o++){var r=n[o],a={type:"UnGroup",undoObject:Object(s["b"])(r),redoObject:Object(s["b"])(r),category:"Internal"};if(this.diagram.diagramActions&y["c"].UndoRedo||this.addHistoryEntry(a),r.children){r.ports&&r.ports.length>0&&this.diagram.removePorts(r,r.ports),r.annotations&&r.annotations.length>0&&this.diagram.removeLabels(r,r.annotations);for(var c=this.diagram.nameTable[r.parentId],h=r.children.length-1;h>=0;h--)this.diagram.nameTable[r.children[h]].parentId="",this.diagram.deleteChild(this.diagram.nameTable[r.children[h]],r),r.parentId&&r.children[h]&&this.diagram.addChild(c,r.children[h]);r.parentId&&this.diagram.deleteChild(r,c)}this.diagram.removeNode(r),this.clearSelection()}this.diagram.diagramActions=this.diagram.diagramActions&~y["c"].Group,this.diagram.protectPropertyChange(i)},t.prototype.paste=function(t){if(t||this.clipboardData.clipObject){this.diagram.protectPropertyChange(!0);var e=t?this.getNewObject(t):this.clipboardData.clipObject;if(e){var i=1!==e.length,n=!1,o={},r={};0!==this.clipboardData.pasteIndex&&this.clearSelection(),this.diagram.undoRedoModule&&(n=!0,this.diagram.historyManager.startGroupAction());for(var a=0,c=e;a<c.length;a++){var h=c[a];o[h.id]=h}for(var l=0;l<e.length;l++){h=e[l];if(Object(d["x"])(h)===z["b"]){var p=Object(s["b"])(h),u=p.sourceID;p.sourceID="",o[u]&&r[u]&&(p.sourceID=r[u]),u=p.targetID,p.targetID="",o[u]&&r[u]&&(p.targetID=r[u]);var g=this.cloneConnector(p,i);r[h.id]=g.id}else{var f=this.cloneNode(h,i);if(f){r[h.id]=f.id;var m=h.inEdges;if(m)for(var y=0,v=m;y<v.length;y++){var b=v[y];if(o[b]&&r[b]){var w=this.diagram.nameTable[r[b]];w.targetID=r[h.id],this.diagram.connectorPropertyChange(w,{targetID:"",targetPortID:""},{targetID:w.targetID,targetPortID:w.targetPortID})}}if(m=h.outEdges,m)for(var O=0,x=m;O<x.length;O++){b=x[O];if(o[b]&&r[b]){w=this.diagram.nameTable[r[b]];w.sourceID=r[h.id],this.diagram.connectorPropertyChange(w,{sourceID:"",sourcePortID:""},{sourceID:w.sourceID,sourcePortID:w.sourcePortID})}}}}}!0===n&&(this.diagram.historyManager.endGroupAction(),n=!1),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer(),this.clipboardData.pasteIndex++,this.diagram.protectPropertyChange(!1)}}},t.prototype.getNewObject=function(t){var e,i=[];this.clipboardData.pasteIndex=1;for(var n=0;n<t.length;n++)e=Object(s["b"])(t[n]),i.push(e);return i},t.prototype.cloneConnector=function(t,e){var i,n=Object(s["b"])(t);return this.translateObject(n),n.zIndex=-1,i=this.diagram.add(n),this.selectObjects([i],e),i},t.prototype.cloneNode=function(t,e,i,n){var o,r,a={},c=Object(s["b"])(t),h=this.diagram.nameTable[t.parentId];if(t.shape&&"Bpmn"===t.shape.type&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length&&(r=c.shape.activity.subProcess.processes,c.zIndex=-1,c.shape.activity.subProcess.processes=void 0),t.shape&&"SwimLane"===t.shape.type)Object(Ht["l"])(t,this.diagram,this.clipboardData);else if(h&&"SwimLane"===h.shape.type)Object(Ht["l"])(Object(s["b"])(h),this.diagram,this.clipboardData,t,!0);else if(!t.children||!t.children.length||i&&i.length)if(t.shape&&"TextAnnotation"===t.shape.shape&&-1!==t.id.indexOf("_textannotation_")&&this.diagram.nameTable[t.id])for(var d=t.id.split("_textannotation_"),l=void 0,p=this.diagram.nameTable[t.id],u=0;u<p.inEdges.length;u++){var g=this.diagram.nameTable[p.inEdges[u]];if(g){l=this.diagram.nameTable[g.sourceID];var f=this.getAnnotation(l,d[1]),m={id:d[1]+Object(s["i"])(),angle:f.angle,text:f.text,length:f.length,shape:{shape:"TextAnnotation",type:"Bpmn"},nodeId:f.nodeId};this.diagram.addTextAnnotation(m,l)}}else this.translateObject(c,n),c.zIndex=-1,i&&(c.children=i),o=this.diagram.add(c);else o=this.cloneGroup(t,e);for(var y=0,v=Object.keys(a);y<v.length;y++){var b=v[y];this.diagram.add(a[b])}return r&&r.length&&(o.shape.activity.subProcess.processes=r,this.cloneSubProcesses(o)),o&&this.selectObjects([o],e),o},t.prototype.getAnnotation=function(t,e){var i=t.shape.annotations;if(i&&i.length)for(var n=0;n<=i.length;n++)if(i[n].id===e)return i[n]},t.prototype.cloneSubProcesses=function(t){var e=[],i={};if("Bpmn"===t.shape.type&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length)for(var n=t.shape.activity.subProcess.processes,o=0;o<n.length;o++){for(var r=this.diagram.nameTable[n[o]]||this.clipboardData.processTable[n[o]],a=0,c=r.outEdges;a<c.length;a++){var h=c[a];e.indexOf(h)<0&&e.push(h)}for(var d=0,l=r.inEdges;d<l.length;d++){h=l[d];e.indexOf(h)<0&&e.push(h)}var p=Object(s["b"])(this.clipboardData.processTable[n[o]]);p.processId=t.id;var u=this.cloneNode(p,!1);i[n[o]]=u.id,n[o]=u.id,this.diagram.addProcess(u,t.id);for(var g=0,f=e;g<f.length;g++){var m=f[g],y=this.diagram.nameTable[m]||this.diagram.connectorTable[m],v=Object(s["b"])(y);i[v.sourceID]&&i[v.targetID]&&(v.zIndex=-1,v.id+=Object(s["i"])(),v.sourceID=i[v.sourceID],v.targetID=i[v.targetID],e.splice(e.indexOf(m),1),this.diagram.add(v))}}},t.prototype.cloneGroup=function(t,e){var i,n=[],r=[],a=[],c=[];r=r.concat(t.children);var h=Object(s["i"])();if(this.clipboardData.childTable||t.children.length>0)for(var l=0;l<r.length;l++){var p=void 0;p=this.clipboardData.childTable?this.clipboardData.childTable[r[l]]:this.diagram.nameTable[r[l]],p.parentId="",p&&(Object(d["x"])(p)===z["b"]?a.push(p):(i=this.cloneNode(p,e,void 0,h),c.push(p.id),n.push(i.id)))}for(var u=0;u<a.length;u++){if(a[u].sourceID||a[u].targetID)for(var g=0;g<c.length;g++)a[u].sourceID===c[g]&&(a[u].sourceID+=h),a[u].targetID===c[g]&&(a[u].targetID+=h);i=this.cloneConnector(a[u],e),n.push(i.id)}var f=this.cloneNode(t,e,n);return f&&f.container&&f.shape&&"UmlClassifier"===f.shape.type&&(this.diagram.updateDiagramObject(f),f.wrapper.measure(new o["a"])),f},t.prototype.translateObject=function(t,e){t.id+=e||Object(s["i"])();var i=10*this.clipboardData.pasteIndex;if(Object(d["x"])(t)===z["b"]){if(t.sourcePoint={x:t.sourcePoint.x+i,y:t.sourcePoint.y+i},t.targetPoint={x:t.targetPoint.x+i,y:t.targetPoint.y+i},"Bezier"===t.type)for(var n=t.segments,o=0;o<n.length;o++)r["a"].isEmptyPoint(n[o].point1)||(n[o].point1={x:n[o].point1.x+i,y:n[o].point1.y+i}),r["a"].isEmptyPoint(n[o].point2)||(n[o].point2={x:n[o].point2.x+i,y:n[o].point2.y+i});if(("Straight"===t.type||"Bezier"===t.type)&&t.segments&&t.segments.length>0)for(n=t.segments,o=0;o<n.length-1;o++)n[o].point.x+=i,n[o].point.y+=i}else t.offsetX+=i,t.offsetY+=i},t.prototype.drawObject=function(t){var e,i;t&&t.shape&&"Text"===t.shape.type&&(t.width=this.diagram.drawingObject.width?this.diagram.drawingObject.width:50,t.height=this.diagram.drawingObject.height?this.diagram.drawingObject.height:20),i=Object(s["b"])(this.diagram.drawingObject);for(var n=0,o=Object.keys(t);n<o.length;n++){var r=o[n];i[r]=t[r]}return Object(d["x"])(this.diagram.drawingObject)===A["q"]?(e=new A["q"](this.diagram,"nodes",i,!0),e.id=(this.diagram.drawingObject.id||"node")+Object(s["i"])(),this.diagram.initObject(e)):(e=new z["b"](this.diagram,"connectors",i,!0),e.id=(this.diagram.drawingObject.id||"connector")+Object(s["i"])(),this.diagram.initObject(e)),this.diagram.updateDiagramObject(e),this.diagram.currentDrawingObject=e,e},t.prototype.addObjectToDiagram=function(t){var e;this.diagram.removeFromAQuad(t),this.diagram.removeObjectsFromLayer(this.diagram.nameTable[t.id]),delete this.diagram.nameTable[t.id],e=this.diagram.add(t),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer(),this.selectObjects([e]),t&&!Object(w["c"])(this.diagram)&&(this.diagram.tool&=~y["f"].DrawOnce,this.diagram.currentDrawingObject=void 0)},t.prototype.addText=function(t,e){var i=this.diagram.findElementUnderMouse(t,e);this.diagram.startTextEdit(t,i instanceof g["a"]?i.id.split("_")[1]:void 0)},t.prototype.updateArgsObject=function(t,e,i){if(t)for(var n=void 0,o=0;o<t.length;o++)n=Object(d["x"])(t[o])===z["b"],n?i.connectors.push(Object(d["h"])(t[o])):i.nodes.push(Object(d["h"])(t[o]))},t.prototype.updateSelectionChangeEventArgs=function(t,e,i){if(Object(n["D"])()){t={cause:this.diagram.diagramActions,newValue:{},oldValue:{},state:"Changing",type:"Addition",cancel:!1};var o=t.oldValue,r=t.newValue;return o.connectors=[],o.nodes=[],r.connectors=[],r.nodes=[],this.updateArgsObject(e,t,r),this.updateArgsObject(i,t,o),t}return t},t.prototype.selectObjects=function(t,e,i){var o={oldValue:i||this.getSelectedObject(),newValue:t,cause:this.diagram.diagramActions,state:"Changing",type:"Addition",cancel:!1},r=!0;Object(n["D"])()&&(o=this.updateSelectionChangeEventArgs(o,t,i||[])),this.diagram.triggerEvent(y["e"].selectionChange,o);var a=Object(w["p"])(this.diagram),s=Object(w["C"])(this.diagram);if(s||a){if(!a&&(t.length>1||e&&1===t.length)){if(1!==t.length)return;this.clearSelection()}if(!s&&1===t.length&&(!e||!lt(this.diagram)))return void this.clearSelection()}if(!o.cancel){for(var c=0;c<t.length;c++){var h=t[c];if(r=!0,lt(this.diagram)){if((c>0||e)&&h.children&&!h.parentId)for(var l=0;l<this.diagram.selectedItems.nodes.length;l++){var p=this.diagram.nameTable[this.diagram.selectedItems.nodes[l].parentId];p&&(p=this.findParent(p),p&&h.id===p.id&&this.selectGroup(h))}this.selectProcesses(h),r=this.selectBpmnSubProcesses(h),r&&this.select(h,c>0||e,!0)}else this.select(h,c>0||e,!0)}o={oldValue:Object(d["h"])(i||[]),newValue:Object(d["h"])(this.getSelectedObject()),cause:this.diagram.diagramActions,state:"Changed",type:"Addition",cancel:!1},this.updateBlazorSelectorModel(i),o=this.updateSelectionChangeEventArgs(o,t,i),this.diagram.triggerEvent(y["e"].selectionChange,o),this.diagram.renderSelector(e||t&&t.length>1)}},t.prototype.findParent=function(t){return t.parentId&&(t=this.diagram.nameTable[t.parentId],this.findParent(t)),t},t.prototype.selectProcesses=function(t){if(this.hasProcesses(t))for(var e=t.shape.activity.subProcess.processes,i=0;i<e.length;i++){var n=this.diagram.nameTable[e[i]];this.hasProcesses(n)&&this.selectObjects([n],!0),this.unSelect(n)}},t.prototype.selectGroup=function(t){for(var e=0;e<t.children.length;e++){var i=this.diagram.nameTable[t.children[e]];i.children&&this.selectGroup(i),this.unSelect(this.diagram.nameTable[t.children[e]])}},t.prototype.selectBpmnSubProcesses=function(t){var e,i=!0;if(t.processId)i=!ut(this.diagram,this.diagram.nameTable[t.processId])&&this.selectBpmnSubProcesses(this.diagram.nameTable[t.processId]);else if(t instanceof z["b"]){if(t.sourceID&&this.diagram.nameTable[t.sourceID]&&this.diagram.nameTable[t.sourceID].processId&&(e=this.diagram.nameTable[t.sourceID].processId),t.targetID&&this.diagram.nameTable[t.targetID]&&this.diagram.nameTable[t.targetID].processId&&(e=this.diagram.nameTable[t.targetID].processId),e){if(ut(this.diagram,this.diagram.nameTable[e]))return!1;i=this.selectBpmnSubProcesses(this.diagram.nameTable[e])}}else t.parentId&&this.diagram.nameTable[t.parentId]&&"UmlClassifier"===this.diagram.nameTable[t.parentId].shape.type&&ut(this.diagram,this.diagram.nameTable[t.parentId])&&(i=!1);return i},t.prototype.hasProcesses=function(t){return!!(t&&"Bpmn"===t.shape.type&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0)},t.prototype.select=function(t,e,i){var n=this.getObjectLayer(t.id);if(Object(w["A"])(t)&&!(t instanceof A["t"])&&!ut(this.diagram,t)&&n&&!n.lock&&n.visible&&t.wrapper.visible){e=!!lt(this.diagram)&&e,e||this.clearSelection();var o=this.diagram.selectedItems,r=t;if(r instanceof A["q"])if(t.isHeader){var a=this.diagram.nameTable[t.parentId];o.nodes.push(a)}else o.nodes.push(t);else o.connectors.push(t);if(e)o.wrapper.rotateAngle=o.rotateAngle=0,o.wrapper.children.push(t.wrapper);else if(o.init(this.diagram),1===o.nodes.length&&0===o.connectors.length){var s=Object(Ht["i"])(this.diagram,o);s&&(o.wrapper.children[0]=s),o.rotateAngle=o.nodes[0].rotateAngle,o.wrapper.rotateAngle=o.nodes[0].rotateAngle,o.wrapper.pivot=o.nodes[0].pivot}i||this.diagram.renderSelector(e)}},t.prototype.getObjectCollectionId=function(t,e){var i=[],n=0,o=t?this.diagram.selectedItems.nodes:this.diagram.selectedItems.connectors;while(!e&&n<o.length)i[n]=o[n].id,n++;return i},t.prototype.updateBlazorSelectorModel=function(t,e){var i="ejsInterop";if(window&&window[i]){var n=0,o=[],r=[],a=[];while(t&&n<t.length)a[n]=t[n].id,n++;n=0,o=this.getObjectCollectionId(!0,e),r=this.getObjectCollectionId(!1,e);var s={nodes:o,connectors:r},c=Object(d["h"])(s);window[i].updateDiagramCollection&&window[i].updateDiagramCollection.call(this.diagram,"selectedItems",c,a,!1,!0)}},t.prototype.labelSelect=function(t,e){var i=this.diagram.selectedItems;i.nodes=i.connectors=[],t instanceof A["q"]?i.nodes[0]=t:i.connectors[0]=t,i.annotation=this.findTarget(e,t),i.init(this.diagram),this.diagram.renderSelector(!1)},t.prototype.unSelect=function(t){var e=[];e.push(t);var i={oldValue:e,newValue:[],cause:this.diagram.diagramActions,state:"Changing",type:"Removal",cancel:!1};if(this.diagram.currentSymbol||(Object(n["D"])()&&(i=this.updateSelectionChangeEventArgs(i,[],e)),this.diagram.triggerEvent(y["e"].selectionChange,i)),ut(this.diagram,t)){var o=this.diagram.selectedItems,r=void 0;t instanceof A["q"]?(r=o.nodes.indexOf(t,0),o.nodes.splice(r,1)):(r=o.connectors.indexOf(t,0),o.connectors.splice(r,1)),i={oldValue:e,newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:!1},this.updateBlazorSelectorModel(e),i={oldValue:Object(d["h"])(e),newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:i.cancel},i.cancel||(r=o.wrapper.children.indexOf(t.wrapper,0),o.wrapper.children.splice(r,1),this.diagram.updateSelector(),this.diagram.currentSymbol||(i=this.updateSelectionChangeEventArgs(i,[],e),this.diagram.triggerEvent(y["e"].selectionChange,i)))}},t.prototype.getChildElements=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];n.children&&n.children.length>0?e.concat(this.getChildElements(n.children)):(e.push(n.id),n instanceof g["a"]&&e.push(n.id+"_text"))}return e},t.prototype.moveSvgNode=function(t,e){var i=Object(c["m"])(e+"_groupElement",this.diagram.element.id),n=Object(c["m"])(t+"_groupElement",this.diagram.element.id);i.parentNode.insertBefore(n,i)},t.prototype.sendLayerBackward=function(t){var e=this.getLayer(t);if(e&&0!==e.zIndex){var i=e.zIndex;if("SVG"===this.diagram.mode){var n=e.objects,o=this.getLayer(this.diagram.layerZIndexTable[i-1]).objects[0];if(o)for(var r=0,a=n;r<a.length;r++){var s=a[r];this.moveSvgNode(s,o)}}var c=this.getLayer(this.diagram.layerZIndexTable[i-1]);c.zIndex=c.zIndex+1,e.zIndex=e.zIndex-1;var h=this.diagram.layerZIndexTable[i];this.diagram.layerZIndexTable[i]=this.diagram.layerZIndexTable[i-1],this.diagram.layerZIndexTable[i-1]=h,"Canvas"===this.diagram.mode&&this.diagram.refreshDiagramLayer()}},t.prototype.bringLayerForward=function(t){var e=this.getLayer(t);if(e&&e.zIndex<this.diagram.layers.length-1){var i=e.zIndex,n=this.getLayer(this.diagram.layerZIndexTable[i+1]);if("SVG"===this.diagram.mode)for(var o=e.objects[0],r=n.objects,a=0,s=r;a<s.length;a++){var c=s[a];c&&this.moveSvgNode(c,o)}n.zIndex=n.zIndex-1,e.zIndex=e.zIndex+1;var h=this.diagram.layerZIndexTable[i];this.diagram.layerZIndexTable[i]=this.diagram.layerZIndexTable[i+1],this.diagram.layerZIndexTable[i+1]=h,"Canvas"===this.diagram.mode&&this.diagram.refreshDiagramLayer()}},t.prototype.sendToBack=function(){if(lt(this.diagram)){for(var t=this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id,e=this.diagram.nameTable[t].zIndex,i=this.diagram.layers.indexOf(this.getObjectLayer(t)),n=this.diagram.layers[i].zIndexTable,o=e;o>0;o--)n[o]&&(n[o-1]?(n[o]=n[o-1],this.diagram.nameTable[n[o]].zIndex=o):(n[o-1]=n[o],this.diagram.nameTable[n[o-1]].zIndex=o,delete n[o]));if(n[0]=this.diagram.nameTable[t].id,this.diagram.nameTable[t].zIndex=0,"SVG"===this.diagram.mode){o=1;var r=n[o];while(!r&&o<e)r=n[++o];this.moveSvgNode(t,r),this.updateNativeNodeIndex(t)}else this.diagram.refreshCanvasLayers()}},t.prototype.bringToFront=function(){if(lt(this.diagram)){for(var t=this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id,e=this.diagram.layers.indexOf(this.getObjectLayer(t)),i=this.diagram.layers[e].zIndexTable,n=Number(Object.keys(i).sort((function(t,e){return Number(t)-Number(e)})).reverse()[0]),o=this.diagram.nameTable[t].zIndex,r=o;r<n;r++)i[r]&&(i[r+1]?(i[r]=i[r+1],this.diagram.nameTable[i[r]].zIndex=r):(i[r+1]=i[r],this.diagram.nameTable[i[r+1]].zIndex=r,delete i[r]));if(i[n]=this.diagram.nameTable[t].id,this.diagram.nameTable[t].zIndex=n,"SVG"===this.diagram.mode){var a=this.diagram.diagramLayer,s=(this.getChildElements(this.diagram.nameTable[t].wrapper.children),Object(c["m"])(t+"_groupElement",this.diagram.element.id)),h=this.diagram.selectedItems.nodes;if(h.length>0&&("Native"===h[0].shape.type||"HTML"===h[0].shape.type)){s.parentNode.removeChild(s);for(var d=0;d<this.diagram.views.length;d++){s=Object(c["m"])(t+("HTML"===h[0].shape.type?"_html_element":"_content_groupElement"),this.diagram.views[d]);var l=s.parentNode.lastChild;l.parentNode.insertBefore(s,l.nextSibling)}var p=Object(c["r"])(this.diagram.element.id);this.diagram.diagramRenderer.renderElement(this.diagram.nameTable[t].wrapper,a,p)}else{var u=this.getObjectLayer(t);for(r=0;r<u.objects.length;r++)u.objects[r]!==t&&(this.moveSvgNode(u.objects[r],t),this.updateNativeNodeIndex(t))}}else this.diagram.refreshCanvasLayers()}},t.prototype.sortByZIndex=function(t,e){var i=e||"zIndex";return t=t.sort((function(t,e){return t[i]-e[i]})),t},t.prototype.sendForward=function(){if(lt(this.diagram)){var t=this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id,e=this.diagram.layers.indexOf(this.getObjectLayer(t)),i=this.diagram.layers[e].zIndexTable,n=(Object.keys(i).length,this.diagram.nameTable[t]),o=[],r=this.diagram.spatialSearch.findObjects(n.wrapper.bounds);r.length>2&&(r=this.sortByZIndex(r));for(var a=0,s=r;a<s.length;a++){var c=s[a];if(n.id!==c.id){var h=this.getObjectLayer(c.id).zIndex;if(e===h&&Number(this.diagram.nameTable[t].zIndex)<Number(c.zIndex)&&n.wrapper.bounds.intersects(c.wrapper.bounds)){o.push(c);break}}}if(o.length>0){var d=o[0].zIndex,l=n.zIndex;i[d];this.diagram.layers[0].zIndexTable[d]=n.id,this.diagram.nameTable[i[d]].zIndex=d,this.diagram.layers[0].zIndexTable[l]=o[0].id,this.diagram.nameTable[i[l]].zIndex=l,"SVG"===this.diagram.mode?(this.moveSvgNode(i[Number(o[0].zIndex)],t),this.updateNativeNodeIndex(i[Number(o[0].zIndex)],t)):this.diagram.refreshCanvasLayers()}}},t.prototype.sendBackward=function(){if(lt(this.diagram)){var t=this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id,e=this.diagram.layers.indexOf(this.getObjectLayer(t)),i=this.diagram.layers[e].zIndexTable,n=(Object.keys(i).length,this.diagram.nameTable[t]),o=[],r=this.diagram.spatialSearch.findObjects(n.wrapper.bounds);r.length>2&&(r=this.sortByZIndex(r));for(var a=0,s=r;a<s.length;a++){var c=s[a];if(n.id!==c.id){var h=this.getObjectLayer(c.id).zIndex;e===h&&Number(this.diagram.nameTable[t].zIndex)>Number(c.zIndex)&&n.wrapper.bounds.intersects(c.wrapper.bounds)&&o.push(c)}}if(o.length>0){var d=o[o.length-1].zIndex,l=n.zIndex;i[d];i[d]=n.id,this.diagram.nameTable[i[d]].zIndex=d,i[l]=o[o.length-1].id,this.diagram.nameTable[i[l]].zIndex=l,"SVG"===this.diagram.mode?(this.moveSvgNode(t,i[o[o.length-1].zIndex]),this.updateNativeNodeIndex(t,i[o[o.length-1].zIndex])):this.diagram.refreshCanvasLayers()}}},t.prototype.updateNativeNodeIndex=function(t,e){for(var i=this.diagram.selectedItems.nodes[0]||this.diagram.getObject(e),n=0;n<this.diagram.views.length;n++)if(i&&("HTML"===i.shape.type||"Native"===i.shape.type)){var o="HTML"===i.shape.type?"_html_element":"_content_groupElement",r=Object(c["m"])(t+o,this.diagram.views[n]),a=e?Object(c["m"])(e+o,this.diagram.views[n]):r.parentElement.firstChild;r.parentNode.id===a.parentNode.id&&a.parentNode.insertBefore(r,a)}},t.prototype.initSelectorWrapper=function(){var t=this.diagram.selectedItems;t.init(this.diagram),1===t.nodes.length&&0===t.connectors.length&&(t.rotateAngle=t.nodes[0].rotateAngle,t.wrapper.rotateAngle=t.nodes[0].rotateAngle,t.wrapper.pivot=t.nodes[0].pivot)},t.prototype.doRubberBandSelection=function(t){this.clearSelectionRectangle();var e=[],i=[];e=this.diagram.getNodesConnectors(e),i="CompleteIntersect"===this.diagram.selectedItems.rubberBandSelectionMode?Object(d["i"])(t,e):this.diagram.spatialSearch.findObjects(t),i.length&&this.selectObjects(i,!0)},t.prototype.clearSelectionRectangle=function(){var t=Object(c["g"])(this.diagram.element.id),e=t.getElementById(this.diagram.element.id+"_diagramAdorner_selected_region");e&&Object(n["H"])(e)},t.prototype.dragConnectorEnds=function(t,e,i,n,o,r){var a,s,c,h,d=!1;return e instanceof A["t"]?(a=e,s=a.connectors[0]):e instanceof z["b"]&&this.diagram.currentDrawingObject&&(this.clearSelection(),s=this.diagram.currentDrawingObject),"BezierSourceThumb"!==t&&"BezierTargetThumb"!==t||(d=!0),"ConnectorSourceEnd"===t||"BezierSourceThumb"===t?(c=i.x-(d?n.bezierPoint1.x:s.sourcePoint.x),h=i.y-(d?n.bezierPoint1.y:s.sourcePoint.y),this.dragSourceEnd(s,c,h,null,i,t,void 0,o,r,void 0,n)):(c=i.x-(d?n.bezierPoint2.x:s.targetPoint.x),h=i.y-(d?n.bezierPoint2.y:s.targetPoint.y),this.dragTargetEnd(s,c,h,null,i,t,void 0,n))},t.prototype.getSelectedObject=function(){var t=this.diagram.selectedItems;return t.nodes.concat(t.connectors)},t.prototype.clearSelection=function(t){if(lt(this.diagram)){var e=this.diagram.selectedItems,i=this.getSelectedObject();this.diagram.currentSymbol&&(this.diagram.previousSelectedObject=i);var o={oldValue:i,newValue:[],cause:this.diagram.diagramActions,state:"Changing",type:"Removal",cancel:!1};this.updateBlazorSelectorModel(i,!0),t&&(Object(n["D"])()&&(o=this.updateSelectionChangeEventArgs(o,[],i)),this.diagram.triggerEvent(y["e"].selectionChange,o)),o.cancel||(e.offsetX=0,e.offsetY=0,e.width=0,e.height=0,e.rotateAngle=0,e.nodes=[],e.connectors=[],e.wrapper=null,e.annotation=void 0,this.diagram.clearSelectorLayer(),t&&(o={oldValue:Object(d["h"])(i),newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:!1},o=this.updateSelectionChangeEventArgs(o,[],i),this.diagram.triggerEvent(y["e"].selectionChange,o)))}},t.prototype.clearSelectedItems=function(){var t=this.diagram.selectedItems.nodes?this.diagram.selectedItems.nodes.length:0,e=this.diagram.selectedItems.connectors?this.diagram.selectedItems.connectors.length:0;this.clearSelection(t+e>0)},t.prototype.removeStackHighlighter=function(){var t=Object(c["g"])(this.diagram.element.id),e=t.getElementById(t.id+"_stack_highlighter");e&&e.parentNode.removeChild(e)},t.prototype.renderStackHighlighter=function(t,e){var i,n,o,r=this.diagram.selectedItems.nodes[0];if(!e){var a=this.diagram.findObjectsUnderMouse(t.position);if(e=this.diagram.findObjectUnderMouse(a,"Drag",!0),e&&!(e.isLane||e.isPhase||e.isHeader))for(var s=0;s<a.length;s++){var c=this.diagram.nameTable[a[s].id];(c.isLane||c.isPhase||c.isHeader)&&(e=c)}}if(r&&e&&e.isLane&&r.shape&&!r.shape.isPhase&&(n=this.diagram.nameTable[e.parentId],this.diagram.currentSymbol&&"SwimLane"===n.shape.type&&(i=!0),r&&!r.parentId&&"SwimLane"!==r.shape.type||r&&r.parentId&&this.diagram.nameTable[r.parentId]&&this.diagram.nameTable[r.parentId].isLane&&r.parentId!==e.parentId&&r.parentId!==e.id)){o=this.diagram.selectedItems;var h=Object(Ht["i"])(this.diagram,o,e.id,!0);h&&(o.wrapper.children[0]=h),this.diagram.renderSelector(!1,!0),o.wrapper.children[0]=o.nodes[0].wrapper}if(r&&e&&e.parentId&&r.shape&&r.shape.isPhase){var d=this.diagram.nameTable[e.parentId];"SwimLane"===d.shape.type&&(this.diagram.selectedItems.wrapper.children[0]=this.diagram.nameTable[e.parentId].wrapper,this.diagram.renderSelector(!1,!0))}if(i&&this.diagram.currentSymbol.shape.isLane||r&&e&&r.parentId&&e.parentId&&!r.isPhase&&r.parentId===e.parentId&&r.id!==e.id&&n&&n.container&&("Stack"===n.container.type||"Grid"===n.container.type)){h=void 0;var l="Vertical"===n.container.orientation,p="Stack"===n.container?l:!l;"Grid"===n.container.type&&e.isLane&&(!this.diagram.currentSymbol&&"Horizontal"===n.shape.orientation&&e.rowIndex!==r.rowIndex||"Vertical"===n.shape.orientation&&e.columnIndex!==r.columnIndex||this.diagram.currentSymbol&&this.diagram.currentSymbol.shape.orientation===n.container.orientation)&&(o=this.diagram.selectedItems,h=Object(Ht["i"])(this.diagram,o,e.id,i));var u="Stack"===n.container.type?e.wrapper:h;u&&Object(nt["h"])(u,p,t.position,this.diagram,!1,!0)}},t.prototype.drag=function(t,e,i){var n,o=[];if(Object(w["o"])(t)&&this.checkBoundaryConstraints(e,i,t.wrapper.bounds)&&Object(w["r"])(this.diagram))if(t instanceof A["q"]){var r={offsetX:t.offsetX,offsetY:t.offsetY};if(t.offsetX+=e,t.offsetY+=i,t.children&&!t.container){for(var a=this.getAllDescendants(t,o),s=0;s<a.length;s++)n=this.diagram.nameTable[a[s].id],this.drag(n,e,i);this.updateInnerParentProperties(t)}if(Object(nt["c"])(this.diagram,t,!0)?Object(nt["b"])(this.diagram,t):(t&&t.shape&&"UmlClassifier"===t.shape.type&&(t.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(t,r,{offsetX:t.offsetX,offsetY:t.offsetY},void 0,void 0,!1),t.wrapper.measureChildren=!1),"SwimLane"===t.shape.type&&!this.diagram.currentSymbol){var c=t.wrapper.children[0],h=Object(Ht["h"])(this.diagram,c,0,!0);Object(Ht["t"])(h,this.diagram)}}else{var d=t,l=(r={sourcePoint:d.sourcePoint,targetPoint:d.targetPoint},"Bezier"===d.type),p=!1;if(d.sourceWrapper?p=!0:this.dragSourceEnd(d,e,i,!0,null,"",l),d.targetWrapper?p=!0:this.dragTargetEnd(d,e,i,!0,null,"",l),!p){this.dragControlPoint(d,e,i,!0);var u={sourcePoint:d.sourcePoint,targetPoint:d.targetPoint};this.diagram.connectorPropertyChange(d,r,u)}}},t.prototype.connectorSegmentChange=function(t,e,i){var n,o,a=!0;if(!1===e.equals(e,t.wrapper.bounds)&&t.outEdges.length>0)for(var s=0;s<t.outEdges.length;s++){var c=this.diagram.nameTable[t.outEdges[s]];if(a=""!==c.targetID?!this.isSelected(this.diagram.nameTable[c.targetID]):!this.isSelected(this.diagram.nameTable[c.id]),"Orthogonal"===c.type&&c.segments&&c.segments.length>1)if(i){var h=c.segments[0],d=c.segments[1],l=Object(kt["i"])(t.wrapper,t.wrapper.corners,t.wrapper.bounds),p=Object(kt["c"])(l,h.direction);p=Object(kt["d"])(c,c.sourceWrapper,p,{x:c.sourceWrapper.offsetX,y:c.sourceWrapper.offsetY},!1);var u={corners:void 0,point:p,margin:void 0,direction:h.direction},g={corners:void 0,point:d.points[1],margin:void 0,direction:void 0},f=Object(kt["h"])(u,g);h.length=r["a"].distancePoints(f[0],f[1]),d.direction&&d.length&&(d.length=r["a"].distancePoints(f[1],f[2]))}else if(a){switch(c.segments[0].direction){case"Bottom":n=t.wrapper.bounds.bottomCenter.x-e.bottomCenter.x,o=t.wrapper.bounds.bottomCenter.y-e.bottomCenter.y;break;case"Top":n=t.wrapper.bounds.topCenter.x-e.topCenter.x,o=t.wrapper.bounds.topCenter.y-e.topCenter.y;break;case"Left":n=t.wrapper.bounds.middleLeft.x-e.middleLeft.x,o=t.wrapper.bounds.middleLeft.y-e.middleLeft.y;break;case"Right":n=t.wrapper.bounds.middleRight.x-e.middleRight.x,o=t.wrapper.bounds.middleRight.y-e.middleRight.y;break}this.dragSourceEnd(c,n,o,!0,null,"ConnectorSourceEnd",void 0,void 0,void 0,!0)}}},t.prototype.updateEndPoint=function(t,e){t.sourcePoint,t.targetPoint,t.sourceID&&t.sourceID,t.targetID&&t.targetID,t.sourcePortID&&t.sourcePortID,t.targetPortID&&t.targetPortID,t.segments&&t.segments;var i={sourcePoint:t.sourcePoint,targetPoint:t.targetPoint};t.sourceID&&(i.sourceID=t.sourceID),t.targetID&&(i.targetID=t.targetID),t.sourcePortID&&(i.sourcePortID=t.sourcePortID),t.targetPortID&&(i.targetPortID=t.targetPortID),t.segments&&(i.segments=t.segments),this.diagram.connectorPropertyChange(t,e||{},i),this.diagram.updateSelector()},t.prototype.dragSourceEnd=function(t,e,i,n,o,r,a,s,c,h,d){var l=this.diagram.nameTable[t.id],p={},u=this.checkBoundaryConstraints(e,i,l.wrapper.bounds);if(Object(w["g"])(l)&&u&&"BezierSourceThumb"!==r&&Object(w["r"])(this.diagram)&&(p={sourcePoint:l.sourcePoint},l.sourcePoint.x+=e,l.sourcePoint.y+=i,"ConnectorSourceEnd"===r&&"Orthogonal"===l.type&&this.changeSegmentLength(l,s,c,h),"Bpmn"===l.shape.type&&"Default"===l.shape.sequence&&this.updatePathElementOffset(l)),"Bezier"===l.type)if(p={sourcePoint:l.sourcePoint},d)this.translateBezierPoints(t,""===r?"ConnectorSourceEnd":r,e,i,d,o,!a);else for(var g=0;g<t.segments.length;g++)this.translateBezierPoints(t,""===r?"ConnectorSourceEnd":r,e,i,t.segments[g],o,!a);return n||this.updateEndPoint(l,p),this.diagram.refreshCanvasLayers(),u},t.prototype.updatePathElementOffset=function(t){t.wrapper.children.splice(3,1);var e=new p["a"],i=t.intermediatePoints;e=Object(d["V"])(i,t),t.wrapper.children.splice(3,0,e)},t.prototype.changeSegmentLength=function(t,e,i,n){if(t.segments&&null!==t.segments[0].direction&&(!e&&""===t.sourceID||n)){var o=t.segments[0],a=t.segments[1],s=this.diagram.nameTable[t.sourceID],c=void 0;if(o.points[0]=t.sourcePoint,"Top"===o.direction||"Bottom"===o.direction?(o.points[o.points.length-1].x=t.sourcePoint.x,a.points[0].y=o.points[o.points.length-1].y):(o.points[o.points.length-1].y=t.sourcePoint.y,a.points[0].x=o.points[o.points.length-1].x),o.direction&&(o.length||0===o.length)&&(o.length=r["a"].distancePoints(o.points[0],o.points[o.points.length-1])),a.direction&&(a.length||0===a.length)&&(a.length=r["a"].distancePoints(o.points[o.points.length-1],a.points[a.points.length-1]),a.direction=r["a"].direction(o.points[o.points.length-1],a.points[a.points.length-1])),""!==t.sourcePortID&&o.length<10)if(t.segments.length>2){var h=t.segments[2],d=r["a"].direction(h.points[0],h.points[1]);o.direction===Object(kt["e"])(d)?("Right"===o.direction?h.points[0].x=o.points[o.points.length-1].x=s.wrapper.corners.middleRight.x+20:"Left"===o.direction?h.points[0].x=o.points[o.points.length-1].x=s.wrapper.corners.middleLeft.x-20:"Top"===o.direction?h.points[0].y=o.points[o.points.length-1].y=s.wrapper.corners.topCenter.y-20:h.points[0].y=o.points[o.points.length-1].y=s.wrapper.corners.bottomCenter.y+20,h.direction&&h.length&&(h.length=r["a"].distancePoints(h.points[0],h.points[h.points.length-1])),o.length=r["a"].distancePoints(o.points[0],o.points[o.points.length-1])):o.direction===d&&h.direction&&h.length?("Top"===o.direction||"Bottom"===o.direction?(h.points[0]=o.points[0],h.points[h.points.length-1].x=h.points[0].x):(h.points[0]=o.points[0],h.points[h.points.length-1].y=h.points[0].y),h.length=r["a"].distancePoints(h.points[0],h.points[h.points.length-1]),t.segments.splice(0,2)):o.length=20}else o.length=20;else if(o.length<1)if(""!==t.sourceID){if("Right"===a.direction?(c=s.wrapper.corners.middleRight,a.points[a.points.length-1].y=c.y):"Left"===a.direction?(c=s.wrapper.corners.middleLeft,a.points[a.points.length-1].y=c.y):"Top"===a.direction?(c=s.wrapper.corners.topCenter,a.points[a.points.length-1].x=c.x):(c=s.wrapper.corners.bottomCenter,a.points[a.points.length-1].x=c.x),a.length=r["a"].distancePoints(c,a.points[a.points.length-1]),t.segments.length>2){h=t.segments[2];h.direction&&h.length&&(h.length=r["a"].distancePoints(a.points[a.points.length-1],h.points[h.points.length-1]))}t.segments.splice(0,1)}else t.segments.splice(0,1)}else e&&!i&&t.sourceID!==e.id&&t.segments&&null!==t.segments[0].direction&&e&&e instanceof A["q"]&&this.changeSourceEndToNode(t,e),e&&i&&t.sourcePortID!==i&&t.segments&&null!==t.segments[0].direction&&e&&e instanceof A["q"]&&this.changeSourceEndToPort(t,e,i)},t.prototype.changeSourceEndToPort=function(t,e,i){var n=this.diagram.getWrapper(e.wrapper,i),o={x:n.offsetX,y:n.offsetY},a=Object(kt["g"])(o,Object(s["c"])(e.wrapper),e.wrapper.bounds,!1),c=t.segments[0],h=t.segments[1];if(c.direction!==a){var d=[],l={};if(c.direction===Object(kt["e"])(a)){l={};var p=void 0;"Top"===a||"Bottom"===a?(p="Top"===a?{type:"Orthogonal",isTerminal:!0,direction:a,length:Math.abs(c.points[0].y-o.y)}:{type:"Orthogonal",isTerminal:!0,direction:a,length:Math.abs(o.y-c.points[0].y)},l=c.points[0].x>o.x?{type:"Orthogonal",isTerminal:!0,direction:"Right",length:c.points[0].x-o.x}:{type:"Orthogonal",isTerminal:!0,direction:"Left",length:o.x-c.points[0].x}):(p="Right"===a?{type:"Orthogonal",isTerminal:!0,direction:a,length:Math.abs(c.points[0].x-o.x)}:{type:"Orthogonal",isTerminal:!0,direction:a,length:Math.abs(o.x-c.points[0].x)},l=c.points[0].y>o.y?{type:"Orthogonal",direction:"Top",isTerminal:!0,length:c.points[0].y-o.y}:{type:"Orthogonal",direction:"Bottom",isTerminal:!0,length:o.y-c.points[0].y}),d.push(new z["c"](t,"segments",p,!0)),d.push(new z["c"](t,"segments",l,!0))}else l={type:"Orthogonal",direction:a,length:20,isTerminal:!0},d.push(new z["c"](t,"segments",l,!0));c.direction!==Object(kt["e"])(a)&&("Top"===a||"Bottom"===a?(c.points[0].x=o.x,c.points[0].y=c.points[c.points.length-1].y="Top"===a?o.y-20:o.y+20):(c.points[0].y=o.y,c.points[0].x=c.points[c.points.length-1].x="Right"===a?o.x+20:o.x-20),c.length=r["a"].distancePoints(c.points[0],c.points[c.points.length-1]),h.length=r["a"].distancePoints(c.points[c.points.length-1],h.points[h.points.length-1])),t.segments=d.concat(t.segments)}else c.points[0]=o,"Top"===a||"Bottom"===a?c.points[c.points.length-1].x=o.x:c.points[c.points.length-1].y=o.y,c.length=r["a"].distancePoints(c.points[0],c.points[c.points.length-1]),h.length=r["a"].distancePoints(c.points[c.points.length-1],h.points[h.points.length-1])},t.prototype.removeTerminalSegment=function(t,e){for(var i=0;i<t.segments.length-2;i++){var n=t.segments[0];n.isTerminal&&(e?n.isTerminal=!1:(t.segments.splice(i,1),i--))}},t.prototype.changeSourceEndToNode=function(t,e){this.removeTerminalSegment(t);var i,n,o=e.wrapper.children[0].corners,a=t.segments[0],s=t.segments[1],c=[];if("Right"===a.direction||"Left"===a.direction)if(i="Left"===a.direction?o.middleLeft:o.middleRight,a.length>o.width||"Left"===a.direction&&i.x>=a.points[0].x||"Right"===a.direction&&i.x<=a.points[0].x)a.points[0].y=a.points[a.points.length-1].y=i.y,a.points[0].x=i.x,a.length=r["a"].distancePoints(a.points[0],a.points[a.points.length-1]),s.length=r["a"].distancePoints(a.points[a.points.length-1],s.points[s.points.length-1]);else{var h=void 0;h=s.direction?s.direction:r["a"].direction(s.points[0],s.points[s.points.length-1]),n="Bottom"===h?o.bottomCenter:o.topCenter,s.length&&s.direction&&(s.length="Top"===h?a.points[a.points.length-1].y-(n.y+20):n.y+20-a.points[a.points.length-1].y),a.length=a.points[a.points.length-1].x-n.x,a.direction=a.length>0?"Right":"Left";var d={type:"Orthogonal",direction:h,length:20};c.push(new z["c"](t,"segments",d,!0)),t.segments=c.concat(t.segments)}else if(i="Bottom"===a.direction?o.bottomCenter:o.topCenter,a.length>o.height||"Top"===a.direction&&i.y>=a.points[0].y||"Bottom"===a.direction&&i.y<=a.points[0].y)a.points[0].x=a.points[a.points.length-1].x=i.x,a.points[0].y=i.y,a.length=r["a"].distancePoints(a.points[0],a.points[a.points.length-1]),s.length=r["a"].distancePoints(a.points[a.points.length-1],s.points[s.points.length-1]);else{n="Left"===s.direction?o.middleLeft:o.middleRight;h=void 0;h=s.direction?s.direction:r["a"].direction(s.points[0],s.points[s.points.length-1]),s.length&&s.direction&&(s.length="Left"===h?a.points[a.points.length-1].x-(n.x+20):n.x+20-a.points[a.points.length-1].x),a.length=a.points[a.points.length-1].y-n.y,a.direction=a.length>0?"Bottom":"Top";d={type:"Orthogonal",direction:h,length:20};c.push(new z["c"](t,"segments",d,!0)),t.segments=c.concat(t.segments)}},t.prototype.translateBezierPoints=function(t,e,i,n,o,a,s){var c=t.segments.indexOf(o),h=t.segments[c];h&&("BezierSourceThumb"===e&&(h.vector1.angle||h.vector1.distance)?h.vector1={distance:t.distance(t.sourcePoint,a),angle:r["a"].findAngle(t.sourcePoint,a)}:"BezierTargetThumb"===e&&(h.vector2.angle||h.vector2.distance)?h.vector2={distance:t.distance(t.targetPoint,a),angle:r["a"].findAngle(t.targetPoint,a)}:("ConnectorSourceEnd"===e&&!t.sourceID||"ConnectorTargetEnd"===e&&!t.targetID)&&s&&Object(z["g"])(h.vector1)&&Object(z["g"])(h.vector2)?(r["a"].isEmptyPoint(h.point1)&&(h.bezierPoint1=Object(z["f"])(t.sourcePoint,t.targetPoint)),r["a"].isEmptyPoint(h.point2)&&(h.bezierPoint2=Object(z["f"])(t.targetPoint,t.sourcePoint))):"BezierSourceThumb"===e||"ConnectorSourceEnd"===e&&!s&&Object(z["g"])(h.vector1)?(h.bezierPoint1.x+=i,h.bezierPoint1.y+=n,r["a"].isEmptyPoint(h.point1)&&!s||(h.point1={x:h.bezierPoint1.x,y:h.bezierPoint1.y})):("BezierTargetThumb"===e||"ConnectorTargetEnd"===e&&!s&&Object(z["g"])(h.vector2))&&(h.bezierPoint2.x+=i,h.bezierPoint2.y+=n,r["a"].isEmptyPoint(h.point2)&&!s||(h.point2={x:h.bezierPoint2.x,y:h.bezierPoint2.y})))},t.prototype.dragTargetEnd=function(t,e,i,n,o,a,s,c){var h,d=this.diagram.nameTable[t.id],l=this.checkBoundaryConstraints(e,i,d.wrapper.bounds);if(Object(w["h"])(d)&&"BezierTargetThumb"!==a&&l&&Object(w["r"])(this.diagram)){if(h={targetPoint:d.targetPoint},d.targetPoint.x+=e,d.targetPoint.y+=i,"ConnectorTargetEnd"===a&&"Orthogonal"===d.type&&d.segments&&d.segments.length>0){var p=d.segments[d.segments.length-2];p&&2===d.segments[d.segments.length-1].points.length&&("Left"===p.direction||"Right"===p.direction?p.points[p.points.length-1].x=d.targetPoint.x:p.points[p.points.length-1].y=d.targetPoint.y,p.length=r["a"].distancePoints(p.points[0],p.points[p.points.length-1]),p.direction=r["a"].direction(p.points[0],p.points[p.points.length-1]))}"Bpmn"===d.shape.type&&"Default"===d.shape.sequence&&this.updatePathElementOffset(d)}if("Bezier"===d.type)if(h={targetPoint:d.targetPoint},c)this.translateBezierPoints(t,""===a?"ConnectorTargetEnd":a,e,i,c,o,!s);else for(var u=0;u<t.segments.length;u++)this.translateBezierPoints(t,""===a?"ConnectorTargetEnd":a,e,i,t.segments[u],o,!s);return n||this.updateEndPoint(d,h),this.diagram.refreshCanvasLayers(),l},t.prototype.dragControlPoint=function(t,e,i,n,o){var r=this.diagram.nameTable[t.id];if(("Straight"===r.type||"Bezier"===r.type)&&r.segments.length>0){if(void 0!==o&&r.segments[o])r.segments[o].point.x+=e,r.segments[o].point.y+=i;else for(var a=0;a<r.segments.length-1;a++)r.segments[a].point.x+=e,r.segments[a].point.y+=i;n||this.updateEndPoint(r)}return!0},t.prototype.rotateObjects=function(t,e,i,n,o){n=n||{};var r=Object(m["a"])();Object(m["c"])(r,i,n.x,n.y);for(var a=0,s=e;a<s.length;a++){var c=s[a];if(c instanceof A["q"]){if(Object(w["z"])(c)&&Object(w["r"])(this.diagram)){if(!1!==o||t!==c){({rotateAngle:c.rotateAngle}),c.rotateAngle+=i,c.rotateAngle=(c.rotateAngle+360)%360;var h=Object(m["e"])(r,{x:c.offsetX,y:c.offsetY});c.offsetX=h.x,c.offsetY=h.y,this.diagram.nodePropertyChange(c,{},{offsetX:c.offsetX,offsetY:c.offsetY,rotateAngle:c.rotateAngle})}if(c.processId){var d=this.diagram.nameTable[c.processId],l=this.diagram.bpmnModule.getChildrenBound(d,c.id,this.diagram);this.diagram.bpmnModule.updateSubProcessess(l,c,this.diagram)}c.children&&c.children.length&&!c.container&&this.getChildren(c,e)}}else this.rotatePoints(c,i,n||{x:c.wrapper.offsetX,y:c.wrapper.offsetY});this.diagram.updateDiagramObject(c)}this.diagram.refreshCanvasLayers(),this.diagram.updateSelector()},t.prototype.snapConnectorEnd=function(t){return this.diagram.snapSettings.constraints&y["q"].SnapToLines&&this.snappingModule&&this.diagram.snappingModule.snapConnectorEnd(t),t},t.prototype.snapAngle=function(t){return this.diagram.snapSettings.constraints&y["q"].SnapToLines&&this.snappingModule?this.snappingModule.snapAngle(this.diagram,t):0},t.prototype.rotatePoints=function(t,e,i){if(!t.sourceWrapper||!t.targetWrapper){var n=Object(m["a"])();Object(m["c"])(n,e,i.x,i.y),t.sourcePoint=Object(m["e"])(n,t.sourcePoint),t.targetPoint=Object(m["e"])(n,t.targetPoint),"Bpmn"===t.shape.type&&"Default"===t.shape.sequence&&this.updatePathElementOffset(t);var o={sourcePoint:t.sourcePoint,targetPoint:t.targetPoint};this.diagram.connectorPropertyChange(t,{},o)}},t.prototype.updateInnerParentProperties=function(t){var e=[],i="isProtectedOnChange",n=this.diagram[i];this.diagram.protectPropertyChange(!0);for(var o=this.getAllDescendants(t,e,!1,!0),r=0;r<o.length;r++){var a=this.diagram.nameTable[o[r].id];a.offsetX=a.wrapper.offsetX,a.offsetY=a.wrapper.offsetY,a.width=a.wrapper.width,a.height=a.wrapper.height}this.diagram.protectPropertyChange(n)},t.prototype.scale=function(t,e,i,n,r){var a=this.diagram.nameTable[t.id],c=a,h=[],l=a.wrapper;r||(r=t);var p=r.wrapper,u=p.offsetX-p.actualSize.width*p.pivot.x,g=p.offsetY-p.actualSize.height*p.pivot.y,f=Object(d["z"])(u,g,p.actualSize.width,p.actualSize.height,p.rotateAngle,p.offsetX,p.offsetY,n);if(void 0!==l.actualSize.width&&void 0!==l.actualSize.height&&Object(w["r"])(this.diagram)){if(c.children&&!c.container){for(var m=this.getAllDescendants(c,h),y=0,v=m;y<v.length;y++){var b=v[y];this.scaleObject(e,i,f,b,l,r)}t.wrapper.measure(new o["a"]),t.wrapper.arrange(t.wrapper.desiredSize),this.diagram.updateGroupOffset(a),this.updateInnerParentProperties(c)}else this.scaleObject(e,i,f,a,l,r);var O=Object(s["e"])(t.wrapper),x=this.checkBoundaryConstraints(void 0,void 0,O);if(!x)return this.scale(t,1/e,1/i,n),!1;this.diagram.updateDiagramObject(t)}return!0},t.prototype.getAllDescendants=function(t,e,i,n){for(var o=t,r=[],a=0;a<o.children.length;a++)t=this.diagram.nameTable[o.children[a]],t&&(t.children?(i&&e.push(t),n&&r.push(t),e=this.getAllDescendants(t,e)):e.push(t));return n?r:e},t.prototype.getChildren=function(t,e){var i=t;if(t.children)for(var n=0;n<i.children.length;n++)t=this.diagram.nameTable[i.children[n]],e.push(t);return e},t.prototype.cloneChild=function(t){var e=this.diagram.nameTable[t];return e},t.prototype.scaleObject=function(t,e,i,n,o,r){t=t<0?1:t,e=e<0?1:e;var a={};if(1!==t||1!==e){var s=void 0,c=void 0;if(n instanceof A["q"]){var h=n,d=void 0,l=void 0;a={width:n.wrapper.actualSize.width,height:n.wrapper.actualSize.height,offsetX:n.wrapper.offsetX,offsetY:n.wrapper.offsetY,margin:{top:h.margin.top,left:h.margin.left}},"Bpmn"===h.shape.type&&h.shape.activity.subProcess.processes&&h.shape.activity.subProcess.processes.length>0&&(l=this.diagram.bpmnModule.getChildrenBound(h,h.id,this.diagram),d=h.wrapper.bounds.containsRect(l)),s=h.wrapper.actualSize.width*t,c=h.wrapper.actualSize.height*e,void 0!==h.maxWidth&&0!==h.maxWidth&&(s=Math.min(h.maxWidth,s)),void 0!==h.minWidth&&0!==h.minWidth&&(s=Math.max(h.minWidth,s)),void 0!==h.maxHeight&&0!==h.maxHeight&&(c=Math.min(h.maxHeight,c)),void 0!==h.minHeight&&0!==h.minHeight&&(c=Math.max(h.minHeight,c)),d&&(s=Math.max(s,l.right-h.wrapper.bounds.x),c=Math.max(c,l.bottom-h.wrapper.bounds.y)),t=s/h.actualSize.width,e=c/h.actualSize.height}var p=Object(m["a"])(),u=void 0;if(r||(r=n),u=r.wrapper,Object(m["c"])(p,-u.rotateAngle,i.x,i.y),Object(m["d"])(p,t,e,i.x,i.y),Object(m["c"])(p,u.rotateAngle,i.x,i.y),n instanceof A["q"]){h=n;var g,f=void 0,y=Object(m["e"])(p,{x:h.wrapper.offsetX,y:h.wrapper.offsetY}),v=h.wrapper.offsetX-h.wrapper.actualSize.width*h.pivot.x,b=h.wrapper.offsetY-h.wrapper.actualSize.height*h.pivot.y;if(s>0)if(h.processId){var w=this.diagram.nameTable[h.processId];(!w.maxWidth||h.margin.left+s<w.maxWidth)&&(h.width=s,h.offsetX=y.x)}else h.width=s,h.offsetX=y.x;if(c>0)if(h.processId){var O=this.diagram.nameTable[h.processId];(!O.maxHeight||h.margin.top+c<O.maxHeight)&&(h.height=c,h.offsetY=y.y)}else h.height=c,h.offsetY=y.y;f=h.wrapper.offsetX-h.wrapper.actualSize.width*h.pivot.x,g=h.wrapper.offsetY-h.wrapper.actualSize.height*h.pivot.y;var x=this.diagram.nameTable[h.processId];x&&(h.margin.top+(g-b)<=0||h.margin.left+(f-v)<=0)?this.diagram.nodePropertyChange(n,{},{margin:{top:h.margin.top,left:h.margin.left}}):Object(nt["c"])(this.diagram,n,!0)?Object(nt["b"])(this.diagram,n):this.diagram.nodePropertyChange(n,a,{width:h.width,height:h.height,offsetX:h.offsetX,offsetY:h.offsetY,margin:{top:h.margin.top+(g-b),left:h.margin.left+(f-v)}})}else{var j=n,S={sourcePoint:j.sourcePoint,targetPoint:j.targetPoint};j.sourceWrapper&&j.targetWrapper||this.scaleConnector(j,p,S)}var C=this.diagram.nameTable[n.processId];if(C){C.wrapper.bounds,n.wrapper.bounds,l=this.diagram.bpmnModule.getChildrenBound(C,n.id,this.diagram);this.diagram.bpmnModule.updateSubProcessess(l,n,this.diagram)}}},t.prototype.scaleConnector=function(t,e,i){t.sourcePoint=Object(m["e"])(e,t.sourcePoint),t.targetPoint=Object(m["e"])(e,t.targetPoint),"Bpmn"===t.shape.type&&"Default"===t.shape.sequence&&this.updatePathElementOffset(t);var n={sourcePoint:t.sourcePoint,targetPoint:t.targetPoint};this.diagram.connectorPropertyChange(t,i,n)},t.prototype.portDrag=function(t,e,i,n){var o,r,a=this.findTarget(e,t),c=Object(s["e"])(t.wrapper);a&&Object(w["e"])(a,this.diagram)&&(o=this.getPortChanges(t,a),a.offset.x+=i/c.width,a.offset.y+=n/c.height,r=this.getPortChanges(t,a),this.diagram.nodePropertyChange(t,o,r),this.diagram.updateDiagramObject(t))},t.prototype.labelDrag=function(t,e,i,n){var o,r,a;a=this.findTarget(e,t);var c=Object(s["c"])(t.wrapper);o=this.getAnnotationChanges(t,a),a instanceof X["c"]?(a.offset.x+=i/c.width,a.offset.y+=n/c.height):(this.updatePathAnnotationOffset(t,a,i,n),a instanceof X["b"]&&(a.alignment="Center")),r=this.getAnnotationChanges(t,a),t instanceof A["q"]?this.diagram.nodePropertyChange(t,o,r):this.diagram.connectorPropertyChange(t,o,r),this.diagram.updateDiagramObject(t),ut(this.diagram,a,!1,e)||this.labelSelect(t,e)},t.prototype.updatePathAnnotationOffset=function(t,e,i,n,o,a){var s,c,h,l=this.diagram.getWrapper(t.wrapper,e.id),p=l.offsetX,u=l.offsetY,g=t.intermediatePoints,f=0,m=0,y=o||{x:p+i,y:u+n},v=this.getInterceptWithSegment(y,g),b=g[g.length-1];if(m=r["a"].getLengthFromListOfPoints(g),v.length>0){if(e.dragLimit.top||e.dragLimit.bottom||e.dragLimit.left||e.dragLimit.right){var w={minDistance:null};b=this.getRelativeOffset(y,g,w);var O={minDistance:null};if(h=this.getRelativeOffset(y,v,O),null!=w&&O.minDistance<w.minDistance)b=h;else{var x=Object(d["y"])(t.intermediatePoints,e,t.wrapper.bounds);b=x.point}}else h=v[v.length-1],b=h;if(b){var j=void 0,S=void 0;for(j=0;j<g.length;j++){if(null!=c){if(S=W["a"].toBounds([c,g[j]]),S.containsPoint(b)){f+=r["a"].findLength(c,b);break}f+=r["a"].findLength(c,g[j])}c=g[j]}s={x:f/m,y:0}}this.updateLabelMargin(t,e,s,y,a,i,n)}else this.updateLabelMargin(t,e,null,y,a,i,n)},t.prototype.getRelativeOffset=function(t,e,i){var n,o,r,a;for(a=0;a<e.length;a++)r=e[a],o=Math.round(Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))),null!==i.minDistance&&Math.min(Math.abs(i.minDistance),Math.abs(o))!==Math.abs(o)||(n=r,i.minDistance=o);return n},t.prototype.dragLimitValue=function(t,e,i,n){var o=!1,r=!1;return i.x>=e.x-t.dragLimit.left-n.width/2&&i.x<=e.x+t.dragLimit.right+n.width/2&&(o=!0),i.y>=e.y-t.dragLimit.top-n.height/2&&i.y<=e.y+t.dragLimit.bottom+n.height/2&&(r=!0),{x:o,y:r}},t.prototype.updateLabelMargin=function(t,e,i,n,o,a,s){if(i=i||{x:e.offset,y:0},e&&i&&i.x>0&&i.x<1){var c=void 0,h=r["a"].getLengthFromListOfPoints(t.intermediatePoints);c=this.getPointAtLength(h*i.x,t.intermediatePoints,0);var d=this.diagram.scrollSettings.currentZoom,l=e.dragLimit;if(l.top||l.bottom||l.left||l.right){this.diagram.getWrapper(t.wrapper,e.id);var p=new W["a"](0,0,0,0),u=this.diagram.getWrapper(t.wrapper,e.id);p.x=u.offsetX/d+a,p.y=u.offsetY/d+s,p.width=u.bounds.width/d,p.height=u.bounds.height/d;var g=new W["a"](c.x-(l.left||0)-p.width/2,c.y-(l.top||0)-p.height/2,(l.left||0)+(l.right||0)+p.width,(l.top||0)+(l.bottom||0)+p.height);if(g.containsPoint(n))n=n;else{var f=void 0,m=[c,n];f=this.boundsInterSects(m,g,!1);for(var y=0,v=f;y<v.length;y++){var b=v[y],w=b;n=w}}var O=this.dragLimitValue(e,c,n,p);e.margin={left:O.x?n.x-c.x:e.margin.left,top:O.y?n.y-c.y:e.margin.top,right:0,bottom:0}}else e.margin={left:n.x-c.x,top:n.y-c.y,right:0,bottom:0};e.offset=i.x,o&&(e.width=o.width,e.height=o.height)}},t.prototype.boundsInterSects=function(t,e,i){var n;if(e){var o=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height},{x:e.x,y:e.y}];n=this.intersect(t,o,i)}return n},t.prototype.intersect=function(t,e,i){for(var n=[],o=0;o<t.length-1;o++)for(var r=0;r<e.length-1;r++){var a=Object(d["F"])(t[o],t[o+1],e[r],e[r+1]);0!==a.x&&0!==a.y&&n.push(a)}return n},t.prototype.getPointAtLength=function(t,e,i){for(var n,o,a=0,s={x:0,y:0},c=0;c<e.length;c++)if(o=e[c],n){var h=r["a"].findLength(n,o),d=void 0,l=void 0,p=void 0,u=void 0;if(a+h>=t){d=t-a,l=r["a"].findAngle(n,o),p=d*Math.cos(l*Math.PI/180),u=d*Math.sin(l*Math.PI/180),s={x:n.x+p,y:n.y+u},l;break}a+=h,n=o}else n=o;return s},t.prototype.getInterceptWithSegment=function(t,e){var i,n,o,a=[],s=[],c=[];o=r["a"].findLength({x:0,y:0},{x:this.diagram.scroller.viewPortWidth,y:this.diagram.scroller.viewPortHeight});for(var h=1;h<e.length;h++){c=[e[h-1],e[h]],s=[],n=Math.round(r["a"].findAngle(c[0],c[1])%360),i=Math.round(r["a"].findAngle(c[1],c[0])%360);var l=n>0&&n<=90||n>180&&n<=270?90:-90;s.push(r["a"].transform(t,n+l,o)),s.push(r["a"].transform(t,i+l,o));var p={x1:c[0].x,y1:c[0].y,x2:c[1].x,y2:c[1].y},u={x1:s[0].x,y1:s[0].y,x2:s[1].x,y2:s[1].y},g=Object(d["G"])(p,u);g.enabled&&a.push(g.intersectPt)}return a},t.prototype.getAnnotationChanges=function(t,e){var i=Object(d["n"])(t,e.id,!0),n={};return n[i]={width:e.width,height:e.height,offset:t instanceof A["q"]?{x:e.offset.x,y:e.offset.y}:e.offset,rotateAngle:e.rotateAngle,margin:{left:e.margin.left,right:e.margin.right,top:e.margin.top,bottom:e.margin.bottom},horizontalAlignment:e.horizontalAlignment,verticalAlignment:e.verticalAlignment,alignment:t instanceof z["b"]?e.alignment:void 0},{annotations:n}},t.prototype.getPortChanges=function(t,e){var i=Object(d["n"])(t,e.id,!1),n={};return n[i]={offset:e.offset},{ports:n}},t.prototype.labelRotate=function(t,e,i,n){var o,r;o=this.getAnnotationChanges(t,e);Object(m["a"])(),e.rotateAngle;var a=this.diagram.getWrapper(t.wrapper,e.id),s=Object(kt["a"])({x:a.offsetX,y:a.offsetY},i)+90,c=this.snapAngle(s);if(s=0!==c?c:s,e instanceof X["b"]&&e.segmentAngle){var h=Object(d["r"])(t.intermediatePoints,e,t.wrapper.bounds);s-=h.angle}s=(s+360)%360,e.rotateAngle+=s-(e.rotateAngle+a.parentTransform),e.margin.bottom+="Top"===a.verticalAlignment?-e.height/2:"Bottom"===a.verticalAlignment?e.height/2:0,e.margin.right+="Left"===a.horizontalAlignment?-e.width/2:"Right"===a.horizontalAlignment?e.width/2:0,e instanceof X["b"]?e.alignment="Center":e.horizontalAlignment=e.verticalAlignment="Center",n.wrapper.rotateAngle=n.rotateAngle=e.rotateAngle,r=this.getAnnotationChanges(t,e),t instanceof A["q"]?this.diagram.nodePropertyChange(t,o,r):this.diagram.connectorPropertyChange(t,o,r),this.diagram.updateDiagramObject(t)},t.prototype.labelResize=function(t,e,i,n,r,a){var c,h,d;c=this.getAnnotationChanges(t,e);var l=a.wrapper.children[0];if(i&&1!==i||n&&1!==n){var p=Object(m["a"])(),u=Object(m["a"])();Object(m["c"])(p,-t.rotateAngle,t.offsetX,t.offsetY),d=(l.rotateAngle+(t instanceof A["q"]?t.rotateAngle:0)+360)%360,Object(m["c"])(u,-d,r.x,r.y),Object(m["d"])(u,i,n,r.x,r.y),Object(m["c"])(u,d,r.x,r.y);var g=Object(m["e"])(u,{x:l.offsetX,y:l.offsetY}),f=l.actualSize.height*n,y=l.actualSize.width*i,v=this.findTarget(l,t);if(v instanceof X["b"])this.updatePathAnnotationOffset(t,e,0,0,g,new o["a"](y,f));else{var b=Object(s["c"])(t.wrapper);g=Object(m["e"])(p,g),g.x=g.x-l.margin.left+l.margin.right,g.y=g.y-l.margin.top+l.margin.bottom,g.y+="Top"===v.verticalAlignment?-f/2:"Bottom"===v.verticalAlignment?f/2:0,g.x+="Left"===v.horizontalAlignment?-y/2:"Right"===v.horizontalAlignment?y/2:0;var w=b.width/(g.x-b.x),O=b.height/(g.y-b.y);y>1&&(v.width=y,v.offset.x=1/w),f>1&&(v.height=f,v.offset.y=1/O)}}e instanceof X["b"]&&(e.alignment="Center"),h=this.getAnnotationChanges(t,e),t instanceof A["q"]?this.diagram.nodePropertyChange(t,c,h):this.diagram.connectorPropertyChange(t,c,h),this.diagram.updateDiagramObject(t)},t.prototype.getSubProcess=function(t){var e,i={nodes:[],connectors:[]};return t instanceof A["q"]?e=t.processId:t&&t.nodes&&t.nodes.length&&t.nodes[0].processId&&(e=t.nodes[0].processId),e?(i.nodes.push(Object(s["b"])(this.diagram.nameTable[e])),i):i},t.prototype.checkBoundaryConstraints=function(t,e,i){var n=this.diagram.pageSettings,o=this.diagram.pageSettings.boundaryConstraints,r=this.diagram.scroller;if("Page"===o||"Diagram"===o){var a=i?void 0:this.diagram.selectedItems.wrapper.bounds,s="Page"===o?n.width:r.viewPortWidth,c="Page"===o?n.height:r.viewPortHeight,h=i,d=(i?h.right:a.right)+(t||0),l=(i?h.left:a.left)+(t||0),p=(i?h.top:a.top)+(e||0),u=(i?h.bottom:a.bottom)+(e||0);return d<=s&&l>=0&&u<=c&&p>=0}return!0},t.prototype.dragSelectedObjects=function(t,e){var i=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.offsetX=i.offsetX,this.state.backup.offsetY=i.offsetY),i=Object(nt["g"])(this.diagram,i)||i,!!this.checkBoundaryConstraints(t,e)&&(this.diagram.diagramActions=this.diagram.diagramActions|y["c"].PreventZIndexOnDragging,this.diagram.drag(i,t,e),this.diagram.diagramActions=this.diagram.diagramActions&~y["c"].PreventZIndexOnDragging,this.diagram.refreshCanvasLayers(),!0)},t.prototype.scaleSelectedItems=function(t,e,i){var n=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.offsetX=n.offsetX,this.state.backup.offsetY=n.offsetY,this.state.backup.width=n.width,this.state.backup.height=n.height,this.state.backup.pivot=i),n=Object(nt["g"])(this.diagram,n)||n,this.diagram.scale(n,t,e,i)},t.prototype.rotateSelectedItems=function(t){var e=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.angle=e.rotateAngle),e=Object(nt["g"])(this.diagram,e)||e,this.diagram.rotate(e,t)},t.prototype.hasSelection=function(){return lt(this.diagram)},t.prototype.isSelected=function(t){return ut(this.diagram,t)},t.prototype.initExpand=function(t){var e="isProtectedOnChange",i=this.diagram[e];this.diagram.protectPropertyChange(!0);var n=t.target||t.source,o={isExpanded:n.isExpanded};n.isExpanded=!n.isExpanded,this.diagram.preventNodesUpdate=!0,this.diagram.diagramActions|=y["c"].PreventIconsUpdate,this.diagram.nodePropertyChange(n,o,{isExpanded:n.isExpanded}),this.diagram.diagramActions=this.diagram.diagramActions&~y["c"].PreventIconsUpdate,this.diagram.preventNodesUpdate=!1,this.diagram.protectPropertyChange(i)},t.prototype.expandNode=function(t,e){var i,n=this.diagram.preventNodesUpdate,o=t.isExpanded;if(this.diagram.preventNodesUpdate=!0,this.diagram.preventConnectorsUpdate=!0,this.expandCollapse(t,o,this.diagram),t.isExpanded=o,this.diagram.layout.fixedNode=t.id,this.diagram.layoutAnimateModule&&this.diagram.layout.enableAnimation&&this.diagram.organizationalChartModule&&(this.diagram.organizationalChartModule.isAnimation=!0),i=this.diagram.doLayout(),this.diagram.preventNodesUpdate=n,this.diagram.preventConnectorsUpdate=!1,this.diagram.layoutAnimateModule&&this.diagram.organizationalChartModule)this.layoutAnimateModule.expand(this.diagram.layout.enableAnimation,i,t,this.diagram);else{var r={element:Object(d["h"])(Object(s["b"])(t)),state:!!t.isExpanded};this.triggerEvent(y["e"].expandStateChange,r)}return i},t.prototype.getparentexpand=function(t,e,i,n){for(var o,r=0;r<t.inEdges.length;r++){var a=e.nameTable[t.inEdges[r]],s=e.nameTable[a.sourceID];if(s.isExpanded&&!i&&s.id!==n.sourceID&&a.visible)return!1;o=!0}return o},t.prototype.expandCollapse=function(t,e,i){for(var n=0;n<t.outEdges.length;n++){var o=i.nameTable[t.outEdges[n]],r=i.nameTable[o.targetID],a=this.getparentexpand(r,i,e,o);o.visible=e;var s={visible:r.visible,style:{opacity:r.style.opacity}},c={visible:r.visible,style:{opacity:r.style.opacity}};a&&(r.isExpanded&&this.expandCollapse(r,e,i),r.visible=e,r.style.opacity=this.diagram.layoutAnimateModule&&this.diagram.layout.enableAnimation&&e?.1:r.style.opacity,i.nodePropertyChange(r,s,c)),i.connectorPropertyChange(o,s,c)}},t.prototype.updateNodeDimension=function(t,e){t instanceof A["q"]&&(t.offsetX=e.x+e.width/2,t.offsetY=e.y+e.height/2,t.width=e.width,t.height=e.height,t.wrapper.children[0].canMeasurePath=!0,this.diagram.nodePropertyChange(t,{},{width:e.width,height:e.height,offsetX:t.offsetX,offsetY:t.offsetY}),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer())},t.prototype.updateConnectorPoints=function(t,e){t instanceof z["b"]&&(this.diagram.connectorPropertyChange(t,{},{targetPoint:t.targetPoint}),this.diagram.updateDiagramObject(t))},t.prototype.updateSelectedNodeProperties=function(t){if(this.diagram.lineRoutingModule&&this.diagram.constraints&y["d"].LineRouting){this.diagram.protectPropertyChange(!0);var e=[],i=[],n=this.diagram.selectedObject.actualObject,o=this.diagram.selectedObject.helperObject;if(o&&n){var r=o.offsetX-n.offsetX,a=o.offsetY-n.offsetY,s=o.width-n.width,c=o.height-n.height,h=o.rotateAngle-n.rotateAngle;if(this.diagram.selectedItems.wrapper.rotateAngle=this.diagram.selectedItems.rotateAngle=o.rotateAngle,n instanceof A["q"]&&"SwimLane"!==n.shape.type&&!n.isLane&&!n.isPhase&&!n.isHeader)n.offsetX+=r,n.offsetY+=a,n.width+=s,n.height+=c,n.rotateAngle+=h,this.diagram.nodePropertyChange(n,{},{offsetX:n.offsetX,offsetY:n.offsetY,width:n.width,height:n.height,rotateAngle:n.rotateAngle}),e=this.diagram.spatialSearch.findObjects(n.wrapper.outerBounds);else if(n instanceof A["t"])for(var d=0;d<n.nodes.length;d++){var l=n.nodes[d];l instanceof A["q"]&&"SwimLane"!==l.shape.type&&!l.isLane&&!l.isPhase&&!l.isHeader&&(l.offsetX+=r,l.offsetY+=a,l.width+=s,l.height+=c,l.rotateAngle+=h,this.diagram.nodePropertyChange(l,{},{offsetX:l.offsetX,offsetY:l.offsetY,width:l.width,height:l.height,rotateAngle:l.rotateAngle}),e=e.concat(this.diagram.spatialSearch.findObjects(n.wrapper.outerBounds)))}}else t instanceof z["b"]?e.push(t):t instanceof A["t"]&&t.connectors.length&&(e=e.concat(t.connectors));for(d=0;d<e.length;d++)e[d]instanceof z["b"]&&-1===i.indexOf(e[d].id)&&i.push(e[d].id);this.diagram.lineRoutingModule.renderVirtualRegion(this.diagram,!0);for(d=0;d<i.length;d++){var p=this.diagram.nameTable[i[d]];p instanceof z["b"]&&this.diagram.lineRoutingModule.refreshConnectorSegments(this.diagram,p,!0)}this.updateSelector(),this.diagram.protectPropertyChange(!1)}},t.prototype.drawSelectionRectangle=function(t,e,i,n){this.diagram.drawSelectionRectangle(t,e,i,n)},t.prototype.startGroupAction=function(){this.diagram.startGroupAction()},t.prototype.endGroupAction=function(){this.diagram.endGroupAction()},t.prototype.removeChildFromBPmn=function(t,e,i){var n=this.diagram.nameTable[t.id]||t.nodes[0];if(i&&n&&n.processId&&n.processId===i.wrapper.id){var o=Object(s["b"])(n);o.processId=n.processId,this.diagram.startGroupAction();var r=[];r=r.concat(n.outEdges,n.inEdges);for(var a=r.length-1;a>=0;a--){var c=this.diagram.nameTable[r[a]];c&&this.diagram.remove(c)}var h=void 0;h=this.diagram.nameTable[n.processId].shape.activity.subProcess.processes||[],h.splice(h.indexOf(n.id),1),this.diagram.bpmnModule.removeChildFromBPMN(this.diagram.nameTable[n.processId].wrapper,n.id),this.diagram.nameTable[n.id].processId="",n.offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY;var d=Object(s["b"])(n),l={type:"PositionChanged",redoObject:{nodes:[d]},undoObject:{nodes:[o]},category:"Internal"};this.addHistoryEntry(l),this.diagram.endGroupAction()}},t.prototype.isDroppable=function(t,e){var i=this.diagram.nameTable[t.id]||t.nodes[0];return!!i&&("TextAnnotation"===i.shape.shape||(!i||"Bpmn"!==i.shape.type||!(i.processId===e.id||i.id===e.processId||"Bpmn"===e.shape.type&&e.shape.activity.subProcess.collapsed)))},t.prototype.renderHighlighter=function(t,e,i){new W["a"];if(t.target instanceof A["q"]||e&&t.source instanceof A["q"]){var n=e?t.source:t.target,o=e?t.sourceWrapper:t.targetWrapper,r=this.findTarget(o,n,i,!0),a=void 0;if(r instanceof A["h"])for(var s=r.id,c=t.target,h=c.wrapper.children[0].children[0].children[2],d=0,l=h.children;d<l.length;d++){var p=l[d];if(p.id===c.id+"_"+s){a=p.children[0];break}}else a=r instanceof A["q"]?r.wrapper:e?t.sourceWrapper:t.targetWrapper;this.diagram.renderHighlighter(a)}},t.prototype.mouseOver=function(t,e,i){return!0},t.prototype.snapPoint=function(t,e,i,n){var o,r=this.diagram.selectedItems,a=e.x<t.x,s=e.y<t.y;o={x:i,y:n};var c=o;return this.snappingModule&&(c=this.diagram.snappingModule.snapPoint(this.diagram,r,a,s,o,t,e)),c},t.prototype.removeSnap=function(){this.diagram.snapSettings.constraints&y["q"].SnapToObject&&this.snappingModule&&this.snappingModule.removeGuidelines(this.diagram)},t.prototype.dropAnnotation=function(t,e){var i=t instanceof A["q"]?t:t.nodes[0];if(this.diagram.bpmnModule&&"Bpmn"===e.shape.type&&"TextAnnotation"===i.shape.shape){var n="hasTarget";i[n]=e.id,i.shape.annotation.nodeId=e.id,this.diagram.currentSymbol||(this.diagram.addTextAnnotation(i.shape.annotation,e),i.shape.annotation.nodeId="",this.diagram.remove(i)),this.diagram.refreshDiagramLayer()}},t.prototype.drop=function(t,e,i){this.diagram.bpmnModule&&(this.diagram.bpmnModule.dropBPMNchild(e,t instanceof A["q"]?t:t.nodes[0],this.diagram),this.diagram.refreshDiagramLayer())},t.prototype.addHistoryEntry=function(t){this.diagram.addHistoryEntry(t)},t.prototype.align=function(t,e,i){if(t.length>0){var n=0;t[0]=this.diagram.nameTable[t[0].id]||t[0];var o="Object"===i?Object(s["e"])(t[0].wrapper):this.diagram.selectedItems.wrapper.bounds,r={nodes:[],connectors:[]},a={nodes:[],connectors:[]};for(n="Object"===i?n+1:n;n<t.length;n++){var c=0,h=0;t[n]=this.diagram.nameTable[t[n].id]||t[n];var d=Object(s["e"])(t[n].wrapper);"Left"===e?c=o.left+d.width/2-d.center.x:"Right"===e?c=o.right-d.width/2-d.center.x:"Top"===e?h=o.top+d.height/2-d.center.y:"Bottom"===e?h=o.bottom-d.height/2-d.center.y:"Center"===e?c=o.center.x-d.center.x:"Middle"===e&&(h=o.center.y-d.center.y),r=this.storeObject(r,t[n]),this.drag(t[n],c,h),this.diagram.updateSelector(),a=this.storeObject(a,t[n])}r=Object(s["b"])(r),a=Object(s["b"])(a);var l={type:"Align",category:"Internal",undoObject:Object(s["b"])(r),redoObject:Object(s["b"])(a)};this.addHistoryEntry(l)}},t.prototype.distribute=function(t,e){if(t.length>0){var i=0,n=(new W["a"],0),o=0,r=0,a=0,c=0,h=0,l=0,p={nodes:[],connectors:[]},u={nodes:[],connectors:[]};for(i=0;i<t.length;i++)t[i]=this.diagram.nameTable[t[i].id]||t[i];for(t=Object(d["Q"])(t,e),i=1;i<t.length;i++)n=n+t[i].wrapper.bounds.topRight.x-t[i-1].wrapper.bounds.topRight.x,o=o+t[i].wrapper.bounds.topLeft.x-t[i-1].wrapper.bounds.topLeft.x,r=r+t[i].wrapper.bounds.topRight.y-t[i-1].wrapper.bounds.topRight.y,a=a+t[i].wrapper.bounds.bottomRight.y-t[i-1].wrapper.bounds.bottomRight.y,c=c+t[i].wrapper.bounds.center.x-t[i-1].wrapper.bounds.center.x,h=h+t[i].wrapper.bounds.center.y-t[i-1].wrapper.bounds.center.y,l=l+t[i].wrapper.bounds.topRight.y-t[i-1].wrapper.bounds.bottomRight.y;for(i=1;i<t.length-1;i++){var g=0,f=0,m=Object(s["e"])(t[i-1].wrapper),y=Object(s["e"])(t[i].wrapper);"RightToLeft"===e||"Center"===e?g=m.center.x-y.center.x+c/(t.length-1):"Right"===e?g=m.topRight.x-y.topRight.x+n/(t.length-1):"Left"===e?g=m.topLeft.x-y.topLeft.x+o/(t.length-1):"Middle"===e?f=m.center.y-y.center.y+h/(t.length-1):"Top"===e?f=m.topRight.y-y.topRight.y+r/(t.length-1):"Bottom"===e?f=m.bottomRight.y-y.bottomRight.y+a/(t.length-1):"BottomToTop"===e&&(f=m.bottomRight.y-y.topRight.y+l/(t.length-1)),p=this.storeObject(p,t[i]),this.drag(t[i],g,f),this.diagram.updateSelector(),u=this.storeObject(u,t[i])}p=Object(s["b"])(p),u=Object(s["b"])(u);var v={type:"Distribute",category:"Internal",undoObject:Object(s["b"])(p),redoObject:Object(s["b"])(u)};this.addHistoryEntry(v)}},t.prototype.sameSize=function(t,e){if(t.length>0){var i=0,n=void 0;n={x:.5,y:.5},t[0]=this.diagram.nameTable[t[0].id]||t[0];var o=Object(s["e"])(t[0].wrapper),r={nodes:[],connectors:[]},a={nodes:[],connectors:[]};for(i=1;i<t.length;i++){t[i]=this.diagram.nameTable[t[i].id]||t[0];var c=Object(s["e"])(t[i].wrapper),h=1,d=1;"Width"===e?h=o.width/c.width:"Height"===e?d=o.height/c.height:"Size"===e&&(h=o.width/c.width,d=o.height/c.height),r=this.storeObject(r,t[i]),this.scale(t[i],h,d,n),a=this.storeObject(a,t[i])}this.diagram.updateSelector(),r=Object(s["b"])(r),a=Object(s["b"])(a);var l={type:"Sizing",category:"Internal",undoObject:Object(s["b"])(r),redoObject:Object(s["b"])(a)};this.addHistoryEntry(l)}},t.prototype.storeObject=function(t,e){return e instanceof A["q"]?t.nodes.push(Object(s["b"])(e)):t.connectors.push(Object(s["b"])(e)),t},t.prototype.scroll=function(t,e,i){var n=Object(w["t"])(this.diagram),o=Object(w["u"])(this.diagram);this.diagram.pan((t=n?t:0)*this.diagram.scroller.currentZoom,(e=o?e:0)*this.diagram.scroller.currentZoom,i)},t.prototype.drawHighlighter=function(t){this.diagram.renderHighlighter(t.wrapper)},t.prototype.removeHighlighter=function(){this.diagram.clearHighlighter()},t.prototype.renderContainerHelper=function(t){return Object(nt["g"])(this.diagram,t)},t.prototype.isParentAsContainer=function(t,e){return Object(nt["c"])(this.diagram,t,e)},t.prototype.dropChildToContainer=function(t,e){Object(nt["a"])(this.diagram,t,e)},t.prototype.checkSelection=function(t,e){var i;if(1===t.nodes.length&&0===t.connectors.length)if(Object(nt["c"])(this.diagram,t.nodes[0],!0)){i="SwimLane"===t.nodes[0].shape?t.nodes[0]:this.diagram.nameTable[t.nodes[0].parentId];var n=t.nodes[0];if("SwimLane"===i.shape.type){var o="Horizontal"===i.shape.orientation;(n.isPhase&&(o&&"ResizeSouth"===e||!o&&"ResizeEast"===e)||n.isLane&&(o&&"ResizeEast"===e||!o&&"ResizeSouth"===e))&&Object(Ht["s"])(this.diagram,i,e)}else if("Grid"===i.container.type)if("Horizontal"===i.container.orientation&&1===n.rowIndex||"Vertical"===i.container.orientation&&n.rowIndex>0&&n.columnIndex>0){if("ResizeSouth"===e)for(var r=0;r<this.diagram.nodes.length;r++){var a=this.diagram.nodes[r];if(a.rowIndex===i.rows.length-1&&0===a.columnIndex){this.select(a);break}}}else if("ResizeEast"===e)for(r=0;r<this.diagram.nodes.length;r++){a=this.diagram.nodes[r];if(1===a.rowIndex&&a.columnIndex===i.columns.length-1){this.select(a);break}}}else Object(Ht["s"])(this.diagram,t.nodes[0],e)},t.prototype.zoom=function(t,e,i,n){this.diagram.scroller.zoom(t,e*this.diagram.scroller.currentZoom,i*this.diagram.scroller.currentZoom,n)},t}(),Ut=function(){function t(t){this.transform={tx:0,ty:0,scale:1},this.oldCollectionObjects=[],this.removeCollection=[],this.vPortWidth=0,this.vPortHeight=0,this.currentZoomFActor=1,this.hOffset=0,this.vOffset=0,this.scrolled=!1,this.hScrollSize=0,this.vScrollSize=0,this.diagram=t,this.objects=[],this.transform=t.scroller?t.scroller.transform:{tx:0,ty:0,scale:1},this.vPortWidth=t.scrollSettings.viewPortWidth,this.vPortHeight=t.scrollSettings.viewPortHeight,this.currentZoomFActor=t.scrollSettings.currentZoom,this.hOffset=t.scrollSettings.horizontalOffset,this.vOffset=t.scrollSettings.verticalOffset}return Object.defineProperty(t.prototype,"viewPortHeight",{get:function(){return this.vPortHeight},set:function(t){this.vPortHeight=t,this.diagram.scrollSettings.viewPortHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentZoom",{get:function(){return this.currentZoomFActor},set:function(t){this.currentZoomFActor=t,this.diagram.scrollSettings.currentZoom=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewPortWidth",{get:function(){return this.vPortWidth},set:function(t){this.vPortWidth=t,this.diagram.scrollSettings.viewPortWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalOffset",{get:function(){return this.hOffset},set:function(t){this.hOffset=t,Math.abs(this.hOffset-this.diagram.scrollSettings.horizontalOffset)>1&&(this.diagram.realActions=this.diagram.realActions|y["n"].hScrollbarMoved,this.scrolled=!0),this.diagram.scrollSettings.horizontalOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalOffset",{get:function(){return this.vOffset},set:function(t){this.vOffset=t,Math.abs(this.vOffset-this.diagram.scrollSettings.verticalOffset)>1&&(this.diagram.realActions=this.diagram.realActions|y["n"].vScrollbarMoved,this.scrolled=!0),this.diagram.scrollSettings.verticalOffset=t},enumerable:!0,configurable:!0}),t.prototype.updateScrollOffsets=function(t,e){var i=0,n=0,o=this.getPageBounds(void 0,void 0,!0);o.x*=this.currentZoom,o.y*=this.currentZoom,o.width*=this.currentZoom,o.height*=this.currentZoom,i=Math.max(0,t-o.left),n=Math.max(0,e-o.top),void 0!==t&&void 0!==e?(this.horizontalOffset=i,this.verticalOffset=n,this.diagram.setOffset(i,n)):this.diagram.setOffset(-this.horizontalOffset-o.x,-this.verticalOffset-o.y),this.transform={tx:Math.max(this.horizontalOffset,-o.left)/this.currentZoom,ty:Math.max(this.verticalOffset,-o.top)/this.currentZoom,scale:this.currentZoom}},t.prototype.setScrollOffset=function(t,e){this.scrolled=!1;var i=this.getPageBounds(void 0,void 0,!0);i.x*=this.currentZoom,i.y*=this.currentZoom,i.width*=this.currentZoom,i.height*=this.currentZoom;var n=-i.left,o=-i.top,r=!1,a=this.viewPortWidth*this.currentZoom,s=this.viewPortHeight*this.currentZoom,c=n-t;if(c!==this.horizontalOffset){n<this.horizontalOffset&&(this.horizontalOffset>c?this.horizontalOffset-=t:this.horizontalOffset=c,r=!0);var h=Math.max(i.right+this.vScrollSize,a);if(!r&&h<-c+this.viewPortWidth){var d=-c+a-this.vScrollSize,l=-this.horizontalOffset+a-this.vScrollSize;d<l?this.horizontalOffset=c:d-i.right>d-l?this.horizontalOffset=c:this.horizontalOffset=-(i.right+this.vScrollSize-a),r=!0}r||(this.horizontalOffset=n-t)}r=!1;var p=o-e;if(p!==this.verticalOffset){o<this.verticalOffset&&(this.verticalOffset>p?this.verticalOffset-=e:this.verticalOffset=p,r=!0);var u=Math.max(i.bottom+this.hScrollSize,s);if(!r&&u<-p+s){var g=-p+s-this.hScrollSize,f=-this.verticalOffset+s-this.hScrollSize;g<f?this.verticalOffset=p:g-i.bottom>g-f?this.verticalOffset=p:this.verticalOffset=-(i.bottom+this.hScrollSize-s),r=!0}r||(this.verticalOffset=o-e)}this.transform={tx:Math.max(this.horizontalOffset,-i.left)/this.currentZoom,ty:Math.max(this.verticalOffset,-i.top)/this.currentZoom,scale:this.currentZoom},this.setSize()},t.prototype.getObjects=function(t,e){for(var i=[],n=0;n<t.length;n++){for(var o=!1,r=0;r<e.length;r++)if(t[n]===e[r]){o=!0;break}o||i.push(t[n])}return i},t.prototype.virtualizeElements=function(){for(var t=this.viewPortWidth/this.currentZoom,e=this.viewPortHeight/this.currentZoom,i=this.diagram.spatialSearch.findObjects(new W["a"](-this.horizontalOffset/this.currentZoom,-this.verticalOffset/this.currentZoom,t,e)),n=[],o=0;o<i.length;o++)n.push(i[o].id);var r=this.getObjects(n,this.oldCollectionObjects);0===this.oldCollectionObjects.length&&(this.oldCollectionObjects=n);var a=this.getObjects(this.oldCollectionObjects,n);this.diagram.updateVirtualObjects(r,!1,a),this.oldCollectionObjects=n},t.prototype.setSize=function(){var t=this.getPageBounds(void 0,void 0,!0);t.x*=this.currentZoom,t.y*=this.currentZoom,t.width*=this.currentZoom,t.height*=this.currentZoom;var e=Math.min(t.x,-this.horizontalOffset),i=Math.min(t.y,-this.verticalOffset),n=(this.horizontalOffset,this.viewPortWidth,t.right,this.verticalOffset,this.viewPortHeight,t.bottom,this.scrollerWidth),o=this.scrollerWidth;-this.verticalOffset<=t.y&&-this.verticalOffset+this.viewPortHeight>=t.bottom&&(o=0),-this.horizontalOffset<=t.x&&-this.horizontalOffset+this.viewPortWidth>=t.right&&(n=0),this.hScrollSize=n,this.vScrollSize=o;var r=this.diagramWidth,a=this.diagramHeight;this.diagramWidth=Math.max(t.right,-this.horizontalOffset+this.viewPortWidth-o)-e,this.diagramHeight=Math.max(t.bottom,-this.verticalOffset+this.viewPortHeight-n)-i,r===this.diagramWidth&&a===this.diagramHeight||this.diagram.setSize(this.diagramWidth,this.diagramHeight),this.diagram.transformLayers(),this.diagram.element.style.overflow="hidden"},t.prototype.setViewPortSize=function(t,e){this.viewPortWidth=t,this.viewPortHeight=e},t.prototype.getPageBounds=function(t,e,i){var n,o=new W["a"];if("Content"!==e&&null!==this.diagram.pageSettings.width&&null!==this.diagram.pageSettings.height){var r=this.diagram.pageSettings.width,a=this.diagram.pageSettings.height,s=0,c=0;if(this.diagram.pageSettings.multiplePage){if(o=this.diagram.spatialSearch.getPageBounds(0,0),o.right>r){var h=Math.ceil(o.right/r);r*=h}if(o.bottom>a){h=Math.ceil(o.bottom/a);a*=h}if(o.left<0&&Math.abs(o.left)>s){h=Math.ceil(Math.abs(o.left)/this.diagram.pageSettings.width);s=this.diagram.pageSettings.width*h}if(o.top<0&&Math.abs(o.top)>c){h=Math.ceil(Math.abs(o.top)/this.diagram.pageSettings.height);c=this.diagram.pageSettings.height*h}}n=new W["a"](-s,-c,r+s,a+c)}else{var d=t?void 0:0;n=this.diagram.spatialSearch.getPageBounds(d,d)}if(i){var l=this.diagram.scrollSettings.padding;n.x-=l.left,n.y-=l.top,n.width+=l.left+l.right,n.height+=l.top+l.bottom}return n},t.prototype.getPageBreak=function(t){var e=0,i=0,n=-1,o=[],r=0,a=0,s=0,c=0,h=this.diagram.pageSettings.margin.left,d=this.diagram.pageSettings.margin.right,l=this.diagram.pageSettings.margin.top,p=this.diagram.pageSettings.margin.bottom,u=1,g=1,f={x1:r,y1:s,x2:a,y2:c};while(t.width>e)e+=this.diagram.pageSettings.width?this.diagram.pageSettings.width:t.width,e===this.diagram.pageSettings.width&&(f={x1:t.left+h,y1:t.top+l,x2:t.left+h,y2:t.bottom-p},o[++n]=f),e<t.width&&(r=t.topLeft.x+this.diagram.pageSettings.width*u,s=t.topLeft.y+l,a=t.bottomLeft.x+this.diagram.pageSettings.width*u,c=t.bottomLeft.y-p,f={x1:r,y1:s,x2:a,y2:c},o[++n]=f,u++),t.width===e&&(f={x1:t.right-d,y1:t.top+l,x2:t.right-d,y2:t.bottom-p},o[++n]=f);while(t.height>i)i+=this.diagram.pageSettings.height?this.diagram.pageSettings.height:t.height,i===this.diagram.pageSettings.height&&(f={x1:t.left+h,y1:t.top+l,x2:t.right-d,y2:t.top+l},o[++n]=f),i<t.height&&(r=t.topLeft.x+h,s=t.topLeft.y+this.diagram.pageSettings.height*g,a=t.topRight.x-d,c=t.topRight.y+this.diagram.pageSettings.height*g,f={x1:r,y1:s,x2:a,y2:c},o[++n]=f,g++),t.height===i&&(f={x1:t.left+h,y1:t.bottom-p,x2:t.right-d,y2:t.bottom-p},o[++n]=f);return o},t.prototype.zoom=function(t,e,i,n){if(Object(w["F"])(this.diagram)&&1!==t||Object(w["s"])(this.diagram)&&1===t){var o=Object(m["a"])();if(Object(m["d"])(o,this.currentZoom,this.currentZoom),Object(m["g"])(o,this.horizontalOffset,this.verticalOffset),n=n||{x:(this.viewPortWidth/2-this.horizontalOffset)/this.currentZoom,y:(this.viewPortHeight/2-this.verticalOffset)/this.currentZoom},n=Object(m["e"])(o,n),this.currentZoom*t>=this.diagram.scrollSettings.minZoom&&this.currentZoom*t<=this.diagram.scrollSettings.maxZoom){this.currentZoom*=t;var r=this.getPageBounds(void 0,void 0,!0);r.x*=this.currentZoom,r.y*=this.currentZoom;var a=Object(m["a"])();Object(m["d"])(a,t,t,n.x,n.y),Object(m["g"])(a,e||0,i||0),Object(m["b"])(o,a);var s=Object(m["e"])(o,{x:0,y:0});1===t&&(s=this.applyScrollLimit(s.x,s.y)),this.transform={tx:Math.max(s.x,-r.left)/this.currentZoom,ty:Math.max(s.y,-r.top)/this.currentZoom,scale:this.currentZoom},this.horizontalOffset=s.x,this.verticalOffset=s.y,this.setSize(),"SVG"!==this.diagram.mode&&Object(w["E"])(this.diagram)&&this.diagram.scroller.virtualizeElements(),"SVG"===this.diagram.mode||Object(w["E"])(this.diagram)||this.diagram.refreshDiagramLayer(),this.diagram.setOffset(-this.horizontalOffset-r.x,-this.verticalOffset-r.y),Object(N["g"])(this.diagram)}}},t.prototype.fitToPage=function(t){t=t||{};var e=t.mode,i=t.region,n=t.margin||{},o=t.canZoomIn,r=t.customBounds;n.bottom=n.bottom||25,n.top=n.top||25,n.left=n.left||25,n.right=n.right||25;var a,s=r,c=-this.horizontalOffset,h=-this.verticalOffset;if(i=i||"PageSettings","PageSettings"===i&&this.diagram.pageSettings.width&&this.diagram.pageSettings.height||this.diagram.nodes.length>0||this.diagram.connectors.length>0){e=e||"Page","CustomBounds"!==i&&(s=this.getPageBounds(!0,i,!0));var d={x:0,y:0};d.x=(this.viewPortWidth-(n.left+n.right))/s.width,d.y=(this.viewPortHeight-(n.top+n.bottom))/s.height,!o&&s.width-this.horizontalOffset<this.viewPortWidth&&s.height-this.verticalOffset<this.viewPortHeight&&(d.x=Math.min(1,d.x),d.y=Math.min(1,d.y));var l=void 0,p=void 0,u=void 0;switch(e){case"Width":l=d.x,a=l/this.currentZoom,p=(this.viewPortWidth-s.width*l)/2-s.x*l,c+=p+(n.left-n.right)/2*l,h-=-this.verticalOffset*a,h="CustomBounds"!==i?h:h-this.verticalOffset*a;break;case"Height":l=d.y,a=l/this.currentZoom,p=(this.viewPortWidth-s.width*l)/2-s.x*l,u=(this.viewPortHeight-s.height*l)/2-s.y*l,c+=p+(n.left-n.right)/2*l,h+=u+(n.top-n.bottom)/2*l;break;case"Page":l=Math.min(d.x,d.y),a=l/this.currentZoom,p=(this.viewPortWidth-s.width*l)/2-s.x*l,u=(this.viewPortHeight-s.height*l)/2-s.y*l,c+=p+(n.left-n.right)/2*l,h+=u+(n.top-n.bottom)/2*l;break}this.zoom(a,c,h,{x:0,y:0})}else a=1/this.currentZoom,this.zoom(a,c,h,{x:0,y:0})},t.prototype.bringIntoView=function(t){var e=0,i=0,n=this.currentZoom,o=t,r=-this.horizontalOffset,a=-this.verticalOffset;o=new W["a"](o.x*n,o.y*n,o.width*n,o.height*n);var s=new W["a"](r,a,this.viewPortWidth,this.viewPortHeight);s.containsRect(o)||(o.right>-r+this.viewPortWidth&&(e=o.right-this.viewPortWidth),o.x<-r&&(e=o.x),o.bottom>-a+this.viewPortHeight&&(i=o.bottom-this.viewPortHeight),o.y<-a&&(i=o.y),this.zoom(1,-this.horizontalOffset-e,-this.verticalOffset-i,null))},t.prototype.bringToCenter=function(t){var e=this.currentZoom,i=new W["a"](t.x*e,t.y*e,t.width*e,t.height*e),n=i.x+i.width/2-this.viewPortWidth/2,o=i.y+i.height/2-this.viewPortHeight/2;this.zoom(1,-this.horizontalOffset-n,-this.verticalOffset-o,null)},t.prototype.applyScrollLimit=function(t,e){if("Infinity"!==this.diagram.scrollSettings.scrollLimit){var i=void 0;"Limited"===this.diagram.scrollSettings.scrollLimit&&(i=this.diagram.scrollSettings.scrollableArea),i=i||this.getPageBounds(!0),i.x*=this.currentZoom,i.y*=this.currentZoom,i.width*=this.currentZoom,i.height*=this.currentZoom,t*=-1,e*=-1;var n=Math.max(i.right,this.viewPortWidth);if(!(t<=i.x&&(t+this.viewPortWidth>=i.right||t>=i.right-this.viewPortWidth)||t>=i.x&&t+this.viewPortWidth<=n))if(t>=i.x)t=Math.max(i.x,Math.min(t,t-(t+this.viewPortWidth-this.vScrollSize-n)));else{var o=i.right-this.viewPortWidth;t=Math.min(o,i.x)}var r=Math.max(i.bottom,this.viewPortHeight);if(!(e<=i.y&&e+this.viewPortHeight>=i.bottom||e>=i.y&&e+this.viewPortHeight<=r))if(e>=i.y)e=Math.max(i.y,Math.min(e,e-(e+this.viewPortHeight-this.hScrollSize-r)));else{o=i.bottom-this.viewPortHeight;e=Math.min(i.y,o)}t*=-1,e*=-1}return{x:t,y:e}},t}(),Ft=function(){function t(t,e,i,n,o){this.objects=[],this.left=t,this.top=e,this.width=i,this.height=n,this.spatialSearch=o}return t.prototype.findQuads=function(t,e){null!=this.first&&this.first.isIntersect(t)&&this.first.findQuads(t,e),null!=this.second&&this.second.isIntersect(t)&&this.second.findQuads(t,e),null!=this.third&&this.third.isIntersect(t)&&this.third.findQuads(t,e),null!=this.fourth&&this.fourth.isIntersect(t)&&this.fourth.findQuads(t,e),this.objects.length>0&&e.push(this)},t.prototype.isIntersect=function(t){return!(this.left+this.width<t.left||this.top+this.height<t.top||this.left>t.right||this.top>t.bottom)},t.prototype.selectQuad=function(){var t,e=null,i=this;while(null!=i)t=i.getQuad(e),i=t.source,e=t.target||e;return e},t.prototype.getQuad=function(e){var i=this.width/2,n=this.height/2;if(i>=1e3&&n>=1e3){var o=this.left+i,r=this.top+n;if(this.spatialSearch.childRight<=o){if(this.spatialSearch.childBottom<=r){if(!this.first){var a=new t(this.left,this.top,i,n,this.spatialSearch);a.parent=this,this.first=a}return{source:this.first}}if(this.spatialSearch.childTop>=r){if(!this.third){a=new t(this.left,r,i,n,this.spatialSearch);a.parent=this,this.third=a}return{source:this.third}}}else if(this.spatialSearch.childLeft>=o){if(this.spatialSearch.childBottom<=r){if(!this.second){a=new t(o,this.top,i,n,this.spatialSearch);a.parent=this,this.second=a}return{source:this.second}}if(this.spatialSearch.childTop>=r){if(!this.fourth){a=new t(o,r,i,n,this.spatialSearch);a.parent=this,this.fourth=a}return{source:this.fourth}}}}return this,this.objects.push(this.spatialSearch.childNode),{target:this}},t.prototype.isContained=function(){return this.spatialSearch.childLeft>=this.left&&this.spatialSearch.childRight<=this.left+this.width&&this.spatialSearch.childTop>=this.top&&this.spatialSearch.childBottom<=this.top+this.height},t.prototype.addIntoAQuad=function(t){var e={};this.spatialSearch.setCurrentNode(t);var i=null;while(!e.isAdded)e=this.spatialSearch.parentQuad.add(i),i=e.quad;return i},t.prototype.add=function(e){if(e=null,this.isContained())return e=this.selectQuad(),{isAdded:!0,quad:e};var i=void 0,n=0===this.objects.length&&!this.first&&!this.second&&!this.third&&!this.fourth,o=2*this.width,r=2*this.height;return this.spatialSearch.childLeft<this.left?this.spatialSearch.childTop<this.top?(i=new t(this.left-this.width,this.top-this.height,o,r,this.spatialSearch),n||(i.fourth=this)):(i=new t(this.left-this.width,this.top,o,r,this.spatialSearch),n||(i.second=this)):this.spatialSearch.childTop<this.top?(i=new t(this.left,this.top-this.height,o,r,this.spatialSearch),n||(i.third=this)):(i=new t(this.left,this.top,o,r,this.spatialSearch),n||(i.first=this)),this.parent=i,this.spatialSearch.parentQuad=i,{isAdded:!1,quad:e}},t}(),Gt=function(){function t(t){this.quadSize=500,this.objectTable=t,this.parentQuad=new Ft(0,0,2*this.quadSize,2*this.quadSize,this),this.pageLeft=Number.MAX_VALUE,this.pageRight=-Number.MAX_VALUE,this.pageTop=Number.MAX_VALUE,this.pageBottom=-Number.MAX_VALUE,this.quadTable={}}return t.prototype.removeFromAQuad=function(t){if(this.quadTable[t.id]){var e=this.quadTable[t.id],i=this.objectIndex(e.objects,t);-1!==i&&(e.objects.splice(i,1),this.update(e),delete this.quadTable[t.id])}},t.prototype.update=function(t){if(t.parent&&0===t.objects.length&&t.first&&t.second&&t.third&&t.fourth){var e=t.parent;e.first===t?e.first=null:e.second===t?e.second=null:e.third===t?e.third=null:e.fourth===t&&(e.fourth=null),this.update(t.parent)}else t!==this.parentQuad||t.first||t.second||t.third||t.fourth||(t.left=0,t.width=1e3,t.top=0,t.height=1e3)},t.prototype.addIntoAQuad=function(t){var e=this.parentQuad.addIntoAQuad(t);this.quadTable[t.id]=e},t.prototype.objectIndex=function(t,e){for(var i=0;i<t.length;i++)if(t[i].id===e.id)return i;return-1},t.prototype.updateQuad=function(t){this.setCurrentNode(t);var e=t.outerBounds;if(isNaN(e.x)||isNaN(e.y)||isNaN(e.width)||isNaN(e.height))return!1;if(this.quadTable[t.id]){var i=this.quadTable[t.id];i.isContained()||(this.removeFromAQuad(t),this.addIntoAQuad(t))}else this.addIntoAQuad(t);if(!this.isWithinPageBounds(e)||this.leftElement===t||this.topElement===t||this.rightElement===t||this.bottomElement===t){var n=!1;return this.pageLeft===this.childLeft&&t===this.leftElement||(this.pageLeft>=this.childLeft?(this.pageLeft=this.childLeft,this.leftElement=t,n=!0):t===this.leftElement&&(this.pageLeft=Number.MAX_VALUE,this.findLeft(this.parentQuad),n=!0)),this.pageTop===this.childTop&&t===this.topElement||(this.pageTop>=this.childTop?(this.pageTop=this.childTop,this.topElement=t,n=!0):t===this.topElement&&(this.pageTop=Number.MAX_VALUE,this.findTop(this.parentQuad),n=!0)),this.pageBottom===this.childBottom&&t===this.bottomElement||(this.pageBottom<=this.childBottom?(n=!0,this.pageBottom=this.childBottom,this.bottomElement=t):t===this.bottomElement&&(this.pageBottom=-Number.MAX_VALUE,this.findBottom(this.parentQuad),n=!0)),this.pageRight===this.childRight&&t===this.rightElement||(this.pageRight<=this.childRight?(this.pageRight=this.childRight,this.rightElement=t,n=!0):t===this.rightElement&&(this.pageRight=-Number.MAX_VALUE,this.findRight(this.parentQuad),n=!0)),n}return this.setCurrentNode(null),!1},t.prototype.isWithinPageBounds=function(t){return t.left>=this.pageLeft&&t.right<=this.pageRight&&t.top>=this.pageTop&&t.bottom<=this.pageBottom},t.prototype.findQuads=function(t){var e=[];return this.parentQuad.findQuads(t,e),e},t.prototype.findObjects=function(t){for(var e=this.findQuads(t),i=[],n=0,o=e;n<o.length;n++)for(var r=o[n],a=0,s=r.objects;a<s.length;a++){var c=s[a];c.outerBounds.intersects(t)&&i.push(this.objectTable[c.id])}return i},t.prototype.updateBounds=function(t){var e=!1;return t===this.topElement&&(this.pageTop=Number.MAX_VALUE,this.topElement=null,this.findTop(this.parentQuad),e=!0),t===this.leftElement&&(this.pageLeft=Number.MAX_VALUE,this.leftElement=null,this.findLeft(this.parentQuad),e=!0),t===this.rightElement&&(this.pageRight=-Number.MAX_VALUE,this.rightElement=null,this.findRight(this.parentQuad),e=!0),t===this.bottomElement&&(this.pageBottom=-Number.MAX_VALUE,this.bottomElement=null,this.findBottom(this.parentQuad),e=!0),e},t.prototype.findBottom=function(t){t.third||t.fourth?(t.third&&this.findBottom(t.third),t.fourth&&this.findBottom(t.fourth)):(t.second&&this.findBottom(t.second),t.first&&this.findBottom(t.first));for(var e=0,i=t.objects;e<i.length;e++){var n=i[e];this.pageBottom<=n.outerBounds.bottom&&(this.pageBottom=n.outerBounds.bottom,this.bottomElement=n)}},t.prototype.findRight=function(t){t.second||t.fourth?(t.second&&this.findRight(t.second),t.fourth&&this.findRight(t.fourth)):(t.first&&this.findRight(t.first),t.third&&this.findRight(t.third));for(var e=0,i=t.objects;e<i.length;e++){var n=i[e];this.pageRight<=n.outerBounds.right&&(this.pageRight=n.outerBounds.right,this.rightElement=n)}},t.prototype.findLeft=function(t){t.first||t.third?(t.first&&this.findLeft(t.first),t.third&&this.findLeft(t.third)):(t.second&&this.findLeft(t.second),t.fourth&&this.findLeft(t.fourth));for(var e=0,i=t.objects;e<i.length;e++){var n=i[e];this.pageLeft>=n.outerBounds.left&&(this.pageLeft=n.outerBounds.left,this.leftElement=n)}},t.prototype.findTop=function(t){t.first||t.second?(t.first&&this.findTop(t.first),t.second&&this.findTop(t.second)):(t.third&&this.findTop(t.third),t.fourth&&this.findTop(t.fourth));for(var e=0,i=t.objects;e<i.length;e++){var n=i[e];this.pageTop>=n.outerBounds.top&&(this.pageTop=n.outerBounds.top,this.topElement=n)}},t.prototype.setCurrentNode=function(t){if(this.childNode=t,t){var e=t.outerBounds;this.childLeft=Number(e.left),this.childTop=Number(e.top),this.childRight=Number(e.right),this.childBottom=Number(e.bottom)}else this.childLeft=Number.MAX_VALUE,this.childTop=Number.MAX_VALUE,this.childRight=-Number.MAX_VALUE,this.childBottom=-Number.MAX_VALUE},t.prototype.getPageBounds=function(t,e){if(this.pageLeft===Number.MAX_VALUE)return new W["a"](0,0,0,0);var i=void 0!==t?Math.min(this.pageLeft,0):this.pageLeft,n=void 0!==e?Math.min(this.pageTop,0):this.pageTop;return new W["a"](Math.round(i),Math.round(n),Math.round(this.pageRight-i),Math.round(this.pageBottom-n))},t.prototype.getQuad=function(t){return this.quadTable[t.id]},t}(),qt=i("c2844"),Zt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Qt=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},Kt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zt(e,t),Qt([Object(n["p"])(!1)],e.prototype,"preventDefaults",void 0),e}(n["d"]),Jt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$t=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},te=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jt(e,t),$t([Object(n["p"])("")],e.prototype,"action",void 0),$t([Object(n["p"])("")],e.prototype,"cursor",void 0),e}(n["d"]);i.d(e,"a",(function(){return ne}));var ee=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ie=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},ne=function(t){function e(e,i){var n,o,r=t.call(this,e,i)||this;r.version=17.1,r.checkMenu=!1,r.connectorTable={},r.groupTable={},r.activeLabel={id:"",parentId:"",isGroup:!1,text:void 0},r.textEditing=!1,r.isTriggerEvent=!1,r.preventNodesUpdate=!1,r.preventConnectorsUpdate=!1,r.selectionConnectorsList=[],r.deleteVirtualObject=!1,r.crudDeleteNodes=[],r.diagramid=88123,r.selectedObject={helperObject:void 0,actualObject:void 0},r.renderTimer=null;for(var a=0;e&&e.nodes&&a<e.nodes.length;a++)n=e.nodes[a],o=r.nodes[a],n.children&&n.children.length>0&&(n.style&&n.style.fill||(o.style.fill="transparent"),n.style&&n.style.strokeColor||(o.style.strokeColor="transparent")),n.shape&&"UmlActivity"===n.shape.type&&Object(d["P"])(n,o),n.shape&&"SwimLane"===n.shape.type&&Object(d["O"])(n,o),r.nodeDefaults&&Object(d["S"])(o,n,r.nodeDefaults);if(e&&e.connectors&&r.connectorDefaults)for(a=0;e&&e.connectors&&a<e.connectors.length;a++)n=e.connectors[a],o=r.connectors[a],Object(d["S"])(o,n,r.connectorDefaults);for(a=0;e&&e.connectors&&a<e.connectors.length;a++){var s=e.connectors[a],c=r.connectors[a];s.shape&&"None"!==s.shape.type&&Object(d["N"])(s,c)}return r}return ee(e,t),e.prototype.clearCollection=function(t){for(var e,i=[],n=0,o=Object.keys(this.nameTable);n<o.length;n++){var r=o[n];e=this.nameTable[r],e&&(t&&e instanceof z["b"]||!t&&e instanceof A["q"])&&i.push(e)}this.clearObjects(i)},e.prototype.onPropertyChanged=function(i,o){for(var r,a,s=!0,c=!1,h=!1,l=0,p=Object.keys(i);l<p.length;l++){var u=p[l];switch(u){case"width":case"height":this.element.style.width=this.getSizeValue(this.width),this.element.style.height=this.getSizeValue(this.height),this.eventHandler.updateViewPortSize(this.element);for(var g=0,f=this.views;g<f.length;g++){var m=f[g],v=this.views[m];v instanceof e||v.updateView(v)}break;case"nodes":if(i.nodes.length>0&&0===o.nodes.length)this.clearCollection(),h=!0;else{for(var b=0,w=Object.keys(i.nodes);b<w.length;b++){var O=w[b],x=Number(O),j=this.nodes[x],S=i.nodes[x];c=c||void 0!==S.excludeFromLayout,this.nodePropertyChange(j,o.nodes[x],S,void 0,!0,!0);var C={element:Object(d["h"])(j),cause:this.diagramActions,oldValue:Object(d["h"])(o.nodes[x]),newValue:Object(d["h"])(i.nodes[x])};Object(n["D"])()&&(C.element={node:Object(d["h"])(j)},C.oldValue={node:Object(d["h"])(a)},C.newValue={node:Object(d["h"])(r)}),this.triggerEvent(y["e"].propertyChange,C),s&&(s=!1)}"Canvas"===this.mode&&this.refreshDiagramLayer()}break;case"connectors":if(i.connectors.length>0&&0===o.connectors.length)this.clearCollection(!0),h=!0;else{for(var P=0,T=Object.keys(i.connectors);P<T.length;P++){O=T[P],x=Number(O),j=this.connectors[x],S=i.connectors[x];this.connectorPropertyChange(j,o.connectors[x],S,!0,!0);C={element:Object(d["h"])(j),cause:this.diagramActions,oldValue:Object(d["h"])(o.connectors[x]),newValue:Object(d["h"])(i.connectors[x])};Object(n["D"])()&&(C.element={connector:Object(d["h"])(j)},C.oldValue={connector:Object(d["h"])(a)},C.newValue={connector:Object(d["h"])(r)}),this.triggerEvent(y["e"].propertyChange,C),j&&j.parentId&&"UmlClassifier"===this.nameTable[j.parentId].shape.type&&this.updateConnectorEdges(this.nameTable[j.parentId]||j),s&&(s=!1)}this.updateBridging(),"Canvas"===this.mode&&this.refreshDiagramLayer()}break;case"bridgeDirection":this.updateBridging(),"Canvas"===this.mode&&this.refreshDiagramLayer();break;case"backgroundColor":this.intOffPageBackground();break;case"pageSettings":this.validatePageSize(),this.updatePage();break;case"selectedItems":if(i.selectedItems.userHandles&&this.selectedItems.wrapper&&this.selectedItems.userHandles&&this.selectedItems.userHandles.length>0){this.renderSelector(!0);break}if(i.selectedItems.constraints){this.renderSelector(!0);break}break;case"snapSettings":this.updateSnapSettings(i);break;case"commandManager":this.initCommands();break;case"layout":c=!0;break;case"dataSourceSettings":this.clear(),this.initObjects(),"None"===this.layout.type?h=!0:c=!0;break;case"tooltip":Object(Bt["b"])(this);break;case"rulerSettings":this.updateRulerSettings(i);break;case"layers":this.updateLayer(i);break;case"scrollSettings":this.updateScrollSettings(i);break;case"locale":this.realActions|=y["n"].PreventDataInit,t.prototype.refresh.call(this),this.realActions&=~y["n"].PreventDataInit;break;case"contextMenuSettings":if(void 0!==i.contextMenuSettings.showCustomMenuOnly&&(this.contextMenuSettings.showCustomMenuOnly=i.contextMenuSettings.showCustomMenuOnly),void 0!==i.contextMenuSettings.show&&(this.contextMenuSettings.show=i.contextMenuSettings.show),i.contextMenuSettings.items)for(var I=i.contextMenuSettings.items,A=0,z=Object.keys(I);A<z.length;A++){O=z[A],x=Number(O);this.contextMenuSettings.items[x]=I[x]}break;case"serializationSettings":void 0!==i.serializationSettings.preventDefaults&&(this.serializationSettings.preventDefaults=i.serializationSettings.preventDefaults);break}}if(c&&this.doLayout(),s){C={element:Object(d["h"])(this),cause:this.diagramActions,oldValue:Object(d["h"])(o),newValue:Object(d["h"])(i)};Object(n["D"])()&&(C.element={diagram:Object(d["h"])(this)},C.oldValue={diagram:Object(d["h"])(a)},C.newValue={diagram:Object(d["h"])(r)}),this.triggerEvent(y["e"].propertyChange,C)}if(!h&&this.canLogChange()&&this.modelChanged(i,o)){var L={type:"PropertyChanged",undoObject:o,redoObject:i,category:"Internal"};this.addHistoryEntry(L)}if(this.resetDiagramActions(),h&&(this.initObjects(!0),this.refreshDiagramLayer()),!h)for(var E=0,D=this.views;E<D.length;E++){v=D[E],m=this.views[v];m instanceof e||(i.scrollSettings&&i.scrollSettings.currentZoom!=o.scrollSettings.currentZoom&&m.updateHtmlLayer(m),this.refreshCanvasDiagramLayer(m))}this.resetTemplate()},e.prototype.updateSnapSettings=function(t){(void 0!==t.snapSettings.constraints||t.snapSettings.horizontalGridlines||t.snapSettings.verticalGridlines)&&this.diagramRenderer.updateGrid(this.snapSettings,Object(c["q"])(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler)},e.prototype.updateRulerSettings=function(t){void 0!==t.rulerSettings.dynamicGrid&&this.diagramRenderer.updateGrid(this.snapSettings,Object(c["q"])(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),void 0!==t.rulerSettings.showRulers?(this.intOffPageBackground(),this.scroller.setSize(),this.renderRulers()):void 0===t.rulerSettings.horizontalRuler&&void 0===t.rulerSettings.verticalRuler||(void 0!==t.rulerSettings.horizontalRuler.thickness||void 0!==t.rulerSettings.verticalRuler.thickness?(Object(N["c"])(this),this.intOffPageBackground(),this.scroller.setSize(),this.renderRulers()):Object(N["g"])(this)),this.diagramRenderer.updateGrid(this.snapSettings,Object(c["q"])(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler)},e.prototype.getPersistData=function(){var t=["loaded"];return this.addOnPersist(t)},e.prototype.preRender=function(){this.initializePrivateVariables(),this.isProtectedOnChange=!0,this.serviceLocator=new I,this.initializeServices(),this.setCulture();var t="measureElement";window[t]&&(window[t]=null),this.initDiagram(),this.initViews(),this.unWireEvents(),this.wireEvents(),this.element.classList.add("e-diagram")},e.prototype.initializePrivateVariables=function(){if(""===this.element.id){var t=document.getElementsByClassName("e-diagram").length;this.element.id="chart_"+this.diagramid+"_"+t}this.defaultLocale={Copy:"Copy",Cut:"Cut",Paste:"Paste",Undo:"Undo",Redo:"Redo",SelectAll:"Select All",Grouping:"Grouping",Group:"Group",UnGroup:"Un Group",Order:"Order",BringToFront:"Bring To Front",MoveForward:"Move Forward",SendToBack:"Send To Back",SendBackward:"Send Backward"},this.layerZIndex=-1,this.layerZIndexTable={},this.nameTable={},this.pathTable={},this.groupTable={},this.commands={},this.isLoading||(this.views=[]),this.commandHandler=new Vt(this),this.eventHandler=new Nt(this,this.commandHandler),this.spatialSearch=new Gt(this.nameTable),this.scroller=new Ut(this)},e.prototype.initializeServices=function(){this.serviceLocator.register("localization",this.localeObj=new n["n"](this.getModuleName(),this.defaultLocale,this.locale))},e.prototype.setCulture=function(){this.localeObj=new n["n"](this.getModuleName(),this.defaultLocale,this.locale)},e.prototype.render=function(){var t=[];this.dataSourceSettings.crudAction.read&&this.renderInitialCrud(),this.initHistory(),this.diagramRenderer=new O(this.element.id,new l,"SVG"===this.mode),this.initLayers(),this.initializeDiagramLayers(),this.diagramRenderer.setLayers(),this.initObjects(!0),this.doLayout(),this.lineRoutingModule&&this.lineRoutingModule.lineRouting(this),this.validatePageSize(),this.renderPageBreaks(),this.diagramRenderer.renderSvgGridlines(this.snapSettings,Object(c["q"])(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),this.commandHandler.initSelectorWrapper(),this.notify("initial-load",{}),this.trigger("load"),this.scroller.setSize(),this.scroller.updateScrollOffsets(),this.refreshDiagramLayer(),(this.scrollSettings.verticalOffset>0||this.scrollSettings.horizontalOffset>0)&&this.updateScrollOffset(),n["c"].isDevice&&(this.tool=y["f"].ZoomPan|y["f"].SingleSelect),this.notify("initial-end",{}),this.isProtectedOnChange=!1,this.tooltipObject=Object(Bt["b"])(this),this.diagramActions=y["c"].Render;for(var e=this.nodes,i=0;i<e.length;i++)e[i].isExpanded||t.push(e[i]);if(t.length)for(i=t.length-1;i>=0;i--)this.commandHandler.expandNode(t[i],this);this.initCommands(),this.updateTemplate(),this.isLoading=!1,Object(n["D"])()&&(this.tool=y["f"].ZoomPan),this.renderComplete()},e.prototype.updateTemplate=function(){for(var t,e,i,o=0;o<this.nodes.length;o++)t=this.nodes[o],e=t.annotations[0],"HTML"===t.shape.type||"Native"===t.shape.type?Object(n["N"])(t.id+"content_diagram","Content",this.nodes[o].shape):e&&e.template instanceof HTMLElement&&Object(n["N"])(this.element.id+"template_diagram","Template",e);for(o=0;o<this.connectors.length;o++)i=this.connectors[o].annotations[0],i&&i.template instanceof HTMLElement&&Object(n["N"])(this.element.id+"template_diagram","Template",i)},e.prototype.resetTemplate=function(){for(var t,e,i,o=0;o<this.nodes.length;o++)t=this.nodes[o],e=t.annotations[0],"HTML"===t.shape.type&&t.shape.content instanceof HTMLElement?Object(n["J"])(t.id+"content","Content"):e&&e.template instanceof HTMLElement&&Object(n["J"])(this.element.id+"template","Template");for(o=0;o<this.connectors.length;o++)i=this.connectors[o].annotations[0],i&&i.template instanceof HTMLElement&&Object(n["J"])(this.element.id+"template","Template")},e.prototype.renderInitialCrud=function(){var t=this;if(t.dataSourceSettings.crudAction.read){var e=new n["a"](t.dataSourceSettings.crudAction.read,"GET",!1);e.onSuccess=function(e){t.dataSourceSettings.dataManager?t.dataSourceSettings.dataManager=JSON.parse(e):t.dataSourceSettings.dataSource=JSON.parse(e),t.dataBind()},e.send().then()}if(t.dataSourceSettings.connectionDataSource.crudAction.read){e=new n["a"](t.dataSourceSettings.connectionDataSource.crudAction.read,"GET",!1);e.onSuccess=function(e){t.dataSourceSettings.connectionDataSource.dataManager=JSON.parse(e),t.dataBind()},e.send().then()}},e.prototype.getModuleName=function(){return"diagram"},e.prototype.getClassName=function(){return"Diagram"},e.prototype.requiredModules=function(){var t=[];return t.push({member:"Bpmn",args:[]}),t.push({member:"Bridging",args:[]}),t.push({member:"ConnectorEditingTool",args:[]}),this.constraints&y["d"].UndoRedo&&t.push({member:"UndoRedo",args:[]}),("OrganizationalChart"===this.layout.type||"HierarchicalTree"===this.layout.type||this.layout.enableAnimation)&&t.push({member:"LayoutAnimate",args:[]}),this.snapSettings.constraints&&t.push({member:"Snapping",args:[this]}),t.push({member:"PrintandExport",args:[this]}),this.contextMenuSettings.show&&t.push({member:"contextMenu",args:[this,this.serviceLocator]}),"OrganizationalChart"!==this.layout.type&&"HierarchicalTree"!==this.layout.type||t.push({member:"OrganizationalChart",args:[]}),"ComplexHierarchicalTree"===this.layout.type&&t.push({member:"ComplexHierarchicalTree",args:[]}),"MindMap"===this.layout.type&&t.push({member:"MindMapChart",args:[]}),"RadialTree"===this.layout.type&&t.push({member:"RadialTree",args:[]}),"SymmetricalLayout"===this.layout.type&&t.push({member:"SymmetricalLayout",args:[]}),(this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource||this.dataSourceSettings.crudAction.read||this.dataSourceSettings.connectionDataSource.crudAction.read)&&t.push({member:"DataBinding",args:[]}),this.constraints&y["d"].LineRouting&&t.push({member:"LineRouting",args:[]}),t},e.prototype.destroy=function(){if(clearInterval(this.renderTimer),this.renderTimer=null,this.hRuler&&this.vRuler&&(this.hRuler.destroy(),this.vRuler.destroy()),this.tooltipObject.destroy(),this.droppable.destroy(),this.unWireEvents(),this.notify("destroy",{}),t.prototype.destroy.call(this),document.getElementById(this.element.id)){this.element.classList.remove("e-diagram");var e=document.getElementsByClassName("e-tooltip-wrap");while(e.length>0)e[0].parentNode.removeChild(e[0]);var i=document.getElementById(this.element.id+"content");i&&this.element.removeChild(i);var n="measureElement";if(window[n]){window[n].usageCount-=1;var o="measureElementCount";window[o]--,0===window[o]&&(window[n].parentNode.removeChild(window[n]),window[n]=null)}}},e.prototype.wireEvents=function(){var t=n["c"].touchStartEvent,e=n["c"].touchEndEvent,i=n["c"].touchMoveEvent,o=n["c"].isPointer?"pointerleave":"mouseleave",r=n["c"].isPointer,a="mozilla"===n["c"].info.name?r?"mousewheel":"DOMMouseScroll":"mousewheel";n["l"].add(this.diagramCanvas,t,this.eventHandler.mouseDown,this.eventHandler),n["l"].add(this.diagramCanvas,i,this.eventHandler.mouseMove,this.eventHandler),n["l"].add(this.diagramCanvas,e,this.eventHandler.mouseUp,this.eventHandler),n["l"].add(this.diagramCanvas,o,this.eventHandler.mouseLeave,this.eventHandler),n["l"].add(this.diagramCanvas,"keydown",this.eventHandler.keyDown,this.eventHandler),n["l"].add(this.diagramCanvas,"dblclick",this.eventHandler.doubleClick,this.eventHandler),n["l"].add(this.diagramCanvas,"scroll",this.eventHandler.scrolled,this.eventHandler),n["l"].add(this.diagramCanvas,a,this.eventHandler.mouseWheel,this.eventHandler),n["l"].add(window,"resize",this.eventHandler.windowResize,this.eventHandler),this.initDroppables()},e.prototype.unWireEvents=function(){var t=n["c"].touchStartEvent,e=n["c"].touchMoveEvent,i=n["c"].isPointer?"pointerleave":"mouseleave",o=n["c"].isPointer,r="mozilla"===n["c"].info.name?o?"mousewheel":"DOMMouseScroll":"mousewheel",a=n["c"].touchEndEvent;n["l"].remove(this.diagramCanvas,t,this.eventHandler.mouseDown),n["l"].remove(this.diagramCanvas,e,this.eventHandler.mouseMove),n["l"].remove(this.diagramCanvas,a,this.eventHandler.mouseUp),n["l"].remove(this.diagramCanvas,i,this.eventHandler.mouseLeave),n["l"].remove(this.diagramCanvas,"keydown",this.eventHandler.keyDown),n["l"].remove(this.diagramCanvas,"dblclick",this.eventHandler.doubleClick),n["l"].remove(this.diagramCanvas,"scroll",this.eventHandler.scrolled),n["l"].remove(this.diagramCanvas,r,this.eventHandler.mouseWheel),n["l"].remove(window,"resize",this.eventHandler.windowResize)},e.prototype.select=function(t,e){if(Object(n["D"])()){for(var i=0;i<t.length;i++)t[i]=this.nameTable[t[i].id];t=this.nameTable[t.id]||t}null!=t&&this.commandHandler.selectObjects(t,e)},e.prototype.selectAll=function(){var t=[];t=this.getObjectsOfLayer(this.activeLayer.objects),this.select(t)},e.prototype.unSelect=function(t){Object(n["D"])()&&(t=this.nameTable[t.id]||t),t&&ut(this,t)&&this.commandHandler.unSelect(t)},e.prototype.clearSelection=function(){this.commandHandler.clearSelection(!0)},e.prototype.updateViewPort=function(){this.eventHandler.updateViewPortSize(this.element)},e.prototype.cutCommand=function(){this.cut()},e.prototype.cut=function(){this.commandHandler.cut()},e.prototype.addProcess=function(t,e){this.bpmnModule&&this.bpmnModule.addProcess(t,e,this)},e.prototype.removeProcess=function(t){this.bpmnModule&&this.bpmnModule.removeProcess(t,this)},e.prototype.pasteCommand=function(){this.paste()},e.prototype.paste=function(t){this.commandHandler.paste(t)},e.prototype.fitToPage=function(t){this.scroller.fitToPage(t)},e.prototype.bringIntoView=function(t){this.scroller.bringIntoView(t)},e.prototype.bringToCenter=function(t){this.scroller.bringToCenter(t)},e.prototype.copyCommand=function(){this.copy()},e.prototype.copy=function(){var t=this.commandHandler.copy();return t},e.prototype.group=function(){this.commandHandler.group()},e.prototype.unGroup=function(){this.commandHandler.unGroup()},e.prototype.sendToBack=function(){this.commandHandler.sendToBack()},e.prototype.setActiveLayer=function(t){var e=this.commandHandler.getLayer(t);this.activeLayer=e},e.prototype.addLayer=function(t,e){this.commandHandler.addLayer(t,e)},e.prototype.removeLayer=function(t){this.commandHandler.removeLayer(t)},e.prototype.moveObjects=function(t,e){this.commandHandler.moveObjects(t,e)},e.prototype.sendLayerBackward=function(t){this.commandHandler.sendLayerBackward(t)},e.prototype.bringLayerForward=function(t){this.commandHandler.bringLayerForward(t)},e.prototype.cloneLayer=function(t){this.commandHandler.cloneLayer(t)},e.prototype.bringToFront=function(){this.commandHandler.bringToFront()},e.prototype.moveForward=function(){this.commandHandler.sendForward()},e.prototype.sendBackward=function(){this.commandHandler.sendBackward()},e.prototype.getObject=function(t){return this.nameTable[t]},e.prototype.getNodeObject=function(t){return Object(s["b"])(this.nameTable[t])},e.prototype.getConnectorObject=function(t){return Object(s["b"])(this.nameTable[t])},e.prototype.getActiveLayer=function(){return this.activeLayer},e.prototype.nudgeCommand=function(t,e,i){"object"!==typeof t&&this.nudge(t)},e.prototype.nudge=function(t,e,i){var n,o=0,r=0;"Left"===t||"Right"===t?(n="Left"===t,o=(n?-1:1)*(e||1)):(n="Up"===t,r=(n?-1:1)*(i||1));var a=this.selectedItems,s=this.selectedItems.wrapper.children[0];s instanceof g["a"]?this.commandHandler.labelDrag(a.nodes[0],s,o,r):this.drag(a,o,r),this.refreshCanvasLayers()},e.prototype.drag=function(t,e,i){if(Object(n["D"])()&&t.id&&(t=this.nameTable[t.id]||t),this.bpmnModule&&t instanceof A["q"]){var o=this.bpmnModule.updateAnnotationDrag(t,this,e,i);if(o)return}if(t instanceof A["t"]){if(this.preventConnectorsUpdate=!0,t.nodes&&t.nodes.length)for(var r=0,a=t.nodes;r<a.length;r++){var s=a[r];if(this.drag(s,e,i),s.parentId){var c=this.nameTable[s.parentId];if(c.isLane){var h=this.nameTable[c.parentId];Object(nt["j"])(c,h,s,this)}}}if(t.connectors&&t.connectors.length)for(var d=0,l=t.connectors;d<l.length;d++){var p=l[d];this.drag(p,e,i),-1===this.selectionConnectorsList.indexOf(p)&&this.selectionConnectorsList.push(p)}this.updateSelector()}else t instanceof A["q"]&&this.bpmnModule&&this.bpmnModule.updateAnnotationDrag(t,this,e,i),this.commandHandler.drag(t,e,i);if(t instanceof A["t"]){this.preventConnectorsUpdate=!1;for(var u=0,g=this.selectionConnectorsList;u<g.length;u++){var f=g[u];this.updateConnectorProperties(this.nameTable[f.id]),"Bpmn"===f.shape.type&&"Default"===f.shape.sequence&&this.commandHandler.updatePathElementOffset(f)}this.selectionConnectorsList=[]}this.diagramActions&y["c"].ToolAction||this.updateSelector()},e.prototype.scale=function(t,e,i,n){var o=!0;if(t.id&&(t=this.nameTable[t.id]||t),t instanceof A["t"]){if(t.nodes&&t.nodes.length)for(var r=0,a=t.nodes;r<a.length;r++){var s=a[r];o=this.commandHandler.scale(s,e,i,n,t)}if(t.connectors&&t.connectors.length)for(var c=0,h=t.connectors;c<h.length;c++){var d=h[c];this.commandHandler.scale(d,e,i,n,t)}this.updateSelector(),this.refreshCanvasLayers()}else this.commandHandler.scale(t,e,i,n,t.children?t:void 0);return o},e.prototype.rotate=function(t,e,i){var n;if(t.id&&(t=this.nameTable[t.id]||t),t)if(i=i||{x:t.wrapper.offsetX,y:t.wrapper.offsetY},t instanceof A["t"]){t.rotateAngle+=e,t.wrapper.rotateAngle+=e;var o=Object(s["e"])(t.wrapper);if(n=this.commandHandler.checkBoundaryConstraints(void 0,void 0,o),!n)return t.rotateAngle-=e,t.wrapper.rotateAngle-=e,n;var r=[];r=r.concat(t.nodes),r=r.concat(t.connectors),this.commandHandler.rotateObjects(t,r,e,i)}else this.commandHandler.rotateObjects(t,[t],e,i);return n},e.prototype.dragSourceEnd=function(t,e,i){this.commandHandler.dragSourceEnd(t,e,i)},e.prototype.dragTargetEnd=function(t,e,i){this.commandHandler.dragTargetEnd(t,e,i)},e.prototype.findObjectsUnderMouse=function(t,e){return this.eventHandler.findObjectsUnderMouse(t,e)},e.prototype.findObjectUnderMouse=function(t,e,i){return this.eventHandler.findObjectUnderMouse(t,e,i)},e.prototype.findTargetObjectUnderMouse=function(t,e,i,n,o){return this.eventHandler.findTargetUnderMouse(t,e,i,n,o)},e.prototype.findElementUnderMouse=function(t,e){return this.eventHandler.findElementUnderMouse(t,e)},e.prototype.findActionToBeDone=function(t,e,i,n){return this.eventHandler.findActionToBeDone(t,e,i,n)},e.prototype.getTool=function(t){var e,i=Object(s["f"])(this.getCustomTool);return i&&(e=i(t),e)?e:this.eventHandler.getTool(t)},e.prototype.getCursor=function(t,e){var i,n=Object(s["f"])(this.getCustomCursor);if(n&&(i=n(t,e),i))return i;if(this.customCursor.length)for(var o=0;o<this.customCursor.length;o++)if(this.customCursor[o].action===t)return this.customCursor[o].cursor;return this.eventHandler.getCursor(t)},e.prototype.initHistory=function(){this.undoRedoModule&&this.undoRedoModule.initHistory(this)},e.prototype.addHistoryEntry=function(t){if(this.undoRedoModule&&this.constraints&y["d"].UndoRedo&&!this.currentSymbol){if(t.undoObject&&"helper"===t.undoObject.id)return;this.undoRedoModule.addHistoryEntry(t,this),"StartGroup"!==t.type&&"EndGroup"!==t.type&&this.historyChangeTrigger(t)}},e.prototype.historyChangeTrigger=function(t){var e={},i="oldValue",o="newValue",r="type",a=[];if("Internal"===t.category){switch(t&&t.redoObject&&t.redoObject.nodes instanceof Array&&t.redoObject.connectors instanceof Array?a=t.redoObject.nodes.concat(t.redoObject.connectors):t.redoObject&&a.push(t.redoObject),e[r]=t.type,t.type){case"PositionChanged":e[i]={offsetX:t.undoObject.offsetX,offsetY:t.undoObject.offsetY},e[o]={offsetX:t.redoObject.offsetX,offsetY:t.redoObject.offsetY};break;case"RotationChanged":e[i]={rotateAngle:t.undoObject.rotateAngle},e[o]={rotateAngle:t.redoObject.rotateAngle};break;case"SizeChanged":e[i]={offsetX:t.undoObject.offsetX,offsetY:t.undoObject.offsetY,width:t.undoObject.width,height:t.undoObject.height},e[o]={offsetX:t.redoObject.offsetX,offsetY:t.redoObject.offsetY,width:t.redoObject.width,height:t.redoObject.height};break;case"CollectionChanged":e[t.changeType]=a;break;case"ConnectionChanged":e[i]={offsetX:t.undoObject.offsetX,offsetY:t.undoObject.offsetY},e[o]={offsetX:t.redoObject.offsetX,offsetY:t.redoObject.offsetY};break}var s=void 0;if(s={cause:t.category,source:Object(d["h"])(a),change:Object(d["h"])(e)},Object(n["D"])()){s={cause:t.category,change:Object(d["h"])(e),source:{connectors:void 0,nodes:void 0}};var c=s.source;c.connectors=[],c.nodes=[];for(var h=void 0,l=0;l<a.length;l++)h=Object(d["h"])(a[l]),Object(d["x"])(a[l])===z["b"]?c.connectors.push(h):c.nodes.push(h);s.source=c}a.length&&this.triggerEvent(y["e"].historyChange,s)}},e.prototype.startGroupAction=function(){var t={type:"StartGroup",category:"Internal"};this.addHistoryEntry(t)},e.prototype.endGroupAction=function(){var t={type:"EndGroup",category:"Internal"};this.addHistoryEntry(t)},e.prototype.undo=function(){this.undoRedoModule&&this.constraints&y["d"].UndoRedo&&this.undoRedoModule.undo(this)},e.prototype.redo=function(){this.undoRedoModule&&this.constraints&y["d"].UndoRedo&&this.undoRedoModule.redo(this)},e.prototype.align=function(t,e,i){e||(e=[],e=e.concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|y["c"].PublicMethod,this.commandHandler.align(e,t,i||"Object")},e.prototype.distribute=function(t,e){e||(e=[],e=e.concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|y["c"].PublicMethod,this.commandHandler.distribute(e,t)},e.prototype.sameSize=function(t,e){e||(e=[],e=e.concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|y["c"].PublicMethod,this.commandHandler.sameSize(e,t)},e.prototype.zoom=function(t,e){this.scroller.zoom(t,0,0,e)},e.prototype.zoomTo=function(t){var e=t.zoomFactor?t.zoomFactor:.2;e="ZoomOut"===t.type?1/(1+e):1+e,this.scroller.zoom(e,0,0,t.focusPoint)},e.prototype.pan=function(t,e,i){this.scroller.zoom(1,t,e,i)},e.prototype.reset=function(){this.scroller.zoom(1/this.scroller.currentZoom,-this.scroller.horizontalOffset,-this.scroller.verticalOffset,{x:0,y:0})},e.prototype.triggerEvent=function(t,e){e&&this.updateEventValue(e),this.trigger(y["e"][t],e)},e.prototype.updateEventValue=function(t){var e=t.element;t.element&&e instanceof A["t"]&&e.nodes.length+e.connectors.length===1&&(t.element=1===e.nodes.length?e.nodes[0]:e.connectors[0])},e.prototype.addNodeToLane=function(t,e,i){if(this.nameTable[e]){var n=this.nameTable[e];if(this.protectPropertyChange(!0),this.undoRedoModule&&this.historyManager.startGroupAction(),this.nameTable[t.id]||(t.offsetX=n.wrapper.bounds.width+n.wrapper.bounds.x,t.offsetY=n.wrapper.bounds.height+n.wrapper.bounds.y,t=this.add(t)),t.parentId="",n.shape.phases.length)for(var o=0;o<n.shape.phases.length;o++){c=e+i+o;if(this.nameTable[c]&&this.nameTable[c].isLane){var r=this.nameTable[c].wrapper.bounds,a={x:r.x+(r.x-n.wrapper.bounds.x+t.margin.left+t.wrapper.bounds.width/2),y:r.y+n.wrapper.bounds.y-t.margin.top};if("Horizontal"===n.shape.orientation)a.y=r.y;else{a.x=r.x;var s=this.nameTable[c].parentId+n.shape.lanes[0].id+"_0_header";a.y=r.y+(n.wrapper.bounds.y-this.nameTable[s].wrapper.bounds.height+t.margin.top+t.wrapper.bounds.height/2)}if(r.containsPoint(a)||c===e+i+(n.shape.phases.length-1)){Object(nt["a"])(this,this.nameTable[c],t,void 0,!0),Object(nt["j"])(this.nameTable[c],n,t,this);break}}}else{var c=e+i+"0";this.nameTable[c]&&(Object(nt["a"])(this,this.nameTable[c],t,void 0,!0),Object(nt["j"])(this.nameTable[c],n,t,this))}this.undoRedoModule&&this.historyManager.endGroupAction(),this.protectPropertyChange(!1)}this.updateDiagramElementQuad()},e.prototype.showTooltip=function(t){var e=Object(s["e"])(t.wrapper),i={x:0,y:0},n=t.tooltip.content?t.tooltip.content:"X:"+Math.round(e.x)+" Y:"+Math.round(e.y);t&&"Custom"===t.tooltip.openOn&&(i=t instanceof A["q"]?{x:t.offsetX+t.width/2,y:t.offsetY+t.height/2}:{x:t.targetPoint.x,y:t.targetPoint.x},this.commandHandler.showTooltip(t,i,n,"SelectTool",!0))},e.prototype.hideTooltip=function(t){t&&"Custom"===t.tooltip.openOn&&this.tooltipObject.close()},e.prototype.addNode=function(t,e){return this.add(t,e)},e.prototype.addConnector=function(t){return this.add(t)},e.prototype.add=function(t,i){var r,a=this.isProtectedOnChange;if(this.protectPropertyChange(!0),t){t=Object(s["b"])(t);var c=void 0;c={element:t,cause:this.diagramActions,state:"Changing",type:"Addition",cancel:!1},Object(n["D"])()&&(c=Object(d["s"])(c,t,"Changing","Addition")),"helper"===t.id||this.diagramActions&y["c"].PreventCollectionChangeOnDragOver||this.triggerEvent(y["e"].collectionChange,c),this.diagramActions=this.diagramActions|y["c"].PublicMethod,t.id=t.id||Object(s["i"])();var h=this.activeLayer;if(!c.cancel&&!h.lock){if(h.objects.indexOf(t.id)<0&&!h.lock&&(h.visible||(h.visible=!0,this.dataBind()),h.objects.push(t.id)),Object(d["x"])(t)===z["b"])r=new z["b"](this,"connectors",t,!0),r.status="New",Object(d["S"])(r,t,this.connectorDefaults),this.connectors.push(r),this.initObject(r),!1===t.visible&&this.updateElementVisibility(r.wrapper,r,t.visible),this.updateEdges(r);else{if(r=new A["q"](this,"nodes",t,!0),Object(d["S"])(r,t,this.nodeDefaults),r.parentId=t.parentId,r.umlIndex=t.umlIndex,r.status="New",this.nodes.push(r),this.initObject(r,h,void 0,i),this.bpmnModule){if(r.shape.annotations&&0!==r.shape.annotations.length)for(var l=0,p=this.bpmnModule.getTextAnnotationConn(r);l<p.length;l++){var u=p[l];this.initConnectors(u,h,!1)}r.shape.activity&&r.shape.activity.subProcess.processes&&r.shape.activity.subProcess.processes.length&&this.bpmnModule.updateDocks(r,this)}if(this.lineRoutingModule&&this.constraints&y["d"].LineRouting)for(var g=this.spatialSearch.findObjects(r.wrapper.outerBounds),f=0;f<g.length;f++){var m=g[f];m instanceof z["b"]&&this.connectorPropertyChange(m,{},{sourceID:m.sourceID,targetID:m.targetID,sourcePortID:m.sourcePortID,targetPortID:m.targetPortID,sourcePoint:m.sourcePoint,targetPoint:m.targetPoint})}if(r.umlIndex>-1&&t.parentId&&this.nameTable[t.parentId]&&"UmlClassifier"===this.nameTable[t.parentId].shape.type){var v=this.nameTable[t.parentId];v.children.splice(r.umlIndex,0,r.id),v.wrapper.children.splice(r.umlIndex,0,r.wrapper),v.wrapper.measure(new o["a"]),v.wrapper.arrange(v.wrapper.desiredSize),this.updateDiagramObject(v)}}if(c={element:r,cause:this.diagramActions,state:"Changed",type:"Addition",cancel:!1},this.updateBlazorCollectionChange(r,!0),Object(n["D"])()&&(c=Object(d["s"])(c,t,"Changed","Addition")),"helper"===t.id||this.diagramActions&y["c"].PreventCollectionChangeOnDragOver||this.triggerEvent(y["e"].collectionChange,c),!(this.diagramActions&y["c"].UndoRedo)&&!(this.diagramActions&y["c"].Group)&&!(this.diagramActions&y["c"].PreventHistory)){var b={type:"CollectionChanged",changeType:"Insert",undoObject:Object(s["b"])(t),redoObject:Object(s["b"])(t),category:"Internal"};this.addHistoryEntry(b)}"SVG"===this.mode&&(this.updateSvgNodes(r),this.updateTextElementValue(r),this.updateDiagramObject(r),r.shape.activity&&r.shape.activity.subProcess.processes&&r.shape.activity.subProcess.processes.length&&this.updateProcesses(r),this.updateBridging())}}this.protectPropertyChange(a),this.resetDiagramActions(y["c"].PublicMethod),r&&this.layers.length>1&&this.moveNode(r);for(var w=0,O=this.views;w<O.length;w++){var x=O[w],j=this.views[x];j instanceof e||this.refreshCanvasDiagramLayer(j)}return r},e.prototype.updateBlazorCollectionChange=function(t,e){var i="ejsInterop";if(window&&window[i]){var n={},o=t instanceof A["q"]?"nodes":"connectors",r=void 0;r="nodes"===o?this.nodes.indexOf(t).toString():this.connectors.indexOf(t).toString(),n[r]=Object(s["b"])(t),window[i].updateDiagramCollection&&window[i].updateDiagramCollection.call(this,o,n,{},!e,!1)}},e.prototype.updateSvgNodes=function(t){if(t.children)for(var e=0,i=t.children;e<i.length;e++){var n=i[e];if(this.nameTable[n]&&this.nameTable[n].parentId){var o=Object(c["m"])(n+"_groupElement",this.element.id);o&&o.parentNode.removeChild(o)}}},e.prototype.updateProcesses=function(t){if(this.bpmnModule&&t&&t.shape&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length){var e=t.shape.activity.subProcess.processes;this.moveSvgNode(t.id);for(var i=0,n=e;i<n.length;i++){var o=n[i];this.moveSvgNode(o);var r=[];r=r.concat(this.nameTable[o].outEdges,this.nameTable[o].inEdges);for(var a=r.length-1;a>=0;a--)this.moveSvgNode(r[a])}for(var s=0,c=e;s<c.length;s++){o=c[s];this.nameTable[o].shape.activity.subProcess.processes&&this.nameTable[o].shape.activity.subProcess.processes.length&&this.updateProcesses(this.nameTable[o])}}else this.moveSvgNode(t.id)},e.prototype.moveSvgNode=function(t){var e=Object(c["m"])(t+"_groupElement",this.element.id),i=e.parentElement;e.parentNode.removeChild(e),i.appendChild(e)},e.prototype.addTextAnnotation=function(t,e){if(this.bpmnModule){var i=this.bpmnModule.addAnnotation(e,t,this);if(this.initConnectors(i,this.commandHandler.getObjectLayer(e.id),!1),this.updateDiagramObject(e),!(this.diagramActions&y["c"].UndoRedo)&&!(this.diagramActions&y["c"].Group)){var n={type:"CollectionChanged",changeType:"Insert",undoObject:Object(s["b"])(t),redoObject:Object(s["b"])(t),category:"Internal"};this.addHistoryEntry(n)}}},e.prototype.spliceConnectorEdges=function(t,e){var i,n=[];if(i=e?this.nameTable[t.sourceID]:this.nameTable[t.targetID],i){n=e?i.outEdges:i.inEdges;for(var o=n.length-1;o>=0;o--)n[o]===t.id&&n.splice(o,1)}},e.prototype.removeDependentConnector=function(t){var e,i=[];i=i.concat(t.outEdges,t.inEdges);for(var n=i.length-1;n>=0;n--)e=this.nameTable[i[n]],e&&(this.connectorTable[e.id]=Object(s["b"])(e),this.remove(e))},e.prototype.removeObjectsFromLayer=function(t){if(t.children)for(var e=0;e<t.children.length;e++){var i=this.nameTable[t.children[e]];i&&this.removeObjectsFromLayer(i)}var n=this.layers.indexOf(this.commandHandler.getObjectLayer(t.id)),o=this.layers[n].objects,r=o.indexOf(t.id);r>-1&&(ut(this,t)&&this.unSelect(t),this.layers[n].objects.splice(r,1),delete this.layers[n].zIndexTable[this.nameTable[t.id].zIndex])},e.prototype.removeElements=function(t){if("SVG"===this.mode||"Canvas"===this.mode&&"Native"===t.shape.type){var e=Object(c["m"])(t.id+"_groupElement",this.element.id);e&&e.parentNode.removeChild(e)}this.refreshCanvasLayers();for(var i,n=t.wrapper.children,o=0;o<n.length;o++){if(n[o]instanceof v["a"]||n[o].id&&n[o].id.indexOf("icon_content")>0){n[o].id.indexOf("icon_content")>0&&"SVG"===this.mode&&(i=Object(c["m"])(n[o].id+"_shape_groupElement",this.element.id),i.parentNode.removeChild(i),i=Object(c["m"])(n[o].id+"_rect_groupElement",this.element.id),i.parentNode.removeChild(i));for(var r=0,a=this.views;r<a.length;r++){var s=a[r];Object(c["D"])(n[o].id+"_groupElement",s)}}else if(n[o]instanceof b["a"])for(var h=0,l=this.views;h<l.length;h++){s=l[h];Object(c["D"])(t.id+"_html_element",s),Object(c["D"])(n[o].id+"_html_element",s)}Object(d["K"])(n[o].id)}},e.prototype.removeCommand=function(){this.remove()},e.prototype.remove=function(t){var e,i=[];i=i.concat(this.selectedItems.nodes,this.selectedItems.connectors);var o=!1;if(t){if(t=this.nameTable[t.id],t&&t.shape&&"SwimLane"===t.shape.type&&Object(Ht["q"])(this,t),t&&(Object(w["d"])(t)||this.diagramActions&y["c"].Clear)&&(e={element:t,cause:this.diagramActions,state:"Changing",type:"Removal",cancel:!1},Object(n["D"])()&&(e=Object(d["s"])(e,t,"Changing","Removal")),this.diagramActions&y["c"].Clear||"helper"===t.id||this.triggerEvent(y["e"].collectionChange,e),!e.cancel)){if(this.bpmnModule&&this.bpmnModule.checkAndRemoveAnnotations(t,this))return void this.refreshCanvasLayers();if(!(this.diagramActions&y["c"].UndoRedo)&&!(this.diagramActions&y["c"].PreventHistory)&&(t instanceof A["q"]||t instanceof z["b"])){var r={type:"CollectionChanged",changeType:"Remove",undoObject:Object(s["b"])(t),redoObject:Object(s["b"])(t),category:"Internal"};this.updateBlazorCollectionChange(t,!1),this.diagramActions&y["c"].Clear||i.length>0&&this.undoRedoModule&&!this.layout.type&&(this.historyManager.startGroupAction(),o=!0),t instanceof A["q"]&&this.removeDependentConnector(t),t.isLane||t.isPhase||this.diagramActions&y["c"].Clear||this.isStackChild(t)||this.addHistoryEntry(r)}!t.children||t.isLane||t.isPhase||this.deleteGroup(t),t.parentId&&(this.deleteChild(t),this.nameTable[t.parentId]&&"UmlClassifier"===this.nameTable[t.parentId].shape.type&&(this.updateDiagramObject(this.nameTable[t.parentId]),this.updateConnectorEdges(this.nameTable[t.parentId])));var a=void 0;this.diagramActions=this.diagramActions|y["c"].PublicMethod;var c=this.nameTable[t.id];if(c instanceof A["q"]){if("Bpmn"===c.shape.type&&this.bpmnModule&&this.bpmnModule.removeBpmnProcesses(c,this),c.isLane||c.isPhase||"SwimLane"===c.shape.type){var h=c.isLane||c.isPhase?this.nameTable[c.parentId]:this.nameTable[c.id];h.wrapper.children[0];c.isLane?Object(Ht["n"])(this,c,h):c.isPhase&&Object(Ht["p"])(this,c,h)}a=this.nodes.indexOf(c),-1!==a&&(this.crudDeleteNodes.push(this.nameTable[c.id]),this.nodes.splice(a,1),this.updateNodeEdges(c))}else a=this.connectors.indexOf(c),-1!==a&&(this.crudDeleteNodes.push(this.nameTable[c.id]),this.connectors.splice(a,1)),this.updateEdges(c),this.spliceConnectorEdges(t,!0),this.spliceConnectorEdges(t,!1);if(o&&this.historyManager.endGroupAction(),ut(this,c)&&this.unSelect(c),!c.isPhase){if(this.removeObjectsFromLayer(t),this.currentDrawingObject&&(this.currentDrawingObject.wrapper=void 0),delete this.nameTable[t.id],i.length>0&&i[0].id===c.id&&c.parentId){var l=this.nameTable[c.parentId];if(l&&l.isLane&&"SwimLane"===this.nameTable[l.parentId].shape.type){h=this.nameTable[l.parentId];Object(Ht["o"])(this,h,l,c)}}this.removeElements(c),this.updateBridging(),"SVG"!==this.mode&&this.refreshDiagramLayer(),this.diagramActions&y["c"].Clear||(this.removeFromAQuad(c),e={element:t,cause:this.diagramActions,state:"Changed",type:"Removal",cancel:!1},Object(n["D"])()&&(e=Object(d["s"])(e,t,"Changed","Removal")),"helper"!==t.id&&this.triggerEvent(y["e"].collectionChange,e),this.resetTool())}}}else if(i.length>0){this.undoRedoModule&&(this.historyManager.startGroupAction(),o=!0);for(var p=0;p<i.length;p++){i[p];if(this.nameTable[i[p].id]){if(i[p]instanceof z["b"]&&this.bpmnModule&&this.bpmnModule.textAnnotationConnectors.indexOf(i[p])>-1)return void this.remove(this.nameTable[i[p].targetID]);this.remove(i[p])}}o&&this.historyManager.endGroupAction(),this.clearSelection()}this.tooltipObject.close()},e.prototype.isStackChild=function(t){var e,i=this.nameTable[t.parentId];if(t&&t.parentId&&i.container&&"Stack"===i.container.type&&"UmlClassifier"!==this.nameTable[t.parentId].shape.type){e=!0;var n={sourceIndex:i.wrapper.children.indexOf(t.wrapper),source:t,target:void 0,targetIndex:void 0},o={type:"StackChildPositionChanged",redoObject:{sourceIndex:void 0,source:t,target:void 0,targetIndex:void 0},undoObject:n,category:"Internal"};this.diagramActions&y["c"].UndoRedo||this.addHistoryEntry(o)}return e},e.prototype.deleteChild=function(t,e){var i;if(e=e?this.nameTable[e.id]:this.nameTable[t.parentId],i="string"===typeof t?t:t.id,e&&e.children){for(var n=0;n<e.children.length;n++)if(e.children[n]===i){e.children.splice(n,1);for(var r=0;r<e.wrapper.children.length;r++)e.wrapper.children[r].id===i&&e.wrapper.children.splice(r,1)}e.wrapper.measure(new o["a"]),e.wrapper.arrange(e.wrapper.desiredSize)}},e.prototype.addChild=function(t,e,i){var n,r=this.nameTable[t.id];if(r.children||(r.children=[]),r.children&&("string"===typeof e?this.nameTable[e]&&(n=e):(n=e.id=e.id||Object(s["i"])(),this.add(e)),n&&(!e.umlIndex||-1===e.umlIndex))){var a=this.nameTable[n];a.parentId=r.id,r.container&&"Stack"===r.container.type&&this.updateStackProperty(r,a),i?(r.children.splice(i,0,n),r.wrapper.children.splice(i,0,a.wrapper)):(r.children.push(n),r.wrapper.children.push(a.wrapper)),r.wrapper.measure(new o["a"]),r.wrapper.arrange(r.wrapper.desiredSize),void 0!==r.container&&(a.offsetX=a.wrapper.offsetX,a.offsetY=a.wrapper.offsetY),(!r.parentId||this.nameTable[r.parentId]&&"SwimLane"!==this.nameTable[r.parentId].shape.type)&&this.updateDiagramObject(r)}},e.prototype.clear=function(){this.clearObjects()},e.prototype.clearObjects=function(t){var e=[];t?e=t:(e=e.concat(this.nodes),e=e.concat(this.connectors)),this.diagramActions=this.diagramActions|y["c"].Clear;for(var i=0,n=e;i<n.length;i++){var o=n[i];this.nameTable[o.id]&&this.remove(o)}this.diagramActions=this.diagramActions&~y["c"].Clear,this.spatialSearch=new Gt(this.nameTable),this.initHistory()},e.prototype.startEditCommad=function(){var t,e=this.selectedItems.nodes[0]?this.selectedItems.nodes[0]:void 0;if(e&&e instanceof A["q"])if(e.isLane&&e.parentId)for(var i=this.nameTable[e.parentId],n=i.shape.lanes,o=e.id.slice(i.id.length),r=o.substring(0,o.length-1),a=0;a<n.length;a++)e.isLane&&r===n[a].id&&(t=this.nameTable[n[a].header.id]);else if("SwimLane"===e.shape.type&&e.shape.header&&e.shape.hasHeader){var s=e.wrapper.children[0].rows[0].cells[0].children[0].id;t=this.nameTable[s]}this.startTextEdit(t)},e.prototype.startTextEdit=function(t,e){if(!Object(w["G"])(this)||Object(w["C"])(this)){Object(n["D"])()&&(t=this.nameTable[t.id]||t),this.textEditing=!0;var i=this.scroller.transform,r=Object(w["H"])(this)?i.scale:1,a=90,h=void 0,l=void 0,p=void 0,u=void 0,g=void 0,f=void 0;if(t||(t=this.selectedItems.nodes[0]?this.selectedItems.nodes[0]:this.selectedItems.connectors[0]),t){t.shape&&"UmlClassifier"===t.shape.type&&(t=this.nameTable[t.children[0]]);var m=!1;if(this.bpmnModule&&(f=this.bpmnModule.getTextAnnotationWrapper(t,e),f&&(t=this.nameTable[t.id.split("_textannotation_")[0]])),f?m=!0:("Text"!==t.shape.type&&0===t.annotations.length&&(t.constraints&y["k"].ReadOnly||(this.activeLabel.isGroup=!0,this.startGroupAction(),this.addLabels(t,[{id:Object(s["i"])(),content:""}]))),!e&&("Text"!==t.shape.type&&t.annotations.length>0||"Text"===t.shape.type)&&(e="Text"===t.shape.type?t.wrapper.children[0].id.split("_")[1]:t.annotations[0].id),e&&(f=this.getWrapper(t.wrapper,e))),t&&f&&!(f instanceof b["a"])&&(!Object(w["J"])(f,t)||m)){var v=f.style,O=void 0;O=f.bounds.width<t.wrapper.bounds.width?f.bounds.width:t.wrapper.bounds.width,O=a>O?a:O;var x=document.getElementById(this.element.id+"_editTextBoxDiv"),j=document.getElementById(this.element.id+"_editBox");h=j?j.value:f.content,this.activeLabel.text=h,x||j||(x=Object(c["b"])("div",{}),j=Object(c["b"])("textarea",{}),this.diagramCanvas.appendChild(x),x.appendChild(j),j.appendChild(document.createTextNode(h))),l=Object(c["x"])(f.style,h,void 0,void 0,O),l.isEmpty()&&(l="Text"!==t.shape.type?new o["a"](Object(d["k"])(t,f.id.split(t.id+"_")[1]).width||50,f.style.fontSize):new o["a"](t.width>50?50:t.width,f.style.fontSize)),t.parentId&&"UmlClassifier"===this.nameTable[t.parentId].shape.type?(l.width=t.wrapper.bounds.width-20,u=(t.wrapper.bounds.center.x+i.tx)*i.scale-l.width/2*r-2.5,g=(t.wrapper.bounds.center.y+i.ty)*i.scale-l.height/2*r-3,f.style.textAlign="Left"):(l.width=Math.max(l.width,50),u=(f.bounds.center.x+i.tx)*i.scale-l.width/2*r-2.5,g=(f.bounds.center.y+i.ty)*i.scale-l.height/2*r-3),p={id:this.element.id+"_editTextBoxDiv",style:"position: absolute;left:"+u+"px;top:"+g+"px;width:"+(l.width+1)*r+"px;height:"+l.height*r+"px; containerName:"+t.id+";"},Object(c["E"])(x,p),p={id:this.element.id+"_editBox",style:"width:"+(l.width+1)*r+"px;height:"+l.height*r+"px;resize: none;outline: none;overflow: hidden;;font-family:"+v.fontFamily+";font-size:"+v.fontSize*r+"px;text-align:"+f.style.textAlign.toLocaleLowerCase()+";",class:"e-diagram-text-edit"},Object(c["E"])(j,p),j.style.fontWeight=v.bold?"bold":"",j.style.fontStyle=v.italic?"italic":"",j.style.lineHeight=(1.2*v.fontSize+"px;").toString(),j.style.textDecoration=v.textDecoration?v.textDecoration:"",this.activeLabel.parentId=t.id,this.activeLabel.id=e,f.visible=!1,this.updateDiagramObject(t),this.diagramActions=this.diagramActions|y["c"].TextEdit,this.isTriggerEvent||(n["l"].add(j,"input",this.eventHandler.inputChange,this.eventHandler),n["l"].add(j,"focusout",this.focusOutEdit,this),j.select())}}}},e.prototype.updateNodeExpand=function(t,e){for(var i=0;i<t.outEdges.length;i++){var n=this.nameTable[t.outEdges[i]],o=this.nameTable[n.targetID];n.visible=e,e||(this.updateElementVisibility(n.wrapper,n,!1),o.isExpanded=e),this.updateNodeExpand(o,o.isExpanded),o.visible=e,e||this.updateElementVisibility(o.wrapper,o,!1)}},e.prototype.updateConnectorAnnotation=function(t){if(t.annotations.length)for(var e=void 0,i=0,n=t.annotations;i<n.length;i++){var r=n[i];e=this.getWrapper(t.wrapper,r.id),t.updateAnnotation(r,t.intermediatePoints,t.wrapper.bounds,e,this.diagramActions&y["c"].Interactions)}t.wrapper.measure(new o["a"](t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize)},e.prototype.removeChildrenFromLayout=function(t){for(var e,i=[],n="parentId",o="processId",r=0;r<t.length;r++)e=t[r],e[n]||e[o]||i.push(e);return i},e.prototype.doLayout=function(){var t,e=!1,i=this.isProtectedOnChange;this.protectPropertyChange(!0);var n=this.removeChildrenFromLayout(this.nodes),r={x:this.scroller.viewPortWidth,y:this.scroller.viewPortHeight};if(this.organizationalChartModule)t=this.organizationalChartModule.updateLayout(n,this.nameTable,this.layout,r,this.dataSourceSettings.id,this.diagramActions),e=!0,this.layoutAnimateModule&&t.rootNode&&!this.diagramActions&&this.updateNodeExpand(t.rootNode,t.rootNode.isExpanded);else if(this.mindMapChartModule)this.mindMapChartModule.updateLayout(n,this.nameTable,this.layout,r,this.dataSourceSettings.id,this.dataSourceSettings.root),e=!0;else if(this.radialTreeModule)this.radialTreeModule.updateLayout(n,this.nameTable,this.layout,r),e=!0;else if(this.symmetricalLayoutModule)this.symmetricalLayoutModule.maxIteration=this.layout.maxIteration,this.symmetricalLayoutModule.springLength=this.layout.springLength,this.symmetricalLayoutModule.springFactor=this.layout.springFactor,this.symmetricalLayoutModule.updateLayout(n,this.connectors,this.symmetricalLayoutModule,this.nameTable,this.layout,r),e=!0;else if(this.complexHierarchicalTreeModule){var a=this.complexHierarchicalTreeModule.getLayoutNodesCollection(this.nodes);a.length>0&&this.complexHierarchicalTreeModule.doLayout(a,this.nameTable,this.layout,r),e=!0}if(e){this.preventUpdate=!0;for(var s={},c=n,h=0,l=c;h<l.length;h++){var p=l[h],u=p;if(this.preventNodesUpdate||this.diagramActions&&this.diagramActions&y["c"].PreventIconsUpdate||(this.updateIcon(u),this.updateDefaultLayoutIcons(u)),this.preventNodesUpdate=!0,this.nodePropertyChange(u,{},{offsetX:u.offsetX,offsetY:u.offsetY},!0),this.preventNodesUpdate=!1,u.wrapper.measure(new o["a"](u.wrapper.width,u.wrapper.height)),u.wrapper.arrange(u.wrapper.desiredSize),this.updateDiagramObject(u,!0),u.inEdges.length>0)for(var g=0;g<u.inEdges.length;g++){var f=this.nameTable[u.inEdges[g]];s[f.id]=f}if(u.outEdges.length>0)for(var m=0;m<u.outEdges.length;m++){var v=this.nameTable[u.outEdges[m]];s[v.id]=v}}for(var b=0,w=Object.keys(s);b<w.length;b++){var O=w[b],x=(f=s[O],this.getPoints(f));Object(d["R"])(f,x),"Bpmn"===f.shape.type&&"Default"===f.shape.sequence&&this.commandHandler.updatePathElementOffset(f),f.wrapper.measure(new o["a"](void 0,void 0)),f.wrapper.arrange(f.wrapper.desiredSize),this.updateConnectorAnnotation(f),this.updateQuad(f),this.updateDiagramObject(f,!0)}this.preventUpdate=!1,this.updatePage(),this.diagramActions&y["c"].Render&&"Canvas"!==this.mode||this.refreshDiagramLayer()}return i||this.protectPropertyChange(i),t},e.prototype.saveDiagram=function(){return Object(d["M"])(this)},e.prototype.loadDiagram=function(t){return Object(d["j"])(t,this)},e.prototype.getDiagramContent=function(t){if(this.printandExportModule){var e=this.printandExportModule.getDiagramContent(t);return e}return""},e.prototype.exportImage=function(t,e){this.printandExportModule&&this.printandExportModule.exportImages(t,e)},e.prototype.printImage=function(t,e){this.printandExportModule&&(e.printOptions=!0,this.printandExportModule.exportImages(t,e))},e.prototype.setStackLimit=function(t){this.undoRedoModule&&t&&(this.historyManager.stackLimit=t,this.undoRedoModule.applyLimit(this.historyManager.currentEntry,t,this,!0))},e.prototype.clearHistory=function(){this.undoRedoModule&&this.undoRedoModule.clearHistory(this)},e.prototype.getDiagramBounds=function(){if(this.printandExportModule){var t=this.printandExportModule.getDiagramBounds("",{});return t.width=t.width>this.scrollSettings.viewPortWidth?t.width+(t.x>0?t.x:0):this.scrollSettings.viewPortWidth,t.height=t.height>this.scrollSettings.viewPortHeight?t.height+(t.y>0?t.y:0):this.scrollSettings.viewPortHeight,t.x=t.x>0?0:t.x,t.y=t.y>0?0:t.y,t}return new W["a"]},e.prototype.exportDiagram=function(t){if(this.printandExportModule){var e=this.printandExportModule.exportDiagram(t);return e}return""},e.prototype.print=function(t){this.printandExportModule&&this.printandExportModule.print(t)},e.prototype.addPorts=function(t,e){var i;this.protectPropertyChange(!0),t=this.nameTable[t.id]||t,e.length>1&&this.startGroupAction();for(var n=0;n<e.length;n++){if(i=new it["a"](t,"ports",e[n],!0),t.ports.push(i),t.children){var r=t.wrapper;t.initPorts(this.getDescription,t.wrapper.children[r.children.length-1])}else{var a=t.wrapper;a.children.push(t.initPortWrapper(t.ports[t.ports.length-1]))}if(!(this.diagramActions&y["c"].UndoRedo)&&!(this.diagramActions&y["c"].Group)){var c={type:"PortCollectionChanged",changeType:"Insert",undoObject:Object(s["b"])(i),redoObject:Object(s["b"])(t),category:"Internal"};this.addHistoryEntry(c)}}e.length>1&&this.endGroupAction(),t.wrapper.measure(new o["a"](t.width,t.height)),t.wrapper.arrange(t.wrapper.desiredSize),this.updateDiagramObject(t),this.protectPropertyChange(!1)},e.prototype.addConstraints=function(t,e){return t|e},e.prototype.removeConstraints=function(t,e){return t&~e},e.prototype.addNodeLabels=function(t,e){this.addLabels(t,e)},e.prototype.addConnectorLabels=function(t,e){this.addLabels(t,e)},e.prototype.addLabels=function(t,e){this.protectPropertyChange(!0),t=this.nameTable[t.id]||t;var i,n=t.wrapper;e.length>1&&this.startGroupAction();for(var r=0;r<e.length;r++){if(t instanceof A["q"])if(i=new X["c"](t,"annotations",e[r],!0),t.annotations.push(i),t.children){for(var a=t,c=0;c<a.wrapper.children.length;c++)if(a.wrapper.children[c].id===a.id+"group_container"){var h=a.wrapper.children[c];h.children.push(t.initAnnotationWrapper(t.annotations[t.annotations.length-1],this.element.id))}}else n.children.push(t.initAnnotationWrapper(t.annotations[t.annotations.length-1],this.element.id));else if(t instanceof z["b"]){i=new X["b"](t,"annotations",e[r],!0),t.annotations.push(i);var d=n.children[0],l=new W["a"](d.offsetX-d.width/2,d.offsetY-d.height/2,d.width,d.height);n.children.push(t.getAnnotationElement(t.annotations[t.annotations.length-1],t.intermediatePoints,l,this.getDescription,this.element.id))}if(!(this.diagramActions&y["c"].UndoRedo)&&!(this.diagramActions&y["c"].Group)){var p={type:"LabelCollectionChanged",changeType:"Insert",undoObject:Object(s["b"])(i),redoObject:Object(s["b"])(t),category:"Internal"};this.addHistoryEntry(p)}}e.length>1&&this.endGroupAction(),t.wrapper.measure(new o["a"](n.width,n.height)),t.wrapper.arrange(n.desiredSize),this.updateDiagramObject(t),this.protectPropertyChange(!1)},e.prototype.addLanes=function(t,e,i){t=this.nameTable[t.id]||t;for(var n=0;n<e.length;n++)Object(Ht["a"])(this,t,e[n],i),void 0!==i&&(i+=1);this.updateDiagramElementQuad()},e.prototype.addPhases=function(t,e){t=this.nameTable[t.id]||t;for(var i=0;i<e.length;i++)Object(Ht["b"])(this,t,e[i]);this.updateDiagramElementQuad()},e.prototype.removeLane=function(t,e){Object(Ht["n"])(this,void 0,t,e),this.updateDiagramElementQuad()},e.prototype.removePhase=function(t,e){Object(Ht["p"])(this,void 0,t,e),this.updateDiagramElementQuad()},e.prototype.removelabelExtension=function(t,e,i,n){for(var o=0;o<n.children.length;o++){var r=n.children[o];if((r instanceof g["a"]||r instanceof b["a"])&&r.id.match("_"+e[i].id+"$")){for(var a=0;a<t.annotations.length;a++)if(r.id.match("_"+t.annotations[a].id+"$")){if(!(this.diagramActions&y["c"].UndoRedo)){var h={type:"LabelCollectionChanged",changeType:"Remove",undoObject:Object(s["b"])(t.annotations[a]),redoObject:Object(s["b"])(t),category:"Internal"};this.addHistoryEntry(h)}t.annotations.splice(a,1)}if(n.children.splice(o,1),"SVG"===this.mode){var d=Object(c["m"])(r.id,this.element.id);if(d){var l=Object(c["m"])(r.id,this.element.id);l.parentNode.removeChild(l)}var p=Object(c["m"])(r.id+"_text",this.element.id);p&&(d=Object(c["m"])(r.id+"_text",this.element.id),d.parentNode.removeChild(d));var u=Object(c["m"])(r.id+"_html_element",this.element.id);u&&u.parentNode.removeChild(u)}else this.refreshCanvasLayers()}}},e.prototype.removeLabels=function(t,e){t=this.nameTable[t.id]||t,e.length>1&&this.startGroupAction();for(var i=e.length-1;i>=0;i--)if(t.children&&t.children.length>0)for(var n=0;n<t.wrapper.children.length;n++)this.removelabelExtension(t,e,i,t.wrapper.children[n]);else this.removelabelExtension(t,e,i,t.wrapper);e.length>1&&this.endGroupAction()},e.prototype.removePortsExtenion=function(t,e,i,n){for(var o=0;o<n.children.length;o++){var r=n.children[o];if(r instanceof p["a"]&&r.id.match("_"+e[i].id+"$")){for(var a=0;a<t.ports.length;a++)if(r.id.match("_"+t.ports[a].id+"$")){if(!(this.diagramActions&y["c"].UndoRedo)){var h={type:"PortCollectionChanged",changeType:"Remove",undoObject:Object(s["b"])(t.ports[a]),redoObject:Object(s["b"])(t),category:"Internal"};this.addHistoryEntry(h)}t.ports.splice(a,1)}if(n.children.splice(o,1),"SVG"===this.mode){var d=Object(c["m"])(r.id,this.element.id);d.parentNode.removeChild(d)}else this.refreshCanvasLayers()}}},e.prototype.removePorts=function(t,e){t=this.nameTable[t.id]||t,e.length>1&&this.startGroupAction();for(var i=e.length-1;i>=0;i--)if(t.children&&t.children.length>0)for(var n=0;n<t.wrapper.children.length;n++)this.removePortsExtenion(t,e,i,t.wrapper.children[n]);else this.removePortsExtenion(t,e,i,t.wrapper);e.length>1&&this.endGroupAction()},e.prototype.getSizeValue=function(t,e){var i;if(i=t.toString().indexOf("px")>0?t.toString():t.toString().indexOf("%")>0?void 0!==e?"100%":t.toString():t.toString()+"px",e){Object(N["b"])(this);i="calc("+i+" - "+e+"px)"}return i},e.prototype.renderRulers=function(){this.rulerSettings.showRulers?(Object(N["e"])(this),Object(N["f"])(this,!0),Object(N["f"])(this,!1)):Object(N["c"])(this)},e.prototype.intOffPageBackground=function(){var t=new o["a"];t=Object(N["b"])(this);var e=document.getElementById(this.element.id+"content"),i=this.getSizeValue(this.width,t.width),n=this.getSizeValue(this.height,t.height),r=this.rulerSettings.showRulers?"width:"+i+"; height:"+n+";top:"+t.height+"px;left:"+t.width+"px;overflow: scroll;position:absolute;overflow:auto;":"width:"+i+"; height:"+n+";position:absolute; left:0px;  top:0px;overflow: auto;",a={id:this.element.id+"content",tabindex:"0",style:r};e?(this.diagramCanvas=e,this.diagramCanvas.setAttribute("style",r)):(this.diagramCanvas=Object(c["b"])("div",a),this.element.appendChild(this.diagramCanvas)),this.diagramCanvas.style.background=this.backgroundColor},e.prototype.initDiagram=function(){this.intOffPageBackground(),Object(c["E"])(this.element,{style:"width:"+this.getSizeValue(this.width)+"; height:"+this.getSizeValue(this.height)+";position:relative;overflow:hidden;"})},e.prototype.renderBackgroundLayer=function(t,e){var i=this.createSvg(this.element.id+"_backgroundLayer_svg",t.width,t.height);i.setAttribute("style",e);var n=Object(c["d"])("g",{id:this.element.id+"_backgroundImageLayer",class:"e-background-image-layer"});i.appendChild(n);var o={id:this.element.id+"_backgroundLayer",class:"e-background-layer"},r=Object(c["d"])("g",o);i.appendChild(r),this.diagramCanvas.appendChild(i)},e.prototype.renderGridLayer=function(t,e){var i=this.createSvg(this.element.id+"_gridline_svg",t.width,t.height);i.setAttribute("class","e-grid-layer");var n=Object(c["d"])("g",{id:this.element.id+"_gridline",width:"100%",height:"100%"}),o=Object(c["d"])("rect",{id:this.element.id+"_grid_rect",x:"0",y:"0",width:"100%",height:"100%"});Object(d["f"])()?o.setAttribute("fill","url("+location.href+"#"+this.element.id+"_pattern "):o.setAttribute("fill","url(#"+this.element.id+"_pattern)"),n.appendChild(o),i.appendChild(n),this.diagramCanvas.appendChild(i),Object(c["F"])(i,{style:e})},e.prototype.renderDiagramLayer=function(t,e){var i={id:this.element.id+"_diagramLayer_div",style:"width:"+t.width+"px; height:"+t.height+"px;"+e};if(this.diagramLayerDiv=Object(c["b"])("div",i),"SVG"===this.mode){var n=this.createSvg(this.element.id+"_diagramLayer_svg",t.width,t.height);n.setAttribute("style"," pointer-events: none; "),n.setAttribute("class","e-diagram-layer");var o=Object(c["d"])("g",{id:this.element.id+"_diagramLayer"}),r=Object(c["d"])("g",{});this.diagramLayer=o,o.setAttribute("style","pointer-events: all;"),r.appendChild(o),n.appendChild(r),this.diagramLayerDiv.appendChild(n)}else this.diagramLayer=h.createCanvas(this.element.id+"_diagram",t.width,t.height),this.diagramLayer.setAttribute("style","position:absolute;left:0px;top:0px;"),this.diagramLayerDiv.appendChild(this.diagramLayer);this.diagramCanvas.appendChild(this.diagramLayerDiv)},e.prototype.initLayers=function(){var t="position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;",e=document.getElementById(this.element.id),i=e.getBoundingClientRect(),n=Object(c["u"])();this.scroller.scrollerWidth=n,this.scroller.setViewPortSize(i.width,i.height),this.renderRulers();var o="measureElement";if(window[o]){window[o]=null;var r=document.getElementById("measureElement");r.remove()}Object(c["c"])(),this.renderBackgroundLayer(i,t),this.renderGridLayer(i,t),this.renderDiagramLayer(i,t),this.renderHTMLLayer(i,t),this.renderPortsExpandLayer(i,t),this.renderNativeLayer(i,t),this.renderAdornerLayer(i,t)},e.prototype.renderAdornerLayer=function(t,e){var i=Object(c["b"])("div",{id:this.element.id+"_diagramAdornerLayer",style:"width:"+t.width+"px;height:"+t.height+"px;"+e}),n=this.createSvg(this.element.id+"_diagramAdorner_svg",t.width,t.height);n.setAttribute("class","e-adorner-layer"),n.setAttribute("style","pointer-events:none;"),this.adornerLayer=Object(c["d"])("g",{id:this.element.id+"_diagramAdorner"}),this.adornerLayer.setAttribute("style"," pointer-events: all; "),n.appendChild(this.adornerLayer),i.appendChild(n),this.diagramCanvas.appendChild(i);var o=Object(c["d"])("g",{id:this.element.id+"_SelectorElement"});this.adornerLayer.appendChild(o),Object(c["F"])(n,{style:"pointer-events:none;"})},e.prototype.renderPortsExpandLayer=function(t,e){var i=this.createSvg(this.element.id+"_diagramPorts_svg",t.width,t.height);i.setAttribute("class","e-ports-expand-layer");var n=Object(c["d"])("g",{id:this.element.id+"_diagramPorts",class:"e-ports-layer",style:"pointer-events: all;"});i.appendChild(n);var o=Object(c["d"])("g",{id:this.element.id+"_diagramExpander",class:"e-expand-layer",style:"pointer-events: all;"});i.appendChild(o),this.diagramCanvas.appendChild(i),Object(c["F"])(i,{style:e})},e.prototype.renderHTMLLayer=function(t,e){this.htmlLayer=Object(c["b"])("div",{id:this.element.id+"_htmlLayer",style:"width:"+t.width+"px; height:"+t.height+"px;position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;",class:"e-html-layer"});var i=Object(c["b"])("div",{id:this.element.id+"_htmlLayer_div",style:"position:absolute;top:0px;left:0px;pointer-events:all;"});this.htmlLayer.appendChild(i),this.diagramCanvas.appendChild(this.htmlLayer)},e.prototype.renderNativeLayer=function(t,e){var i=this.createSvg(this.element.id+"_nativeLayer_svg",t.width,t.height),n=Object(c["d"])("g",{id:this.element.id+"_nativeLayer",style:"pointer-events:all;"});i.appendChild(n),this.diagramLayerDiv.appendChild(i),Object(c["F"])(i,{class:"e-native-layer",style:e})},e.prototype.createSvg=function(t,e,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return Object(c["F"])(n,{id:t,width:e,height:i}),n},e.prototype.initObjects=function(t){this.isLoading||this.initData(),this.initLayerObjects(),this.updateBridging(t)},e.prototype.initLayerObjects=function(){for(var t=this.layers.length>1,e=[],i={},n={},o=[],r=0,a=this.nodes;r<a.length;r++){var c=a[r];c.id=c.id||Object(s["i"])(),this.addToLayer(c,t),i[c.id]=c}for(var h=0,d=this.connectors;h<d.length;h++){c=d[h];c.id=c.id||Object(s["i"])(),this.addToLayer(c,t),i[c.id]=c}for(var l=0,p=this.layers;l<p.length;l++){for(var u=p[l],g=0,f=u.objects;g<f.length;g++){c=f[g];if(i[c])if(i[c]instanceof z["b"]){var m=i[c];if(m.sourceID&&m.targetID){var y=i[m.sourceID],v=i[m.targetID];y&&y.wrapper&&v&&v.wrapper?this.initConnectors(i[c],u):e.push(i[c])}else this.initConnectors(i[c],u)}else i[c].children?o.push(c):i[c].shape instanceof A["g"]&&i[c].shape.activity.subProcess.processes&&i[c].shape.activity.subProcess.processes.length>0?n[i[c].id]=c:this.initNodes(i[c],u)}if(this.bpmnModule)for(var b=0,w=this.bpmnModule.textAnnotationConnectors;b<w.length;b++){c=w[b];this.initConnectors(c,u,!1)}}for(var O=0,x=Object.keys(n);O<x.length;O++){c=x[O];this.initObject(i[c]),this.bpmnModule.updateDocks(i[c],this)}for(var j=0,S=o;j<S.length;j++){c=S[j],u=this.commandHandler.getObjectLayer(c);this.initNodes(i[c],u)}for(var C=0,P=e;C<P.length;C++){m=P[C],u=this.commandHandler.getObjectLayer(m.id);this.initConnectors(m,u)}},e.prototype.addToLayer=function(t,e){var i;e&&(i=this.commandHandler.getObjectLayer(t.id)),e&&i||-1===this.activeLayer.objects.indexOf(t.id)&&this.activeLayer.objects.push(t.id),this.setZIndex(i||this.activeLayer,t)},e.prototype.updateLayer=function(t){for(var e=0,i=Object.keys(t.layers);e<i.length;e++){for(var n=i[e],o=this.layers[n].objects,r=0,a=o;r<a.length;r++){var s=a[r],c=this.nameTable[s];void 0!==t.layers[n].visible?this.updateElementVisibility(c.wrapper,c,t.layers[n].visible):!0===t.layers[n].lock&&this.unSelect(c)}void 0!==t.layers[n].lock&&(this.layers[n].lock=t.layers[n].lock)}"SVG"!==this.mode&&this.refreshDiagramLayer()},e.prototype.updateScrollSettings=function(t){var e=-this.scroller.horizontalOffset+t.scrollSettings.horizontalOffset||0,i=this.scroller.verticalOffset-t.scrollSettings.verticalOffset||0,o={VerticalOffset:this.scrollSettings.verticalOffset,HorizontalOffset:this.scrollSettings.horizontalOffset,ViewportHeight:this.scrollSettings.viewPortHeight,ViewportWidth:this.scrollSettings.viewPortWidth,CurrentZoom:this.scroller.currentZoom};0===e&&0===i||this.pan(e,i);var r={VerticalOffset:this.scrollSettings.verticalOffset,HorizontalOffset:this.scrollSettings.horizontalOffset,ViewportHeight:this.scrollSettings.viewPortHeight,ViewportWidth:this.scrollSettings.viewPortWidth,CurrentZoom:this.scroller.currentZoom},a={oldValue:o,newValue:r,source:this};Object(n["D"])()&&(a={oldValue:o,newValue:r,source:Object(d["h"])(this)}),this.triggerEvent(y["e"].scrollChange,a),"Canvas"===this.mode&&this.constraints&y["d"].Virtualization&&this.refreshDiagramLayer()},e.prototype.initData=function(){var t=this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource,e="adaptorName";if(this.dataBindingModule&&!(this.realActions&y["n"].PreventDataInit))if(t&&this.dataSourceSettings.connectionDataSource.dataManager){var i=this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource;this.nodes=this.generateData(i,!0),this.connectors=this.generateData(this.dataSourceSettings.connectionDataSource.dataManager,!1)}else t&&t.dataSource&&(t.dataSource.url||"BlazorAdaptor"===t[e]&&!t.dataSource.url)?this.dataBindingModule.initSource(this.dataSourceSettings,this):this.dataBindingModule.initData(this.dataSourceSettings,this)},e.prototype.generateData=function(t,e){var i,n=[];for(i=0;i<t.length;i++){var o=t[i],r=e?this.makeData(o,!0):this.makeData(o,!1);!r||!r.id||Object(d["m"])(n,r.id)&&Object(d["m"])(n,r.id)||n.push(r)}return n},e.prototype.makeData=function(t,e){var i,n=e?this.dataSourceSettings:this.dataSourceSettings.connectionDataSource,o={};if(o.id=t[n.id]?t[n.id]:Object(s["i"])(),n.sourceID&&(o.sourceID=t[n.sourceID]),n.targetID&&(o.targetID=t[n.targetID]),t[n.sourcePointX]&&t[n.sourcePointY]&&(o.sourcePoint={x:Number(t[n.sourcePointX]),y:Number(t[n.sourcePointY])}),t[n.targetPointX]&&t[n.targetPointY]&&(o.targetPoint={x:Number(t[n.targetPointX]),y:Number(t[n.targetPointY])}),n.crudAction.customFields&&n.crudAction.customFields.length>0)for(i=0;i<n.crudAction.customFields.length;i++)o[n.crudAction.customFields[i]]=t[n.crudAction.customFields[i]];return o},e.prototype.initNodes=function(t,e){this.preventUpdate=!0,this.initObject(t,e),this.preventUpdate=!1},e.prototype.initConnectors=function(t,e,i){this.preventUpdate=!0,this.initObject(t,e,i),this.updateEdges(t),this.preventUpdate=!1},e.prototype.setZIndex=function(t,e){var i=t;if(-1===e.zIndex){while(i.zIndexTable[i.objectZIndex+1])t.objectZIndex++;e.zIndex=++i.objectZIndex}else{var n=e.zIndex;if(i.zIndexTable[n])for(var o=Object.keys(i.zIndexTable).length,r=0;r<o;r++){if(r===n){for(var a=o;a>n;a--)i.zIndexTable[a]=i.zIndexTable[a-1],this.nameTable[i.zIndexTable[a]]&&(this.nameTable[i.zIndexTable[a]].zIndex=a);i.zIndexTable[r]=e.id}0}}},e.prototype.initializeDiagramLayers=function(){this.layers;for(var t=0;t<this.layers.length;t++)if(-1!==this.layers[t].zIndex){var e=this.layers[t];this.layers[t]=this.layers[this.layers[t].zIndex],this.layers[e.zIndex]=e}for(var i=0,n=this.layers;i<n.length;i++){var o=n[i];o.zIndex=-1!==o.zIndex?o.zIndex:this.layers.indexOf(o),this.layerZIndexTable[o.zIndex]=o.id}for(t=0;t<this.layers.length;t++)for(var r=t+1;r<this.layers.length;r++)if(this.layers[t].zIndex>this.layers[r].zIndex){e=this.layers[t];this.layers[t]=this.layers[r],this.layers[r]=e}if(0===this.layers.length){var a={id:"default_layer",visible:!0,lock:!1,objects:[],zIndex:0,objectZIndex:-1,zIndexTable:{}};this.commandHandler.addLayer(a)}this.setActiveLayer(this.layers[this.layers.length-1].id)},e.prototype.resetTool=function(){this.eventHandler.resetTool()},e.prototype.initObjectExtend=function(t,e,i){if(i){var n=this.commandHandler.checkBoundaryConstraints(void 0,void 0,t.wrapper.bounds);if(e.zIndexTable[t.zIndex]=t.id,!n){for(var o=t instanceof A["q"]?this.nodes:this.connectors,r=0;r<=o.length;r++)o[r]&&t.id===o[r].id&&o.splice(r,1);delete e.zIndexTable[t.zIndex]}}},e.prototype.initObject=function(t,e,i,n){if(void 0===i&&(i=!0),void 0!==t){if(i&&(e||(this.addToLayer(t,!1),e=this.activeLayer),(t instanceof A["q"]||t instanceof z["b"])&&this.setZIndex(e,t)),t instanceof A["q"]){if(i){if("helper"!==t.id){var r=Object(s["f"])(this.getNodeDefaults);if(r){var a=r(t,this);a&&a!==t&&Object(s["d"])(a,t)}}this.initNode(t,this.element.id)}}else if(t instanceof z["b"]){r=Object(s["f"])(this.getConnectorDefaults);if(r){a=r(t,this);a&&a!==t&&Object(s["d"])(a,t),t.segments.length&&t.type!==t.segments[0].type&&(t.segments=[])}var c=this.nameTable[t.sourceID],h=this.nameTable[t.targetID],l=this.getConnectedPort(c,t),p=this.getConnectedPort(h,t),u=this.findInOutConnectPorts(c,!1),g=this.findInOutConnectPorts(h,!0);if((void 0!==c&&Object(w["q"])(c)||""!==t.sourcePortID&&Object(w["w"])(u))&&(t.sourceWrapper=this.getEndNodeWrapper(c,t,!0),t.sourcePortID&&(!l||!l.constraints||l.constraints&y["l"].None||(t.sourcePortWrapper=this.getWrapper(c.wrapper,t.sourcePortID)))),(void 0!==h&&Object(w["n"])(h)||""!==t.targetPortID&&Object(w["v"])(g))&&(t.targetWrapper=this.getEndNodeWrapper(h,t,!1),t.targetPortID&&(!p||!p.constraints||p.constraints&y["l"].None||(t.targetPortWrapper=this.getWrapper(h.wrapper,t.targetPortID)))),!i){var f=t.getConnectorPoints(t.type);Object(d["R"])(t,f)}i&&t.init(this);for(var m=0;m<t.wrapper.children.length;m++)this.pathTable[t.wrapper.children[m].data]&&(t.wrapper.children[m].absoluteBounds=this.pathTable[t.wrapper.children[m].data].absoluteBounds);t.wrapper.measure(new o["a"](void 0,void 0)),t.wrapper.arrange(t.wrapper.desiredSize),t instanceof z["b"]&&"Bezier"===t.type&&this.updateConnectorAnnotation(t);for(var v=0;v<t.wrapper.children.length;v++)this.pathTable[t.wrapper.children[v].data]={},this.pathTable[t.wrapper.children[v].data].absoluteBounds=t.wrapper.children[v].absoluteBounds}if(t instanceof A["q"]&&t.children&&t.container)for(var b=0;b<t.children.length;b++)this.nameTable[t.children[b]].offsetX=this.nameTable[t.children[b]].wrapper.offsetX,this.nameTable[t.children[b]].offsetY=this.nameTable[t.children[b]].wrapper.offsetY;if(this.bpmnModule&&t instanceof A["q"]&&"Bpmn"===t.shape.type&&t.shape.annotations.length>0&&this.bpmnModule.updateQuad(t,this),this.initObjectExtend(t,e,i),this.nameTable[t.id]=t,t instanceof A["q"]&&t.children){n||t.container||this.updateGroupOffset(t,!0),this.groupTable[t.id]=t.children;for(b=0;b<t.children.length;b++){var O=this.nameTable[t.children[b]];O&&(O.parentId=t.id)}this.isLoading||!t.rotateAngle||t.container||this.commandHandler.rotateObjects(t,[t],t.rotateAngle,{x:t.offsetX,y:t.offsetY},!1)}this.updateQuad(t)}!1===t.visible&&this.updateElementVisibility(t.wrapper,t,!1)},e.prototype.getConnectedPort=function(t,e){if(t&&t.ports)for(var i=0,n=t.ports;i<n.length;i++){var o=n[i];if(o.id===e.sourcePortID)return o;if(o.id===e.targetPortID)return o}return null},e.prototype.scaleObject=function(t,e,i){var n=i?t.wrapper.actualSize.width:t.wrapper.actualSize.height,o=i?1+(e-n)/n:1,r=i?1:1+(e-n)/n;t.offsetX,t.offsetY;this.realActions|=y["n"].PreventDrag,this.scale(t,o,r,{x:.5,y:.5}),this.realActions&=~y["n"].PreventDrag},e.prototype.updateDefaultLayoutIcons=function(t){"OrganizationalChart"!==this.layout.type&&"HierarchicalTree"!==this.layout.type&&"ComplexHierarchicalTree"!==this.layout.type||(this.updateDefaultLayoutIcon(t,t.expandIcon),this.updateDefaultLayoutIcon(t,t.collapseIcon))},e.prototype.updateDefaultLayoutIcon=function(t,e){if("None"!==e.shape&&"Auto"===e.horizontalAlignment&&"Auto"===e.verticalAlignment&&.5===e.offset.x&&1===e.offset.y){var i=this.getWrapper(t.wrapper,"icon_content"),n=void 0,r=void 0;"TopToBottom"===this.layout.orientation||"BottomToTop"===this.layout.orientation?(n=.5,r="TopToBottom"===this.layout.orientation?1:0):"RightToLeft"!==this.layout.orientation&&"LeftToRight"!==this.layout.orientation||(n="LeftToRight"===this.layout.orientation?1:0,r=.5),i.setOffsetWithRespectToBounds(n,r,"Fraction"),i.horizontalAlignment="Center",i.verticalAlignment="Center",t.wrapper.measure(new o["a"](t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize)}},e.prototype.updateGroupOffset=function(t,e){if(t.children&&t.children.length>0&&!t.container||t.processId){var i=this.nameTable[t.id];if(!(this.realActions&y["n"].PreventScale)&&!(this.realActions&y["n"].PreventDrag)){if(!i.offsetX||this.diagramActions&y["c"].ToolAction||this.diagramActions&y["c"].PublicMethod)i.offsetX=t.wrapper.offsetX;else{this.realActions|=y["n"].PreventScale;var n=i.offsetX-t.wrapper.offsetX;i.offsetX=t.wrapper.offsetX;var o=i.offsetY-t.wrapper.offsetY;i.offsetY=t.wrapper.offsetY,"None"===t.flip&&this.drag(i,n,o),this.realActions&=~y["n"].PreventScale}if(!i.offsetY||this.diagramActions&y["c"].ToolAction)i.offsetY=t.wrapper.offsetY;else{this.realActions|=y["n"].PreventScale;o=i.offsetY-t.wrapper.offsetY;i.offsetY=t.wrapper.offsetY,"None"===t.flip&&this.drag(i,0,o),this.realActions&=~y["n"].PreventScale}this.diagramActions&&(i.width=t.wrapper.actualSize.width,i.height=t.wrapper.actualSize.height)}}e&&t.children&&t.children.length>0&&(void 0!==this.nameTable[t.id].width?this.scaleObject(t,this.nameTable[t.id].width,!0):this.nameTable[t.id].width=t.wrapper.actualSize.width,void 0!==this.nameTable[t.id].height?this.scaleObject(t,this.nameTable[t.id].height,!1):this.nameTable[t.id].height=t.wrapper.actualSize.height)},e.prototype.initNode=function(t,e,i){var n,r,a=t.initContainer(),c=new Y["a"];if(a.children||(a.children=[]),t.children){if(a.measureChildren=!1,t.container&&"Grid"===t.container.type)for(var h=0;h<t.children.length;h++){var l=new Y["a"],p=this.nameTable[t.children[h]];l.children=[],l.children.push(p.wrapper),p&&a.addObject(p.wrapper,p.rowIndex,p.columnIndex,p.rowSpan,p.columnSpan)}else for(h=0;h<t.children.length;h++)if(this.nameTable[t.children[h]]){p=this.nameTable[t.children[h]];this.updateStackProperty(t,p,h),a.children.push(p.wrapper),a.elementActions=a.elementActions|y["g"].ElementIsGroup,p.wrapper.flip="None"===p.wrapper.flip?t.wrapper.flip:p.wrapper.flip}c.id=t.id+"group_container",c.style.fill="none",c.style.strokeColor="none",c.horizontalAlignment="Stretch",c.verticalAlignment="Stretch",a.style=t.style,c.children=[],c.preventContainer=!0,t.container&&(c.relativeMode="Object"),t.container&&"Grid"===t.container.type||a.children.push(c)}else{var u=Object(s["f"])(this.setNodeTemplate);u&&"helper"!==t.id&&(n=u(t,this)),n||(n=t.init(this)),a.children.push(n)}r=Object(s["f"])(this.getDescription),(t.children?a:n).description=r||(t.annotations.length?t.annotations[0].content:t.id);var g=t.children?c:a;t.initAnnotations(this.getDescription,g,this.element.id,!!Object(w["E"])(this)),t.initPorts(this.getDescription,g),t.initIcons(this.getDescription,this.layout,g,e),"SwimLane"===t.shape.type&&t.wrapper&&t.wrapper.children.length>0&&t.wrapper.children[0]instanceof V["b"]?(Object(Ht["r"])(t),Object(Ht["c"])(this,t),this.updateDiagramElementQuad()):(a.measure(new o["a"](t.width,t.height),t.id,this.onLoadImageSize.bind(this)),a instanceof V["b"]?a.arrange(a.desiredSize,!0):a.arrange(a.desiredSize)),"None"!==t.wrapper.flip&&t.wrapper.elementActions&y["g"].ElementIsGroup&&Object(d["a"])(t.wrapper,t.wrapper.offsetX,t.wrapper.offsetY,this,t.wrapper.flip),t instanceof A["q"]&&t.container&&(t.width<a.outerBounds.width||t.height<a.outerBounds.height)&&a.bounds.x<=a.outerBounds.x&&a.bounds.y<=a.outerBounds.y&&(t.width=a.width=a.outerBounds.width,t.height=a.height=a.outerBounds.height,a.measure(new o["a"](t.width,t.height)),a.arrange(a.desiredSize)),t.container&&"Grid"===t.container.type&&t.children&&t.children.length>0&&this.updateChildPosition(t)},e.prototype.updateDiagramElementQuad=function(){for(var t=0;t<this.nodes.length;t++)this.updateQuad(this.nodes[t])},e.prototype.onLoadImageSize=function(t,e){var i=this.getObject(t),n=document.getElementById(t+"sf-imageNode");n&&n.parentNode.removeChild(n),this.nodePropertyChange(i,{},{width:e.width,height:e.height});var o={element:Object(s["b"])(i),size:e};this.triggerEvent(y["e"].onImageLoad,o)},e.prototype.updateChildPosition=function(t){for(var e=0;e<t.children.length;e++){var i=this.getObject(t.children[e]);i.offsetX=i.wrapper.offsetX,i.offsetY=i.wrapper.offsetY,i.children&&i.children.length>0&&this.updateChildPosition(i)}},e.prototype.canExecute=function(){return!0},e.prototype.updateStackProperty=function(t,e,i){t.container&&"Stack"===t.container.type&&(e.width||(e.wrapper.horizontalAlignment="Stretch",e.horizontalAlignment="Stretch"),e.height||(e.verticalAlignment="Stretch",e.wrapper.verticalAlignment="Stretch"),i&&"UmlClassifier"===t.shape.type&&(e.umlIndex=i))},e.prototype.initViews=function(){this.isLoading||(this.views.push(this.element.id),this.views[this.element.id]=this)},e.prototype.initCommands=function(){var t=this.commandManager.commands,e={copy:{execute:this.copyCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:y["i"].C,keyModifiers:y["h"].Control}},paste:{execute:this.pasteCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:y["i"].V,keyModifiers:y["h"].Control}},cut:{execute:this.cutCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:y["i"].X,keyModifiers:y["h"].Control}},delete:{execute:this.removeCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:y["i"].Delete}},selectAll:{execute:this.selectAll.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:y["i"].A,keyModifiers:y["h"].Control}},undo:{execute:this.undo.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:y["i"].Z,keyModifiers:y["h"].Control}},redo:{execute:this.redo.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:y["i"].Y,keyModifiers:y["h"].Control}},nudgeUp:{execute:this.nudgeCommand.bind(this,"Up"),canExecute:this.canExecute.bind(this),gesture:{key:y["i"].Up},parameter:"up"},nudgeRight:{execute:this.nudgeCommand.bind(this,"Right"),canExecute:this.canExecute.bind(this),gesture:{key:y["i"].Right},parameter:"right"},nudgeDown:{execute:this.nudgeCommand.bind(this,"Down"),canExecute:this.canExecute.bind(this),gesture:{key:y["i"].Down},parameter:"down"},nudgeLeft:{execute:this.nudgeCommand.bind(this,"Left"),canExecute:this.canExecute.bind(this),gesture:{key:y["i"].Left},parameter:"left"},startEdit:{execute:this.startEditCommad.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:y["i"].F2}},endEdit:{execute:this.endEditCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:y["i"].Escape}},focusToNextItem:{canExecute:this.canExecute.bind(this),gesture:{key:y["i"].Tab}},focusToPreviousItem:{canExecute:this.canExecute.bind(this),gesture:{key:y["i"].Tab,keyModifiers:y["h"].Control}},selectFocusedItem:{execute:this.startEditCommad.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:y["i"].Enter}}};this.initCommandManager(t,e)},e.prototype.overrideCommands=function(t,e){for(var i,n=0,o=Object.keys(e);n<o.length;n++){var r=o[n];if(i=e[r],t.gesture.key===i.gesture.key&&t.gesture.keyModifiers===i.gesture.keyModifiers){delete e[r];break}}},e.prototype.initCommandManager=function(t,e){var i=0;if(t)for(i=0;i<t.length;i++)e[t[i].name]&&t[i]?(t[i].canExecute&&(e[t[i].name].canExecute=t[i].canExecute),t[i].execute&&(e[t[i].name].execute=t[i].execute),(t[i].gesture.key||t[i].gesture.keyModifiers)&&(e[t[i].name].gesture=t[i].gesture),""!==t[i].parameter&&(e[t[i].name].parameter=t[i].parameter)):(this.overrideCommands(t[i],e),e[t[i].name]={execute:t[i].execute,canExecute:t[i].canExecute,gesture:t[i].gesture,parameter:t[i].parameter});this.commands=e},e.prototype.updateNodeEdges=function(t){for(var e=0,i=t.inEdges;e<i.length;e++){var n=i[e];this.nameTable[n]&&(this.nameTable[n].targetID="")}for(var o=0,r=t.outEdges;o<r.length;o++){n=r[o];this.nameTable[n]&&(this.nameTable[n].sourceID="")}t.inEdges=[],t.outEdges=[]},e.prototype.updateIconVisibility=function(t,e){for(var i=0;i<t.wrapper.children.length;i++){var n=t.wrapper.children[i];if(n.id){var o=n.id.split(t.id)[1];o&&o.match("^_icon")&&(n.visible=e,this.updateDiagramContainerVisibility(n,e))}}},e.prototype.updateEdges=function(t){if(void 0!==t.sourceID&&""!==t.sourceID){var e=this.nameTable[t.sourceID];e&&e.outEdges&&0===e.outEdges.length&&(e.outEdges=[]),e&&e.outEdges&&-1===e.outEdges.indexOf(t.id)&&e.outEdges.push(t.id)}if(void 0!==t.targetID&&""!==t.targetID){e=this.nameTable[t.targetID];if(e&&e.inEdges&&0===e.inEdges.length&&(e.inEdges=[]),e&&e.inEdges&&-1===e.inEdges.indexOf(t.id)&&e.inEdges.push(t.id),e&&e.visible&&e.outEdges){var i=0!==e.outEdges.length;this.updateIconVisibility(e,i)}}},e.prototype.refreshDiagram=function(){this.initLayerObjects(),this.doLayout(),this.updateBridging(),this.scroller.setSize()},e.prototype.updateCanupdateStyle=function(t,e){for(var i=0;i<t.length;i++)t[i].children&&this.updateCanupdateStyle(t[i].children,e),t[i].canApplyStyle=e},e.prototype.getZindexPosition=function(t,e){var i,n=[],o=void 0;if(n=n.concat(this.nodes),n=n.concat(this.connectors),-1!==t.zIndex)for(var r=0;r<n.length;r++)n[r].zIndex>t.zIndex&&("HTML"!==t.shape.type&&"Native"!==t.shape.type||(i="HTML"===t.shape.type?"html":"native"),o=Object(c["o"])(e,n[r].id,i));return o},e.prototype.updateDiagramObject=function(t,e,i){for(var n,o=0,r=this.views;o<r.length;o++){var a=r[o];if(n=this.views[a],this.diagramActions&&"SVG"===n.mode){var s=this.layers.length>1,h=void 0;if(s&&(h=this.commandHandler.getObjectLayer(t.id)),void 0===h||h&&h.visible||i){var d=Object(c["r"])(this.element.id),l=document.getElementById(n.element.id+"_diagramLayer");this.diagramActions&y["c"].Interactions&&this.updateCanupdateStyle(t.wrapper.children,!0),this.diagramRenderer.updateNode(t.wrapper,l,d,void 0,e?void 0:this.getZindexPosition(t,n.element.id)),this.updateCanupdateStyle(t.wrapper.children,!0)}}}},e.prototype.updateGridContainer=function(t){for(var e,i=Object(c["r"])(this.element.id),n=0,o=this.views;n<o.length;n++){var r=o[n];if(e=this.views[r],"SVG"===e.mode&&this.diagramActions){var a=document.getElementById(e.element.id+"_diagramLayer");this.diagramRenderer.updateNode(t,a,i,void 0)}else this.refreshCanvasDiagramLayer(e)}},e.prototype.getObjectsOfLayer=function(t){for(var e=[],i=0,n=t;i<n.length;i++){var o=n[i];this.nameTable[o]&&e.push(this.nameTable[o])}return e},e.prototype.refreshDiagramLayer=function(){for(var t,e=0,i=this.views;e<i.length;e++){var n=i[e];switch(t=this.views[n],t.mode){case"SVG":this.refreshSvgDiagramLayer(t);break;case"Canvas":this.refreshCanvasLayers(t);break}}},e.prototype.refreshCanvasLayers=function(t){if(t)this.refreshCanvasDiagramLayer(t);else for(var e=0,i=this.views;e<i.length;e++){var n=i[e],o=this.views[n];this.refreshCanvasDiagramLayer(o)}},e.prototype.renderBasicElement=function(t){for(var e=Object(c["r"])(t.element.id),i=0;i<this.basicElements.length;i++){var n=this.basicElements[i];n instanceof f["a"]&&(n.prevRotateAngle=0),n.measure(new o["a"](n.width,n.height)),n.arrange(n.desiredSize),t.diagramRenderer.renderElement(n,t.diagramLayer,e)}},e.prototype.refreshElements=function(t){if(!this.isDestroyed){this.clearCanvas(t),t instanceof e&&(t.diagramLayer.getContext("2d").setTransform(t.scroller.currentZoom,0,0,t.scroller.currentZoom,0,0),t.diagramLayer.getContext("2d").scale(1.5,1.5));var i=Object(c["r"])(t.element.id);this.spatialSearch.getPageBounds();this.renderDiagramElements(t.diagramLayer,t.diagramRenderer,i);for(var n=0;n<this.basicElements.length;n++){var r=this.basicElements[n];r.measure(new o["a"](r.width,r.height)),r.arrange(r.desiredSize),t.diagramRenderer.renderElement(r,t.diagramLayer,i)}t instanceof e&&(t.diagramLayer.style.transform="scale("+2/3+")",t.diagramLayer.style.transformOrigin="0 0"),this.renderTimer=null}},e.prototype.refreshCanvasDiagramLayer=function(t){var e=this;"SVG"===t.mode||this.isDestroyed||(this.basicElements.length>0&&this.renderBasicElement(t),!this.diagramActions||0===(this.diagramActions&y["c"].Render)||y["c"].ToolAction&this.diagramActions||Object(w["E"])(this)||1!==this.scroller.currentZoom?this.refreshElements(t):this.renderTimer||(this.renderTimer=setTimeout((function(){e.refreshElements(t)}),40)))},e.prototype.updatePortVisibility=function(t,e,i){var n,o=!this.drawingObject||!this.drawingObject.shape;if(t instanceof A["q"]&&o&&Object(w["o"])(t)){for(var r=t.ports,a=!1,s=0;s<r.length;s++)n=this.getWrapper(t.wrapper,r[s].id),(e&y["m"].Hover||e&y["m"].Connect)&&Object(d["g"])(r[s],e)&&(n.visible=!i,a=!0);a&&this.updateDiagramObject(t)}},e.prototype.refreshSvgDiagramLayer=function(t){var e,i=document.getElementById(t.element.id+"_diagramLayer"),n=Object(c["r"])(t.element.id);if(Object(w["E"])(this))this.scroller.virtualizeElements();else{for(var r=0;r<this.basicElements.length;r++)e=this.basicElements[r],e.measure(new o["a"](e.width,e.height)),e.arrange(e.desiredSize,!(this.diagramActions&y["c"].Render)),this.diagramRenderer.renderElement(e,i,n);this.renderDiagramElements(i,this.diagramRenderer,n)}},e.prototype.removeVirtualObjects=function(t){if(this.deleteVirtualObject){for(var e=0;e<this.scroller.removeCollection.length;e++){var i=this.nameTable[this.scroller.removeCollection[e]];this.removeElements(i)}this.deleteVirtualObject=!1}clearInterval(t)},e.prototype.updateTextElementValue=function(t){for(var e=0;e<t.wrapper.children.length;e++){var i=t.wrapper.children[e];i instanceof g["a"]&&(i.canMeasure=!0,i.measure(new o["a"](t.width,t.height)),i.arrange(i.desiredSize))}},e.prototype.updateVirtualObjects=function(t,e,i){var n=document.getElementById(this.element.id+"_diagramLayer"),o=Object(c["r"])(this.element.id);if("SVG"===this.mode){for(var r=0;r<t.length;r++){var a=this.scroller.removeCollection.indexOf(t[r]);a>=0&&this.scroller.removeCollection.splice(a,1);var s=this.nameTable[t[r]];this.updateTextElementValue(s),this.diagramRenderer.renderElement(s.wrapper,n,o,void 0,void 0,void 0,void 0,s.zIndex)}for(var h=0;h<i.length;h++)this.scroller.removeCollection.push(i[h]);1!==this.scroller.currentZoom&&this.eventHandler.updateVirtualization()}else this.diagramActions&&this.refreshDiagramLayer()},e.prototype.renderDiagramElements=function(t,e,i,n,o,r){void 0===n&&(n=!0);var a=this.scroller.getPageBounds();a.x*=this.scroller.currentZoom,a.y*=this.scroller.currentZoom,a.width*=this.scroller.currentZoom,a.height*=this.scroller.currentZoom;for(var s=-this.scroller.horizontalOffset-a.x,c=-this.scroller.verticalOffset-a.y,h=0,d=Object.keys(this.layerZIndexTable);h<d.length;h++){var l=d[h],p=this.commandHandler.getLayer(this.layerZIndexTable[l]),u=void 0,g=void 0;"Canvas"===this.mode&&Object(w["E"])(this)&&!this.diagramActions&&this.scroller.virtualizeElements();for(var f="Canvas"===this.mode&&Object(w["E"])(this)&&this.scroller.oldCollectionObjects.length>0?this.scroller.oldCollectionObjects:void 0,m=0,v=Object.keys(f||p.zIndexTable);m<v.length;m++){var b=v[m],O=f?this.nameTable[f[b]]:this.nameTable[p.zIndexTable[b]];if(O&&!O.parentId&&p.visible&&!O.processId){var x={tx:this.scroller.transform.tx,ty:this.scroller.transform.ty,scale:this.scroller.transform.scale};if(Object(w["E"])(this)){if(this.scroller.currentZoom<1){if(a.x<0||this.scroller.horizontalOffset<0){var j=this.scroller.verticalOffset<0?this.scroller.verticalOffset:0;u=(s>0?s:0)+"px",g=(this.realActions&y["n"].vScrollbarMoved?0:-j)+"px"}else u="0px",g="0px";this.realActions&y["n"].hScrollbarMoved&&(this.realActions=this.realActions&~y["n"].hScrollbarMoved),this.realActions&y["n"].vScrollbarMoved&&(this.realActions=this.realActions&~y["n"].vScrollbarMoved)}else u=(a.x<0?s:-this.scroller.horizontalOffset)+"px",g=(a.y<0?c:-this.scroller.verticalOffset)+"px";this.diagramLayer.style.left=u,this.diagramLayer.style.top=g,x.tx=this.scroller.horizontalOffset/x.scale,x.ty=this.scroller.verticalOffset/x.scale}var S=!0;o&&(S=!1),this.updateTextElementValue(O),e.renderElement(O.wrapper,t,i,!e.isSvgMode&&n?x:void 0,void 0,void 0,S&&(!this.diagramActions||r))}}}},e.prototype.updateBridging=function(t){if(this.bridgingModule)for(var e=0;e<this.connectors.length;e++){var i=this.connectors[e];this.bridgingModule.updateBridging(i,this);var n=this.connectors[e].wrapper;if(n){var r=n.children[0],a=r.data;i.getSegmentElement(i,r,"ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type?this.layout.orientation:void 0),r.data!==a&&(n.measure(new o["a"]),n.arrange(n.desiredSize),"SVG"!==this.mode||t||this.updateDiagramObject(i))}}},e.prototype.setCursor=function(t){this.diagramRenderer.setCursor(this.diagramCanvas,t)},e.prototype.clearCanvas=function(t){var e,i;if(e=t.contentWidth||t.diagramLayer.width/this.scroller.currentZoom,i=t.contentHeight||t.diagramLayer.height/this.scroller.currentZoom,"SVG"!==t.mode){var n=h.getContext(t.diagramLayer);n.clearRect(0,0,e,i)}},e.prototype.updateScrollOffset=function(){this.scroller.setScrollOffset(this.diagramCanvas.scrollLeft,this.diagramCanvas.scrollTop),Object(N["g"])(this),Object(w["E"])(this)&&this.scroller.virtualizeElements()},e.prototype.setOffset=function(t,e){var i=document.getElementById(this.element.id+"content");i&&(i.scrollLeft=t,i.scrollTop=e)},e.prototype.setSize=function(t,e){if(this.diagramLayer&&!this.preventUpdate){var i=Object(N["b"])(this);t-=i.width,e-=i.height;var n=this.spatialSearch.getPageBounds();n.x*=this.scroller.currentZoom,n.y*=this.scroller.currentZoom,n.width*=this.scroller.currentZoom,n.height*=this.scroller.currentZoom;var o="SVG"===this.mode?1:1.5,r="SVG"===this.mode?Object(c["n"])(this.element.id):this.diagramLayer,a="Canvas"===this.mode&&this.constraints&y["d"].Virtualization?this.scroller.viewPortWidth:t,s="Canvas"===this.mode&&this.constraints&y["d"].Virtualization?this.scroller.viewPortHeight:e;r.setAttribute("width",(o*a).toString()),r.setAttribute("height",(o*s).toString());var h={width:t.toString(),height:e.toString()};this.diagramLayerDiv.style.width=t+"px",this.diagramLayerDiv.style.height=e+"px",Object(c["F"])(Object(c["s"])(this.element.id),h),Object(c["F"])(Object(c["t"])(this.element.id),h);var d=Object(c["g"])(this.element.id);Object(c["F"])(d,h),d.parentNode.style.width=t+"px",d.parentNode.style.height=e+"px";var l=Object(c["q"])(this.element.id);Object(c["F"])(l,h),this.diagramRenderer.updateGrid(this.snapSettings,l,this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),Object(c["F"])(Object(c["j"])(this.element.id),h),this.htmlLayer.style.width=t+"px",this.htmlLayer.style.height=e+"px","SVG"===this.mode||Object(w["E"])(this)||this.refreshDiagramLayer(),"SVG"===this.mode&&Object(w["E"])(this)&&this.scroller.virtualizeElements()}},e.prototype.transformLayers=function(){var t=this.spatialSearch.getPageBounds();t.x*=this.scroller.currentZoom,t.y*=this.scroller.currentZoom,t.width*=this.scroller.currentZoom,t.height*=this.scroller.currentZoom,this.diagramRenderer.updateGrid(this.snapSettings,Object(c["q"])(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),this.diagramRenderer.transformLayers(this.scroller.transform,"SVG"===this.mode),this.updateSelector(),this.renderPageBreaks(t)},e.prototype.removePageBreaks=function(){if(this.diagramLayer){var t=Object(c["i"])(this.element.id);if(t&&t.childNodes)for(var e=t.childNodes.length,i=0;i<e;i++)t.removeChild(t.childNodes[0])}},e.prototype.renderPageBreaks=function(t){this.removePageBreaks();var e=Object(c["i"])(this.element.id);if(e){var i=0;t=this.scroller.getPageBounds(!0);var n=(this.scroller.transform.tx+t.x)*this.scroller.currentZoom,o=(this.scroller.transform.ty+t.y)*this.scroller.currentZoom,r=t.height*this.scroller.currentZoom,a=t.width*this.scroller.currentZoom;O.renderSvgBackGroundImage(this.pageSettings.background,this.element,n,o,a,r);var s={id:e.id+"rect",x:n,y:o,height:r,width:a,angle:0,stroke:"",strokeWidth:1,fill:this.pageSettings.background.color,opacity:1,pivotX:0,pivotY:0,visible:!0,dashArray:"0"};if(this.diagramRenderer.drawRect(e,s),this.pageSettings.showPageBreaks){var h=this.scroller.getPageBreak(t);for(i=0;i<h.length;i++)this.diagramRenderer.drawLine(e,{class:"e-diagram-page-break",fill:"none",stroke:"#aaaaaa",strokeWidth:1,dashArray:"10 10",opacity:2,x:0,y:0,width:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,startPoint:{x:(h[i].x1+this.scroller.transform.tx)*this.scroller.currentZoom,y:(h[i].y1+this.scroller.transform.ty)*this.scroller.currentZoom},endPoint:{x:(h[i].x2+this.scroller.transform.tx)*this.scroller.currentZoom,y:(h[i].y2+this.scroller.transform.ty)*this.scroller.currentZoom},id:h[i].y1===h[i].y2?"HorizontalLines":"VerticalLines"})}}},e.prototype.validatePageSize=function(){var t=0;"Portrait"===this.pageSettings.orientation?this.pageSettings.width>this.pageSettings.height&&(t=this.pageSettings.height,this.pageSettings.height=this.pageSettings.width,this.pageSettings.width=t):this.pageSettings.height>this.pageSettings.width&&(t=this.pageSettings.width,this.pageSettings.width=this.pageSettings.height,this.pageSettings.height=t)},e.prototype.setOverview=function(t,e){if(t)t&&(this.views.push(t.id),this.views[t.id]=t,t.renderDocument(t),t.diagramRenderer.setLayers(),t.updateView(t),this.renderNodes(t));else{for(var i=0;i<this.views.length;i++)this.views[i]===e&&(t=this.views[e]);this.views[e]=void 0;var n=this.views.indexOf(e);this.views.splice(n,1)}},e.prototype.renderNodes=function(t){if(t){var e=new O(t.id,new l,!1),i=document.getElementById(t.element.id+"_diagramLayer"),n=Object(c["r"])(t.element.id);this.renderDiagramElements(i,t.diagramRenderer||e,n,void 0,void 0,!0)}},e.prototype.updateThumbConstraints=function(t,e,i){for(var n=t.length,o=0;o<n;o++){var r=t[o],a=!1,s=!1,c=e.thumbsConstraints;r instanceof A["q"]?(a="Bpmn"===r.shape.type&&"Activity"===r.shape.shape&&!1===r.shape.activity.subProcess.collapsed||"TextAnnotation"===r.shape.shape,s="Bpmn"===r.shape.type&&"TextAnnotation"===r.shape.shape,Object(w["z"])(r)&&c&y["r"].Rotate&&!a||(c&=~y["r"].Rotate),Object(w["y"])(r,"SouthEast")&&c&y["r"].ResizeSouthEast&&!s||(c&=~y["r"].ResizeSouthEast),Object(w["y"])(r,"NorthWest")&&c&y["r"].ResizeNorthWest&&!s||(c&=~y["r"].ResizeNorthWest),Object(w["y"])(r,"East")&&c&y["r"].ResizeEast&&!s||(c&=~y["r"].ResizeEast),Object(w["y"])(r,"West")&&c&y["r"].ResizeWest&&!s||(c&=~y["r"].ResizeWest),Object(w["y"])(r,"North")&&c&y["r"].ResizeNorth&&!s||(c&=~y["r"].ResizeNorth),Object(w["y"])(r,"South")&&c&y["r"].ResizeSouth&&!s||(c&=~y["r"].ResizeSouth),Object(w["y"])(r,"NorthEast")&&c&y["r"].ResizeNorthEast&&!s||(c&=~y["r"].ResizeNorthEast),Object(w["y"])(r,"SouthWest")&&c&y["r"].ResizeSouthWest&&!s||(c&=~y["r"].ResizeSouthWest)):r instanceof z["b"]?(i||(c|=y["r"].Default),Object(w["g"])(r)?c|=y["r"].ConnectorSource:c&=~y["r"].ConnectorSource,Object(w["h"])(r)?c|=y["r"].ConnectorTarget:c&=~y["r"].ConnectorTarget):(i||(c|=y["r"].Default),Object(w["y"])(r)||(c&=~(y["r"].ResizeSouthEast|y["r"].ResizeSouthWest|y["r"].ResizeSouth|y["r"].ResizeEast|y["r"].ResizeWest|y["r"].ResizeNorth|y["r"].ResizeNorthEast|y["r"].ResizeNorthWest)),Object(w["z"])(r)||(c&=~y["r"].Rotate)),e.thumbsConstraints=c}},e.prototype.renderSelector=function(t,e){var i=new o["a"],n=this.selectedItems,r=(n.constraints,this.diagramRenderer.rendererActions);if(this.diagramRenderer.rendererActions=this.currentSymbol?this.addConstraints(r,y["o"].DrawSelectorBorder):this.removeConstraints(r,y["o"].DrawSelectorBorder),this.clearSelectorLayer(),this.commandHandler.hasSelection()){if(1===n.nodes.length&&0===n.connectors.length&&(n.rotateAngle=n.nodes[0].rotateAngle,n.pivot=n.nodes[0].pivot),n.wrapper.measure(i),n.wrapper.arrange(n.wrapper.desiredSize),n.width=n.wrapper.actualSize.width,n.height=n.wrapper.actualSize.height,n.offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY,0!==n.rotateAngle){for(var a=0,s=n.nodes;a<s.length;a++){var h=s[a];h.offsetX=h.wrapper.offsetX,h.offsetY=h.wrapper.offsetY}for(var d=0,l=n.connectors;d<l.length;d++)l[d]}this.spatialSearch.getPageBounds();var p=void 0;if(p=Object(c["v"])(this.element.id),n.thumbsConstraints=y["r"].Default,n.annotation?this.updateThumbConstraints([n.annotation],n):(this.updateThumbConstraints(n.nodes,n),this.updateThumbConstraints(n.connectors,n,!0)),n.annotation)this.renderSelectorForAnnotation(n,p);else if(n.nodes.length+n.connectors.length===1){if(n.nodes[0]instanceof A["q"]){var u=n.nodes[0];Object(nt["c"])(this,u)&&(e||"UmlClassifier"===u.shape.type||u.parentId&&this.nameTable[u.parentId]&&"UmlClassifier"===this.nameTable[u.parentId].shape.type||((!u.container||"Canvas"!==u.container.type&&"Grid"!==u.container.type)&&(n.nodes[0].constraints&=~(y["k"].Rotate|y["k"].HideThumbs)),n.thumbsConstraints&=~y["r"].Rotate));var g=!!e||!!(u.constraints&y["k"].HideThumbs),f=!!("SwimLane"===u.shape.type||u.isLane||u.isPhase||e);this.diagramRenderer.renderResizeHandle(n.wrapper.children[0],p,n.thumbsConstraints,this.scroller.currentZoom,n.constraints,this.scroller.transform,void 0,Object(w["o"])(u),g,f)}else if(n.connectors[0]instanceof z["b"]&&Object(w["k"])(this.diagramRenderer.rendererActions)){var m=n.connectors[0];this.diagramRenderer.renderEndPointHandle(m,p,n.thumbsConstraints,n.constraints,this.scroller.transform,void 0!==m.sourceWrapper,void 0!==m.targetWrapper,!(!this.connectorEditingToolModule||!Object(w["f"])(m)))}}else this.diagramRenderer.renderResizeHandle(n.wrapper,p,n.thumbsConstraints,this.scroller.currentZoom,n.constraints,this.scroller.transform,void 0,Object(w["o"])(n));n.annotation||this.currentSymbol||this.diagramRenderer.renderUserHandler(n,p,this.scroller.transform)}},e.prototype.updateSelector=function(){var t=new o["a"],e=this.selectedItems,i=e.constraints;if(this.diagramActions&y["c"].ToolAction||1!==this.selectedItems.nodes.length||(this.selectedItems.rotateAngle=this.selectedItems.nodes[0].rotateAngle,this.selectedItems.wrapper.rotateAngle=this.selectedItems.nodes[0].rotateAngle),void 0!==this.selectedItems&&(this.clearSelectorLayer(),null!==e.wrapper&&e.wrapper.children&&e.wrapper.children.length)){if(e.wrapper.measure(t),e.wrapper.arrange(e.wrapper.desiredSize),0!==e.rotateAngle||e.rotateAngle!==e.wrapper.prevRotateAngle)for(var n=0,r=e.nodes;n<r.length;n++){var a=r[n];a.offsetX=a.wrapper.offsetX,a.offsetY=a.wrapper.offsetY}e.width=e.wrapper.actualSize.width,e.height=e.wrapper.actualSize.height,e.offsetX=e.wrapper.offsetX,e.offsetY=e.wrapper.offsetY;var s=void 0;s=Object(c["v"])(this.element.id);var h=this.eventHandler.canHideResizers();if(e.thumbsConstraints=y["r"].Default,e.annotation?this.updateThumbConstraints([e.annotation],e):(this.updateThumbConstraints(e.nodes,e),this.updateThumbConstraints(e.connectors,e,!0)),this.selectedItems.constraints&y["p"].UserHandle&&!e.annotation&&!this.currentSymbol&&this.diagramRenderer.renderUserHandler(e,s,this.scroller.transform),e.annotation)this.renderSelectorForAnnotation(e,s);else if(e.nodes.length+e.connectors.length===1){if(e.connectors[0]instanceof z["b"]&&Object(w["k"])(this.diagramRenderer.rendererActions)){var d=e.connectors[0];this.diagramRenderer.renderEndPointHandle(d,s,e.thumbsConstraints,i,this.scroller.transform,void 0!==d.sourceWrapper,void 0!==d.targetWrapper,!(!this.connectorEditingToolModule||!Object(w["f"])(d)))}else if(e.nodes[0]instanceof A["q"]){var l=e.nodes[0];Object(nt["c"])(this,e.nodes[0])&&("UmlClassifier"===l.shape.type||l.parentId&&this.nameTable[l.parentId]&&"UmlClassifier"===this.nameTable[l.parentId].shape.type||((!l.container||"Canvas"!==l.container.type&&"Grid"!==l.container.type)&&(e.nodes[0].constraints&=~(y["k"].HideThumbs|y["k"].Rotate)),e.thumbsConstraints&=~y["r"].Rotate));var p=!("SwimLane"!==l.shape.type&&!l.isLane&&!l.isPhase);this.diagramRenderer.renderResizeHandle(e.wrapper.children[0],s,e.thumbsConstraints,this.scroller.currentZoom,e.constraints,this.scroller.transform,h,Object(w["o"])(e.nodes[0]),!!(e.nodes[0].constraints&y["k"].HideThumbs),p)}}else this.diagramActions&y["c"].Interactions&&(this.diagramRenderer.rendererActions=this.diagramRenderer.rendererActions|y["o"].PreventRenderSelector),this.diagramRenderer.renderResizeHandle(e.wrapper,s,e.thumbsConstraints,this.scroller.currentZoom,e.constraints,this.scroller.transform,h,Object(w["o"])(e)),this.diagramRenderer.rendererActions=this.diagramRenderer.rendererActions&~y["o"].PreventRenderSelector}},e.prototype.renderSelectorForAnnotation=function(t,e){this.diagramRenderer.renderResizeHandle(t.wrapper.children[0],e,t.thumbsConstraints,this.scroller.currentZoom,t.constraints,this.scroller.transform,void 0,Object(w["o"])(t.annotation))},e.prototype.drawSelectionRectangle=function(t,e,i,n){this.clearSelectorLayer(),this.diagramRenderer.drawSelectionRectangle(t,e,i,n,this.adornerLayer,this.scroller.transform)},e.prototype.renderHighlighter=function(t){var e=Object(c["g"])(this.element.id);this.diagramRenderer.renderHighlighter(t,e,this.scroller.transform)},e.prototype.clearHighlighter=function(){var t=Object(c["g"])(this.element.id),e=t.getElementById(t.id+"_highlighter");e&&e.parentNode.removeChild(e)},e.prototype.getNodesConnectors=function(t){for(var e=0;e<this.nodes.length;e++){var i=this.nodes[e];t.push(i)}for(e=0;e<this.connectors.length;e++){var n=this.connectors[e];t.push(n)}return t},e.prototype.clearSelectorLayer=function(){var t=Object(c["g"])(this.element.id);if(this.currentSymbol){var e=t.getElementById("borderRect_symbol");e&&e.parentNode.removeChild(e)}else{var i=t.getElementById(this.adornerLayer.id+"_selected_region");i&&i.parentNode.removeChild(i),this.clearHighlighter();for(var n=Object(c["v"])(this.element.id).childNodes,o=void 0,r=n.length;r>0;r--)o=n[r-1],o.parentNode.removeChild(o)}},e.prototype.getWrapper=function(t,e){var i;e=t.id+"_"+e;for(var n=t instanceof Y["a"]?t:this.getPortContainer(this.nameTable[t.id]),o=0;o<n.children.length;o++)e===n.children[o].id&&(i=n.children[o]);return i},e.prototype.getEndNodeWrapper=function(t,e,i){if("Bpmn"===t.shape.type&&t.wrapper.children[0]instanceof Y["a"]){if("Activity"===t.shape.shape){if(i&&"Transaction"===t.shape.activity.subProcess.type&&e.sourcePortID){var n=e.sourcePortID,o=t.wrapper.children[0].children[0].children[2];if(o.children)for(var r=0,a=o.children;r<a.length;r++){var s=a[r];if(s.visible&&s.id===t.id+"_"+n)return s.children[0]}}return t.wrapper.children[0].children[0].children[0]}return t.wrapper.children[0].children[0]}return this.containsMargin(t.wrapper.children[0])||t.children?t.wrapper:t.wrapper.children[0]},e.prototype.containsMargin=function(t){return t.margin&&(0!==t.margin.left||0!==t.margin.top||0!==t.margin.right||0!==t.margin.bottom)},e.prototype.focusOutEdit=function(){this.endEdit()},e.prototype.endEditCommand=function(){this.endEdit(),this.textEditing=!1},e.prototype.endEdit=function(){if(this.diagramActions&y["c"].TextEdit){var t=document.getElementById(this.element.id+"_editBox"),e=t.value;n["l"].remove(t,"input",this.eventHandler.inputChange),n["l"].remove(t,"focusout",this.focusOutEdit);var i=document.getElementById(this.element.id+"_editTextBoxDiv"),o={oldValue:this.activeLabel.text,newValue:e,cancel:!1},r=!1,a=void 0;i.parentNode.removeChild(i);var c=void 0;if(this.bpmnModule&&(a=this.bpmnModule.isBpmnTextAnnotation(this.activeLabel,this),c=this.bpmnModule.getTextAnnotationWrapper(a,this.activeLabel.id),r=!!a,r&&(i.textContent===e&&e===this.activeLabel.text||(this.triggerEvent(y["e"].textEdit,o),o.cancel||this.bpmnModule.updateTextAnnotationContent(a,this.activeLabel,e,this)))),!r){a=this.nameTable[this.activeLabel.parentId];var h=this.eventHandler.isAddTextNode(a,!0);h||i.textContent===e&&e===this.activeLabel.text||this.triggerEvent(y["e"].textEdit,o),c||(c=this.getWrapper(a.wrapper,this.activeLabel.id));var l=Object(d["k"])(a,this.activeLabel.id);if(l.content===e||o.cancel||(a.parentId&&"UmlClassifier"===this.nameTable[a.parentId].shape.type&&-1===e.indexOf("+")&&-1===e.indexOf("-")&&-1===e.indexOf("#")&&-1===e.indexOf("~")&&-1===a.id.indexOf("_umlClass_header")&&(e=" + "+e),(a.isLane||a.isPhase)&&this.protectPropertyChange(!0),l.content=e,this.dataBind(),this.updateSelector(),(a.isLane||a.isPhase)&&this.protectPropertyChange(!1)),h&&(this.removeObjectsFromLayer(a),this.removeFromAQuad(a),delete this.nameTable[this.activeLabel.parentId],""!==e)){this.clearSelection();var p=Object(s["b"])(a);a=this.add(p),this.updateDiagramObject(a),this.commandHandler.select(this.nameTable[a.id])}}if(this.selectedItems.nodes.length){var u=this.nameTable[this.activeLabel.parentId],g=this.nameTable[u.parentId];if(g&&"SwimLane"===g.shape.type||"SwimLane"===u.shape.type){var f="LaneHeaderParent",m="PhaseHeaderParent";if("SwimLane"===u.shape.type&&(g=this.nameTable[this.activeLabel.parentId],u=a),u.isLane||u.isPhase)for(var v=u.isLane?g.shape.lanes:g.shape.phases,b=0;b<v.length;b++)v[b].id===(u[f]||u[m])&&(v[b].header.annotation.content=u.annotations[0].content);else u.isHeader&&g.shape.hasHeader&&(g.shape.header.annotation.content=u.annotations[0].content)}this.dataBind()}c.visible=!0,this.updateDiagramObject(a),this.diagramActions=this.diagramActions&~y["c"].TextEdit,this.activeLabel.isGroup&&this.endGroupAction(),this.activeLabel={id:"",parentId:"",isGroup:!1,text:void 0}}},e.prototype.canLogChange=function(){return!(!(this.diagramActions&y["c"].Render)||this.diagramActions&y["c"].ToolAction||this.diagramActions&y["c"].UndoRedo||this.diagramActions&y["c"].PublicMethod)},e.prototype.modelChanged=function(t,e){return!!(t.connectors||e.connectors||t.nodes||e.connectors||t.pageSettings||e.pageSettings||t.bridgeDirection||e.bridgeDirection)},e.prototype.resetDiagramActions=function(t){var e=!!t;this.diagramActions&y["c"].UndoRedo&&(!e||t===y["c"].UndoRedo)&&(this.diagramActions=this.diagramActions&~y["c"].UndoRedo),this.diagramActions&y["c"].PublicMethod&&(!e||t===y["c"].PublicMethod)&&(this.diagramActions=this.diagramActions&~y["c"].PublicMethod)},e.prototype.removeNode=function(t){this.removeObjectsFromLayer(t),this.removeFromAQuad(this.nameTable[t.id]),delete this.nameTable[t.id],t.children&&delete this.groupTable[t.id],this.nodes.splice(this.nodes.indexOf(t),1)},e.prototype.deleteGroup=function(t){var e=[],i=[];t.children&&(i=this.commandHandler.getChildren(t,e));for(var n=0,o=i;n<o.length;n++){var r=o[n];this.nameTable[r.id]&&this.remove(r)}},e.prototype.updateObject=function(t,e,i){if(!(this.diagramActions&y["c"].ToolAction)){var n=t.wrapper.children[0].bounds,o=this.commandHandler.checkBoundaryConstraints(void 0,void 0,n);if(!o)if(t instanceof A["q"]){for(var r=e,a=0,s=Object.keys(i);a<s.length;a++){var c=s[a];switch(c){case"width":t.width=r.width;break;case"height":t.height=r.height;break;case"offsetX":t.offsetX=r.offsetX;break;case"offsetY":t.offsetY=r.offsetY;break;case"rotateAngle":t.rotateAngle=r.rotateAngle;break}}this.nodePropertyChange(t,i,e)}else{for(var h=0,d=Object.keys(i);h<d.length;h++){c=d[h];var l=e,p=t.sourcePoint,u=t.targetPoint;switch(c){case"sourcePoint":p.x=l.sourcePoint.x||p.x,p.y=l.sourcePoint.y||p.y;break;case"targetPoint":u.x=l.targetPoint.x||u.x,u.y=l.targetPoint.y||u.y}}this.connectorPropertyChange(t,i,e)}}},e.prototype.nodePropertyChangeExtend=function(t,e,i,n){return void 0!==i.style&&"Bpmn"!==t.shape.type&&(Object(d["Y"])(i.style,t.wrapper.children[0]),n=!0),void 0!==i.shadow&&(this.updateShadow(t.shadow,i.shadow),n=!0),void 0!==i.constraints&&(e.constraints&y["k"].Select&&!(i.constraints&y["k"].Select)&&ut(this,t)?this.clearSelection():(this.updateThumbConstraints(this.selectedItems.nodes,this.selectedItems),this.updateSelector(),n=!0)),this.swimLaneNodePropertyChange(t,e,i,n),n},e.prototype.swimLaneNodePropertyChange=function(t,e,i,n){if("SwimLane"===t.shape.type&&!this.currentSymbol){if(e.shape){var o=i.shape,r=t.shape,a="Horizontal"===r.orientation,c=r.padding,h=e.shape,d=t.wrapper.children[0],l=void 0,p=void 0,u=void 0;if(h.lanes||h.phases){if(h.lanes)for(var g=0,f=Object.keys(o.lanes);g<f.length;g++){var m=f[g],y=Number(m),v=h.lanes[y],b=void 0,w=o.lanes[y];if(w&&w.header&&(u=r.lanes[y].header.id,l=v.header,p=w.header,this.nodePropertyChange(this.nameTable[u],l,p)),v.children)for(var O=0,x=Object.keys(v.children);O<x.length;O++){var j=x[O];u=r.lanes[y].children[Number(j)].id;var S=this.nameTable[u];l=v.children[Number(j)],p=w.children[Number(j)],this.nodePropertyChange(S,l,p)}v.width&&!a&&(b=r.phases&&r.phaseSize?y+1:y,d.updateColumnWidth(b,w.width,!0,c),this.updateDiagramElementQuad()),v.height&&a&&(b=r.header&&r.hasHeader?y+1:y,b+=r.phases&&r.phaseSize?1:0,d.updateRowHeight(b,w.height,!0,c),this.updateDiagramElementQuad())}if(o.phases)for(var C=0,P=Object.keys(o.phases);C<P.length;C++){var T=P[C],I=(y=Number(T),o.phases[y]),A=void 0,z=r.header&&r.hasHeader?1:0;if(I&&I.header&&(u=r.phases[y].header.id,l=h.phases[y].header,p=I.header,this.nodePropertyChange(this.nameTable[u],l,p)),I.offset){if(0===y)A=I.offset;else{var L=r.phases[y-1];A=I.offset-L.offset,A<=0&&(A=I.offset)}a?(d.updateColumnWidth(y,A,!0,c),Object(Ht["v"])(t,this,d.rows[z].cells[y],y)):d.updateRowHeight(z+y,A,!0,c)}}}if(void 0!==o.phaseSize&&r.phases.length)if(0===o.phaseSize||0===h.phaseSize)if(h.phaseSize)a?(d.removeRow(r.header&&r.hasHeader?1:0),t.height=t.wrapper.height=d.height):(r.header&&r.hasHeader&&(d.rows[0].cells[1].children=d.rows[0].cells[0].children,d.rows[0].cells[1].columnSpan=d.rows[0].cells[0].columnSpan-1,d.rows[0].cells[0].children=[]),d.removeColumn(0));else{if(a){var E=new V["c"];E.height=o.phaseSize,d.addRow(r.header&&r.hasHeader?1:0,E,!0),t.height=t.wrapper.height+=o.phaseSize}else{var D=new V["a"];D.width=o.phaseSize,d.addColumn(0,D,!0),r.header&&r.hasHeader&&(d.rows[0].cells[0].children=d.rows[0].cells[1].children,d.rows[0].cells[1].children=[],d.rows[0].cells[1].columnSpan=1,d.rows[0].cells[1].minWidth=void 0,d.rows[0].cells[0].columnSpan=r.lanes.length+1)}for(var k=0;k<r.phases.length;k++)""===r.phases[k].id&&(r.phases[k].id=Object(s["i"])()),Object(Ht["m"])(d,this,t,r.header&&r.hasHeader?1:0,a,k)}else a?d.updateRowHeight(r.header&&r.hasHeader?1:0,o.phaseSize,!1):d.updateColumnWidth(0,o.phaseSize,!1);if(r.header&&r.hasHeader&&h.header){var R=d.rows[0].cells[0].children[0].id,M=this.nameTable[R];this.nodePropertyChange(M,h.header,o.header)}t.height=t.wrapper.height=d.height,t.width=t.wrapper.width=d.width}n=!0}return n},e.prototype.nodePropertyChange=function(t,e,i,r,a,s){var c,h=t.wrapper.outerBounds,l=t.wrapper.bounds,p=!1;if(void 0!==i.width&&(t.children?t.container?t.wrapper.width=i.width:this.scaleObject(t,i.width,!0):(t.wrapper.children[0].width=i.width,c=!0,p=!0)),void 0!==i.height&&(t.children?t.container?t.wrapper.height=i.height:this.scaleObject(t,i.height,!1):(t.wrapper.children[0].height=i.height,c=!0,p=!0)),c=this.nodePropertyChangeExtend(t,e,i,c),void 0!==i.constraints&&Object(w["B"])(e)!==Object(w["B"])(i)&&(t.wrapper.children[0].shadow=Object(w["B"])(t)?t.shadow:null),void 0!==i.offsetX){if("None"!==t.wrapper.flip){if(t.offsetX!==t.wrapper.offsetX&&void 0!==e.offsetX){var u=i.offsetX-e.offsetX;t.wrapper.offsetX=t.wrapper.offsetX+u,this.updateFlipOffset(t.wrapper,u,0,t.wrapper.flip)}}else t.wrapper.offsetX=i.offsetX;c=!0,p=!0}if(void 0!==i.offsetY){if("None"!==t.wrapper.flip){if(t.offsetY!==t.wrapper.offsetY&&void 0!==e.offsetY){var f=i.offsetY-e.offsetY;t.wrapper.offsetY=t.wrapper.offsetY+f,this.updateFlipOffset(t.wrapper,0,f,t.wrapper.flip)}}else t.wrapper.offsetY=i.offsetY;c=!0,p=!0}if(void 0!==i.pivot&&(t.wrapper.pivot=i.pivot,c=!0),void 0!==i.minWidth&&(t.wrapper.minWidth=t.wrapper.children[0].minWidth=i.minWidth,c=!0,p=!0),void 0!==i.minHeight&&(t.wrapper.minHeight=t.wrapper.children[0].minHeight=i.minHeight,c=!0,p=!0),void 0!==i.maxWidth&&(t.wrapper.maxWidth=i.maxWidth,c=!0,p=!0),void 0!==i.maxHeight&&(t.wrapper.maxHeight=i.maxHeight,c=!0,p=!0),void 0!==i.flip)if(t.wrapper.flip=i.flip,c=!0,p=!0,t.wrapper.elementActions&y["g"].ElementIsGroup){if(Object(d["a"])(t.wrapper,t.offsetX,t.offsetY,this,i.flip),t&&t.children)for(var m=0,v=t.children;m<v.length;m++){var b=v[m],O=this.nameTable[b];O.wrapper.flip=i.flip,this.updatePorts(O,i.flip)}}else t.wrapper.children[0].flip=i.flip,this.updatePorts(t,i.flip);if(void 0!==i.rotateAngle&&(t.children&&a&&this.commandHandler.rotateObjects(t,[t],t.rotateAngle-t.wrapper.rotateAngle,{x:t.offsetX,y:t.offsetY},!1),t.wrapper.rotateAngle=i.rotateAngle,c=!0,p=!0),void 0!==i.backgroundColor&&(t.wrapper.style.fill=i.backgroundColor),void 0!==i.visible&&this.updateElementVisibility(t.wrapper,t,t.visible),void 0!==i.shape&&"Bpmn"!==t.shape.type&&(c=!0,Object(d["X"])(i,t,e,this),p=!0),i.margin&&(c=!0,this.updateMargin(t,i),p=!0),(void 0!==i.shape&&void 0===i.shape.type||void 0!==i.width||void 0!==i.height||void 0!==i.style)&&"Bpmn"===t.shape.type&&this.bpmnModule&&(c=!0,p=!0,this.bpmnModule.updateBPMN(i,e,t,this)),"UmlActivity"===t.shape.type&&"FinalNode"===t.shape.shape&&(c=!0,p=!0,this.updateUMLActivity(i,e,t,this)),(t.shape&&"UmlClassifier"===t.shape.type||t.parentId&&this.nameTable[t.parentId]&&"UmlClassifier"===this.nameTable[t.parentId].shape.type)&&(c=!0,p=!0),void 0!==i.ports)for(var x=0,j=Object.keys(i.ports);x<j.length;x++){var S=j[x],C=Number(S);c=!0;var P=i.ports[S],T=t.ports[C];this.updatePort(P,T,t.wrapper),p=!0}if(void 0!==i.annotation||void 0!==i.annotations||void 0!==i.width)for(var I=0,A=Object.keys(i.annotations||t.annotations);I<A.length;I++){S=A[I],C=Number(S);c=!0;P=void 0;P=i.annotation?i.annotation:i.annotations?i.annotations[S]:t.annotations;var L=t.annotations[C];if(L){var E=!!t.width;this.updateAnnotation(P,L,t.wrapper,t,E)}}if(void 0===i.expandIcon&&void 0===i.collapseIcon&&void 0===i.isExpanded||(this.updateIcon(t),this.updateDefaultLayoutIcons(t),void 0!==i.isExpanded&&this.commandHandler.expandNode(t,this),c=!0),void 0!==i.tooltip&&this.updateTooltip(t,i),c){if(void 0!==this.bpmnModule&&this.bpmnModule.updateTextAnnotationProp(t,{offsetX:e.offsetX||t.offsetX,offsetY:e.offsetY||t.offsetY},this),this.checkSelectedItem(t)&&t.wrapper.children[0]instanceof g["a"]&&t.wrapper.children[0].refreshTextElement(),t.wrapper.measure(new o["a"](t.wrapper.bounds.width,t.wrapper.bounds.height),t.id,this.onLoadImageSize.bind(this)),t.wrapper.arrange(t.wrapper.desiredSize),this.updateObject(t,e,i),"SwimLane"===t.shape.type&&!this.currentSymbol&&!(this.diagramActions&y["c"].ToolAction)){Object(Ht["u"])(this,t);var D=t.wrapper.children[0],k=t.shape,R=D.columnDefinitions().length;if("Horizontal"===k.orientation){C=k.header&&k.hasHeader?1:0;Object(Ht["v"])(t,this,D.rows[C].cells[R-1],R-1)}t.wrapper.measure(new o["a"](t.wrapper.bounds.width,t.wrapper.bounds.height)),t.wrapper.arrange(t.wrapper.desiredSize)}this.diagramActions&y["c"].ToolAction&&!(this.diagramActions&y["c"].UndoRedo)||this.checkSelectedItem(t)&&this.updateSelector(),!1===h.equals(h,t.wrapper.outerBounds)&&this.updateQuad(t),r?t&&t.visible&&t.outEdges&&this.updateIconVisibility(t,0!==t.outEdges.length):this.commandHandler.connectorSegmentChange(t,l,void 0!==i.rotateAngle),void 0!==this.bpmnModule&&this.bpmnModule.updateDocks(t,this),this.updateGroupOffset(t);var M=[];if(M=M.concat(this.selectedItems.nodes,this.selectedItems.connectors),0===M.length&&t.parentId&&this.nameTable[t.parentId]){var B=this.nameTable[t.parentId];B.wrapper.measure(new o["a"](B.wrapper.width,t.wrapper.height)),B.wrapper.arrange(B.wrapper.desiredSize),B.offsetX=B.wrapper.offsetX,B.offsetY=B.wrapper.offsetY}if(!1===l.equals(l,t.wrapper.bounds)&&(this.updateGroupSize(t),t.children&&this.updateGroupOffset(t)),"SwimLane"===t.shape.type&&!this.currentSymbol&&this.diagramActions&y["c"].Render){var H=Object(Ht["h"])(this,t.wrapper.children[0],void 0,!0);Object(Ht["t"])(H,this)}if(!this.preventNodesUpdate&&((!Object(w["E"])(this)||Object(w["E"])(this)&&this.scroller.oldCollectionObjects.indexOf(t.id)>-1)&&(this.diagramActions&y["c"].PreventZIndexOnDragging?this.updateDiagramObject(t,!0):this.updateDiagramObject(t)),!r&&p&&(this.lineRoutingModule&&this.diagramActions&&this.constraints&y["d"].LineRouting&&"helper"!==t.id&&(this.diagramActions&y["c"].ToolAction||this.lineRoutingModule.renderVirtualRegion(this,!0)),this.updateConnectorEdges(t),"helper"!==t.id&&!(this.diagramActions&y["c"].ToolAction))))for(var N=this.spatialSearch.findObjects(t.wrapper.outerBounds),W=0;W<N.length;W++){var _=N[W];_ instanceof z["b"]&&this.connectorPropertyChange(N[W],{},{sourceID:_.sourceID,targetID:_.targetID,sourcePortID:_.sourcePortID,targetPortID:_.targetPortID,sourcePoint:_.sourcePoint,targetPoint:_.targetPoint})}"New"!==t.status&&this.diagramActions&&(t.status="Update")}if(!s){var X=t,Y={element:Object(d["h"])(X),cause:this.diagramActions,oldValue:Object(d["h"])(e),newValue:Object(d["h"])(i)};Object(n["D"])()&&(Y.element={node:Object(d["h"])(X)},Y.oldValue={node:Object(d["h"])(e)},Y.newValue={node:Object(d["h"])(i)}),this.triggerEvent(y["e"].propertyChange,Y)}},e.prototype.updatePorts=function(t,e){if(t&&t.ports.length>0)for(var i=0,n=Object.keys(t.ports);i<n.length;i++){var r=n[i],a=Number(r),s=t.ports[a],c=this.getWrapper(t.wrapper,s.id);c=Object(d["W"])(c,e,s),c.relativeMode="Point",c.measure(new o["a"](c.width,c.height)),c.arrange(c.desiredSize)}},e.prototype.updateFlipOffset=function(t,e,i,n){if(t.hasChildren())for(var o=0,r=t.children;o<r.length;o++){var a=r[o];"Horizontal"!==n&&"Both"!==n||(a.flipOffset.x=a.flipOffset.x+e),"Vertical"!==n&&"Both"!==n||(a.flipOffset.y=a.flipOffset.y+i),(a instanceof Y["a"]||a instanceof f["a"])&&this.updateFlipOffset(a,e,i,n)}},e.prototype.updateUMLActivity=function(t,e,i,n){var o=void 0!==t.width||void 0!==t.height;if(o){var r=i.wrapper.children[0].children[0];r.width=t.width,r.height=t.height;var a=i.wrapper.children[0].children[1];a.width=t.width/1.5,a.height=t.height/1.5}},e.prototype.updateConnectorProperties=function(t){if(this.preventConnectorsUpdate){var e=this.selectionConnectorsList.indexOf(t);-1===e&&this.selectionConnectorsList.push(t)}else{var i={sourcePoint:t.sourcePoint,targetPoint:t.targetPoint,sourceID:t.sourceID,targetID:t.targetID,sourcePortID:t.sourcePortID,targetPortID:t.targetPortID};this.connectorPropertyChange(t,{},i,void 0,!0)}},e.prototype.updateConnectorEdges=function(t){if(t.inEdges.length>0)for(var e=0;e<t.inEdges.length;e++)this.updateConnectorProperties(this.nameTable[t.inEdges[e]]);if(t.outEdges.length>0)for(var i=0;i<t.outEdges.length;i++)this.updateConnectorProperties(this.nameTable[t.outEdges[i]]);t.parentId&&this.nameTable[t.parentId]&&this.updateConnectorEdges(this.nameTable[t.parentId])},e.prototype.connectorProprtyChangeExtend=function(t,e,i,n){return void 0!==i.type&&i.type!==e.type&&t.segments.length>0&&void 0===i.segments&&(t.segments=[]),void 0!==i.shape&&void 0!==t.shape&&t.shape&&"Bpmn"===t.shape.type&&this.bpmnModule&&this.bpmnModule.updateBPMNConnector(t,e,i,this),void 0!==t.constraints?(this.updateThumbConstraints(this.selectedItems.connectors,this.selectedItems),!0):n},e.prototype.connectorPropertyChange=function(t,e,i,n,r){var a,s,c,h,l=t.wrapper.bounds,p=!1,u=[];if(p=this.connectorProprtyChangeExtend(t,e,i,p),void 0!==i.visible&&this.updateElementVisibility(t.wrapper,t,t.visible),void 0!==i.sourcePoint||void 0!==i.targetPoint||void 0!==i.sourceID||void 0!==i.targetID||void 0!==i.targetPadding||void 0!==i.sourcePortID||void 0!==i.targetPortID||void 0!==i.sourcePadding||void 0!==i.type||void 0!==i.segments||void 0!==i.flip){if(void 0!==i.sourceID&&i.sourceID!==e.sourceID||i.sourcePortID){var g=this.nameTable[t.sourceID];if(s=this.findInOutConnectPorts(g,!1),(!g||Object(w["q"])(g)||""!==t.sourcePortID&&Object(w["w"])(s))&&(t.sourceWrapper=g?this.getEndNodeWrapper(g,t,!0):void 0,t.sourcePortID&&void 0===i.sourcePortID&&(t.sourcePortWrapper=g?this.getWrapper(g.wrapper,t.sourcePortID):void 0)),void 0!==i.sourceID&&void 0!==e.sourceID&&""!==e.sourceID){var f=this.nameTable[e.sourceID];void 0!==f&&f.outEdges&&-1!==f.outEdges.indexOf(t.id)&&Object(d["L"])(f.outEdges,t.id)}this.updateEdges(t)}if(void 0!==i.targetID&&i.targetID!==e.targetID){var m=this.nameTable[i.targetID];if(a=this.findInOutConnectPorts(m,!0),(!m||Object(w["n"])(m)||""!==t.targetPortID&&Object(w["v"])(a))&&(t.targetWrapper=m?this.getEndNodeWrapper(m,t,!1):void 0,t.targetPortID&&void 0===i.targetPortID&&(t.targetPortWrapper=m?this.getWrapper(m.wrapper,t.targetPortID):void 0)),void 0!==e&&void 0!==e.targetID&&""!==e.targetID){var v=this.nameTable[e.targetID];void 0!==v&&v.inEdges&&-1!==v.inEdges.indexOf(t.id)&&Object(d["L"])(v.inEdges,t.id)}this.updateEdges(t)}if(void 0!==i.sourcePortID&&i.sourcePortID!==e.sourcePortID){t.sourceID&&this.nameTable[t.sourceID]&&(c=this.nameTable[t.sourceID].wrapper);g=this.nameTable[t.sourceID];(!g||Object(w["q"])(g)||""!==t.sourcePortID&&Object(w["w"])(s))&&(t.sourcePortWrapper=c?this.getWrapper(c,i.sourcePortID):void 0)}if(void 0!==i.targetPortID&&i.targetPortID!==e.targetPortID){m=this.nameTable[t.targetID];t.targetID&&this.nameTable[t.targetID]&&(h=this.nameTable[t.targetID].wrapper),(!m||Object(w["n"])(m)||""!==t.targetPortID&&Object(w["v"])(a))&&(t.targetPortWrapper=h?this.getWrapper(h,i.targetPortID):void 0)}void 0!==i.flip&&(t.flip=i.flip,Object(d["q"])(t)),this.lineRoutingModule&&this.diagramActions&&this.constraints&y["d"].LineRouting&&!(this.diagramActions&y["c"].ToolAction)&&(this.lineRoutingModule.renderVirtualRegion(this,!0),this.lineRoutingModule.refreshConnectorSegments(this,t,!1)),u=this.getPoints(t)}void 0!==i.style&&Object(d["Y"])(i.style,t.wrapper.children[0]),(u.length>0||void 0!==i.sourceDecorator||void 0!==i.targetDecorator&&-1===Object.keys(i.targetDecorator).indexOf("style")||void 0!==i.cornerRadius)&&(Object(d["R"])(t,u.length>0?u:t.intermediatePoints),void 0!==i.type&&(p=!0),u.length>0&&(t.wrapper.measure(new o["a"](t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize),this.updateConnectorAnnotation(t),this.updateObject(t,e,i))),(i.sourcePoint||i.targetPoint||i.segments)&&this.diagramActions===y["c"].Render&&(p=!0),"Bpmn"===t.shape.type&&"Default"===t.shape.sequence&&this.commandHandler.updatePathElementOffset(t),n||this.updateBridging(),this.updateAnnotations(i,t),t.wrapper.measure(new o["a"](t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize),!1===l.equals(l,t.wrapper.bounds)&&(this.updateQuad(t),this.updateGroupSize(t)),!0!==p||!this.checkSelectedItem(t)||this.diagramActions&y["c"].ToolAction&&!(this.diagramActions&y["c"].UndoRedo)||this.updateSelector(),this.preventConnectorsUpdate||(!Object(w["E"])(this)||Object(w["E"])(this)&&this.scroller.oldCollectionObjects.indexOf(t.id)>-1)&&(this.diagramActions&y["c"].PreventZIndexOnDragging?this.updateDiagramObject(t,!0):this.updateDiagramObject(t)),this.diagramActions&&"New"!==t.status&&(t.status="Update"),this.triggerPropertyChange(r,t,e,i)},e.prototype.getpropertyChangeArgs=function(t,e,i,n){return n.element={connector:Object(d["h"])(t)},n.oldValue={connector:Object(d["h"])(e)},n.newValue={connector:Object(d["h"])(i)},n},e.prototype.triggerPropertyChange=function(t,e,i,o){if(!t){var r=e,a={element:Object(d["h"])(r),cause:this.diagramActions,oldValue:Object(d["h"])(i),newValue:Object(d["h"])(o)};Object(n["D"])()&&(a=this.getpropertyChangeArgs(r,i,o,a)),this.triggerEvent(y["e"].propertyChange,a)}},e.prototype.findInOutConnectPorts=function(t,e){var i={};return t&&(i=Object(d["v"])(t,e)),i},e.prototype.getPoints=function(t,e){var i;return i=t.getConnectorPoints(t.type,e,"ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type?this.layout.orientation:void 0),i},e.prototype.updateNodeProperty=function(t,e,i){if(void 0===e)this.updateElementVisibility(t,this.nameTable[t.id],e);else{t.style.opacity=i;for(var n=0;n<t.children.length;n++)t.children[n]instanceof f["a"]&&this.updateNodeProperty(t.children[n],void 0,i),t.children[n].style.opacity=i}},e.prototype.checkSelectedItem=function(t){var e=this.selectedItems,i=!1,n=[];return n=n.concat(e.nodes,e.connectors),n.length>0&&t.id===n[n.length-1].id&&(i=!0),i},e.prototype.updateDiagramContainerVisibility=function(t,e){if(t instanceof f["a"])for(var i=0;i<t.children.length;i++)this.updateDiagramContainerVisibility(t.children[i],e);t.visible=e},e.prototype.updateElementVisibility=function(t,e,i){if(void 0!==i){if(t.visible=i,e instanceof A["q"]){if(e.children)for(var n=0,o=e.children;n<o.length;n++){var r=o[n];this.updateElementVisibility(this.nameTable[r].wrapper,this.nameTable[r],i)}else t.children[0].visible=i,this.updateDiagramContainerVisibility(t.children[0],i),"Bpmn"===e.shape.type&&this.bpmnModule&&this.bpmnModule.updateElementVisibility(e,i,this);if(e.ports)for(var a=0,s=e.ports;a<s.length;a++){var c=s[a];if(c.visibility&y["m"].Visible){var h=this.getWrapper(t,c.id);h.visible=i}}if(e.annotations)for(var d=0,l=e.annotations;d<l.length;d++){var p=l[d];h=this.getWrapper(t,p.id);h.visible=i}}else for(var u=0;u<3;u++)t.children[u].visible=i;if(e.annotations)for(var g=0,f=e.annotations;g<f.length;g++){p=f[g],h=this.getWrapper(t,p.id);h.visible=i}if(e.expandIcon||e.collapseIcon){h=this.getWrapper(t,"icon_content");if(h){for(u=0;u<h.children.length;u++)h.children[u].visible=i;h.visible=i}e&&e.visible&&e.outEdges&&this.updateIconVisibility(e,0!==e.outEdges.length)}!1===i&&this.unSelect(this.nameTable[t.id]),(e instanceof A["q"]&&!this.preventNodesUpdate||e instanceof z["b"]&&!this.preventConnectorsUpdate)&&this.diagramActions&&this.updateDiagramObject(this.nameTable[t.id],void 0,!0)}},e.prototype.updateAnnotations=function(t,e){if(void 0!==t.annotations)for(var i=0,n=Object.keys(t.annotations);i<n.length;i++){var o=n[i],r=Number(o),a=t.annotations[o],s=e.annotations[r];this.updateAnnotation(a,s,e.wrapper,e)}},e.prototype.updateAnnotation=function(t,e,i,n,r){var a,s=!1;if(a=this.getWrapper(i,e.id),void 0!==a){if(void 0!==t.width&&void 0!==t.height&&(a.width=t.width,a.height=t.height,s=!0),void 0!==t.rotateAngle&&(a.rotateAngle=t.rotateAngle),!r||a instanceof b["a"]||a.refreshTextElement(),e instanceof X["b"]&&void 0!==t.segmentAngle&&(a.rotateAngle=e.rotateAngle),e instanceof X["c"]&&void 0!==t.offset){var c=t.offset;s=!0;var h=void 0!==c.x?c.x:e.offset.x,l=void 0!==c.y?c.y:e.offset.y;a.setOffsetWithRespectToBounds(h,l,"Fraction"),a.relativeMode="Point"}else e instanceof X["b"]&&(void 0!==t.offset||void 0!==t.segmentAngle)&&n.updateAnnotation(e,n.intermediatePoints,n.wrapper.bounds,a);if(e instanceof X["b"]&&t.displacement&&(void 0===t.displacement.x&&void 0===t.displacement.y||(s=!0)),void 0!==t.margin&&(s=!0,void 0!==t.margin.bottom&&(a.margin.bottom=t.margin.bottom),void 0!==t.margin.top&&(a.margin.top=t.margin.top),void 0!==t.margin.left&&(a.margin.left=t.margin.left),void 0!==t.margin.right&&(a.margin.right=t.margin.right)),(s||r)&&(a.width=e.width||n.width,e.template&&(a.width=a.width||a.actualSize.width,a.height=e.height||n.height||a.actualSize.height)),void 0!==t.horizontalAlignment&&(a.horizontalAlignment=t.horizontalAlignment,s=!0),void 0!==t.verticalAlignment&&(a.verticalAlignment=t.verticalAlignment,s=!0),void 0!==t.visibility&&(a.visible=!(!i.visible||!t.visibility)),void 0!==t.constraints){var p=!1;a.constraints&y["a"].Select&&!(t.constraints&y["a"].Select)&&ut(this,n,!1,a)&&(p=!0),a.constraints=t.constraints,p&&this.clearSelection()}void 0!==t.style&&Object(d["Y"])(t.style,a),void 0!==t.hyperlink&&Object(d["T"])(t.hyperlink,a,e),this.updateAnnotationContent(t,s,a,n,e,i),!0===s&&(a.measure(new o["a"](a.width,a.height)),a.arrange(a.desiredSize)),a instanceof b["a"]||a.refreshTextElement()}},e.prototype.updateAnnotationContent=function(t,e,i,n,o,r){void 0!==t.content&&(i&&(!0,"UmlActivity"===n.shape.type&&"StructuredNode"===n.shape.shape?i.content="<<"+t.content+">>":i.content=t.content),i instanceof b["a"]&&this.updateAnnotationWrapper(i,n,o,r)),void 0!==t.template&&(i.content=t.template,this.updateAnnotationWrapper(i,n,o,r))},e.prototype.updateAnnotationWrapper=function(t,e,i,n){for(var o=0,r=this.views;o<r.length;o++){var a=r[o];Object(c["D"])(t.id+"_groupElement",a),Object(c["D"])(t.id+"_html_element",a)}if(e instanceof A["q"])t=e.initAnnotationWrapper(i,this.element.id);else if(e instanceof z["b"]){var s=e.wrapper,h=s.children[0],d=new W["a"](h.offsetX-h.width/2,h.offsetY-h.height/2,h.width,h.height);t=e.getAnnotationElement(e.annotations[e.annotations.length-1],e.intermediatePoints,d,this.getDescription,this.element.id)}for(var l=0;l<n.children.length;l++)t.id===n.children[l].id&&n.children.splice(l,1,t)},e.prototype.updatePort=function(t,e,i){var n,r=!1;if(n=this.getWrapper(i,e.id),void 0!==n){if(void 0!==t.offset){r=!0;var a=void 0!==t.offset.x?t.offset.x:e.offset.x,s=void 0!==t.offset.y?t.offset.y:e.offset.y;n.setOffsetWithRespectToBounds(a,s,"Fraction"),n.relativeMode="Point"}if(void 0!==t.width&&(r=!0,n.width=t.width),void 0!==t.height&&(r=!0,n.height=t.height),void 0!==t.visibility&&(n.visible=!(!i.visible||!Object(d["g"])(e,y["m"].Visible))),void 0!==t.margin&&(r=!0,void 0!==t.margin.bottom&&(n.margin.bottom=t.margin.bottom),void 0!==t.margin.top&&(n.margin.top=t.margin.top),void 0!==t.margin.right&&(n.margin.right=t.margin.right),void 0!==t.margin.left&&(n.margin.left=t.margin.left)),void 0!==t.horizontalAlignment&&(r=!0,n.horizontalAlignment=t.horizontalAlignment),void 0!==t.verticalAlignment&&(r=!0,n.verticalAlignment=t.verticalAlignment),void 0!==t.style&&(void 0!==t.style.fill&&(n.style.fill=t.style.fill),void 0!==t.style.opacity&&(n.style.opacity=t.style.opacity),void 0!==t.style.strokeColor&&(n.style.strokeColor=t.style.strokeColor),void 0!==t.style.strokeWidth&&(n.style.strokeWidth=t.style.strokeWidth),void 0!==t.style.strokeDashArray&&(n.style.strokeDashArray=t.style.strokeDashArray)),void 0!==t.shape&&n){var c=Object(_["c"])(t.shape);n.data=c}void 0!==t.pathData&&(n.data=String(t.pathData),r=!0),!0===r&&(n.measure(new o["a"](n.width,n.height)),n.arrange(n.desiredSize))}},e.prototype.updateIcon=function(t){var e=this.getWrapper(t.wrapper,"icon_content"),i=this.diagramActions&y["c"].Render?this.element.id:void 0;if(e){if("SVG"===this.mode){var n=Object(c["m"])(t.wrapper.id+"_icon_content",i);if(n){var o=Object(c["m"])(n.id+"_rect",i),r=Object(c["m"])(n.id+"_shape",i),a=Object(c["m"])(r.id+"_native_element",i);a&&a.parentNode.removeChild(a),r.parentNode.removeChild(r),o.parentNode.removeChild(o),n.parentNode.removeChild(n)}}var s=t.wrapper.children.indexOf(e);t.wrapper.children.splice(s,1)}var h=this.getPortContainer(t);t.initIcons(this.getDescription,this.layout,h,this.element.id)},e.prototype.getPortContainer=function(t){if(t.children)for(var e=0;e<t.wrapper.children.length;e++)if(t.wrapper.children[e].id===t.id+"group_container")return t.wrapper.children[e];return t.wrapper},e.prototype.updateTooltip=function(t,e){void 0!==e.tooltip.content&&(t.tooltip.content=e.tooltip.content),void 0!==e.tooltip.position&&(t.tooltip.position=e.tooltip.position),void 0!==e.tooltip.height&&(t.tooltip.height=e.tooltip.height),void 0!==e.tooltip.width&&(t.tooltip.width=e.tooltip.width),void 0!==e.tooltip.showTipPointer&&(t.tooltip.showTipPointer=e.tooltip.showTipPointer)},e.prototype.updateQuad=function(t){var e=this.spatialSearch.updateQuad(t.wrapper);e&&!this.preventUpdate&&this.updatePage()},e.prototype.removeFromAQuad=function(t){if(t.children)for(var e=void 0,i=t.children,n=0;n<i.length;n++)e=this.nameTable[i[n]],e&&this.removeFromAQuad(e);this.spatialSearch.removeFromAQuad(t.wrapper);var o=this.spatialSearch.updateBounds(t.wrapper);o&&!this.preventUpdate&&this.updatePage()},e.prototype.updateGroupSize=function(t){var e;t.parentId&&(e=this.nameTable[t.parentId],e&&(e.parentId?this.updateGroupSize(e):(e.wrapper.measure(new o["a"]),e.wrapper.arrange(e.wrapper.desiredSize),this.updateGroupOffset(e),this.updateDiagramObject(e))))},e.prototype.updatePage=function(){if(this.diagramActions&y["c"].Render){this.scroller.updateScrollOffsets(),this.scroller.setSize();for(var t=0,i=this.views;t<i.length;t++){var n=i[t],o=this.views[n];o instanceof e||o.updateView(o)}}},e.prototype.protectPropertyChange=function(t){this.isProtectedOnChange=t},e.prototype.updateShadow=function(t,e){void 0!==e.angle&&(t.angle=e.angle),void 0!==e.color&&(t.color=e.color),void 0!==e.distance&&(t.distance=e.distance),void 0!==e.opacity&&(t.opacity=e.opacity)},e.prototype.updateMargin=function(t,e){void 0!==e.margin.top&&(t.margin.top=e.margin.top),void 0!==e.margin.bottom&&(t.margin.bottom=e.margin.bottom),void 0!==e.margin.left&&(t.margin.left=e.margin.left),void 0!==e.margin.right&&(t.margin.right=e.margin.right)},e.prototype.initDroppables=function(){var t,e,i=this,o={},r={};this.droppable=new n["j"](this.element),this.droppable.over=function(a){if(i.currentSymbol)a.event.touches&&a.event.touches.length&&i.eventHandler.mouseMove(a.event,a.event.touches);else if(a.dragData){var c=void 0,h=void 0;document.getElementById(i.element.id+"content").focus();var l=i.eventHandler.getMousePosition(a.event),p=void 0,u=a.dragData.helper,g=u.getAttribute("paletteId");if(g){var f=document.getElementById(g).ej2_instances[0],m="sourceElement";i.droppable[m]=f;var v="selectedSymbols",b="childTable";if(f){var w=f[v];p=Object(s["b"])(f[v]),o=f[b];var O=w.wrapper.children[0].children[0];if(f[v]instanceof A["q"]){p.offsetX=l.x+5+(p.width||O.actualSize.width)/2,p.offsetY=l.y+(p.height||O.actualSize.height)/2;var x=new A["q"](i,"nodes",p,!0);if("Bpmn"===x.shape.type&&x.shape.activity.subProcess.processes&&x.shape.activity.subProcess.processes.length&&(x.shape.activity.subProcess.processes=[]),"SwimLane"===x.shape.type){if(i.diagramActions|=y["c"].PreventHistory,x.shape.isLane){x.children=[],t={id:"header"+Object(s["i"])()},"Horizontal"===x.shape.orientation?(t.width=x.shape.lanes[0].header.width,t.height=x.shape.lanes[0].height):(t.width=x.shape.lanes[0].width,t.height=x.shape.lanes[0].header.height),t.style=x.shape.lanes[0].header.style,t.offsetX=l.x+5+t.width/2,t.offsetY=l.y+t.height/2,i.diagramActions|=y["c"].PreventCollectionChangeOnDragOver,t=i.add(t),e={id:"body"+Object(s["i"])()},"Horizontal"===x.shape.orientation?(e.width=x.shape.lanes[0].width-t.width,e.height=x.shape.lanes[0].height,e.offsetX=l.x+5+(x.shape.lanes[0].header.width+e.width/2),e.offsetY=l.y+e.height/2):(e.width=x.shape.lanes[0].width,e.height=x.shape.lanes[0].height-t.height,e.offsetX=l.x+5+e.width/2,e.offsetY=l.y+(x.shape.lanes[0].header.height+e.height/2)),e.style=x.shape.lanes[0].style,e=i.add(e);var j={id:"group"+Object(s["i"])(),children:[t.id,e.id]};j.shape=x.shape,j.width=x.shape.lanes[0].width,j.height=x.shape.lanes[0].height,x=i.add(j),i.diagramActions&=~y["c"].PreventCollectionChangeOnDragOver}i.diagramActions&=~y["c"].PreventHistory}if(x.shape.isPhase&&(h="Horizontal"===x.shape.orientation,h?(x.offsetX=l.x+5+(x.width||O.actualSize.width)/2,x.offsetY=l.y,x.shape.data="M20,"+x.height/2+" L"+(x.width-20)+","+x.height/2+"z",x.height=1):(x.offsetX=l.x+5,x.offsetY=l.y+(x.height||O.actualSize.height)/2,x.shape.data="M"+x.width/2+",20 L"+x.width/2+","+(x.height-20)+"z",x.width=1)),c=x,p.children){var S=p,C={};r=i.getChildren(S,C,o),Object(d["c"])(S,-S.offsetX,-S.offsetY,r,!0,i)}}else if(f[v]instanceof z["b"]){c=new z["b"](i,"connectors",p,!0);var P=W["a"].toBounds([c.sourcePoint,c.targetPoint]),T=l.x-P.left,I=l.y-P.top;c.sourcePoint.x+=T,c.sourcePoint.y+=I,c.targetPoint.x+=T,c.targetPoint.y+=I}c.shape.isLane||(c.id+=Object(s["i"])());var L={source:f,element:c,cancel:!1,diagram:i};if(Object(n["D"])()&&(L=i.getBlazorDragEventArgs(L)),i["enterObject"]=c,i["enterTable"]=r,i.triggerEvent(y["e"].dragEnter,L),c instanceof A["q"]&&"SwimLane"===c.shape.type&&c.shape.isLane){var E=L.element,D=E.shape.lanes[0],k=void 0,R=void 0;h="Horizontal"===E.shape.orientation,k=i.nameTable[c.children[0]],R=i.nameTable[c.children[1]],h?(t.width=D.header.width,t.height=D.height,e.width=D.width-t.width,e.height=D.height,e.offsetX=l.x+5+(D.header.width+R.width/2),e.offsetY=l.y+R.height/2):(t.width=D.width,t.height=D.header.height,e.width=D.width,e.height=D.height-t.height,e.offsetX=l.x+5+R.width/2,e.offsetY=l.y+(D.header.height+R.height/2)),t.offsetX=l.x+5+k.width/2,t.offsetY=l.y+k.height/2,c.width=D.width,c.height=D.height}c instanceof A["q"]&&c.shape.isPhase&&(h?c.height=1:c.width=1),i.activeLayer.lock||L.cancel||(i.preventUpdate=!0,c.children&&i.findChild(c,r),i.preventUpdate=!0,-1!==c.zIndex&&(c.zIndex=-1),i.initObject(c,void 0,void 0,!0),i.currentSymbol=c,"SVG"!==i.mode&&i.refreshDiagramLayer(),i.commandHandler.select(c),i.eventHandler.mouseDown(a.event),i.eventHandler.mouseMove(a.event,a),i.preventUpdate=!1,i.updatePage(),u.style.opacity="0"),delete i["enterObject"],delete i["enterTable"]}i.droppable[v]=u}}},this.droppable.drop=function(t){var e,o="sourceElement";if(i.currentSymbol){var r,a=!1,c=void 0;c=i.currentSymbol instanceof z["b"],t.event.touches&&i.eventHandler.mouseUp(t.event);var h=void 0,l=void 0;l={source:i.droppable[o],element:i.currentSymbol,target:i.eventHandler["hoverNode"]||i.eventHandler["lastObjectUnderMouse"]||i,cancel:!1,position:{x:i.currentSymbol.wrapper.offsetX,y:i.currentSymbol.wrapper.offsetY}},Object(n["D"])()&&(l={source:Object(d["h"])(i.droppable[o]),element:Object(d["x"])(i.currentSymbol)===z["b"]?{connector:Object(d["h"])(i.currentSymbol)}:{node:Object(d["h"])(i.currentSymbol)},cancel:!1,position:{x:i.currentSymbol.wrapper.offsetX,y:i.currentSymbol.wrapper.offsetY}},i.getDropEventArgs(l)),i.triggerEvent(y["e"].drop,l);var p=void 0,u="id";if(p=Object(s["b"])(i.currentSymbol),p["hasTarget"]=i.currentSymbol["hasTarget"],i.removeFromAQuad(i.currentSymbol),i.removeObjectsFromLayer(i.nameTable[i.currentSymbol.id]),i.removeElements(i.currentSymbol),(i.currentSymbol.shape.isLane||i.currentSymbol.shape.isPhase)&&i.removeChildInNodes(i.currentSymbol),l.cancel&&Object(d["J"])(i.currentSymbol,i),i.currentSymbol.shape.isPhase&&(a=!0,r=i.currentSymbol.shape.orientation),delete i.nameTable[i.currentSymbol.id],i.currentSymbol=null,i.protectPropertyChange(!0),!l.cancel){if(i.startGroupAction(),p&&(p.shape.isLane||a)&&(a&&(p.shape.isPhase=a,p.shape.orientation=r),i.eventHandler.addSwimLaneObject(p)),"Bpmn"===p.shape.type&&p.shape.annotation&&p["hasTarget"]){var g=p.shape.annotation.nodeId;p.shape.annotation.id=p.id,i.addTextAnnotation(p.shape.annotation,i.nameTable[g]),p.nodeId=""}p.shape.isLane||a||(p.children&&i.addChildNodes(p),l.target&&l.target instanceof A["q"]&&!c&&Object(nt["c"])(i,l.target)&&Object(w["b"])(l.target)?Object(nt["a"])(i,l.target,p):e=i.add(p,!0),(p||e)&&Object(w["C"])(i)&&i.select([i.nameTable[p[u]]]))}i.protectPropertyChange(!1),h=i.nameTable[p[u]],p["hasTarget"]&&(p.nodeId=p["hasTarget"],i.remove(p)),i.bpmnModule&&h instanceof A["q"]&&p.processId&&(h.processId=p.processId,i.bpmnModule.dropBPMNchild(i.nameTable[h.processId],h,i)),i.endGroupAction(),"SVG"!==i.mode&&i.refreshDiagramLayer(),delete i.droppable[o];var f="selectedSymbols";Object(n["H"])(i.droppable[f])}else{l={source:Object(d["h"])(t.droppedElement),element:void 0,target:Object(d["h"])(i.eventHandler["hoverNode"]||i.eventHandler["lastObjectUnderMouse"]||i),cancel:!1,position:void 0};Object(n["D"])()&&(l={source:Object(d["h"])(t.droppedElement),element:void 0,cancel:!1,position:void 0},i.getDropEventArgs(l)),i.triggerEvent(y["e"].drop,l);p=void 0,u="id"}},this.droppable.out=function(t){if(i.currentSymbol&&!i.eventHandler.focus){i.unSelect(i.currentSymbol),i.removeFromAQuad(i.currentSymbol),"SVG"!==i.mode&&"Native"===i.currentSymbol.shape.type&&i.removeElements(i.currentSymbol),i.removeObjectsFromLayer(i.nameTable[i.currentSymbol.id]),delete i.nameTable[i.currentSymbol.id],i.triggerEvent(y["e"].dragLeave,{element:Object(d["h"])(i.currentSymbol),diagram:Object(d["h"])(i)}),"SVG"!==i.mode?i.refreshDiagramLayer():i.removeElements(i.currentSymbol),i.currentSymbol=null;var e="selectedSymbols";i.droppable[e].style.opacity="1";var n="sourceElement";delete i.droppable[n],i.diagramRenderer.rendererActions=i.removeConstraints(i.diagramRenderer.rendererActions,y["o"].DrawSelectorBorder),i.previousSelectedObject&&i.select(i.previousSelectedObject,i.previousSelectedObject.length>1),i.previousSelectedObject=null}}},e.prototype.getDropEventArgs=function(t){if(this.eventHandler["lastObjectUnderMouse"]||this.eventHandler["hoverNode"]){var e=this.eventHandler["lastObjectUnderMouse"]||this.eventHandler["hoverNode"];t.target=Object(d["x"])(e)===z["b"]?{connector:Object(d["h"])(e)}:{node:Object(d["h"])(e)}}else t.target.diagram=Object(d["h"])(this)},e.prototype.removeChildInNodes=function(t){if(t){if(t.children)for(var e=0;e<t.children.length;e++)this.removeChildInNodes(this.nameTable[t.children[e]]);var i=this.nodes.indexOf(t);-1!==i&&this.nodes.splice(i,1)}},e.prototype.getBlazorDragEventArgs=function(t){return t={source:Object(d["h"])(t.source),element:Object(d["x"])(t.element)===z["b"]?{connector:Object(d["h"])(t.element)}:{node:Object(d["h"])(t.element)},cancel:t.cancel,diagram:Object(d["h"])(this)},t},e.prototype.findChild=function(t,e){for(var i,n,o=0;o<t.children.length;o++)i=e[t.children[o]],i&&(i.children&&this.findChild(i,e),i.id=i.id+Object(s["i"])(),e[i.id]=i,t.children[o]=i.id,n=new A["q"](this,"nodes",i,!0),this.initObject(n,void 0,void 0,!0))},e.prototype.getChildren=function(t,e,i){for(var n,o=0;o<t.children.length;o++)n=i[t.children[o]],n&&(n.children&&(e=this.getChildren(n,e,i)),e[n.id]=Object(s["b"])(n));return e},e.prototype.addChildNodes=function(t){for(var e,i=0;i<t.children.length;i++)e=this.nameTable[t.children[i]],e&&(e.children&&this.addChildNodes(e),this.add(e,!0))},e.prototype.moveNode=function(t){for(var e,i=this.commandHandler.getObjectLayer(t.id),n=i.zIndex,o=i.objects.length,r=0;r<this.layers.length;r++)n===this.layers[r].zIndex&&(e=this.layers[r+1]);if(o>1)this.commandHandler.moveSvgNode(t.id,i.objects[o-2]),this.commandHandler.moveSvgNode(i.objects[o-2],t.id);else if(e){var a=this.commandHandler.getLayer(this.layerZIndexTable[e.zIndex]).objects[0];a?(this.commandHandler.moveSvgNode(t.id,a),this.commandHandler.updateNativeNodeIndex(t.id,a)):this.moveObjectsUp(t,i)}else this.moveObjectsUp(t,i)},e.prototype.moveObjectsUp=function(t,e){for(var i,n=this.layers.length-1;n>=0;n--)if(i=this.layers[n],e.id!==i.id){var o=this.commandHandler.getLayer(this.layerZIndexTable[i.zIndex]).objects[i.objects.length-1];if(o){this.commandHandler.moveSvgNode(t.id,o),this.commandHandler.moveSvgNode(o,t.id);break}}},e.prototype.insertData=function(t){return this.crudOperation(t,"create",this.getNewUpdateNodes("New"))},e.prototype.updateData=function(t){return this.crudOperation(t,"update",this.getNewUpdateNodes("Update"))},e.prototype.removeData=function(t){return this.crudOperation(t,"destroy",this.getDeletedNodes())},e.prototype.crudOperation=function(t,e,i){if(t){var n=this.parameterMap(t,!(t instanceof z["b"]));if(n){var o=t instanceof z["b"]?this.dataSourceSettings.connectionDataSource.crudAction[e]:this.dataSourceSettings.crudAction[e];this.raiseAjaxPost(JSON.stringify(n),o)}return n}var r=i;return this.processCrudCollection(r,this.dataSourceSettings.crudAction[e],this.dataSourceSettings.connectionDataSource.crudAction[e]),r},e.prototype.processCrudCollection=function(t,e,i){if(t.nodes){var n=[],o=void 0;for(o=0;o<t.nodes.length;o++)n.push(this.parameterMap(t.nodes[o],!0));n&&n.length>0&&this.raiseAjaxPost(JSON.stringify(n),e)}if(t.connectors){n=[],o=void 0;for(o=0;o<t.connectors.length;o++)n.push(this.parameterMap(t.connectors[o],!1));n&&n.length>0&&this.raiseAjaxPost(JSON.stringify(n),i)}},e.prototype.parameterMap=function(t,e){var i,n={},o=e?this.dataSourceSettings:this.dataSourceSettings.connectionDataSource;if(o.id&&(n[o.id]=t.id),o.sourcePointX&&o.sourcePointY&&(n[o.sourcePointX]=t.sourcePoint.x,n[o.sourcePointY]=t.sourcePoint.y),o.targetPointX&&o.targetPointY&&(n[o.targetPointX]=t.targetPoint.x,n[o.targetPointY]=t.targetPoint.y),o.sourceID&&(n[o.sourceID]=t.sourceID),o.targetID&&(n[o.targetID]=t.targetID),o.crudAction&&o.crudAction.customFields&&o.crudAction.customFields.length>0)for(i=0;i<o.crudAction.customFields.length;i++)n[o.crudAction.customFields[i]]=t[o.crudAction.customFields[i]];return n},e.prototype.getNewUpdateNodes=function(t){var e=[],i=[];for(var n in this.nameTable){var o=this.nameTable[n];o.status==t&&(o&&o instanceof z["b"]?(o.status="None",i.push(o)):(o.status="None",e.push(o)))}return{nodes:e,connectors:i}},e.prototype.getDeletedNodes=function(){var t,e=[],i=[];for(t=0;t<this.crudDeleteNodes.length;t++){var n=this.crudDeleteNodes[t];n&&n.segments?i.push(n):n&&e.push(n)}return this.crudDeleteNodes=[],{nodes:e,connectors:i}},e.prototype.raiseAjaxPost=function(t,e){var i=new n["a"](e,"POST",!0,"application/json"),o=JSON.stringify(JSON.parse(t));i.send(o).then(),i.onSuccess=function(t){}},ie([Object(n["p"])("100%")],e.prototype,"width",void 0),ie([Object(n["p"])("SVG")],e.prototype,"mode",void 0),ie([Object(n["p"])("100%")],e.prototype,"height",void 0),ie([Object(n["g"])({},qt["c"])],e.prototype,"contextMenuSettings",void 0),ie([Object(n["p"])(y["d"].Default)],e.prototype,"constraints",void 0),ie([Object(n["p"])(y["f"].Default)],e.prototype,"tool",void 0),ie([Object(n["p"])("Top")],e.prototype,"bridgeDirection",void 0),ie([Object(n["p"])("transparent")],e.prototype,"backgroundColor",void 0),ie([Object(n["g"])({},k)],e.prototype,"snapSettings",void 0),ie([Object(n["g"])({},H)],e.prototype,"rulerSettings",void 0),ie([Object(n["g"])({},P)],e.prototype,"pageSettings",void 0),ie([Object(n["g"])({},Kt)],e.prototype,"serializationSettings",void 0),ie([Object(n["e"])([],A["q"])],e.prototype,"nodes",void 0),ie([Object(n["p"])()],e.prototype,"drawingObject",void 0),ie([Object(n["e"])([],z["b"])],e.prototype,"connectors",void 0),ie([Object(n["p"])([])],e.prototype,"basicElements",void 0),ie([Object(n["g"])({},Bt["a"])],e.prototype,"tooltip",void 0),ie([Object(n["g"])({},J)],e.prototype,"dataSourceSettings",void 0),ie([Object(n["p"])()],e.prototype,"addInfo",void 0),ie([Object(n["p"])()],e.prototype,"historyManager",void 0),ie([Object(n["p"])()],e.prototype,"getNodeDefaults",void 0),ie([Object(n["p"])()],e.prototype,"nodeDefaults",void 0),ie([Object(n["p"])()],e.prototype,"getConnectorDefaults",void 0),ie([Object(n["p"])()],e.prototype,"connectorDefaults",void 0),ie([Object(n["p"])()],e.prototype,"setNodeTemplate",void 0),ie([Object(n["p"])()],e.prototype,"getDescription",void 0),ie([Object(n["p"])()],e.prototype,"getCustomProperty",void 0),ie([Object(n["p"])()],e.prototype,"getCustomTool",void 0),ie([Object(n["p"])()],e.prototype,"getCustomCursor",void 0),ie([Object(n["e"])([],te)],e.prototype,"customCursor",void 0),ie([Object(n["p"])()],e.prototype,"updateSelection",void 0),ie([Object(n["g"])({},A["t"])],e.prototype,"selectedItems",void 0),ie([Object(n["g"])({},T)],e.prototype,"scrollSettings",void 0),ie([Object(n["g"])({},et)],e.prototype,"layout",void 0),ie([Object(n["g"])({},qt["b"])],e.prototype,"commandManager",void 0),ie([Object(n["k"])()],e.prototype,"dataLoaded",void 0),ie([Object(n["k"])()],e.prototype,"dragEnter",void 0),ie([Object(n["k"])()],e.prototype,"dragLeave",void 0),ie([Object(n["k"])()],e.prototype,"dragOver",void 0),ie([Object(n["k"])()],e.prototype,"click",void 0),ie([Object(n["k"])()],e.prototype,"historyChange",void 0),ie([Object(n["k"])()],e.prototype,"historyStateChange",void 0),ie([Object(n["k"])()],e.prototype,"doubleClick",void 0),ie([Object(n["k"])()],e.prototype,"textEdit",void 0),ie([Object(n["k"])()],e.prototype,"scrollChange",void 0),ie([Object(n["k"])()],e.prototype,"selectionChange",void 0),ie([Object(n["k"])()],e.prototype,"sizeChange",void 0),ie([Object(n["k"])()],e.prototype,"connectionChange",void 0),ie([Object(n["k"])()],e.prototype,"sourcePointChange",void 0),ie([Object(n["k"])()],e.prototype,"targetPointChange",void 0),ie([Object(n["k"])()],e.prototype,"propertyChange",void 0),ie([Object(n["k"])()],e.prototype,"positionChange",void 0),ie([Object(n["k"])()],e.prototype,"animationComplete",void 0),ie([Object(n["k"])()],e.prototype,"rotateChange",void 0),ie([Object(n["k"])()],e.prototype,"collectionChange",void 0),ie([Object(n["k"])()],e.prototype,"onUserHandleMouseDown",void 0),ie([Object(n["k"])()],e.prototype,"onUserHandleMouseUp",void 0),ie([Object(n["k"])()],e.prototype,"onUserHandleMouseEnter",void 0),ie([Object(n["k"])()],e.prototype,"onUserHandleMouseLeave",void 0),ie([Object(n["k"])()],e.prototype,"segmentCollectionChange",void 0),ie([Object(n["k"])()],e.prototype,"onImageLoad",void 0),ie([Object(n["k"])()],e.prototype,"expandStateChange",void 0),ie([Object(n["k"])()],e.prototype,"created",void 0),ie([Object(n["k"])()],e.prototype,"mouseEnter",void 0),ie([Object(n["k"])()],e.prototype,"mouseLeave",void 0),ie([Object(n["k"])()],e.prototype,"mouseOver",void 0),ie([Object(n["k"])()],e.prototype,"contextMenuOpen",void 0),ie([Object(n["k"])()],e.prototype,"contextMenuBeforeItemRender",void 0),ie([Object(n["k"])()],e.prototype,"contextMenuClick",void 0),ie([Object(n["k"])()],e.prototype,"commandExecute",void 0),ie([Object(n["e"])([],Yt)],e.prototype,"layers",void 0),ie([Object(n["k"])()],e.prototype,"drop",void 0),e}(n["i"])},"1ce4":function(t,e,i){"use strict";var n=i("b239"),o=i("d0e6"),r=i("ab8c"),a=i("456d"),s=i("8905"),c=i("a630"),h=i("be2f"),d=i("bccc"),l=i("6513"),p=i("88a2"),u=i("d454"),g=i("18f9"),f=i("6639"),m=i("9efe"),y=i("fd65"),v=i("03e0"),b=i("ff29"),w=i("19be"),O=i("3b21"),x=i("c544"),j=i("95f7"),S=i("e464"),C=i("8214"),P=i("48e5"),T=i("8d8a"),I=i("9bac");function A(t){return z[t.toString()]}var z={Action:"M 90 82.895 C 90 86.819 86.776 90 82.8 90 H 7.2 C 3.224 90 0 86.819 0 82.895 V 7.105 C 0 3.181 3.224 0 7.2 0 h 75.6 C 86.776 0 90 3.181 90 7.105 V 82.895 Z",Decision:"M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z",MergeNode:"M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z",InitialNode:"M10,19.5c-5.238,0-9.5-4.262-9.5-9.5S4.762,0.5,10,0.5s9.5,4.262,9.5,9.5S15.238,19.5,10,19.5z",ForkNode:"m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z",JoinNode:"m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z",TimeEvent:"M50.001,0.00286865 L25.001,25.0029 L0.000976562,0.00286865 L50.001,0.00286865 z M0.000976562,50.0029 L25.001,25.0029 L50.001,50.0029 L0.000976562,50.0029 z",AcceptingEvent:"M17.8336 32.164 L29.64 24 L17.32 16 L48.1664 16 L48.5 32 Z",SendSignal:"M48.164 31.8336 L56 23.832 L47.836 16 L16.168 16 L16.1668 31.8336 Z",ReceiveSignal:"M48.1664 31.8336 L39.836 24 L47.836 16 L16.168 16 L16.168 31.836 Z",StructuredNode:"M0,0 L50,0 L50,50 L0,50 z",Note:"M20 12 L4 12 L4 22 L22 22 L22 14 L20 14 L20 12 L22 14 Z"},L=i("7682"),E=i("6e4a"),D=i("c2844"),k=i("b46f"),R=i("7de8");function M(t,e){for(var i=[],n=0;n<e.length;n++){var o=e[n];t.containsRect(o.wrapper.bounds)&&i.push(o)}return i}function B(t,e){for(var i=0;i<t.length;i++)if(t[i].id===e)return!0;return!1}function H(t){var e;return t&&(t.type?e="Connector":t.shape&&!t.type&&(e="Node")),e}function N(t,e){e instanceof m["q"]&&(t.shape.header||(e.shape.hasHeader=!1))}function W(t,e){if(e instanceof m["q"])switch(t.shape.shape){case"JoinNode":t.width||(e.width=20),t.height||(e.height=90),t.style&&t.style.fill||(e.style.fill="black");break;case"ForkNode":t.width||(e.width=90),t.height||(e.height=20),t.style&&t.style.fill||(e.style.fill="black");break;case"InitialNode":t.style&&t.style.fill||(e.style.fill="black");break;case"FinalNode":t.style&&t.style.fill||(e.style.fill="black");break}else switch(t.shape.flow){case"Object":t.style&&t.style.strokeDashArray||(e.style.strokeDashArray="8 4"),t.style&&t.style.strokeWidth||(e.style.strokeWidth=2),t.targetDecorator&&t.targetDecorator.shape||(e.targetDecorator.shape="OpenArrow");break;case"Control":t.style&&t.style.strokeWidth||(e.style.strokeWidth=2),t.targetDecorator&&t.targetDecorator.shape||(e.targetDecorator.shape="OpenArrow"),t.sourceDecorator&&t.sourceDecorator.shape||(e.sourceDecorator.shape="None");break}}function _(t,e){switch(t.shape.type){case"Bpmn":switch(t.shape.flow){case"Sequence":("Normal"===t.shape.sequence&&"Bezier"!==t.type||"Default"===t.shape.sequence||"Conditional"===t.shape.sequence)&&(e.targetDecorator&&e.targetDecorator.style&&(e.targetDecorator.style.fill=t.targetDecorator&&t.targetDecorator.style&&t.targetDecorator.style.fill||"black"),"Conditional"===t.shape.sequence&&e.sourceDecorator&&(e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white"),e.sourceDecorator.width=t.sourceDecorator&&t.sourceDecorator.width||20,e.sourceDecorator.height=t.sourceDecorator&&t.sourceDecorator.width||10));break;case"Association":"Default"!==t.shape.association&&"Directional"!==t.shape.association&&"BiDirectional"!==t.shape.association||(e.targetDecorator&&e.targetDecorator.style&&(e.targetDecorator.style.fill=t.targetDecorator&&t.targetDecorator.style&&t.targetDecorator.style.fill||"black"),"BiDirectional"===t.shape.association&&e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white",e.sourceDecorator.width=t.sourceDecorator&&t.sourceDecorator.width||5,e.sourceDecorator.height=t.sourceDecorator&&t.sourceDecorator.height||10));break;case"Message":e.style&&!e.style.strokeDashArray&&(e.style.strokeDashArray=t.style&&t.style.strokeDashArray||"4 4");break}break;case"UmlActivity":switch(t.shape.flow){case"Exception":"Directional"!==t.shape.association&&"BiDirectional"!==t.shape.association||(e.style.strokeDashArray=t.style&&t.style.strokeDashArray||"2 2");break}break;case"UmlClassifier":var i=!1;"Association"===t.shape.relationship?i=!0:"Inheritance"===t.shape.relationship?(e.targetDecorator&&e.targetDecorator.style&&(e.targetDecorator.style.fill=t.targetDecorator&&t.targetDecorator.style&&t.targetDecorator.style.fill||"white"),e.style&&(i=!0,e.style.strokeDashArray=t.style&&t.style.strokeDashArray||"4 4")):"Composition"===t.shape.relationship?(e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"black"),i=!0):"Aggregation"===t.shape.relationship?(e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white"),i=!0):"Dependency"===t.shape.relationship?(e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white"),i=!0,e.style.strokeDashArray="4 4"):"Realization"===t.shape.relationship&&(e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white"),i=!0),i&&(e.style.strokeWidth=t.style&&t.style.strokeWidth||2);break}}function X(t,e,i){var n,o=h["a"].findLength(e,t),r=h["a"].findLength(i,t);n=o>r?i:e;var a=h["a"].findAngle(e,i),s=h["a"].findAngle(n,t),c=h["a"].findLength(n,t),d=s+2*(a-s);return{x:n.x+c*Math.cos(d*Math.PI/180),y:n.y+c*Math.sin(d*Math.PI/180)}}function Y(t){var e=[];if("Bezier"===t.type)for(var i=0,n=0;n<t.segments.length;n++)for(var o=1.5,r=t.segments[n],a=h["a"].isEmptyPoint(r.point1)?r.bezierPoint1:r.point1,s=h["a"].isEmptyPoint(r.point2)?r.bezierPoint2:r.point2,c=Number((t.distance(a,r.points[0])+t.distance(s,a)+t.distance(r.points[1],s))/o),d=0;d<c-1;d+=10)e[i]=Object(y["e"])(t,r.points[0],h["a"].isEmptyPoint(r.point1)?r.bezierPoint1:r.point1,h["a"].isEmptyPoint(r.point2)?r.bezierPoint2:r.point2,r.points[1],d,c),i++;return e}function V(t){var e=t.parentElement;do{if(Object(x["w"])(e,"e-diagram"))return!0;e=e.parentElement}while(e);return!1}function U(t,e,i){var n=!1;if(t&&t.children&&t.children.length>0)for(var o=void 0,r=0;r<t.children.length;r++)return o=i[t.children[r]],o.shape.type===e||U(o,e,i);return n}function F(t,e,i,n,o){if(i&&(t instanceof y["b"]||t&&(t.shape&&"SwimLane"!==t.shape.type||void 0===t.shape)))for(var r=void 0,a=0,s=Object.keys(i);a<s.length;a++){var c=s[a];if(r=i[c],"shape"===c&&r.type&&(t.shape={type:r.type}),r)if(Array.isArray(r)&&r.length&&r.length>0&&"annotations"!==o&&"ports"!==o)if(t[c].length>0)for(var h=0;h<=t[c].length;h++)F(t[c],e?e[c]:void 0,i[c],"annotations"===c||"ports"===c?t:void 0,c);else F(t[c],e?e[c]:void 0,i[c],"annotations"===c||"ports"===c?t:void 0,c);else if(r instanceof Object&&e&&"annotations"!==o&&"ports"!==o)F(t[c],e[c],i[c]);else if("annotations"!==o&&"ports"!==o&&e&&!e[c]||!e&&t&&(t[c]||void 0!==t[c]))t[c]=i[c];else{var d=void 0;"annotations"!==o&&"ports"!==o||("annotations"===o?(t[c]&&F(t[c],e[c],i[c]),t[c]||(Ft(n)===y["b"]?(d=new f["b"](n,"annotations",i[c]),n.annotations.push(d)):(d=new f["c"](n,"annotations",i[c]),n.annotations.push(d)))):t[c]?F(t[c],e[c],i[c]):(d=new E["a"](n,"ports",i[c]),n.ports.push(d)))}}}function G(t,e,i,n){var o;if(e)for(var r=0,a=Object.keys(e);r<a.length;r++){var s=a[r];if(o=e[s],"getAssistantDetails"===s){if(n.data["Role"]===e[s]["root"])for(var c=e[s]["assistants"],h=0;h<c.length;h++)for(var d=0;d<i.length;d++)i[d].data["Role"]===c[h]&&(t.assistants.push(i[d].id),t.children.splice(0,1))}else o&&(t[s]=e[s])}}function q(t,e){var i;i="Bezier"===t.type?Y(t):t.intermediatePoints;for(var n=0;n<i.length-1;n++){var r=i[n],a=i[n+1],s=o["a"].toBounds([r,a]);if(s.Inflate(t.hitPadding),s.containsPoint(e)){var c=X(e,r,a),d={x1:r.x,x2:a.x,y1:r.y,y2:a.y},l={x1:e.x,x2:c.x,y1:e.y,y2:c.y},p=Z(d,l);if(p.enabled){var u=h["a"].findLength(e,p.intersectPt);if(Math.abs(u)<t.hitPadding)return!0}else{var g=o["a"].toBounds([e,e]);if(g.Inflate(3),g.containsPoint(r)||g.containsPoint(a))return!0}if(h["a"].equals(e,c))return!0}}if(t.annotations.length>0){var f=t.wrapper.children;for(n=3;n<f.length;n++){var m=f[n];if(m.bounds.containsPoint(e))return!0}}return!1}function Z(t,e){var i={x:0,y:0},n=t,o=e,r=(o.y2-o.y1)*(n.x2-n.x1)-(o.x2-o.x1)*(n.y2-n.y1),a=(o.x2-o.x1)*(n.y1-o.y1)-(o.y2-o.y1)*(n.x1-o.x1),s=(n.x2-n.x1)*(n.y1-o.y1)-(n.y2-n.y1)*(n.x1-o.x1);if(0===r)return{enabled:!1,intersectPt:i};var c=a/r,h=s/r;return c>=0&&c<=1&&h>=0&&h<=1?(i.x=n.x1+c*(n.x2-n.x1),i.y=n.y1+c*(n.y2-n.y1),{enabled:!0,intersectPt:i}):{enabled:!1,intersectPt:i}}function Q(t,e,i,n){var o={x:0,y:0},r=K(t.x,t.y,e.x,e.y),a=K(i.x,i.y,n.x,n.y),s=Z(r,a);return s.enabled?s.intersectPt:o}function K(t,e,i,n){return{x1:Number(t)||0,y1:Number(e)||0,x2:Number(i)||0,y2:Number(n)||0}}function J(t,e,i){var n=[];i=i||0;var o={x:e.topLeft.x-i,y:e.topLeft.y},r={x:e.topRight.x+i,y:e.topRight.y},a={x:e.bottomRight.x,y:e.bottomRight.y-i},s={x:e.bottomLeft.x,y:e.bottomLeft.y+i};return n.push(o),n.push(r),n.push(a),n.push(s),n}function $(t,e,i){var n,o=i instanceof m["q"]?i.constraints&d["k"].InheritTooltip:i.constraints&d["b"].InheritTooltip,r=i instanceof m["q"]?i.constraints&d["k"].Tooltip:i.constraints&d["b"].Tooltip,a="Mouse"===(!o&&r?i.tooltip.relativeMode:t.tooltip.relativeMode);n=tt(i,e,t,a);var s=Object(P["b"])(t);return{x:n.x+s.width,y:n.y+s.height}}function tt(t,e,i,n){var o={},r=(i.scroller.transform.scale,document.getElementById(i.element.id)),a=t.wrapper.bounds,s=r.getBoundingClientRect();i.scroller.horizontalOffset,i.scroller.verticalOffset;switch(i.tooltipObject.position){case"BottomCenter":o=et(e,a.bottomCenter,i,n,s.width/2,s.height);break;case"BottomLeft":case"LeftBottom":o=et(e,a.bottomLeft,i,n,0,s.height);break;case"BottomRight":case"RightBottom":o=et(e,a.bottomRight,i,n,s.width,s.height);break;case"LeftCenter":o=et(e,a.middleLeft,i,n,0,s.height/2);break;case"LeftTop":case"TopLeft":o=et(e,a.topLeft,i,n,0,0);break;case"RightCenter":o=et(e,a.middleRight,i,n,s.width,s.height/2);break;case"RightTop":case"TopRight":o=et(e,a.topRight,i,n,s.width,0);break;case"TopCenter":o=et(e,a.topCenter,i,n,s.width/2,0);break}return o}function et(t,e,i,n,o,r){var a={},s=i.scroller.transform.scale,c=i.scroller.horizontalOffset,h=i.scroller.verticalOffset;return a.x=(n?t.x:e.x)*s+c-o,a.y=(n?t.y:e.y)*s+h-r,a}function it(t,e){var i,n=0,o=0;for(n=0;n<t.length;n++){var r=Object(j["e"])(t[n].wrapper);for(o=0;o<t.length;o++){var a=Object(j["e"])(t[o].wrapper);"Top"===e||"Bottom"===e||"BottomToTop"===e||"Middle"===e?r.center.y>a.center.y&&(i=t[n],t[n]=t[o],t[o]=i):r.center.x>a.center.x&&(i=t[n],t[n]=t[o],t[o]=i)}}return t}function nt(t,e,i){var n,o,r;o=ot(t,e,i),n=h["a"].findAngle(t[o.index],t[o.index+1]);var a=rt(e);return r=h["a"].transform(o.point,n+45,a),o.point=r,o.angle=n,o}function ot(t,e,i){for(var n,o,r,a,s,c=0,d=e.offset,l=[],p=0;p<t.length-1;p++)c+=h["a"].distancePoints(t[p],t[p+1]),l.push(c);r=d*c;for(var u=0;u<l.length;u++){if(l[u]>=r)return o=h["a"].findAngle(t[u],t[u+1]),n=h["a"].transform(t[u],o,r-(a||0)),s=u,{point:n,index:s};a=l[u]}return{point:n,index:s}}function rt(t){var e=void 0===t.content?10:0,i=0;switch(t.alignment){case"Center":i=0;break;case"Before":i=-(0+e);break;case"After":i=0+e;break}return i}function at(t,e,i){e%=360;var n,o,r=45,a=135,s=225,c=315;switch(t.alignment){case"Before":e>=r&&e<=a?(o="right",n=.5===t.offset?"center":"top"):e>=s&&e<=c?(o="left",n=.5===t.offset?"center":"bottom"):e>r&&e<s?(n="top",o=.5===t.offset?"center":"right"):(n="bottom",o=.5===t.offset?"center":"left");break;case"After":e>=r&&e<=a?(o="left",n=.5===t.offset?"center":"top"):e>=s&&e<=c?(o="right",n=.5===t.offset?"center":"bottom"):e>r&&e<s?(n="bottom",o=.5===t.offset?"center":"right"):(n="top",o=.5===t.offset?"center":"left");break;case"Center":o="center",n="center";break}if(0===t.offset||1===t.offset){var h=void 0;switch(h=st(i[0],i[1]),h){case"left":o=0===t.offset?"right":"left";break;case"right":o=0===t.offset?"left":"right";break;case"bottom":n=0===t.offset?"top":"bottom";break;case"top":n=0===t.offset?"bottom":"top";break}}return{hAlign:o,vAlign:n}}function st(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?t.x<e.x?"right":"left":t.y<e.y?"bottom":"top"}function ct(t,e){if(t instanceof m["q"]&&t.children)for(var i=0;i<t.children.length;i++)e.nameTable[t.children[i]].children&&ct(t,e),e.removeFromAQuad(e.nameTable[t.children[i]]),e.removeObjectsFromLayer(e.nameTable[t.children[i]]),delete e.nameTable[t.children[i]]}function ht(t,e){if(t&&t.children&&t.children.length>0)for(var i=0;i<t.children.length;i++){var n=t.children[i];n instanceof L["a"]&&ht(n,e)}return-1===e.indexOf(t.id)&&e.push(t.id),e}function dt(t){for(var e,i,n,o,r=[],a="childTable",s=0;s<t.length;s++)if(e=t[s],"SwimLane"===e.shape.type){i=e.wrapper.children[0],n=i[a];for(var c=0,h=Object.keys(n);c<h.length;c++){var d=h[c];o=n[d],r=ht(o,r)}}return r}function lt(t,e){var i=e.nodes;if(i)for(var n=0;n<i.length;n++)-1!==t.indexOf(i[n].id)&&(i.splice(n,1),n--)}function pt(t){var e=dt(t.nodes),i=Object(j["b"])(t,t.getCustomProperty);return i.selectedItems.nodes=[],i.selectedItems.connectors=[],i.selectedItems.wrapper=null,t.serializationSettings.preventDefaults&&(i=ut(i,t)),lt(e,i),JSON.stringify(i)}function ut(t,e,i,n){i=ft(e,i);var o=[];o=o.concat(Object.keys(t));for(var r=0,a=o;r<a.length;r++){var s=a[r];e instanceof m["q"]&&(n="shape"===s),t[s]instanceof Array?gt(t,i,e,s):t[s]instanceof Object?"wrapper"!==s&&(t[s]=ut(t[s],e[s],i[s],n)):(i&&t[s]===i[s]||void 0===t[s])&&(n&&"type"===s||e instanceof m["u"]&&"orientation"===s||delete t[s]),"[]"!==JSON.stringify(t[s])&&"{}"!==JSON.stringify(t[s])&&void 0!==t[s]||delete t[s]}return t}function gt(t,e,i,n){if(0===t[n].length)delete t[n];else if(t[n].every((function(t){return"number"===typeof t}))){var o=void 0,r=!0;for(o=0;o<t[n].length;o++)r=!(!r||t[n][o]!==e[n][o]);r&&delete t[n]}else{o=void 0;if("layers"===n&&(t[n].splice(0,1),0===t[n].length&&delete t[n]),t[n])for(o=t[n].length-1;o>=0;o--)"nodes"!==n&&"connectors"!==n||(t[n][o].wrapper=null),"dataManager"!==n&&(t[n][o]=ut(t[n][o],i[n][o],void 0!==e[n]?e[n][o]:void 0),"[]"!==JSON.stringify(t[n][o])&&"{}"!==JSON.stringify(t[n][o])&&void 0!==t[n][o]||t[n].splice(o,1))}}function ft(t,e){var i,n=[],o=new w["a"],r="getClassName";if(t[r])switch(t[r]()){case"Diagram":i=new w["a"];break;case"Node":i=new m["q"](o,"",n);break;case"Path":i=new m["r"](o,"",n);break;case"Native":i=new m["p"](o,"",n);break;case"Html":i=new m["l"](o,"",n);break;case"Image":i=new m["m"](o,"",n);break;case"Text":i=new m["v"](o,"",n);break;case"BasicShape":i=new m["a"](o,"",n);break;case"FlowShape":i=new m["j"](o,"",n);break;case"BpmnShape":i=new m["g"](o,"",n);break;case"UmlActivityShape":i=new m["w"](o,"",n);break;case"UmlClassifierShape":i=new m["A"](o,"",n);break;case"SwimLane":i=new m["u"](o,"",n),t.header&&(i.header=new m["k"](o,"",n),i.header.style.fill="");break;case"ShapeAnnotation":i=new f["c"](o,"",n);break;case"PointPort":i=new E["a"](o,"",n);break;case"BpmnGateway":i=new m["f"](o,"",n);break;case"BpmnDataObject":i=new m["d"](o,"",n);break;case"BpmnEvent":i=new m["e"](o,"",n);break;case"BpmnSubEvent":i=new m["h"](o,"",n);break;case"BpmnActivity":i=new m["b"](o,"",n);break;case"BpmnAnnotation":i=new m["c"](o,"",n);break;case"MethodArguments":i=new m["o"](o,"",n);break;case"UmlClassAttribute":i=new m["y"](o,"",n);break;case"UmlClassMethod":i=new m["z"](o,"",n);break;case"UmlClass":i=new m["x"](o,"",n);break;case"UmlInterface":i=new m["D"](o,"",n);break;case"UmlEnumerationMember":i=new m["C"](o,"",n);break;case"UmlEnumeration":i=new m["B"](o,"",n);break;case"Lane":i=new m["n"](o,"",n);break;case"Phase":i=new m["s"](o,"",n);break;case"ChildContainer":i=new m["i"];break;case"Connector":i=new y["b"](o,"",n);break;case"StraightSegment":i=new y["d"](o,"",n);break;case"BezierSegment":i=new y["a"](o,"",n);break;case"OrthogonalSegment":i=new y["c"](o,"",n);break;case"PathAnnotation":i=new f["b"](o,"",n);break;case"Stop":i=new c["d"](o,"",n);break;case"Point":i=e||new h["a"](o,"",n);break;case"UserHandle":i=new I["a"](o,"",n);break;case"Command":i=new D["a"](o,"",n);break}else i=e;return i}function mt(t,e){e.clear(),e.protectPropertyChange(!0);for(var i=e.dataSourceSettings.doBinding,n=e.setNodeTemplate,o=e.getDescription,r=e.getCustomProperty,a={},s=0,c=e.commandManager.commands;s<c.length;s++){var h=c[s];a[h.name]={execute:h.execute,canExecute:h.canExecute}}var l=e.rulerSettings.horizontalRuler.arrangeTick,p=e.rulerSettings.verticalRuler.arrangeTick,u=e.layout.getLayoutInfo,g=e.layout.getBranch,f=e.getNodeDefaults,m=e.getConnectorDefaults,y=JSON.parse(t);y=yt(y),e.contextMenuSettings=y.contextMenuSettings||{},e.constraints=y.constraints||d["d"].Default,e.tool=y.tool||d["f"].Default,e.bridgeDirection=y.bridgeDirection||"Top",e.pageSettings=y.pageSettings||{},e.drawingObject=y.drawingObject||void 0,e.tooltip=y.tooltip||{},e.addInfo=y.addInfo||void 0,e.getDescription=o,e.scrollSettings=y.scrollSettings||{},e.commandManager=y.commandManager||{},e.layers=y.layers||[],e.rulerSettings.horizontalRuler.arrangeTick=l,e.rulerSettings.verticalRuler.arrangeTick=p;for(var v=0,b=e.commandManager.commands;v<b.length;v++){var O=b[v];a[O.name]&&(O.execute=a[O.name].execute,O.canExecute=a[O.name].canExecute)}if(e.backgroundColor=y.backgroundColor||"transparent",e.basicElements=y.basicElements||[],e.connectors=y.connectors||[],e.dataSourceSettings=y.dataSourceSettings||{},e.dataSourceSettings.doBinding=i,e.height=y.height||"100%",e.setNodeTemplate=n,e.getConnectorDefaults=m,e.getNodeDefaults=f,e.getCustomProperty=r,e.mode=y.mode||"SVG",y.nodes.length)for(var x=0;x<y.nodes.length;x++)y.nodes[x].shape&&"SwimLane"===y.nodes[x].shape.type&&Object(k["l"])(y.nodes[x],void 0,void 0,void 0,void 0,!0);e.nodes=y.nodes||[],e.rulerSettings=y.rulerSettings||{},e.snapSettings=y.snapSettings||{},e.width=y.width||"100%",e.layout=y.layout||{},e.layout.getLayoutInfo=Object(j["f"])(u),e.layout.getBranch=Object(j["f"])(g),e.diagramActions=0,e.isLoading=!0,e.protectPropertyChange(!1);var S;for(x=0;x<e.views.length;x++)S=e.views[e.views[x]],S.refresh(),S instanceof w["a"]&&e.element.classList.add("e-diagram");return y.selectedItems&&(y.selectedItems.nodes=[],y.selectedItems.connectors=[]),e.selectedItems=y.selectedItems,y}function yt(t){if(t&&(void 0===t.version||t.version<17.1))for(var e=t.nodes,i=0,n=e;i<n.length;i++){var o=n[i];if(o&&o.ports.length>0)for(var r=0,a=o.ports;r<a.length;r++){var s=a[r];s&&s.constraints&&s.constraints===d["l"].None&&(s.constraints=d["l"].Default)}}return t}function vt(t,e){var i=e.style,n=e;e.canApplyStyle=!0;for(var o=0,r=Object.keys(t);o<r.length;o++){var a=r[o];switch(a){case"fill":i.fill=t.fill,i instanceof c["e"]&&(i["fill"]="transparent");break;case"textOverflow":i.textOverflow=t.textOverflow;break;case"opacity":i.opacity=t.opacity;break;case"strokeColor":i.strokeColor=t.strokeColor;break;case"strokeDashArray":i.strokeDashArray=t.strokeDashArray;break;case"strokeWidth":i.strokeWidth=t.strokeWidth;break;case"bold":i.bold=t.bold;break;case"color":i.color=t.color;break;case"textWrapping":i.textWrapping=t.textWrapping;break;case"fontFamily":i.fontFamily=t.fontFamily;break;case"fontSize":i.fontSize=t.fontSize;break;case"italic":i.italic=t.italic;break;case"textAlign":i.textAlign=t.textAlign;break;case"whiteSpace":i.whiteSpace=t.whiteSpace;break;case"textDecoration":i.textDecoration=t.textDecoration;break;case"gradient":bt(t.gradient,i.gradient);break}}e instanceof u["a"]&&n.refreshTextElement()}function bt(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var o=n[i];switch(o){case"type":e.type=t.type;break;case"x1":e.x1=t.x1;break;case"x2":e.x2=t.x2;break;case"y1":e.y1=t.y1;break;case"y2":e.y2=t.y2;break;case"cx":e.cx=t.cx;break;case"cy":e.cy=t.cy;break;case"fx":e.fx=t.fx;break;case"fy":e.fy=t.fy;break;case"r":e.r=t.r;break;case"stops":e.stops=t.stops;break}}}function wt(t,e,i){for(var n=e,o=n.hyperlink,r=0,a=Object.keys(t);r<a.length;r++){var s=a[r];switch(s){case"color":n.style.color=o.color=t.color;break;case"content":n.content=o.content=t.content||o.link;break;case"link":var c=i.style;n.style.color=t.link?o.color:c.color,n.style.textDecoration=t.link?o.textDecoration:i.style.textDecoration,n.content=t.link?o.content||t.link:i.content,o.link=t.link;break;case"textDecoration":n.style.textDecoration=o.textDecoration=t.textDecoration;break}}}function Ot(t,e,i){t.width=e.width,t.height=e.height,t.minHeight=e.minHeight,t.maxHeight=e.maxHeight,t.minWidth=e.minWidth,t.maxWidth=e.maxWidth,t.horizontalAlignment=e.wrapper.children[0].horizontalAlignment,t.verticalAlignment=e.wrapper.children[0].verticalAlignment,t.relativeMode=e.wrapper.children[0].relativeMode,t.visible=e.wrapper.children[0].visible,e.shape instanceof m["v"]&&(t.margin=e.shape.margin),t.id=e.wrapper.children[0].id,t.style=e.style;for(var n=0,o=i.views;n<o.length;n++){var r=o[n];Object(x["D"])(e.id+"_groupElement",r),Object(x["D"])(e.id+"_content_groupElement",r),Object(x["D"])(e.id+"_html_element",r)}e.wrapper.children.splice(0,1),e.wrapper.children.splice(0,0,t)}function xt(t,e,i,n){var o=new a["a"];switch(t.shape.type){case"Path":var r=new l["a"];r.data=e.shape.data,o=r,Ot(o,e,n);break;case"Image":var s=new g["a"];s.source=e.shape.source,s.imageAlign=e.shape.align,s.imageScale=e.shape.scale,o=s,Ot(o,e,n);break;case"Text":var c=new u["a"];o=c,Ot(o,e,n);break;case"Basic":var h=void 0;h="Rectangle"===e.shape.shape?new a["a"]:new l["a"],"Polygon"===e.shape.shape?h.data=Object(S["b"])(e.shape.points):h.data=Object(v["a"])(e.shape.shape),Ot(o,e,n),"Rectangle"===e.shape.shape&&(h.cornerRadius=e.shape.cornerRadius),o=h;break;case"Flow":var d=new l["a"];d.data=Object(b["a"])(e.shape.shape),o=d,Ot(o,e,n);break;case"Native":var f=new p["a"](t.id,n.element.id);f.content=e.shape.content,f.scale=e.shape.scale,o=f,Ot(o,e,n);break;case"HTML":var y=new C["a"](e.id,n.element.id);y.content=e.shape.content,o=y,Ot(o,e,n)}void 0===t.shape.type||t.shape.type===i.shape.type?jt(t,e,n):(o.width=e.wrapper.children[0].width,o.height=e.wrapper.children[0].height,e.shape instanceof m["v"]&&(o.margin=e.shape.margin),o.style=e.style,e.wrapper.children[0]=o)}function jt(t,e,i){if(Object.keys(t.shape).length>0)if("Path"===e.shape.type&&void 0!==t.shape.data)e.wrapper.children[0].data=t.shape.data;else if("Text"===e.shape.type&&void 0!==t.shape.content)e.wrapper.children[0].content=t.shape.content;else if("Image"===e.shape.type&&void 0!==t.shape.source)e.wrapper.children[0].source=t.shape.source;else if("Native"===e.shape.type){for(var n=void 0,o=0;o<i.views.length;o++)n=Object(x["m"])(e.wrapper.children[0].id+"_native_element",i.views[o]),void 0!==t.shape.content&&n&&(n.removeChild(n.children[0]),e.wrapper.children[0].content=t.shape.content,n.appendChild(Object(x["l"])(e.wrapper.children[0],!1)));e.wrapper.children[0].scale=t.shape.scale?t.shape.scale:e.wrapper.children[0].scale}else if("HTML"===e.shape.type){var r=void 0;for(o=0;o<i.views.length;o++)r=Object(x["m"])(e.wrapper.children[0].id+"_html_element",i.views[o]),r&&(r.removeChild(r.children[0]),e.wrapper.children[0].content=t.shape.content,r.appendChild(Object(x["l"])(e.wrapper.children[0],!0)))}else if("Flow"===e.shape.type&&void 0!==t.shape.shape){e.shape.shape=t.shape.shape;var a=e.shape.shape,s=Object(b["a"])(a.toString());e.wrapper.children[0].data=s}else if("UmlActivity"===e.shape.type&&void 0!==t.shape.shape)St(e,t);else if(void 0!==t.shape.cornerRadius)e.wrapper.children[0].cornerRadius=t.shape.cornerRadius;else if(void 0!==t.shape.shape){e.shape.shape=t.shape.shape;a=e.shape.shape;var c=Object(v["a"])(a.toString());e.wrapper.children[0].data=c}e.wrapper.children[0].canMeasurePath=!0}function St(t,e){t.shape.shape=e.shape.shape;var i=t.shape.shape,n=A(i.toString());"InitialNode"===t.shape.shape?t.wrapper.children[0].style.fill="black":"ForkNode"===t.shape.shape||"JoinNode"===t.shape.shape?t.wrapper.children[0].style.fill="black":"FinalNode"===t.shape.shape&&(t instanceof m["q"]&&(t.wrapper=Ct(t)),t.wrapper.children[0].data=n)}function Ct(t){var e=new L["a"];e.style.fill="transparent";var i="M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25 C 50 38.79 38.78 50 25 50",n=new l["a"];n.data=i,n.id=t.id+"_0_finalNode",n.horizontalAlignment="Center",n.verticalAlignment="Center",n.relativeMode="Object",n.style.strokeColor=t.style.strokeColor,n.style.strokeWidth=t.style.strokeWidth;var o=new l["a"];return o.data=i,o.id=t.id+"_1_finalNode",o.horizontalAlignment="Center",o.verticalAlignment="Center",o.relativeMode="Object",o.style.fill=t.style.fill,o.style.strokeColor=t.style.strokeColor,o.style.strokeWidth=t.style.strokeWidth,e.children=[n,o],e.children[0].width=t.width,e.children[0].height=t.height,e.children[1].height=t.height/1.5,e.children[1].width=t.width/1.5,e.style.strokeWidth=0,e.style.strokeColor="transparent",e}function Pt(t,e,i){var n=A(i.shape.shape);switch(t.data=n,e=t,i.shape.shape){case"StructuredNode":if(i.annotations)for(var o=0;o<i.annotations.length;o++)i.annotations[o].content="<<"+i.annotations[o].content+">>";e=t;break;case"FinalNode":e=Ct(i);break}return e}function Tt(t){Object(x["D"])(t+"_linear"),Object(x["D"])(t+"_radial")}function It(t,e){var i=t.indexOf(e);i>=0&&t.splice(i,1)}function At(t,e){var i,n,o;if(t.intermediatePoints=e,t.updateSegmentElement(t,e,t.wrapper.children[0]),t.sourcePoint,n=t.sourceDecorator,"Bezier"===t.type){var r=t.segments[0],a=t.segments[t.segments.length-1];i=[h["a"].isEmptyPoint(a.point2)?a.bezierPoint2:a.point2,h["a"].isEmptyPoint(r.point1)?r.bezierPoint1:r.point1]}else i=t.intermediatePoints;e=t.clipDecorators(t,e);var s=t.wrapper.children[0];s.canMeasurePath=!0,s=t.wrapper.children[1],t.updateDecoratorElement(s,e[0],i[1],n),t.targetPoint,o=t.targetDecorator,s=t.wrapper.children[2],t.updateDecoratorElement(s,e[e.length-1],i[i.length-2],o),t.updateShapeElement(t)}function zt(t,e,i){var n,o=t.wrapper,a=o.bounds,s=e.offset,c=e.size/i.scale,h=e.margin,d=o.offsetX-o.actualSize.width*o.pivot.x,l=o.offsetY-o.actualSize.height*o.pivot.y;if(n={x:0,y:0},t.nodes.length>0){switch(e.side){case"Top":n.x+=d+a.width*s,n.y+=l-c;break;case"Bottom":n.x+=d+s*a.width,n.y+=l+o.actualSize.height+c;break;case"Left":n.x+=d-c,n.y+=l+s*a.height;break;case"Right":n.x+=d+o.actualSize.width+c,n.y+=l+s*a.height;break}n.x+=(h.left-h.right)/i.scale+c/2*("Center"===e.horizontalAlignment?0:"Right"===e.horizontalAlignment?-1:1),n.y+=(h.top-h.bottom)/i.scale+c/2*("Center"===e.verticalAlignment?0:"Top"===e.verticalAlignment?-1:1)}else if(t.connectors.length>0){var p=t.connectors[0],u={offset:s},g=ot(p.intermediatePoints,u,a),f=g.index;n=g.point;var m=nt(p.intermediatePoints,u,a),y=(p.intermediatePoints,m.angle),v=Object(r["a"])();Object(r["c"])(v,-y,p.intermediatePoints[f].x,p.intermediatePoints[f].y),n=Object(r["e"])(v,n),n.x+=h.left-h.right+c/2*("Center"===e.horizontalAlignment?0:"Right"===e.horizontalAlignment?-1:1),n.y+=h.top-h.bottom+c/2*("Center"===e.verticalAlignment?0:"Top"===e.verticalAlignment?-1:1),v=Object(r["a"])(),Object(r["c"])(v,y,p.intermediatePoints[f].x,p.intermediatePoints[f].y),n=Object(r["e"])(v,n)}if(0!==o.rotateAngle||0!==o.parentTransform){v=Object(r["a"])();Object(r["c"])(v,o.rotateAngle+o.parentTransform,o.offsetX,o.offsetY),n=Object(r["e"])(v,n)}return n}function Lt(t,e,i,n){if(n.annotation){if(Object(T["y"])(n.annotation))return!0}else if(d["p"][e]&t&&d["r"][e]&i)return!0;return!1}function Et(t,e){return!!(d["p"][e]&t)}function Dt(t,e){return t.visibility&e}function kt(t,e){var i;if("Text"===t.shape.type)i=t.shape;else{var n=e.split("_");e=n[n.length-1];for(var o=0;o<t.annotations.length;o++)e===t.annotations[o].id&&(i=t.annotations[o])}return i}function Rt(t,e){var i={},n=0;if(t.ports){var o=t.ports;for(n=0;n<o.length;n++)e?o[n].constraints&d["l"].InConnect&&(i=o[n]):o[n].constraints&d["l"].OutConnect&&(i=o[n])}return i}function Mt(t,e,i){for(var n=i?t.annotations:t.ports,o=0;o<n.length;o++)if(n[o].id===e)return o.toString();return null}function Bt(t,e){var i;for(i=0;i<t.length;i++)if(e===t[i].id)return!0;return!1}function Ht(t,e,i,o,r,a){for(var s,c=t.children,h=0;h<c.length;h++)if(s=o[c[h]],s)if(s.children)Ht(s,e,i,o,r,a);else if(s.offsetX-=e,s.offsetY-=i,!r){var d=void 0,l=void 0;o[s.id]=s,l=s.initContainer(),l.children||(l.children=[]),d=s.init(a),l.children.push(d),l.measure(new n["a"](s.width,s.height)),l.arrange(l.desiredSize)}}function Nt(t,e,i){if(0===i.length)i.push(t);else if(1===i.length)i[0][e]>t[e]?i.splice(0,0,t):i.push(t);else if(i.length>1){var n=0,o=i.length-1,r=Math.floor((n+o)/2);while(r!==n)i[r][e]<t[e]?(n=r,r=Math.floor((n+o)/2)):i[r][e]>t[e]&&(o=r,r=Math.floor((n+o)/2));i[o][e]<t[e]?i.push(t):i[n][e]>t[e]?i.splice(n,0,t):i[n][e]<t[e]&&i[o][e]>t[e]&&i.splice(o,0,t)}}function Wt(t){var e=document.getElementById(t.diagramId),i="ej2_instances",n=e[i][0].nodes;void 0===n&&(n=Xt(e[i][0]));for(var o="length",r=0;n&&r<n[o];r++)if(n[r].id===t.nodeId)return _t(n[r],t);var a=e[i][0].connectors;for(r=0;a&&r<a[o];r++)if(a[r].id===t.nodeId)return _t(a[r],t);var s=e[i][0].enterObject;return s&&(s["id"]===t.nodeId||s["children"])?s["children"]&&U(s,"HTML",e[i][0].enterTable)?e[i][0].enterTable[t.nodeId]:s:null}function _t(t,e){var i,n=t.annotations,o="length";for(i=0;n&&i<n[o];i++)if(e.annotationId&&n[i].id===e.annotationId)return n[i];return t}function Xt(t){for(var e=[],i=0;i<t.palettes.length;i++)for(var n=t.palettes[i].symbols,o=0;o<n.length;o++)n[o]instanceof m["q"]&&e.push(n[o]);return e}function Yt(t,e,i,n){return Object(R["D"])()&&(t={cause:t.cause,state:i,type:n,cancel:!1,element:Ft(e)===y["b"]?{connector:$t(e)}:{node:$t(e)}}),t}function Vt(t,e){if(Object(R["D"])()){var i=Ft(t.source)===y["b"],n=$t(t.source),o=$t(this.currentTarget);e={element:i?{connector:n}:{node:n},target:i?{connector:o}:{node:o},position:this.currentPosition,cancel:!1}}return e}function Ut(t,e,i,n,o,a,s,c){var h={x:0,y:0},d=Object(r["a"])();switch(Object(r["c"])(d,o,a,s),c.x){case 0:switch(c.y){case 0:h=Object(r["e"])(d,{x:t,y:e});break;case.5:h=Object(r["e"])(d,{x:t,y:e+n/2});break;case 1:h=Object(r["e"])(d,{x:t,y:e+n});break}break;case.5:switch(c.y){case 0:h=Object(r["e"])(d,{x:t+i/2,y:e});break;case.5:h=Object(r["e"])(d,{x:t+i/2,y:e+n/2});break;case 1:h=Object(r["e"])(d,{x:t+i/2,y:e+n});break}break;case 1:switch(c.y){case 0:h=Object(r["e"])(d,{x:t+i,y:e});break;case.5:h=Object(r["e"])(d,{x:t+i,y:e+n/2});break;case 1:h=Object(r["e"])(d,{x:t+i,y:e+n});break}break}return{x:h.x,y:h.y}}i.d(e,"i",(function(){return M})),i.d(e,"m",(function(){return B})),i.d(e,"o",(function(){return H})),i.d(e,"O",(function(){return N})),i.d(e,"P",(function(){return W})),i.d(e,"N",(function(){return _})),i.d(e,"H",(function(){return V})),i.d(e,"S",(function(){return F})),i.d(e,"U",(function(){return G})),i.d(e,"I",(function(){return q})),i.d(e,"G",(function(){return Z})),i.d(e,"F",(function(){return Q})),i.d(e,"A",(function(){return J})),i.d(e,"B",(function(){return $})),i.d(e,"Q",(function(){return it})),i.d(e,"r",(function(){return nt})),i.d(e,"y",(function(){return ot})),i.d(e,"b",(function(){return at})),i.d(e,"J",(function(){return ct})),i.d(e,"M",(function(){return pt})),i.d(e,"j",(function(){return mt})),i.d(e,"Y",(function(){return vt})),i.d(e,"T",(function(){return wt})),i.d(e,"X",(function(){return xt})),i.d(e,"C",(function(){return Pt})),i.d(e,"K",(function(){return Tt})),i.d(e,"L",(function(){return It})),i.d(e,"R",(function(){return At})),i.d(e,"D",(function(){return zt})),i.d(e,"d",(function(){return Lt})),i.d(e,"e",(function(){return Et})),i.d(e,"g",(function(){return Dt})),i.d(e,"k",(function(){return kt})),i.d(e,"v",(function(){return Rt})),i.d(e,"n",(function(){return Mt})),i.d(e,"w",(function(){return Bt})),i.d(e,"c",(function(){return Ht})),i.d(e,"E",(function(){return Nt})),i.d(e,"u",(function(){return Wt})),i.d(e,"s",(function(){return Yt})),i.d(e,"t",(function(){return Vt})),i.d(e,"z",(function(){return Ut})),i.d(e,"x",(function(){return Ft})),i.d(e,"q",(function(){return Gt})),i.d(e,"W",(function(){return qt})),i.d(e,"a",(function(){return Zt})),i.d(e,"V",(function(){return Qt})),i.d(e,"p",(function(){return Kt})),i.d(e,"l",(function(){return Jt})),i.d(e,"h",(function(){return $t})),i.d(e,"f",(function(){return te}));var Ft=function(t){return t&&(t=void 0!==t.sourceID||void 0!==t.sourcePoint||void 0!==t.targetID||void 0!==t.targetPoint||void 0!==t.type?y["b"]:m["q"]),t},Gt=function(t){if(!t.sourceID&&!t.targetID){var e={x:t.sourcePoint.x,y:t.sourcePoint.y},i={x:t.targetPoint.x,y:t.targetPoint.y};"Horizontal"===t.flip?(t.sourcePoint.x=i.x,t.targetPoint.x=e.x):"Vertical"===t.flip?(t.sourcePoint.y=i.y,t.targetPoint.y=e.y):"Both"===t.flip&&(t.sourcePoint=i,t.targetPoint=e)}},qt=function(t,e,i){var n=i.offset.x,o=i.offset.y;return"Horizontal"===e?(n=1-i.offset.x,o=i.offset.y):"Vertical"===e?(n=i.offset.x,o=1-i.offset.y):"Both"===e&&(n=1-i.offset.x,o=1-i.offset.y),t.setOffsetWithRespectToBounds(n,o,"Fraction"),t},Zt=function(t,e,i,o,r){if(t.hasChildren())for(var a=0,c=t.children;a<c.length;a++){var h=c[a],d=e-h.offsetX+e,l=i-h.offsetY+i;"Horizontal"!==r&&"Both"!==r||(h.offsetX=d,h.flipOffset.x=d-h.desiredSize.width/2),"Vertical"!==r&&"Both"!==r||(h.offsetY=l,h.flipOffset.y=l-h.desiredSize.height/2),(h instanceof L["a"]||h instanceof s["a"])&&Zt(h,e,i,o,r),h.measure(new n["a"](h.bounds.width,h.bounds.height)),h.arrange(h.desiredSize);var p=o.nameTable[h.id];p&&o.updateConnectorEdges(p)}},Qt=function(t,e){for(var i,n=new l["a"],o=0;o<t.length-1;o++)i=Kt(t[o],t[o+1]),n.data=i[0],n.id=e.id+"_"+e.shape.sequence,n.offsetX=i[1].x,n.offsetY=i[1].y,n.rotateAngle=45,n.transform=d["s"].Self;return n},Kt=function(t,e){var i={x:t.x,y:t.y},n=Jt(t,e);n=Math.min(30,n/2);var o=Object(O["a"])(t,e),r=h["a"].transform({x:i.x,y:i.y},o,n),a=h["a"].transform({x:r.x,y:r.y},o,-12),s=h["a"].transform({x:a.x,y:a.y},o,24),c="M"+a.x+" "+a.y+" L"+s.x+" "+s.y;return[c,r]},Jt=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};function $t(t){return Object(R["D"])()&&(t=Object(j["b"])(t)),t}function te(){return!(!navigator.platform.indexOf("Mac")||"Safari"!==R["c"].info.name)}},"289c":function(t,e,i){"use strict";var n=i("db21"),o=i("19be"),r=i("a026"),a=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.render=function(){},e=s([Object(n["b"])({})],e),e}(r["default"]),h={name:"e-layers",install:function(t){t.component(h.name,c)}},d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.render=function(){},e=s([Object(n["b"])({})],e),e}(r["default"]),l={name:"e-layer",install:function(t){t.component(l.name,d)}},p=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),u=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.render=function(){},e=u([Object(n["b"])({})],e),e}(r["default"]),f={name:"e-cursormaps",install:function(t){t.component(f.name,g)}},m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.render=function(){},e=u([Object(n["b"])({})],e),e}(r["default"]),y={name:"e-cursormap",install:function(t){t.component(y.name,m)}},v=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),b=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.render=function(){},e=b([Object(n["b"])({})],e),e}(r["default"]),O={name:"e-connector-annotations",install:function(t){t.component(O.name,w)}},x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.render=function(){},e=b([Object(n["b"])({})],e),e}(r["default"]),j={name:"e-connector-annotation",install:function(t){t.component(j.name,x)}},S=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),C=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return S(e,t),e.prototype.render=function(){},e=C([Object(n["b"])({})],e),e}(r["default"]),T={name:"e-connectors",install:function(t){t.component(T.name,P)}},I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return S(e,t),e.prototype.render=function(){},e=C([Object(n["b"])({})],e),e}(r["default"]),A={name:"e-connector",install:function(t){t.component(A.name,I)}},z=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),L=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return z(e,t),e.prototype.render=function(){},e=L([Object(n["b"])({})],e),e}(r["default"]),D={name:"e-node-annotations",install:function(t){t.component(D.name,E)}},k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return z(e,t),e.prototype.render=function(){},e=L([Object(n["b"])({})],e),e}(r["default"]),R={name:"e-node-annotation",install:function(t){t.component(R.name,k)}},M=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),B=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.render=function(){},e=B([Object(n["b"])({})],e),e}(r["default"]),N={name:"e-node-ports",install:function(t){t.component(N.name,H)}},W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.render=function(){},e=B([Object(n["b"])({})],e),e}(r["default"]),_={name:"e-node-port",install:function(t){t.component(_.name,W)}},X=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Y=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return X(e,t),e.prototype.render=function(){},e=Y([Object(n["b"])({})],e),e}(r["default"]),U={name:"e-nodes",install:function(t){t.component(U.name,V)}},F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return X(e,t),e.prototype.render=function(){},e=Y([Object(n["b"])({})],e),e}(r["default"]),G={name:"e-node",install:function(t){t.component(G.name,F)}};i.d(e,"a",(function(){return $}));var q=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Z=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},Q=["addInfo","backgroundColor","bridgeDirection","commandManager","connectorDefaults","connectors","constraints","contextMenuSettings","customCursor","dataSourceSettings","drawingObject","enablePersistence","enableRtl","getConnectorDefaults","getCustomCursor","getCustomProperty","getCustomTool","getDescription","getNodeDefaults","height","historyManager","layers","layout","locale","mode","nodeDefaults","nodes","pageSettings","rulerSettings","scrollSettings","selectedItems","serializationSettings","setNodeTemplate","snapSettings","tool","tooltip","updateSelection","width","animationComplete","click","collectionChange","commandExecute","connectionChange","contextMenuBeforeItemRender","contextMenuClick","contextMenuOpen","created","dataLoaded","doubleClick","dragEnter","dragLeave","dragOver","drop","expandStateChange","historyChange","historyStateChange","mouseEnter","mouseLeave","mouseOver","onImageLoad","onUserHandleMouseDown","onUserHandleMouseEnter","onUserHandleMouseLeave","onUserHandleMouseUp","positionChange","propertyChange","rotateChange","scrollChange","segmentCollectionChange","selectionChange","sizeChange","sourcePointChange","targetPointChange","textEdit"],K=[],J=function(t){function e(){var e=t.call(this)||this;return e.propKeys=Q,e.models=K,e.hasChildDirective=!0,e.hasInjectedModules=!0,e.tagMapper={"e-layers":"e-layer","e-cursormaps":"e-cursormap","e-connectors":{"e-connector":{"e-connector-annotations":"e-connector-annotation"}},"e-nodes":{"e-node":{"e-node-annotations":"e-node-annotation","e-node-ports":"e-node-port"}}},e.tagNameMapper={"e-cursormaps":"e-customCursor","e-connector-annotations":"e-annotations","e-node-annotations":"e-annotations","e-node-ports":"e-ports"},e.ej2Instances=new o["a"]({}),e.bindProperties(),e.ej2Instances._setProperties=e.ej2Instances.setProperties,e.ej2Instances.setProperties=e.setProperties,e}return q(e,t),e.prototype.setProperties=function(t,e){var i=this;this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(t,e),t&&this.models&&this.models.length&&Object.keys(t).map((function(e){i.models.map((function(n){e!==n||/datasource/i.test(e)||i.$emit("update:"+e,t[e])}))}))},e.prototype.render=function(t){return t("div",this.$slots.default)},e.prototype.add=function(t,e){return this.ej2Instances.add(t,e)},e.prototype.addConnector=function(t){return this.ej2Instances.addConnector(t)},e.prototype.addConnectorLabels=function(t,e){return this.ej2Instances.addConnectorLabels(t,e)},e.prototype.addConstraints=function(t,e){return this.ej2Instances.addConstraints(t,e)},e.prototype.addHistoryEntry=function(t){return this.ej2Instances.addHistoryEntry(t)},e.prototype.addLabels=function(t,e){return this.ej2Instances.addLabels(t,e)},e.prototype.addLanes=function(t,e,i){return this.ej2Instances.addLanes(t,e,i)},e.prototype.addLayer=function(t,e){return this.ej2Instances.addLayer(t,e)},e.prototype.addNode=function(t,e){return this.ej2Instances.addNode(t,e)},e.prototype.addNodeLabels=function(t,e){return this.ej2Instances.addNodeLabels(t,e)},e.prototype.addNodeToLane=function(t,e,i){return this.ej2Instances.addNodeToLane(t,e,i)},e.prototype.addPhases=function(t,e){return this.ej2Instances.addPhases(t,e)},e.prototype.addPorts=function(t,e){return this.ej2Instances.addPorts(t,e)},e.prototype.addProcess=function(t,e){return this.ej2Instances.addProcess(t,e)},e.prototype.addTextAnnotation=function(t,e){return this.ej2Instances.addTextAnnotation(t,e)},e.prototype.align=function(t,e,i){return this.ej2Instances.align(t,e,i)},e.prototype.bringIntoView=function(t){return this.ej2Instances.bringIntoView(t)},e.prototype.bringLayerForward=function(t){return this.ej2Instances.bringLayerForward(t)},e.prototype.bringToCenter=function(t){return this.ej2Instances.bringToCenter(t)},e.prototype.bringToFront=function(){return this.ej2Instances.bringToFront()},e.prototype.clear=function(){return this.ej2Instances.clear()},e.prototype.clearHistory=function(){return this.ej2Instances.clearHistory()},e.prototype.clearSelection=function(){return this.ej2Instances.clearSelection()},e.prototype.cloneLayer=function(t){return this.ej2Instances.cloneLayer(t)},e.prototype.copy=function(){return this.ej2Instances.copy()},e.prototype.cut=function(){return this.ej2Instances.cut()},e.prototype.distribute=function(t,e){return this.ej2Instances.distribute(t,e)},e.prototype.doLayout=function(){return this.ej2Instances.doLayout()},e.prototype.drag=function(t,e,i){return this.ej2Instances.drag(t,e,i)},e.prototype.dragSourceEnd=function(t,e,i){return this.ej2Instances.dragSourceEnd(t,e,i)},e.prototype.dragTargetEnd=function(t,e,i){return this.ej2Instances.dragTargetEnd(t,e,i)},e.prototype.endGroupAction=function(){return this.ej2Instances.endGroupAction()},e.prototype.exportDiagram=function(t){return this.ej2Instances.exportDiagram(t)},e.prototype.exportImage=function(t,e){return this.ej2Instances.exportImage(t,e)},e.prototype.findElementUnderMouse=function(t,e){return this.ej2Instances.findElementUnderMouse(t,e)},e.prototype.findObjectUnderMouse=function(t,e,i){return this.ej2Instances.findObjectUnderMouse(t,e,i)},e.prototype.findObjectsUnderMouse=function(t,e){return this.ej2Instances.findObjectsUnderMouse(t,e)},e.prototype.findTargetObjectUnderMouse=function(t,e,i,n,o){return this.ej2Instances.findTargetObjectUnderMouse(t,e,i,n,o)},e.prototype.fitToPage=function(t){return this.ej2Instances.fitToPage(t)},e.prototype.getActiveLayer=function(){return this.ej2Instances.getActiveLayer()},e.prototype.getConnectorObject=function(t){return this.ej2Instances.getConnectorObject(t)},e.prototype.getCursor=function(t,e){return this.ej2Instances.getCursor(t,e)},e.prototype.getDiagramBounds=function(){return this.ej2Instances.getDiagramBounds()},e.prototype.getDiagramContent=function(t){return this.ej2Instances.getDiagramContent(t)},e.prototype.getNodeObject=function(t){return this.ej2Instances.getNodeObject(t)},e.prototype.getObject=function(t){return this.ej2Instances.getObject(t)},e.prototype.getTool=function(t){return this.ej2Instances.getTool(t)},e.prototype.group=function(){return this.ej2Instances.group()},e.prototype.hideTooltip=function(t){return this.ej2Instances.hideTooltip(t)},e.prototype.insertData=function(t){return this.ej2Instances.insertData(t)},e.prototype.loadDiagram=function(t){return this.ej2Instances.loadDiagram(t)},e.prototype.moveForward=function(){return this.ej2Instances.moveForward()},e.prototype.moveObjects=function(t,e){return this.ej2Instances.moveObjects(t,e)},e.prototype.moveObjectsUp=function(t,e){return this.ej2Instances.moveObjectsUp(t,e)},e.prototype.nudge=function(t,e,i){return this.ej2Instances.nudge(t,e,i)},e.prototype.pan=function(t,e,i){return this.ej2Instances.pan(t,e,i)},e.prototype.paste=function(t){return this.ej2Instances.paste(t)},e.prototype.print=function(t){return this.ej2Instances.print(t)},e.prototype.printImage=function(t,e){return this.ej2Instances.printImage(t,e)},e.prototype.redo=function(){return this.ej2Instances.redo()},e.prototype.remove=function(t){return this.ej2Instances.remove(t)},e.prototype.removeConstraints=function(t,e){return this.ej2Instances.removeConstraints(t,e)},e.prototype.removeData=function(t){return this.ej2Instances.removeData(t)},e.prototype.removeLabels=function(t,e){return this.ej2Instances.removeLabels(t,e)},e.prototype.removeLane=function(t,e){return this.ej2Instances.removeLane(t,e)},e.prototype.removeLayer=function(t){return this.ej2Instances.removeLayer(t)},e.prototype.removePhase=function(t,e){return this.ej2Instances.removePhase(t,e)},e.prototype.removePorts=function(t,e){return this.ej2Instances.removePorts(t,e)},e.prototype.removeProcess=function(t){return this.ej2Instances.removeProcess(t)},e.prototype.reset=function(){return this.ej2Instances.reset()},e.prototype.rotate=function(t,e,i){return this.ej2Instances.rotate(t,e,i)},e.prototype.sameSize=function(t,e){return this.ej2Instances.sameSize(t,e)},e.prototype.saveDiagram=function(){return this.ej2Instances.saveDiagram()},e.prototype.scale=function(t,e,i,n){return this.ej2Instances.scale(t,e,i,n)},e.prototype.select=function(t,e){return this.ej2Instances.select(t,e)},e.prototype.selectAll=function(){return this.ej2Instances.selectAll()},e.prototype.sendBackward=function(){return this.ej2Instances.sendBackward()},e.prototype.sendLayerBackward=function(t){return this.ej2Instances.sendLayerBackward(t)},e.prototype.sendToBack=function(){return this.ej2Instances.sendToBack()},e.prototype.setActiveLayer=function(t){return this.ej2Instances.setActiveLayer(t)},e.prototype.setStackLimit=function(t){return this.ej2Instances.setStackLimit(t)},e.prototype.showTooltip=function(t){return this.ej2Instances.showTooltip(t)},e.prototype.startGroupAction=function(){return this.ej2Instances.startGroupAction()},e.prototype.startTextEdit=function(t,e){return this.ej2Instances.startTextEdit(t,e)},e.prototype.unGroup=function(){return this.ej2Instances.unGroup()},e.prototype.unSelect=function(t){return this.ej2Instances.unSelect(t)},e.prototype.undo=function(){return this.ej2Instances.undo()},e.prototype.updateData=function(t){return this.ej2Instances.updateData(t)},e.prototype.updateViewPort=function(){return this.ej2Instances.updateViewPort()},e.prototype.zoom=function(t,e){return this.ej2Instances.zoom(t,e)},e.prototype.zoomTo=function(t){return this.ej2Instances.zoomTo(t)},e=Z([Object(n["b"])({props:Q})],e),e}(n["a"]),$={name:"ejs-diagram",install:function(t){t.component($.name,J),t.component(l.name,d),t.component(h.name,c),t.component(y.name,m),t.component(f.name,g),t.component(A.name,I),t.component(T.name,P),t.component(j.name,x),t.component(O.name,w),t.component(G.name,F),t.component(U.name,V),t.component(R.name,k),t.component(D.name,E),t.component(_.name,W),t.component(N.name,H)}}},"289d":function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i("bccc"),o=i("d0e6"),r=i("fd65"),a=i("95f7"),s=i("be2f"),c=i("1ce4"),h=function(){function t(){this.isAnimation=!1}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"OrganizationalChart"},t.prototype.updateLayout=function(t,e,i,n,o,r){var s={type:i.type,nameTable:e,anchorX:0,anchorY:0,firstLevelNodes:[],centerNode:null,levels:[],maxLevel:0,graphNodes:{},orientation:i.orientation,horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,verticalAlignment:i.verticalAlignment,horizontalAlignment:i.horizontalAlignment,fixedNode:i.fixedNode,getLayoutInfo:Object(a["f"])(i.getLayoutInfo),layoutInfo:i.layoutInfo,margin:i.margin,bounds:i.bounds,objects:[],root:i.root};return this.doLayout(s,t,n,o,r),s},t.prototype.doLayout=function(t,e,i,n,o){var r,a,s={},c=[];for(t.nameTable[t.root]&&t.firstLevelNodes.push(t.nameTable[t.root]),a=0;a<e.length;a++)if(r=e[a],!r.excludeFromLayout&&(s=t.graphNodes[r.id]=this.setUpLayoutInfo(t,r),s.tree.hasSubTree=!1,!t.nameTable[t.root]&&(!r.inEdges||!r.inEdges.length))){var h="parentId",d="processId";r[h]||r[d]||c.push(r),r.data&&String(r.data[n])===t.root&&t.firstLevelNodes.push(r)}for(0===t.firstLevelNodes.length&&(t.firstLevelNodes=c),a=0;a<t.firstLevelNodes.length;a++)r=t.firstLevelNodes[a],this.updateEdges(t,r,1,o,e);if(t.firstLevelNodes.length>0){t.rootNode=t.firstLevelNodes[0];var l=0,p=0,u=void 0,g=void 0,f=void 0,m=void 0,y=void 0;for(a=0;a<t.firstLevelNodes.length;a++){y=this.updateTree(t,l,p,t.firstLevelNodes[a],0,t.firstLevelNodes[a-1]);var v=t.graphNodes[t.firstLevelNodes[a].id];y.y=Math.min(y.y,v.y),y.x=Math.min(y.x,v.x),-1!==t.orientation.indexOf("Left")?p=y.right+t.horizontalSpacing:l=y.right+t.horizontalSpacing,0===a?(u=y.x,m=y.y,f=y.right,g=y.bottom):(u=Math.min(u,y.x),m=Math.min(m,y.y),f=Math.max(f,y.right),g=Math.max(g,y.bottom))}for(this.updateAnchor(t,{x:u,y:m,right:f,bottom:g},i),a=0;a<t.firstLevelNodes.length;a++)this.updateNodes(t,t.firstLevelNodes[a],0);for(a=0;a<t.firstLevelNodes.length;a++)this.updateConnectors(t,t.firstLevelNodes[a],1)}},t.prototype.getBounds=function(t){var e=t.offsetX-t.actualSize.width*t.pivot.x,i=t.offsetY-t.actualSize.height*t.pivot.y;return new o["a"](e,i,t.actualSize.width,t.actualSize.height)},t.prototype.updateTree=function(t,e,i,n,o,r,a){var s,c,h,d,l={};if(s=this.getDimensions(t,n,e,i,o),l=t.graphNodes[n.id],t.maxLevel=Math.max(t.maxLevel,o),c=o,d=this.hasChild(t,n),d||l.tree.assistants.length){var p=void 0,u=void 0,g=void 0,f=void 0,m=void 0,y=void 0,v=void 0;v=s.y+s.height+t.verticalSpacing,l.tree.assistants.length&&(h=this.setDepthSpaceForAssitants(t,n,v,s.height,o,t.verticalSpacing),c=h.level,v=h.bottom),l.tree.assistants.length||"Horizontal"===l.tree.orientation||(v=s.y+s.height+t.verticalSpacing/2),l.tree.children.length&&(p="Horizontal"!==l.tree.orientation||"Balanced"===l.tree.type&&1!==l.tree.children.length?"Balanced"===l.tree.type?this.updateHorizontalTreeWithMultipleRows(t,n,r,s.x,v,c):this.updateVerticalTree(t,n,s.x,v,c,a):this.updateHorizontalTree(t,n,r,s.x,v,c)),l.y&&l.y>s.y||(l.y=s.y),l.mid&&(e=l.mid),l.tree.assistants.length&&(y=void 0!==e?e:s.x,m=this.setBreadthSpaceForAssistants(t,n,s,y,v,o),d||(g=p=m,e=(g.x+g.right)/2-s.width/2,p=g),f=m?m.canMoveBy:void 0),l.x=e,l.translate||(l.treeWidth=p.right-p.x),u={x:e,y:s.y,right:e+s.width,bottom:s.y+s.height};var b={layout:t,shape:n,shapeBounds:u,treeBounds:p,dim:s,level:o};return this.translateSubTree(b,f,void 0!==r,a),l.firstChild&&"string"!==typeof l.firstChild&&(l.firstChild.x+=l.subTreeTranslation),n.treeBounds=p,p}return n.treeBounds=this.updateLeafNode(t,n,r,s,o,a),n.treeBounds},t.prototype.updateLeafNode=function(t,e,i,n,o,r){var a,s=t.graphNodes[e.id];s.x=n.x,s.y&&s.y>n.y||(s.y=n.y,s.maxLevel=Math.max(o,s.maxLevel||0)),a={x:n.x,y:n.y,right:n.x+n.width,bottom:n.y+n.height},s.maxLevel=Math.max(s.maxLevel||0,o);var c={layout:t,shape:e,shapeBounds:a,treeBounds:a,dim:n,level:o};return this.translateSubTree(c,void 0,void 0!==i,r),{x:s.x,y:s.y,right:s.x+n.width,bottom:s.y+n.height}},t.prototype.setUpLayoutInfo=function(t,e){var i={subTreeTranslation:0};return"OrganizationalChart"===t.type?i.tree={orientation:"Vertical",type:"Alternate",offset:20,enableRouting:!0}:i.tree={orientation:"Horizontal",type:"Center",enableRouting:!0},i.tree.children=[],i.tree.assistants=[],i.tree.level=0,i.translate=!0,i},t.prototype.translateSubTree=function(t,e,i,n){var o=t.layout,r=t.shape,a=t.shapeBounds,s=t.treeBounds,c=t.level,h=t.dim,d=o.graphNodes[r.id],l=o.nameTable[d.firstChild?d.firstChild.child:d.tree.children[0]],p=l?o.graphNodes[l.id]:null,u=this.hasChild(o,r),g=this.findIntersectingLevels(o,a,c,d.actualLevel),f=this.findIntersectingLevels(o,s,c,d.actualLevel),m=[];g.length&&d.translate?(d.intersect=g,this.spaceLeftFromPrevSubTree(o,r,a),d.canMoveBy=d.diff,void 0!==e&&(d.canMoveBy=Math.min(e,d.canMoveBy)),l&&void 0!==p.canMoveBy&&(p.canMoveBy>=d.canMoveBy&&(d.translated=!0),d.canMoveBy=Math.min(d.canMoveBy,p.canMoveBy)),i&&(d.x-=d.canMoveBy,d.subTreeTranslation-=d.canMoveBy,u&&(this.shiftSubordinates(o,f,d.canMoveBy),s.x=Math.min(s.x,d.x),s.right=Math.max(s.right,d.x+h.width),s.bottom=Math.max(s.bottom,d.y+h.height),s.x-=d.canMoveBy,s.right-=d.canMoveBy),l&&p.canMoveBy>d.canMoveBy?d.canMoveBy=p.canMoveBy-d.canMoveBy:l&&void 0!==d.canMoveBy&&(d.canMoveBy=0))):(u&&(s.x=Math.min(s.x,a.x),s.right=Math.max(s.right,a.x+h.width),s.bottom=Math.max(s.bottom,d.y+h.height)),d.translate||(d.canMoveBy=0,d.subTreeTranslation=0)),n||(a={x:d.x,y:h.y,right:d.x+h.width,bottom:h.y+h.height},m.push({rBounds:a}),this.updateRearBounds(o,r,m,c))},t.prototype.updateRearBounds=function(t,e,i,n,o){var r,a,s,c,h,d,l=!0,p={};if(e&&(p=t.graphNodes[e.id],o=p.intersect,l=!p.tree.children.length&&!p.tree.assistants.length),c=i[0].rBounds,h=i[i.length-1].rBounds,o&&o.length){for(r=t.levels[o[0]].rBounds,d=r.bottom,r.y<c.y&&(r.bottom=c.y,i.splice(0,0,{rBounds:r})),d>h.bottom?i.push({rBounds:{x:r.x,right:r.right,y:c.bottom,bottom:d}}):(r=t.levels[o[o.length-1]].rBounds,l&&r.bottom>h.bottom&&(r.y=h.bottom,i.push({rBounds:r}))),a=o[0],s=i.length-1;s>=0;s--)t.levels.splice(a,0,i[s]);a+=i.length,t.levels.splice(a,o.length)}else for(a=this.findLevel(t,i[i.length-1].rBounds,n),s=i.length-1;s>=0;s--)t.levels.splice(a,0,i[s])},t.prototype.shiftSubordinates=function(t,e,i){var n;if(0!==i)for(n=0;n<e.length;n++)t.levels[e[n]].rBounds&&(t.levels[e[n]].rBounds.x-=i,t.levels[e[n]].rBounds.right-=i)},t.prototype.setDepthSpaceForAssitants=function(t,e,i,n,o,r){var a,s,c,h,d=t.graphNodes[e.id],l={};for(h=i,s=0;s<d.tree.assistants.length;s++)l=t.graphNodes[d.tree.assistants[s]],l&&(l.tree.children=l.tree.assistants=[],l.y=i,c=t.nameTable[d.tree.assistants[s]],a=c.actualSize.height,-1!==t.orientation.indexOf("Left")&&(a=c.actualSize.width),h=i+a+r/2,t.maxLevel=o+1,s%2===1&&s!==d.tree.assistants.length-1&&(i=h,o++));return{level:t.maxLevel,bottom:i+a+r}},t.prototype.setBreadthSpaceForAssistants=function(t,e,i,n,o,r){var a,s,c,h,d,l,p,u={},g=t.graphNodes[e.id],f=r,m={x:0,y:0,right:0,bottom:0};for(h=0;h<g.tree.assistants.length;h++)u=t.graphNodes[g.tree.assistants[h]],u&&(c=t.nameTable[g.tree.assistants[h]],a=c.actualSize.width,-1!==t.orientation.indexOf("Left")&&(a=c.actualSize.height),d=h%2===0?n+i.width/2-20-a:n+i.width/2+20,s=this.updateTree(t,d,u.y,t.nameTable[g.tree.assistants[h]],f+1),this.hasChild(t,e)||(0===h?m=s:this.uniteRects(m,s)),h%2===0&&u.prevBounds&&(l=void 0===l?u.canMoveBy:Math.min(l,u.canMoveBy)),h%2!==1&&h!==g.tree.assistants.length-1||(p=this.findIntersectingLevels(t,s,f+1),this.updateRearBounds(t,null,[{rBounds:s}],f+1,p),f++));return m&&(m.canMoveBy=l),m},t.prototype.getDimensions=function(t,e,i,n,o){var r,a;if(r=e.actualSize.width,a=e.actualSize.height,-1!==t.orientation.indexOf("Left")){if(!o){var s=void 0;s=i,i=n,n=s}a=e.actualSize.width,r=e.actualSize.height}return{x:i,y:n,width:r,height:a}},t.prototype.hasChild=function(t,e){var i=t.graphNodes[e.id];return i.tree.children&&i.tree.children.length},t.prototype.updateHorizontalTree=function(t,e,i,n,o,r){var a;a=this.getDimensions(t,e,n,o,r);var s={};s=t.graphNodes[e.id];var c,h=s.tree.type;c=r;var d,l,p,u,g,f,m,y,v,b,w,O,x,j,S,C,P=0;if(P=n,d=o,t.levels.slice(0,t.levels.length),this.hasChild(t,e)){var T=void 0;for(T=-1!==t.orientation.indexOf("Left"),j=0;j<s.tree.children.length;j++){if(u=t.nameTable[s.tree.children[j]],l=u.actualSize.width,p=u.actualSize.height,f=T?p:l,m=T?l:p,t.levels[c+1]?t.levels[c+1].rBounds:null,g=this.updateTree(t,P,d,u,c+1,t.nameTable[s.tree.children[j-1]]),S=t.graphNodes[u.id],s.maxLevel=Math.max(s.maxLevel||0,S.maxLevel||0),v={x:S.x,y:S.y,right:S.x+f,bottom:S.y+m},0===j&&(y={x:Math.min(S.x,g.x),y:Math.min(S.y,g.y),right:g.right,bottom:g.bottom},C=S),x?(x.x=v.x,x.y=v.y,v.right>x.right&&(x.right=v.right),x.bottom=v.bottom):x=v,0===j&&(s.firstChild={x:S.x,canMoveBy:S.canMoveBy,child:u.id}),this.hasChild(t,u))if(!s.firstChild||s.firstChild.x>=S.firstChild.x){S.firstChild&&s.firstChild.canMoveBy<S.canMoveBy&&(s.firstChild.canMoveBy=O,S.canMoveBy=O,O=s.firstChild.canMoveBy,t.graphNodes[s.firstChild.child].canMoveBy=O);var I=void 0!==O?O:S.canMoveBy;s.firstChild={x:S.firstChild.x,canMoveBy:I,child:u.id}}else S.firstChild&&S.translated&&s.firstChild.canMoveBy>S.canMoveBy&&(s.firstChild.canMoveBy=t.graphNodes[s.firstChild.child].canMoveBy=S.canMoveBy);b=b?Math.max(S.maxLevel,b):S.maxLevel,this.uniteRects(y,g),P=0!==j&&!this.hasChild(t,u)&&S.subTreeTranslation<0?g.right-S.subTreeTranslation+t.horizontalSpacing:g.right+t.horizontalSpacing}isNaN(w)||(C.canMoveBy=w),s.mid=(C.x+x.right)/2-a.width/2,"Left"===h?s.mid=v.right-a.width:"Right"===h&&(s.mid=n)}return y},t.prototype.updateHorizontalTreeWithMultipleRows=function(t,e,i,n,o,r){var a,s,c,h,d,l,p,u,g,f,m,y=this.getDimensions(t,e,n,o,r),v=t.graphNodes[e.id],b=(v.tree.type,r),w=n,O=o,x=(t.levels.slice(0,t.levels.length),0);if(this.hasChild(t,e)){var j=-1!==t.orientation.indexOf("Left"),S=void 0,C=this.splitChildrenInRows(t,e),P=5===v.tree.children.length&&3===C[0].length,T=[],I=[];P?I=C:this.splitRows(C,T,I);var A={leftTree:T,rows:C,rightTree:I,dimensions:y},z=this.updateLeftTree(t,A,e,n,O,b);d=A.bounds;var L=void 0,E=(z||0)+(void 0!==z?t.horizontalSpacing/2:0);void 0!==z&&(v.mid=E-y.width/2,L=z+t.horizontalSpacing),O=o;var D=void 0;for(D=[],g=0;g<I.length;g++)for(w=C[g].length%2===1&&g===I.length-1||P?n:L||n,0!==g&&(O=D[g-1].bottom+t.verticalSpacing),u=0;u<I[g].length;u++)a=t.nameTable[I[g][u]],l=a.actualSize.width,p=a.actualSize.height,h=j?p:l,j?l:p,s=t.graphNodes[a.id],s.actualLevel=b+1+g,0===u&&T[g]&&T[g].length&&(s.translate=!1),P&&1===g&&(0===u&&f+h+t.horizontalSpacing<=m&&(S=!0,w=f-h/2),S&&1===u&&(w=m-h/2)),c=this.updateTree(t,w,O,a,b+1,t.nameTable[I[g][u-1]]),P&&u<=2&&0===g&&1===u&&(f=c.x-t.horizontalSpacing/2,m=c.x+h+t.horizontalSpacing/2),0===u?D[g]={x:c.x,y:c.y,right:c.right,bottom:c.bottom}:this.uniteRects(D[g],c),d||(d={x:D[g].x,y:D[g].y,right:D[g].right,bottom:D[g].bottom}),this.uniteRects(d,D[g]),w=c.right+t.horizontalSpacing,(!v.firstChild||(g===I.length-1&&C[g].length%2===1||P)&&0===u&&void 0!==s.canMoveBy&&x>s.canMoveBy)&&(x=Math.min(x,s.canMoveBy||0),v.firstChild={x:s.x,child:a.id,canMoveBy:s.canMoveBy}),A.leftCenter=f,A.rightCenter=m,A.align=S,A.level=b,A.rightBounds=D,this.alignRowsToCenter(t,g,e,A,L)}return d},t.prototype.updateLeftTree=function(t,e,i,n,o,r){for(var a,s,c,h,d,l=e.leftTree,p=t.graphNodes[i.id],u=[],g=-1!==t.orientation.indexOf("Left"),f=0;f<l.length&&l[f].length;f++){a=n,u[f-1]&&(o=u[f-1].bottom+t.verticalSpacing);for(var m=0;m<l[f].length;m++){var y=t.nameTable[l[f][m]],v=(g?y.actualSize.height:y.actualSize.width,g?y.actualSize.width:y.actualSize.height,t.graphNodes[y.id]);v.actualLevel=r+1+f,h=this.updateTree(t,a,o,y,r+1,t.nameTable[l[f][m-1]]),0===m?u[f]={x:h.x,y:h.y,right:h.right,bottom:h.bottom}:this.uniteRects(u[f],h),0===f&&0===m?(s=v.canMoveBy,p.firstChild={x:v.x,child:y.id,canMoveBy:v.canMoveBy}):0===m&&void 0!==v.canMoveBy&&s>v.canMoveBy&&(s=Math.min(s,v.canMoveBy||0),p.firstChild={x:v.x,child:y.id,canMoveBy:v.canMoveBy}),a=h.right+t.horizontalSpacing}c=0===f?u[f].right:Math.max(c,u[f].right)}for(f=0;f<l.length&&l[f].length;f++){if(c!==u[f].right){var b=c-u[f].right;for(m=0;m<l[f].length;m++){t.nameTable[l[f][m]];var w=t.graphNodes[l[f][m]];w.x+=b}}0===f?d={x:u[0].x,y:u[0].y,right:u[0].right,bottom:u[0].bottom}:this.uniteRects(d,u[f])}return e.bounds=d,c},t.prototype.alignRowsToCenter=function(t,e,i,n,o){var r,a,s,c=t.graphNodes[i.id],h=n.rows,d=n.rightTree,l=n.leftCenter,p=n.rightCenter,u=n.align,g=n.rightBounds,f=n.dimensions,m=n.level,y=5===c.tree.children.length&&3===h[0].length;if(y&&1===e&&(r=g[0].right-g[0].x>=g[1].right-g[1].x?0:1),e===h.length-1&&(h[e].length%2===1||y&&1===e)){a=d[e][Math.floor(d[e].length/2)];var v=void 0;v=t.nameTable[a];var b=void 0,w=t.graphNodes[a].x,O=t.graphNodes[a].y;b=this.getDimensions(t,v,w,O,m+1),s=void 0,!u&&y?(1===r&&(e=0),s=(g[r].x+g[r].right)/2-(g[e].x+g[e].right)/2,0===e&&(c.mid+=s)):y||void 0===o||(s=o-t.horizontalSpacing/2-(w+b.width/2)),void 0!==s&&this.updateRearBoundsOfTree(t,d[e],s,f),y&&(c.mid=(p+l)/2+(0===e?s:0)-f.width/2),void 0===c.mid&&t.graphNodes[a]&&(c.mid=w),u=!1,e++}},t.prototype.updateRearBoundsOfTree=function(t,e,i,n){for(var o=0;o<e.length;o++){var r=t.graphNodes[e[o]];t.nameTable[e[o]];if(r.x+=i,r.canMoveBy+=i,o===e.length-1){var a={x:r.x,y:r.y,right:r.x+n.width,bottom:r.y+n.height},s=this.findIntersectingLevels(t,a,r.actualLevel);this.updateRearBounds(t,null,[{rBounds:a}],r.actualLevel,s)}}},t.prototype.splitRows=function(t,e,i){for(var n=0;n<t.length;n++){e[n]=[],i[n]=[];var o=void 0;if(o=t[n].length,t[n].length%2!==1){o=Math.ceil(t[n].length/2);for(var r=0;r<o;r++)e[n].push(t[n][r])}for(var a=e[n].length;a<t[n].length;a++)i[n].push(t[n][a])}},t.prototype.updateVerticalTree=function(t,e,i,n,o,r){this.getDimensions(t,e,i,n,o);var a,s,c,h,d,l,p,u,g,f,m,y,v,b,w=t.graphNodes[e.id],O=t.nameTable[w.tree.children[0]],x=-1!==t.orientation.indexOf("Left"),j="Left"===w.tree.type?-1:0,S=i,C=n;m=o;var P,T=[],I=[];for(y=0;y<w.tree.children.length;y++){if("Alternate"===w.tree.type&&(b=y%2===0&&w.tree.children.length>2?"Left":"Right",j=y%2===0&&w.tree.children.length>2?-1:0),S=i+this.findOffset(t,e,w,b),a=t.nameTable[w.tree.children[y]],h=x?a.actualSize.height:a.actualSize.width,d=x?a.actualSize.width:a.actualSize.height,c=this.updateTree(t,S+j*h,C,a,o+1,void 0,!0),s=t.graphNodes[a.id],u={x:s.x,y:s.y,right:s.x+h,bottom:s.y+d},0===y?(this.uniteRects(c,u),p=c):this.uniteRects(p,c),!s.prevBounds||"Alternate"===w.tree.type&&y%2===1&&w.tree.children.length>2||(P=void 0!==P?Math.min(s.canMoveBy,P):s.canMoveBy),w.maxLevel=Math.max(w.maxLevel||0,s.maxLevel||0),"Alternate"===w.tree.type&&w.tree.children.length>2&&y%2===0?(0!==y&&(C=l.bottom+t.verticalSpacing/2),I.push({rBounds:u}),s.levelBounds&&(I=I.concat(s.levelBounds))):(C="Alternate"===w.tree.type&&w.tree.children.length>2?Math.max(c.bottom,l.bottom)+t.verticalSpacing/2:c.bottom+t.verticalSpacing/2,o=w.maxLevel,T.push({rBounds:u}),f?this.uniteRects(f,u):f={x:s.x,y:s.y,right:s.x+h,bottom:s.y+d},s.levelBounds&&(T=T.concat(s.levelBounds))),0===y&&(w.firstChild={x:s.x,canMoveBy:s.canMoveBy,child:a.id}),this.hasChild(t,a))if(!w.firstChild||w.firstChild.x>=s.firstChild.x){if(s.firstChild&&w.firstChild.canMoveBy<s.canMoveBy){var A=w.firstChild.canMoveBy;s.canMoveBy=A,t.graphNodes[w.firstChild.child].canMoveBy=A,w.firstChild.canMoveBy=A}w.firstChild={x:s.firstChild.x,canMoveBy:void 0!==P?P:s.canMoveBy,child:a.id}}else s.firstChild&&s.translated&&w.firstChild.canMoveBy>s.canMoveBy&&(w.firstChild.canMoveBy=t.graphNodes[w.firstChild.child].canMoveBy=s.canMoveBy);l=u}return r?w.levelBounds=T:("Alternate"===w.tree.type&&w.tree.children.length>2&&(g={x:I[0].rBounds.x,y:I[0].rBounds.y,right:I[I.length-1].rBounds.right,bottom:I[I.length-1].rBounds.bottom},v=this.findIntersectingLevels(t,g,m+1),this.updateRearBounds(t,null,I,m+1,v)),v=this.findIntersectingLevels(t,f||p,m+1),this.updateRearBounds(t,null,f?T:[{rBounds:p}],m+1,v)),isNaN(P)||(t.graphNodes[O.id].canMoveBy=P),w.childBounds=p,w.mid=i,p},t.prototype.splitChildrenInRows=function(t,e){var i,n;i=t.graphNodes[e.id],n=4;var o,r=[];o=i.tree.children.length;var a=this.extend(i.tree.children);if(i.tree.rows){var s=void 0;s=i.tree.children.length;var c=void 0;c=Math.ceil(s/i.tree.rows),n=c%2===0?c:c+1}else 3===i.tree.children.length||4===i.tree.children.length?n=2:5===i.tree.children.length&&(n=3);while(o>0)r[r.length]=a.splice(0,n),o-=n,o<n&&(n=o);return r},t.prototype.extend=function(t){var e,i=[];for(e=0;e<t.length;e++)i[e]=t[e];return i},t.prototype.findOffset=function(t,e,i,n){var o=0,r=-1!==t.orientation.indexOf("Left")?e.actualSize.height:e.actualSize.width,a=n||i.tree.type;switch(o=i.tree.offset||20,"Alternate"===i.tree.type&&o>=t.horizontalSpacing&&(o=t.horizontalSpacing/2),a){case"Left":o=r/2-o;break;case"Right":o+=r/2;break}return o},t.prototype.uniteRects=function(t,e){t.x=Math.min(t.x,e.x),t.right=Math.max(t.right,e.right),t.bottom=Math.max(t.bottom,e.bottom)},t.prototype.spaceLeftFromPrevSubTree=function(t,e,i){var n,o,r,a,s;for(n=t.graphNodes[e.id],s=t.horizontalSpacing,a=0;a<n.intersect.length;a++)r=t.levels[n.intersect[a]].rBounds,o=i.x-(r.right+s),(void 0===n.diff||o<n.diff)&&(n.diff=o,n.prevBounds=t.levels[n.intersect[a]].rBounds)},t.prototype.findIntersectingLevels=function(t,e,i,n){var o,r,a,s;o={x:e.x,y:e.y,right:e.right,bottom:e.bottom},o.y-=t.verticalSpacing/2,o.bottom+=t.verticalSpacing/2,r=[],s=void 0!==n?n:i,a=t.levels[s]?t.levels[s].rBounds:null;do{if(a&&(o.y<a.y&&o.bottom>a.y||o.y<a.bottom&&a.bottom<o.bottom||o.y>=a.y&&o.bottom<=a.bottom||o.y<a.y&&o.bottom>a.bottom)){var c=0;r.splice(c,0,s)}else if(a&&a.bottom<o.y)break;s--,a=t.levels[s]?t.levels[s].rBounds:null}while(s>=0);s=(void 0!==n?n:i)+1,a=t.levels[s]?t.levels[s].rBounds:null;do{if(a&&(o.y<a.y&&o.bottom>a.y||o.y<a.bottom&&a.bottom<o.bottom||o.y>=a.y&&o.bottom<=a.bottom||o.y<a.y&&o.bottom>a.bottom))r.push(s);else if(a&&a.y>o.bottom)break;s++,a=t.levels[s]?t.levels[s].rBounds:null}while(s<=t.levels.length);return r},t.prototype.findLevel=function(t,e,i){var n,o,r;n=e,o=0,r=t.levels[o]?t.levels[o].rBounds:null;while(o<t.levels.length){if(r&&n.bottom<r.y)return o;o++,r=t.levels[o]?t.levels[o].rBounds:null}return o},t.prototype.getParentNode=function(t,e){return t.nameTable[t.nameTable[e.inEdges[0]].sourceID]},t.prototype.updateEdges=function(t,e,i,o,r){var a,s;if(a=t.graphNodes[e.id],e.outEdges&&e.outEdges.length&&(e.isExpanded||o===n["c"].Render))for(s=0;s<e.outEdges.length;s++){var h=void 0;h=t.nameTable[t.nameTable[e.outEdges[s]].targetID],h&&!h.excludeFromLayout&&(-1===a.tree.children.indexOf(h.id)&&a.tree.children.push(h.id),h.outEdges&&h.outEdges.length&&h.isExpanded&&(a.tree.hasSubTree=!0),this.updateEdges(t,h,i+1,o,r))}a.tree.level=i,a.tree.hasSubTree&&(a.tree.orientation="Horizontal",a.tree.type="Center"),(t.getLayoutInfo||t.layoutInfo)&&"OrganizationalChart"===t.type&&(t.getLayoutInfo?t.getLayoutInfo(e,a.tree):Object(c["U"])(a.tree,t.layoutInfo,r,e),"Balanced"===a.tree.type&&a.tree.hasSubTree&&(a.tree.type="Center",a.tree.orientation="Horizontal")),t.level&&"Alternate"!==a.tree.type&&i>=t.level&&(a.tree.hasSubTree=!1)},t.prototype.updateAnchor=function(t,e,i){var n,r,a,s=0,c=0,h=0,d=new o["a"](0,0,i.x,i.y);a=t.bounds?t.bounds:d;var l=t.orientation;if(t.fixedNode){r=t.nameTable[t.fixedNode],s=r.actualSize.width,c=r.actualSize.height,t.anchorX=r.offsetX,t.anchorY=r.offsetY;var p=r.pivot;t.anchorX+="RightToLeft"===t.orientation?s*p.x:-s*p.x,t.anchorY+="BottomToTop"===t.orientation?c*p.y:-c*p.y,n=r,h=0;while(n.inEdges.length)n=this.getParentNode(t,n),h+=t.graphNodes[n.id].subTreeTranslation||0;-1!==t.orientation.indexOf("Left")?(t.anchorX-=t.graphNodes[r.id].y,t.anchorY-=t.graphNodes[r.id].x+h):(t.anchorX-=t.graphNodes[r.id].x+h,t.anchorY-=t.graphNodes[r.id].y)}else if("TopToBottom"===l||"BottomToTop"===l){switch(t.horizontalAlignment){case"Left":t.anchorX=a.x-e.x+t.margin.left;break;case"Right":t.anchorX=a.x+a.width-t.margin.right-e.right;break;case"Auto":case"Center":t.anchorX=a.x+a.width/2-(e.x+e.right)/2;break}switch(t.verticalAlignment){case"Auto":case"Top":var u;u=a.y+t.margin.top,t.anchorY="TopToBottom"===l?u:e.bottom+u;break;case"Bottom":var g=void 0;g=a.y+a.height-t.margin.bottom,t.anchorY="TopToBottom"===l?g-e.bottom:g;break;case"Center":var f=void 0;f=a.y+a.height/2,t.anchorY="TopToBottom"===t.orientation?f-(e.y+e.bottom)/2:f+(e.y+e.bottom)/2;break}}else{switch(t.horizontalAlignment){case"Auto":case"Left":var m=void 0;m=a.x+t.margin.left,t.anchorX="LeftToRight"===l?m:e.bottom+m;break;case"Right":var y=void 0;y=a.x+a.width-t.margin.right,t.anchorX="LeftToRight"===l?y-e.bottom:y;break;case"Center":f=void 0;f=a.width/2+a.x,t.anchorX="LeftToRight"===t.orientation?f-(e.y+e.bottom)/2:f+(e.y+e.bottom)/2;break}switch(t.verticalAlignment){case"Top":t.anchorY=a.y+t.margin.top-e.x;break;case"Auto":case"Center":t.anchorY=a.y+a.height/2-(e.right+e.x)/2;break;case"Bottom":t.anchorY=a.y+a.height-t.margin.bottom-e.right;break}}},t.prototype.updateConnectors=function(t,e,i){var n,o,r,a;if(o=t.graphNodes[e.id],e.outEdges.length)for(n=0;n<e.outEdges.length;n++)a=t.nameTable[e.outEdges[n]],a.points=[],r=t.nameTable[a.targetID],a.visible&&(a.visited=!0,t.getConnectorSegments?t.getConnectorSegments(a):o&&-1!==o.tree.children.indexOf(a.targetID)&&(a.segments=[],"OrganizationalChart"===t.type&&"Orthogonal"===a.type&&this.updateSegments(t,a,e,r,n)),r&&(r.isExpanded||this.hasChild(t,r))&&this.updateConnectors(t,r,i+1));if(o&&o.tree.assistants.length)for(n=0;n<o.tree.assistants.length;n++)r=t.nameTable[o.tree.assistants[n]],a=t.nameTable[r.inEdges[0]],this.get3Points(t,e,r,a),(r.isExpanded||this.hasChild(t,r))&&this.updateConnectors(t,r,i+1)},t.prototype.updateSegments=function(t,e,i,n,o){var r=t.graphNodes[i.id];r.tree.assistants.length?this.updateSegmentsForHorizontalOrientation(t,i,n,e):"Horizontal"===r.tree.orientation&&"Balanced"===r.tree.type?this.updateSegmentsForBalancedTree(t,e,i,n,o):"Horizontal"===r.tree.orientation?this.updateSegmentsForHorizontalOrientation(t,i,n,e):r.tree.offset<5?this.get5Points(t,i,n,e):this.get3Points(t,i,n,e)},t.prototype.updateSegmentsForBalancedTree=function(t,e,i,n,o){var r,a=t.graphNodes[i.id];if(5===a.tree.children.length&&o>2){r=a.tree.children[1],isNaN(t.graphNodes[r].treeWidth)&&(t.graphNodes[r].treeWidth=t.nameTable[r].actualSize.width);var s=3!==o?1:-1;-1!==t.orientation.indexOf("Left")?t.nameTable[r].offsetY-t.graphNodes[r].treeWidth/2-t.verticalSpacing*s/2:t.nameTable[r].offsetX+t.graphNodes[r].treeWidth/2+t.horizontalSpacing*s/2,this.getSegmentsForMultipleRows(t,i,n,e)}else a.tree.children.length>5?o<4?this.getSegmentsForMultipleRows(t,i,n,e):this.updateSegmentsForHorizontalOrientation(t,i,n,e):4===a.tree.children.length?o<2?this.getSegmentsForMultipleRows(t,i,n,e):this.updateSegmentsForHorizontalOrientation(t,i,n,e):this.getSegmentsForMultipleRows(t,i,n,e)},t.prototype.get3Points=function(t,e,i,n){var o=[],r=this.getBounds(e),a=this.getBounds(i);if(-1!==t.orientation.indexOf("Top")){var s=0===t.orientation.indexOf("Top")?r.bottomCenter:r.topCenter,c=e.offsetX>i.offsetX?a.middleRight:a.middleLeft;o.push(s,{x:r.bottomCenter.x,y:c.y},c)}else{s=0===t.orientation.indexOf("Left")?r.middleRight:r.middleLeft,c=e.offsetY>i.offsetY?a.bottomCenter:a.topCenter;o.push(s,{x:a.bottomCenter.x,y:r.middleRight.y},c)}this.getSegmentsFromPoints(o,n)},t.prototype.get5Points=function(t,e,i,n){var o,r,a,s,c=[],h=this.getBounds(e),d=this.getBounds(i);t.graphNodes[e.id];-1!==t.orientation.indexOf("Top")?(o=e.offsetY<i.offsetY?h.bottomCenter:h.topCenter,s=t.verticalSpacing/4*(e.offsetY<i.offsetY?1:-1),a=t.horizontalSpacing/2*(e.offsetX>i.offsetX?1:-1),r=e.offsetX>i.offsetX?d.middleRight:d.middleLeft,c.push(o,{x:o.x,y:o.y+s},{x:r.x+a,y:o.y+s},{x:r.x+a,y:r.y},r)):(o=e.offsetX>i.offsetX?h.middleLeft:h.middleRight,r=e.offsetY>i.offsetY?d.bottomCenter:d.topCenter,a=t.horizontalSpacing/4*(e.offsetX<i.offsetX?1:-1),s=t.verticalSpacing/2*(e.offsetY>i.offsetY?1:-1),c.push(o,{x:o.x+a,y:o.y},{x:o.x+a,y:o.y+s},{x:r.x,y:o.y+s},r)),this.getSegmentsFromPoints(c,n)},t.prototype.getSegmentsFromPoints=function(t,e){for(var i,n=[],o=0;o<t.length-2;o++)i=new r["c"](e,"segments",{type:"Orthogonal"},!0),i.direction=s["a"].direction(t[o],t[o+1]),i.length=s["a"].distancePoints(t[o],t[o+1]),n.push(i);e.segments=n},t.prototype.getSegmentsForMultipleRows=function(t,e,i,n){var o,a,c=[],h=this.getBounds(i),d=this.getBounds(e);switch(t.orientation){case"TopToBottom":o={x:d.bottomCenter.x,y:d.bottomCenter.y+t.verticalSpacing/4},a=new r["c"](n,"segments",{type:"Orthogonal"},!0),a.direction=s["a"].direction(d.bottomCenter,o),a.length=s["a"].distancePoints(d.bottomCenter,o),c.push(a);break;case"BottomToTop":o={x:d.bottomCenter.x,y:d.topCenter.y-t.verticalSpacing/4},a=new r["c"](n,"segments",{type:"Orthogonal"},!0),a.direction=s["a"].direction(d.topCenter,o),a.length=s["a"].distancePoints(d.topCenter,o),c.push(a);break;case"LeftToRight":if(o={x:d.middleRight.x+t.verticalSpacing/4,y:d.middleRight.y},a=new r["c"](n,"segments",{type:"Orthogonal"},!0),a.direction=s["a"].direction(d.middleRight,o),a.length=s["a"].distancePoints(d.middleRight,o),c.push(a),h.center.y!==d.center.y){var l={x:d.middleRight.x+t.verticalSpacing/4,y:h.middleLeft.y};a=new r["c"](n,"segments",{type:"Orthogonal"},!0),a.direction=s["a"].direction(o,l),a.length=s["a"].distancePoints(o,l),c.push(a)}break;case"RightToLeft":if(o={x:d.middleLeft.x-t.verticalSpacing/4,y:d.middleRight.y},a=new r["c"](n,"segments",{type:"Orthogonal"},!0),a.direction=s["a"].direction(d.middleLeft,o),a.length=s["a"].distancePoints(d.middleLeft,o),c.push(a),h.center.y!==d.center.y){var p={x:d.middleLeft.x-t.verticalSpacing/4,y:h.middleLeft.y};a=new r["c"](n,"segments",{type:"Orthogonal"},!0),a.direction=s["a"].direction(p,p),a.length=s["a"].distancePoints(p,p),c.push(a)}break}n.segments=c},t.prototype.updateSegmentsForHorizontalOrientation=function(t,e,i,n){var o,a,c=[],h=[],d=this.getBounds(e),l=this.getBounds(i);switch(t.orientation){case"TopToBottom":o={x:d.bottomCenter.x,y:l.topCenter.y-t.verticalSpacing/2},a=new r["c"](n,"segments",{type:"Orthogonal"},!0),a.direction=s["a"].direction(d.bottomCenter,o),a.length=s["a"].distancePoints(d.bottomCenter,o),h.push(a);break;case"BottomToTop":o={x:d.topCenter.x,y:l.bottomCenter.y+t.verticalSpacing/2},a=new r["c"](n,"segments",{type:"Orthogonal"},!0),a.direction=s["a"].direction(d.topCenter,o),a.length=s["a"].distancePoints(d.topCenter,o),h.push(a);break;case"LeftToRight":if(o={x:l.middleLeft.x-t.verticalSpacing/2,y:d.middleRight.y},a=new r["c"](n,"segments",{type:"Orthogonal"},!0),a.direction=s["a"].direction(d.middleRight,o),a.length=s["a"].distancePoints(d.middleRight,o),h.push(a),l.center.y!==d.center.y){var p={x:l.middleLeft.x-t.verticalSpacing/2,y:l.middleLeft.y};a=new r["c"](n,"segments",{type:"Orthogonal"},!0),a.direction=s["a"].direction(o,p),a.length=s["a"].distancePoints(o,p),h.push(a)}break;case"RightToLeft":if(o={x:l.middleRight.x+t.verticalSpacing/2,y:d.middleRight.y},a=new r["c"](n,"segments",{type:"Orthogonal"},!0),a.direction=s["a"].direction(d.middleLeft,o),a.length=s["a"].distancePoints(d.middleLeft,o),h.push(a),l.center.y!==d.center.y){var u={x:l.middleRight.x+t.verticalSpacing/2,y:l.middleLeft.y};a=new r["c"](n,"segments",{type:"Orthogonal"},!0),a.direction=s["a"].direction(o,u),a.length=s["a"].distancePoints(o,u),h.push(a)}break}return n.segments=h,c},t.prototype.updateNodes=function(t,e,i,n,o,r){var a,s,c,h,d,l;if(e&&!e.excludeFromLayout){c=e.actualSize.width,h=e.actualSize.height,d=t.anchorX,l=t.anchorY,"LeftToRight"===t.orientation?(d+=t.graphNodes[e.id].y+c/2,l+=t.graphNodes[e.id].x+i+h/2):"RightToLeft"===t.orientation?(d-=t.graphNodes[e.id].y+c/2,l+=t.graphNodes[e.id].x+i+h/2):"TopToBottom"===t.orientation?(d+=t.graphNodes[e.id].x+i+c/2,l+=t.graphNodes[e.id].y+h/2):(d+=t.graphNodes[e.id].x+i+c/2,l-=t.graphNodes[e.id].y+h/2),t.graphNodes&&(o=o||0,r=r||0,d+=o,l+=r,this.isAnimation||(e.offsetX=d,e.offsetY=l));var p={id:e.id,differenceX:d-e.offsetX,differenceY:l-e.offsetY};t.objects.push(p);var u=void 0;if(u=[],this.hasChild(t,e))for(a=0;a<t.graphNodes[e.id].tree.children.length;a++)s=t.nameTable[t.graphNodes[e.id].tree.children[a]],this.updateNodes(t,s,i+(t.graphNodes[e.id].subTreeTranslation||0),n,o,r),u.push(s);if(t.graphNodes[e.id].tree.assistants.length)for(a=0;a<t.graphNodes[e.id].tree.assistants.length;a++)s=t.nameTable[t.graphNodes[e.id].tree.assistants[a]],this.updateNodes(t,s,i+(t.graphNodes[e.id].subTreeTranslation||0),null,o,r)}},t}()},"3aa5":function(t,e,i){"use strict";i.d(e,"b",(function(){return d})),i.d(e,"c",(function(){return l})),i.d(e,"a",(function(){return p}));var n=i("456d"),o=i("7682"),r=i("8905"),a=i("b239"),s=i("95f7"),c=i("d454"),h=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.childTable=[],e.cellStyle={},e.desiredRowHeight=[],e.desiredCellWidth=[],e}return h(e,t),e.prototype.rowDefinitions=function(){return this.rowDefns},e.prototype.columnDefinitions=function(){return this.colDefns},e.prototype.addObject=function(t,e,i,n,o){if(this.rows.length>=e){var r=this.rows[e];if(r.cells.length>i){o=o||1,n=n||1;var a=r.cells[i];a.columnSpan=Math.max(o,a.columnSpan),a.rowSpan=Math.max(n,a.rowSpan);var s=new f;s=t,s.rowId=e,s.columnId=i,s.columnSpan=o,this.childTable[s.id]=s,this.addObjectToCell(s,a)}}},e.prototype.addObjectToCell=function(t,e){e.children||(e.children=[]),t.style.strokeColor="black",t.style.strokeWidth=1,t.style.fill="white",e.children.push(t)},e.prototype.updateProperties=function(t,e,i,n){this.offsetX=t,this.offsetY=e,this.width=i,this.height=n},e.prototype.setDefinitions=function(t,e){this.rowDefns=t,this.colDefns=e,this.children=[],this.rows=this.rows||[];for(var i=0;i<t.length;i++){var n=t[i],o=new u;o.cells=[];var r=new p;r.width=this.width;var a=this.colDefns;(void 0===a||a.length<1)&&(a=[r]),this.addCellInRow(a,n,o),this.rows.push(o)}},e.prototype.addCellInRow=function(t,e,i){for(var n=0;n<t.length;n++){var o=t[n],r=new g;r.children=[],this.cellStyle.fill="none",this.cellStyle.strokeColor="none",r.id=Object(s["i"])(),r.style=this.cellStyle,r.desiredCellWidth=r.minWidth=o.width,r.desiredCellHeight=r.minHeight=e.height,i.cells.push(r),this.children.push(r)}},e.prototype.calculateSize=function(){for(var t=this.rows||[],e=0,i=0,n=0;n<t.length;n++){var o=this.rows[n];i=0;for(var r=0;r<o.cells.length;r++)if(i+=o.cells[r].desiredCellWidth,r===o.cells.length-1&&(this.width&&this.width!==i&&(o.cells[r].desiredCellWidth+=this.width-i,o.cells[r].minWidth=o.cells[r].desiredCellWidth,o.cells[r].children&&o.cells[r].children.length&&(o.cells[r].children[0].width=o.cells[r].desiredCellWidth),this.colDefns[r].width=o.cells[r].desiredCellWidth),e+=o.cells[r].desiredCellHeight,n===t.length-1&&this.height&&this.height!==e)){var a=this.height-e;if(a>0){for(var s=0;s<o.cells.length;s++)o.cells[s].desiredCellHeight+=a,o.cells[s].minHeight=o.cells[s].desiredCellHeight=o.cells[s].desiredCellHeight,o.cells[s].children&&o.cells[s].children.length&&(o.cells[s].children[0].height=o.cells[s].desiredCellHeight);this.rowDefns[n].height+=a}}}},e.prototype.updateRowHeight=function(t,e,i,n){var o=this.rows[t];this.rowDefns[t].height=e,void 0!==this.height&&(this.height+=e-o.cells[0].desiredCellHeight);for(var r=0;r<o.cells.length;r++)o.cells[r].desiredCellHeight=o.cells[r].minHeight=e,o.cells[r].children&&o.cells[r].children.length&&(o.cells[r].children[0].height=e,this.setTextRefresh(o.cells[r].children[0]));if(this.desiredRowHeight[t]=e,this.measure(new a["a"](this.width,this.height)),this.arrange(this.desiredSize),i){var s=void 0!==n?this.calculateCellHeightBasedOnChildren(t,n):this.calculateCellHeight(t);s>e&&this.updateRowHeight(t,s,!1)}},e.prototype.setTextRefresh=function(t){if(t.children&&t.children.length)for(var e=t.children,i=0;i<e.length;i++)e[i]instanceof c["a"]&&e[i].refreshTextElement(),e[i]instanceof o["a"]&&this.setTextRefresh(e[i])},e.prototype.updateColumnWidth=function(t,e,i,n){this.colDefns[t].width=e,void 0!==this.width&&(this.width+=e-this.rows[this.rows.length-1].cells[t].desiredCellWidth);for(var o=0;o<this.rows.length;o++)this.setTextRefresh(this.rows[o].cells[0]),this.rows[o].cells[t].desiredCellWidth=this.rows[o].cells[t].minWidth=e,this.rows[o].cells[t].children&&this.rows[o].cells[t].children.length&&(this.rows[o].cells[t].children[0].width=e);if(this.desiredCellWidth[t]=e,this.measure(new a["a"](this.width,this.height)),this.arrange(this.desiredSize),i){var r=void 0!==n?this.calculateCellWidthBasedOnChildren(t,n):this.calculateCellWidth(t);r>e&&this.updateColumnWidth(t,r,!1)}},e.prototype.calculateCellWidth=function(t){for(var e,i,n,o=0;o<this.rows.length;o++)n=this.rows[o].cells[t],1===n.columnSpan&&(i=n.outerBounds.width>n.bounds.width&&(0===n.children.length||void 0===n.children[0].maxWidth)?n.outerBounds.width:n.bounds.width,e=e?e<i?i:e:i);return e},e.prototype.calculateCellHeight=function(t){for(var e,i,n,o=this.rows[t],r=0;r<o.cells.length;r++)n=o.cells[r],i=n.outerBounds.height>n.bounds.height?n.outerBounds.height:n.bounds.height,e=e?e<i?i:e:i;return e},e.prototype.calculateCellSizeBasedOnChildren=function(t,e,i,n){var r,a;if(a=t&&t.children.length>0?t.children[0]:void 0,a&&1===t.columnSpan){r="Width"===e?a.bounds.right:a.bounds.bottom,n||(n="Width"===e?a.bounds.width:a.bounds.height);for(var s=0;s<a.children.length;s++){var c=a.children[s];if(c instanceof o["a"]&&-1===c.id.indexOf("header")){var h=("Width"===e?c.bounds.right:c.bounds.bottom)+i;if(h>r){var d=h-r+("Width"===e?a.bounds.width:a.bounds.height);n&&(n=n<d?d:n)}}}}return n},e.prototype.calculateCellWidthBasedOnChildren=function(t,e){for(var i,n,o=0;o<this.rows.length;o++)n=this.rows[o].cells[t],i=this.calculateCellSizeBasedOnChildren(n,"Width",e,i);return i},e.prototype.calculateCellHeightBasedOnChildren=function(t,e){for(var i,n,o=this.rows[t],r=0;r<o.cells.length;r++)n=o.cells[r],i=this.calculateCellSizeBasedOnChildren(n,"Height",e,i);return i},e.prototype.addRow=function(t,e,i){this.rowDefns.length>0?this.rowDefns.splice(t,0,e):this.rowDefns.push(e);var n=new u;n.cells=[];var o=new p;o.width=this.width;var r=this.colDefns;this.addCellInRow(r,e,n),t>this.rows.length-1?this.rows.push(n):this.rows.splice(t,0,n),i&&(this.measure(new a["a"](this.width,this.height)),this.arrange(this.desiredSize))},e.prototype.addColumn=function(t,e,i){var n,o,r,s,c=this.rows;this.colDefns.length>0?this.colDefns.splice(t,0,e):this.colDefns.push(e),void 0!==this.width&&(this.width+=e.width);for(var h=0;h<c.length;h++)n=c[h],o=this.rowDefns[h],r=e,s=new g,s.style=this.cellStyle,s.desiredCellWidth=s.minWidth=r.width,s.desiredCellHeight=s.minHeight=o.height,s.children=[],t>n.cells.length-1?n.cells.push(s):n.cells.splice(t,0,s),this.children.push(s);i&&(this.measure(new a["a"](this.width,this.height)),this.arrange(this.desiredSize))},e.prototype.removeRow=function(t){var e,i,n=this.rows,o=n[t];this.height-=this.rowDefns[t].height;for(var r=0;r<o.cells.length;r++)e=o.cells[r],this.children.splice(this.children.indexOf(e),1),i=document.getElementById(e.id+"_groupElement"),i&&i.parentElement&&i.parentElement.removeChild(i);this.rows.splice(t,1),this.rowDefns.splice(t,1),this.measure(new a["a"](this.width,this.height)),this.arrange(this.desiredSize)},e.prototype.removeColumn=function(t){var e,i,n=this.rows;this.width-=this.colDefns[t].width;for(var o=0;o<n.length;o++)e=n[o].cells[t],this.children.splice(this.children.indexOf(e),1),i=document.getElementById(e.id+"_groupElement"),i&&i.parentElement&&i.parentElement.removeChild(i),n[o].cells.splice(t,1);this.colDefns.splice(t,1),this.measure(new a["a"](this.width,this.height)),this.arrange(this.desiredSize)},e.prototype.updateRowIndex=function(t,e){this.rows;var i=this.rows[t];this.rows.splice(t,1),this.rows.splice(e,0,i);var n=this.rowDefns[t];this.rowDefns.splice(t,1),this.rowDefns.splice(e,0,n),this.measure(new a["a"](this.width,this.height)),this.arrange(this.desiredSize)},e.prototype.updateColumnIndex=function(t,e,i){for(var n,o,r,s=t;s<this.rows.length;s++)n=this.rows[s],o=this.rows[s].cells[e],n.cells.splice(e,1),n.cells.splice(i,0,o);var c=this.colDefns[e];this.colDefns.splice(e,1),this.colDefns.splice(i,0,c),r=this.desiredCellWidth[e],this.desiredCellWidth.splice(e,1),this.desiredCellWidth.splice(i,0,r),this.measure(new a["a"](this.width,this.height)),this.arrange(this.desiredSize)},e.prototype.measure=function(e){var i=void 0;if(void 0!==this.rows&&this.rows.length>0){var n=0,o=0;i=new a["a"](0,0),this.calculateSize();for(var r=0,s=this.rows;r<s.length;r++){var c=s[r];o=0;for(var h=0,d=c.cells;h<d.length;h++){var l=d[h],p=l.measure(new a["a"](l.desiredCellWidth,l.desiredCellHeight));1===l.rowSpan&&(0===o||void 0===this.desiredRowHeight[n]?this.desiredRowHeight[n]=p.height:this.desiredRowHeight[n]=Math.max(p.height,this.desiredRowHeight[n])),1===l.columnSpan&&(0===n||void 0===this.desiredCellWidth[o]?this.desiredCellWidth[o]=p.width:this.desiredCellWidth[o]=Math.max(p.width,this.desiredCellWidth[o]),n===this.rows.length-1&&(i.width+=this.desiredCellWidth[o])),o++}i.height+=this.desiredRowHeight[n],n++}n=o=0;for(var u=0,g=0,f=this.rows;g<f.length;g++){c=f[g];o=0;for(var m=0,y=0,v=c.cells;y<v.length;y++){l=v[y];if(1!==l.columnSpan){l.desiredSize.width=0;for(var b=0;b<l.columnSpan;b++)b+o<c.cells.length&&(l.desiredSize.width+=this.desiredCellWidth[b+o],l.minWidth=l.desiredSize.width,l.measure(l.desiredSize));o++}else l.desiredSize.width=this.desiredCellWidth[m],l.measure(l.desiredSize);if(1!==l.rowSpan){l.desiredSize.height=0;for(b=0;b<l.rowSpan;b++)b+u<this.rows.length&&(l.desiredSize.height+=this.desiredRowHeight[b+u],l.minHeight=l.desiredSize.height,l.measure(l.desiredSize))}else l.desiredSize.height=this.desiredRowHeight[u],l.measure(l.desiredSize);n++,m++}u++}}return void 0===i&&(i=t.prototype.validateDesiredSize.call(this,i,e)),t.prototype.stretchChildren.call(this,i),this.desiredSize=i,i},e.prototype.arrange=function(t,e){var i=0,n=0;if(void 0!==this.rows&&this.rows.length>0){for(var o=this.offsetX-t.width*this.pivot.x,r=this.offsetY-t.height*this.pivot.y,s=o,c=0,h=this.rows;c<h.length;c++){var d=h[c];s=o,i=0;for(var l=0,p=d.cells;l<p.length;l++){var u=p[l],g=Math.max(this.desiredCellWidth[i],u.desiredSize.width),f=Math.max(this.desiredRowHeight[n],u.desiredSize.height);u.offsetX=s+g*u.pivot.x,u.offsetY=r+f*u.pivot.y,s+=this.desiredCellWidth[i],u.arrange(new a["a"](g,f)),i++}r+=this.desiredRowHeight[n],n++}if(e){u=void 0,d=void 0;var m=void 0,y=void 0,v=void 0;for(n=0;n<this.rows.length;n++)for(d=this.rows[n],i=0;i<d.cells.length;i++)if(u=d.cells[i],u.columnSpan>1&&this.children.splice(this.children.indexOf(u)+1,u.columnSpan-1),u.rowSpan>1)for(m=n,y=0;m+u.rowSpan-1<this.rows.length&&y<u.rowSpan-1;m++,y++)v=this.rows[m+1].cells[i],this.children.splice(this.children.indexOf(v),1)}}return this.actualSize=t,this.updateBounds(),t},e}(r["a"]),l=function(){function t(){this.height=void 0}return t}(),p=function(){function t(){this.width=void 0}return t}(),u=function(){function t(){this.cells=null}return t}(),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.columnSpan=1,e.rowSpan=1,e}return h(e,t),e}(o["a"]),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rowId=0,e.columnId=0,e.rowSpan=1,e.columnSpan=1,e}return h(e,t),e}(n["a"])},"3b21":function(t,e,i){"use strict";i.d(e,"b",(function(){return d})),i.d(e,"i",(function(){return I})),i.d(e,"a",(function(){return W})),i.d(e,"c",(function(){return _})),i.d(e,"d",(function(){return V})),i.d(e,"h",(function(){return st})),i.d(e,"g",(function(){return vt})),i.d(e,"f",(function(){return bt})),i.d(e,"e",(function(){return wt}));var n=i("be2f"),o=i("d0e6"),r=i("1ce4"),a=i("bccc"),s=i("fd65"),c=i("6513"),h=i("95f7");function d(t,e){var i,n;return n="Straight"!==t.type&&t.sourceWrapper?t.sourceWrapper.corners.center:l(t),i=u(t,n,t.targetPoint,e),U(t,i[0],!1),U(t,i[i.length-1],!0),i}function l(t){var e;if(t.sourcePortWrapper){var i=t.sourcePortWrapper,n=t.sourceWrapper,o={x:i.offsetX,y:i.offsetY};vt(o,Object(h["c"])(n),n.bounds,!1);e=o}else if(t.sourceID&&t.sourceWrapper)if(t.targetWrapper){var r=t.sourceWrapper.corners.center,a=t.targetWrapper.corners.center;e=V(t,t.sourceWrapper,r,a,!1)}else e=t.sourcePoint;else e=t.sourcePoint;return e}function p(t,e,i){"LeftToRight"===i?(t.direction=t.direction?t.direction:"Right",e.direction=e.direction?e.direction:"Left"):"RightToLeft"===i?(t.direction=t.direction?t.direction:"Left",e.direction=e.direction?e.direction:"Right"):"TopToBottom"===i?(t.direction=t.direction?t.direction:"Bottom",e.direction=e.direction?e.direction:"Top"):"BottomToTop"===i&&(t.direction=t.direction?t.direction:"Top",e.direction=e.direction?e.direction:"Bottom")}function u(t,e,i,o){var r,a,s,c,d,l,u=t.sourceWrapper,g=t.targetWrapper,f=t.sourcePortWrapper,m=t.targetPortWrapper,y=[],v=13,b={left:5,right:5,bottom:5,top:5},O={left:5,right:5,bottom:5,top:5},x={corners:r,point:e,direction:s,margin:b},S={corners:a,point:i,direction:c,margin:O};if(void 0!==u&&void 0!==g&&(d=Object(h["c"])(u),l=Object(h["c"])(g),x.corners=u.corners,S.corners=g.corners),void 0!==f){var C={x:f.offsetX,y:f.offsetY};x.direction=vt(C,d,u.bounds,!1)}if(void 0!==m){var P={x:m.offsetX,y:m.offsetY};S.direction=vt(P,l,g.bounds,!1)}if(void 0!==u&&void 0!==g)return void 0!==x.direction&&void 0!==S.direction||(o?p(x,S,o):x.corners.top>S.corners.bottom&&Math.abs(x.corners.top-S.corners.bottom)>x.margin.top+x.margin.bottom?(x.direction=x.direction?x.direction:"Top",S.direction=S.direction?S.direction:"Bottom"):x.corners.bottom<S.corners.top&&Math.abs(x.corners.bottom-S.corners.top)>x.margin.bottom+x.margin.top?(x.direction=x.direction?x.direction:"Bottom",S.direction=S.direction?S.direction:"Top"):x.corners.right<S.corners.left&&Math.abs(x.corners.right-S.corners.left)>x.margin.right+x.margin.left||x.corners.right+v<S.corners.left||S.corners.right>=x.corners.left-v&&x.corners.left>S.corners.left?(x.direction=x.direction?x.direction:"Right",S.direction=S.direction?S.direction:"Left"):x.corners.left>S.corners.right&&Math.abs(x.corners.left-S.corners.right)>x.margin.left+x.margin.right||S.corners.right+v<x.corners.left||x.corners.right>=S.corners.left-v&&x.corners.left<S.corners.left?(x.direction=x.direction?x.direction:"Left",S.direction=S.direction?S.direction:"Right"):u.id!==g.id&&!d.equals(d,l)&&l.containsPoint(d.topCenter,x.margin.top)?(x.direction=x.direction?x.direction:"Bottom",S.direction=S.direction?S.direction:"Top"):(x.direction=x.direction?x.direction:"Top",S.direction=S.direction?S.direction:"Bottom")),A(t,x.direction,S.direction,x.point,S.point);if(E(t),(t.sourceWrapper||t.targetWrapper)&&j(t,x,S),"Straight"===t.type||"Bezier"===t.type)y=z(t,x,S);else if("Orthogonal"===t.type&&t.segments&&t.segments.length>0&&null!==t.segments[0].length&&null!==t.segments[0].direction)y=w(t,x,S,u,g,f,m);else{var T=void 0;x.direction?T=at(u.bounds,x,20):x.direction=S.direction?void 0!==t.targetPortWrapper?S.direction:wt(S.direction):n["a"].direction(x.point,S.point),t.segments[0].points=y=ct(t,x,S,T)}return y}function g(t,e){var i,n,o;return t.direction=e.direction,e.points=[],e.points.push(t.point),o="Left"===e.direction||"Top"===e.direction?-e.length:e.length,n="Left"===e.direction||"Right"===e.direction?0:90,i=Y(t.point,o,n),e.points.push(i),i}function f(t,e,i){var n,o,r,a;if(e.corners=t.sourceWrapper?t.sourceWrapper.corners:void 0,t.sourcePortWrapper){var s={x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY};r=vt(s,Object(h["c"])(t.sourceWrapper),t.sourceWrapper.bounds,!1),!e.corners||"Bottom"!==e.direction&&"Top"!==e.direction?!e.corners||"Left"!==e.direction&&"Right"!==e.direction||i.point.y>e.corners.top&&i.point.y<e.corners.bottom&&(o=e.point.x>i.point.x?"Left":"Right"):i.point.x>e.corners.left&&i.point.x<e.corners.right&&(o=e.point.y>i.point.y?"Top":"Bottom")}t.sourcePortWrapper&&r===wt(o)?(("Left"===r||"Right"===r)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.center.y&&i.point.y>=e.corners.top&&i.point.y<=e.corners.center.y?(e.direction="Top",a=e.point.y-e.corners.top+20):("Left"===r||"Right"===r)&&e.point.y>e.corners.center.y&&e.point.y<=e.corners.bottom&&i.point.y>e.corners.center.y&&i.point.y<=e.corners.bottom?(e.direction="Bottom",a=e.corners.bottom-e.point.y+20):("Top"===r||"Bottom"===r)&&e.point.x>=e.corners.left&&e.point.x<=e.corners.center.x&&i.point.x>=e.corners.left&&i.point.x<=e.corners.center.x?(e.direction="Left",a=e.point.x-e.corners.left+20):("Top"===r||"Bottom"===r)&&e.point.x<=e.corners.right&&e.point.x>e.corners.center.x&&i.point.x<=e.corners.right&&i.point.x<e.corners.center.x&&(e.direction="Right",a=e.corners.right-e.point.x+20),e.direction&&a&&(n=ct(t,e,i,a,!0))):(e.direction=o||L(e.direction,e.point,i.point),n=st(e,i));return n}function m(t,e,i){var n;i.corners=t.targetWrapper.corners,H(t.targetWrapper,e,i,t);var o=L(i.direction,e.point,i.point);if(e.direction!==i.direction||"Left"!==e.direction&&"Right"!==e.direction)e.direction=o,n=st(e,i);else{e.direction=o,n=ct(t,e,i,t.targetWrapper.width/2+20);var r=e;r.point=n[1],H(t.targetWrapper,e,i,t),n=ct(t,e,i)}return n}function y(t,e,i){var o,r,a;i.corners=t.targetWrapper.corners,"Left"!==e.direction&&"Right"!==e.direction?i.corners.center.y!==e.point.y||i.corners.left<=e.point.x&&e.point.x<=i.corners.right?i.corners.center.y===e.point.y&&"Bottom"===t.segments[t.segments.length-2].direction||i.corners.center.y>e.point.y&&e.point.y>=i.corners.top?(r="Top",a=e.point.y-i.corners.top+20):i.corners.center.y===e.point.y&&"Top"===t.segments[t.segments.length-2].direction||i.corners.center.y<e.point.y&&e.point.y<=i.corners.bottom?(r="Bottom",a=i.corners.bottom-e.point.y+20):void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&e.corners.top<=e.point.y&&e.point.y<=e.corners.bottom&&(r=e.direction,a=e.point.y>i.point.y?e.point.y-e.corners.top+20:e.corners.bottom-e.point.y+20):(r="Top",a=i.corners.height/2+20):i.corners.center.x!==e.point.x||i.corners.top<e.point.y&&e.point.y<=i.corners.bottom?i.corners.center.x===e.point.x&&"Right"===t.segments[t.segments.length-2].direction||i.corners.center.x>e.point.x&&e.point.x>=i.corners.left?(r="Left",a=e.point.x-i.corners.left+20):i.corners.center.x===e.point.x&&"Left"===t.segments[t.segments.length-2].direction||i.corners.center.x<=e.point.x&&e.point.x<=i.corners.right?(r="Right",a=i.corners.right-e.point.x+20):void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&e.corners.left<=e.point.x&&e.point.x<=e.corners.right&&(r=e.direction,a=e.point.x>i.point.x?e.point.x-e.corners.left+20:e.corners.right-e.point.x+20):(r="Left",a=i.corners.width/2+20);var s="Left"===r||"Top"===r?-a:a,c="Left"===r||"Right"===r?0:90;o=e.point,e.point=Y(e.point,s,c),e.direction=n["a"].direction(e.point,i.point),void 0===t.sourcePortWrapper||void 0===t.targetPortWrapper||e.corners.center.x!==i.corners.center.x&&e.corners.center.y!==i.corners.center.y||(e.direction=i.direction);var h=ct(t,e,i);return h.splice(0,0,o),h}function v(t,e,i,n){var o=!1;switch(i.direction){case"Left":void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&"Right"===n&&e.point.x>i.point.x&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom||("Bottom"===n&&e.point.y>i.point.y||"Top"===n&&e.point.y<i.point.y)&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right?(e.direction="Right"===n?e.point.y>i.point.y?"Top":"Bottom":e.point.x<i.point.x?"Right":"Left",o=!0):e.point.x>i.point.x&&(e.point.y>i.point.y||e.point.y<i.point.y)&&!(i.corners.top>e.point.y&&i.corners.bottom<e.point.y)?e.direction="Left":e.point.x<i.point.x&&e.point.y>i.point.y||e.point.x>i.point.x&&e.point.y<=i.point.y&&i.corners.top<e.point.y&&i.corners.center.y>=e.point.y?e.direction="Top":e.point.x<i.point.x&&e.point.y<i.point.y||e.point.x>i.point.x&&e.point.y>i.point.y&&i.corners.bottom<e.point.y&&i.corners.center.y>e.point.y?e.direction="Bottom":e.point.y===i.point.y&&e.point.x<i.point.x&&(e.direction="Right");break;case"Right":void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&("Bottom"===n&&e.point.y>i.point.y||"Top"===n&&e.point.y<i.point.y)&&e.point.x>i.point.x&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right?(e.direction=e.point.x>i.point.x?"Left":"Right",o=!0):void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&"Left"===n&&e.point.x<i.point.x&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom?(e.direction=e.point.y>i.point.y?"Top":"Bottom",o=!0):e.point.x<i.point.x&&i.corners.top<=e.point.y&&i.corners.bottom>=e.point.y&&e.point.y===i.point.y?e.direction="Top":e.point.y>i.point.y&&e.point.x>i.point.x?e.direction="Top":e.point.y<i.point.y&&e.point.x>i.point.x?e.direction="Bottom":e.point.x<i.point.x&&(e.point.y>i.point.y||e.point.y<i.point.y)?e.direction="Right":e.point.y===i.point.y&&e.point.x>i.point.x&&(e.direction="Left");break;case"Top":void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&"Bottom"===n&&e.point.y>i.point.y&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right||("Right"===n&&e.point.x>i.point.x||"Left"===n&&i.point.y>e.point.y&&i.point.x>e.point.x)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom?(e.direction="Bottom"===n?e.point.x>i.point.x?"Left":"Right":e.point.y<i.point.y?"Bottom":"Top",o=!0):e.point.x===i.point.x&&e.point.y<i.point.y?e.direction="Bottom":e.point.y>i.point.y&&e.point.x>i.corners.left&&e.point.x<i.corners.right?e.direction="Left":e.point.y>=i.point.y?e.direction="Top":e.point.y<i.point.y&&e.point.x>i.point.x?e.direction="Left":e.point.y<i.point.y&&e.point.x<i.point.x&&(e.direction="Right");break;case"Bottom":void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&(("Right"===n||"Left"===n&&i.point.x>e.point.x)&&e.point.y>i.point.y&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom||"Top"===n&&e.point.y<i.point.y&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right)?(e.direction="Right"===n||"Left"===n?e.point.y>i.point.y?"Top":"Bottom":e.point.x>i.point.x?"Left":"Right",o=!0):e.point.y<i.point.y&&e.point.x>i.corners.left&&i.corners.right>e.point.x?e.point.y<i.point.y&&e.point.x>i.corners.left&&i.corners.center.x>=e.point.x?e.direction="Left":e.point.y<i.point.y&&e.point.x<i.corners.right&&i.corners.center.x<e.point.x&&(e.direction="Right"):e.point.y>i.point.y&&e.point.x>i.point.x?e.direction="Left":e.point.y>i.point.y&&e.point.x<i.point.x?e.direction="Right":e.point.y<=i.point.y&&(e.point.x>i.point.x||i.point.x>e.point.x)&&(e.direction="Bottom");break}return o}function b(t,e,i){var n,o,r;if(i.corners=t.targetWrapper.corners,void 0!==t.sourcePortWrapper){var a={x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY};o=vt(a,Object(h["c"])(t.sourceWrapper),t.sourceWrapper.bounds,!1)}var s=v(t,e,i,o);return void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&i.direction===wt(o)&&(("Left"===i.direction&&e.point.x>i.point.x||"Right"===i.direction&&e.point.x<i.point.x)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom||"Bottom"===i.direction&&e.point.y<i.point.y&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right)?n=y(t,e,i):e.direction===i.direction?n=ct(t,e,i):("Left"===i.direction&&e.point.x>i.point.x||"Right"===i.direction&&e.point.x<i.point.x)&&("Top"===e.direction||"Bottom"===e.direction)&&e.point.y<=i.point.y&&i.corners.top<=e.point.y&&i.corners.bottom>=e.point.y||"Top"===i.direction&&e.point.y>i.point.y||"Bottom"===i.direction&&e.point.y<i.point.y&&i.corners.left<=e.point.x&&i.corners.right>=e.point.x?n=y(t,e,i):void 0!==t.sourceWrapper&&void 0!==t.targetWrapper&&void 0!==t.targetPortWrapper&&("Left"===e.direction||"Right"===e.direction)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom&&("Top"===i.direction||"Bottom"===i.direction)&&i.corners.center.x===e.corners.center.x?(e.direction="Top"===i.direction?"Bottom":"Top",r="Top"===i.direction?e.corners.bottom-e.point.y+20:e.point.y-e.corners.top+20,n=ct(t,e,i,r)):void 0!==t.sourceWrapper&&void 0!==t.targetWrapper&&void 0!==t.targetPortWrapper&&("Top"===e.direction||"Bottom"===e.direction)&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right&&("Left"===i.direction||"Right"===i.direction)&&i.corners.center.y===e.corners.center.y?(e.direction="Left"===i.direction?"Right":"Left",r="Left"===i.direction?e.corners.right-e.point.x+20:e.point.x-e.corners.left+20,n=ct(t,e,i,r)):s?(r="Left"===e.direction||"Right"===e.direction?"Left"===e.direction?e.point.x-e.corners.left+20:e.corners.right-e.point.x+20:"Top"===e.direction?e.point.y-e.corners.top+20:e.corners.bottom-e.point.y+20,n=ct(t,e,i,r)):n=st(e,i),n}function w(t,e,i,n,o,r,a){var s,c,d,l,p,u=[];if(E(t),t.segments.length>0){for(var y=0;y<t.segments.length;y++){var v=t.segments[y];if(0===y&&void 0!==t.sourcePortWrapper&&(l={x:r.offsetX,y:r.offsetY},d=vt(l,Object(h["c"])(n),n.bounds,!1),v.direction===wt(d)&&(v.direction=d)),y>0&&t.segments[y-1].direction===v.direction)y=D(t,y,e);else{var w=t.segments[y-1];e.point=v.direction?g(e,v):w.points[w.points.length-1]}if(y===t.segments.length-1&&(a||o?t.targetWrapper&&void 0===t.targetPortWrapper?(R(t,e),c=m(t,e,i)):c=b(t,e,i):c=f(t,e,i),c))if(x(c,t,e),v.points=[],c.length>=2)for(s=0;s<c.length;s++)v.points.push(c[s]);else p=y;if(r&&0===y){var j=O(t,r,n);j&&(e.point=j)}}void 0!==p&&(p===t.segments.length-1&&(t.segments[p-1].direction=null,t.segments[p-1].length=null),t.segments.splice(p,1)),u=B(t,u)}return u}function O(t,e,i){var o,r={x:e.offsetX,y:e.offsetY},a=Object(h["c"])(i),s=vt(r,a,i.bounds,!1),c=t.segments[0];return c.direction!==s&&(X(c,s,a,c.points[0],c.points[c.points.length-1],!1),o=c.points[c.points.length-1],c.direction=n["a"].direction(c.points[c.points.length-2],c.points[c.points.length-1])),o}function x(t,e,i){var o,r=e.segments[e.segments.length-2],a=r.points[r.points.length-1];("Top"!==r.direction&&"Bottom"!==r.direction||a.x!==t[1].x)&&("Left"!==r.direction&&"Right"!==r.direction||a.y!==t[1].y)||(r.points[r.points.length-1]=t[1],o=n["a"].direction(r.points[0],r.points[r.points.length-1]),void 0!==e.sourceWrapper&&void 0===e.sourcePortWrapper&&o===wt(r.direction)&&("Left"===r.direction||"Right"===r.direction?r.points[0].x="Right"===r.direction?r.points[0].x-e.sourceWrapper.corners.width:r.points[0].x+e.sourceWrapper.corners.width:r.points[0].y="Bottom"===r.direction?r.points[0].y-e.sourceWrapper.corners.height:r.points[0].y+e.sourceWrapper.corners.height),r.direction=o,r.length=n["a"].distancePoints(r.points[0],r.points[r.points.length-1]),t.splice(0,1))}function j(t,e,i){var n,o=t.sourcePortWrapper,r=t.targetPortWrapper,a=t.sourceWrapper,s=e.point,c={left:0,right:0,top:0,bottom:0},h={x:0,y:0},d="Top";if(a?(s=i.point,c=e.margin):(a=t.targetWrapper,c=i.margin),"Orthogonal"===t.type)if(t.segments&&t.segments.length>0&&t.sourceWrapper&&t.segments[0].direction)e.direction=t.segments[0].direction,h=_(a.corners,e.direction),n=_(a.corners,wt(e.direction)),h=V(t,a,h,n,!1);else{var l={corners:null,direction:null,point:s,margin:c},p={corners:null,direction:null,point:null,margin:null};H(a,l,p,t),h=p.point,d=p.direction}else{var u=void 0;t.segments&&t.segments.length>1&&(u=a===t.sourceWrapper?t.segments[0].point:t.segments[t.segments.length-2].point),h=V(t,a,a.bounds.center,t.segments&&t.segments.length>1?u:s,a===t.targetWrapper)}a===t.sourceWrapper?(e.direction=e.direction||d,e.point=h,t.sourcePortWrapper&&(e.point={x:o.offsetX,y:o.offsetY},t.sourcePadding&&(e.point=S(t,e,i,!1)))):(i.direction=i.direction||d,i.point=h,t.targetPortWrapper&&(i.point={x:r.offsetX,y:r.offsetY},t.targetPadding&&(i.point=S(t,e,i,!0))))}function S(t,e,i,n){var r=t.sourcePortWrapper,a=t.targetPortWrapper,s=n?t.targetPadding:t.sourcePadding,c=n?a:r,h=new o["a"](c.bounds.x-s,c.bounds.y-s,c.actualSize.width+2*s,c.actualSize.height+2*s),d=[h.topLeft,h.topRight,h.bottomRight,h.bottomLeft];d[d.length]=d[0];d.length;var l={x1:e.point.x,y1:e.point.y,x2:i.point.x,y2:i.point.y},p=n?i.point:e.point;return F(l,d,!0,p)||p}function C(t,e,i){for(var n=P(t,i.sourcePadding),o=P(e,i.targetPadding),a=0;a<n.length-1;a++)for(var s=n[a],c=0;c<o.length-1;c++){var h=o[c];if(Object(r["G"])(s,h).enabled)return!0}return!1}function P(t,e){var i=[],n=Object(r["A"])(t,t.corners,e);n.push(n[0]);for(var o=0;o<n.length-1;o++)i.push(T(n[o],n[o+1]));return i}function T(t,e){var i={x1:t.x,y1:t.y,x2:e.x,y2:e.y};return i}function I(t,e,i){var n,o=t.rotateAngle+t.parentTransform;if(o){if(o<45)return e;if(o<=135)n={width:e.width,height:e.height,topLeft:e.bottomLeft,topCenter:e.middleLeft,topRight:e.topLeft,middleLeft:e.bottomCenter,center:i.center,middleRight:e.topCenter,bottomLeft:e.bottomRight,bottomCenter:e.middleRight,bottomRight:e.topRight,left:i.left,right:i.right,top:i.top,bottom:i.bottom};else if(o<=225)n={width:e.width,height:e.height,topLeft:e.bottomLeft,topCenter:e.bottomCenter,topRight:e.bottomRight,middleLeft:e.middleRight,center:i.center,middleRight:e.middleLeft,bottomLeft:e.topLeft,bottomCenter:e.topCenter,bottomRight:e.topRight,left:i.left,right:i.right,top:i.top,bottom:i.bottom};else{if(!(o<=315))return e;n={width:e.width,height:e.height,topLeft:e.topRight,topCenter:e.middleRight,topRight:e.bottomRight,middleLeft:e.topCenter,center:i.center,middleRight:e.bottomCenter,bottomLeft:e.topLeft,bottomCenter:e.middleLeft,bottomRight:e.bottomLeft,left:i.left,right:i.right,top:i.top,bottom:i.bottom}}return n}return e}function A(t,e,i,o,r){var a,c=t.sourceWrapper,h=t.targetWrapper,d=t.sourcePortWrapper,l=t.targetPortWrapper,p=[],u=c.corners,g=h.corners,f=(g.center,{left:5,right:5,bottom:5,top:5}),m={left:5,right:5,bottom:5,top:5},y={corners:u,point:o,direction:e,margin:f},v={corners:g,point:r,direction:i,margin:m},b=I(c,u,t.sourceWrapper.bounds),w=I(h,g,t.targetWrapper.bounds),O=!1;if(t.sourceWrapper&&t.targetWrapper&&(O=C(t.sourceWrapper,t.targetWrapper,t)),void 0!==d){switch(y.point={x:d.offsetX,y:d.offsetY},y.direction){case"Bottom":case"Top":y.point.y=y.point.y;break;case"Left":case"Right":y.point.x=y.point.x;break}t.sourcePadding&&!O&&(l&&(v.point={x:l.offsetX,y:l.offsetY}),y.point=S(t,y,v,!1))}else"Orthogonal"===t.type?(t.segments&&t.segments.length>0&&t.segments[0].direction&&(y.direction=t.segments[0].direction),y.point=_(b,y.direction),a=_(b,wt(y.direction)),y.point=V(t,c,y.point,a,!1)):y.point=c.corners.center;if(void 0!==l){switch(v.point={x:l.offsetX,y:l.offsetY},v.direction){case"Bottom":case"Top":v.point.y=v.point.y;break;case"Left":case"Right":v.point.x=v.point.x;break}t.targetPadding&&!O&&(v.point=S(t,y,v,!0))}else"Orthogonal"===t.type?(v.point=_(w,v.direction),a=_(w,wt(v.direction)),v.point=V(t,h,v.point,a,!0)):v.point=h.corners.center;if("Orthogonal"!==t.type){var x=void 0,j=void 0;if(E(t),void 0===t.sourcePortWrapper){y.point=y.corners.center,t.segments&&t.segments.length>0&&(j=t.segments[0],x=n["a"].isEmptyPoint(j.point)?void 0:j);var P=void 0!==x?x.point:v.point;if("Bezier"===t.type&&t.segments.length>0&&t.segments[0].vector1.angle&&t.segments[0].vector1.distance){var T=Math.max(y.corners.width,y.corners.height);P=n["a"].transform(y.point,t.segments[0].vector1.angle,T/2)}y.point=O?t.sourceWrapper.bounds.center:V(t,c,y.point,P,!1)}if(void 0===t.targetPortWrapper){v.point=v.corners.center,t.segments&&t.segments.length>1&&(j=t.segments[t.segments.length-2],x=n["a"].isEmptyPoint(j.point)?void 0:j);var A=x?x.point:y.point;if("Bezier"===t.type&&t.segments.length>0&&t.segments[t.segments.length-1].vector2.angle&&t.segments[t.segments.length-1].vector2.distance){T=Math.max(y.corners.width,y.corners.height);A=n["a"].transform(v.point,t.segments[0].vector2.angle,T/2)}v.point=O?t.targetWrapper.bounds.center:V(t,h,A,v.point,!0)}p=z(t,y,v)}else if("Orthogonal"===t.type&&t.segments&&t.segments.length>0&&null!==t.segments[0].direction)p=M(t,y,v,d,l,c,h);else{if(!t.segments[0]){x=new s["c"](t,"segments",{type:"Orthogonal"},!0);t.segments.push(x)}t.segments[0].points=p=N(t,y,v)}return p}function z(t,e,i){var o=[];if(t.segments&&t.segments.length>0){var r=void 0,a=[],s=e.point;for(r=0;r<t.segments.length;r++){var c=t.segments[r];if(a=[],a.push(s),r!==t.segments.length-1?(a.push(c.point),s=c.point):a.push(i.point),t.segments[r].points=a,t.segments.length>1&&n["a"].equals(c.points[0],c.points[1])&&t.segments.splice(r,1),c)for(var h=0;h<c.points.length;h++)(h>0||0===r)&&o.push(c.points[h])}}return o}function L(t,e,i){var n="Top"===t||"Bottom"===t?i.x>e.x?"Right":"Left":i.y>e.y?"Bottom":"Top";return n}function E(t){if("Straight"===t.type||"Bezier"===t.type){if(0===t.segments.length||t.segments.length>0&&!n["a"].isEmptyPoint(t.segments[t.segments.length-1].point)){var e=void 0;e="Bezier"===t.type?new s["a"](t,"segments",{type:"Bezier"},!0):new s["d"](t,"segments",{type:"Straight"},!0),t.segments.push(e)}}else if(0===t.segments.length||t.segments[t.segments.length-1].direction){e=new s["c"](t,"segments",{type:"Orthogonal"},!0);t.segments.push(e)}}function D(t,e,i){var n=t.segments[e],o="Left"===n.direction||"Top"===n.direction?-n.length:n.length,r="Left"===n.direction||"Right"===n.direction?0:90,a=Y(i.point,o,r);return t.segments[e-1].length+=n.length,t.segments[e-1].points[1]=i.point=a,t.segments.splice(e,1),e--,e}function k(t,e,i){var n,o;if(t.sourcePortWrapper){var r={x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY};o=vt(r,Object(h["c"])(t.sourceWrapper),t.sourceWrapper.bounds,!1)}H(t.targetWrapper,e,i,t);var a=L(i.direction,e.point,i.point);if(void 0===t.sourcePortWrapper||e.direction!==i.direction||("Top"!==e.direction&&"Bottom"!==e.direction||e.corners.center.x!==i.corners.center.x)&&("Left"!==e.direction&&"Right"!==e.direction||e.corners.center.y!==i.corners.center.y))if(i.point.x>=e.corners.left&&i.point.x<=e.corners.right&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom){e.direction=i.point.y>e.point.y?"Bottom":"Top";var s="Top"===e.direction?e.point.y-e.corners.top+20:e.corners.bottom-e.point.y+20;n=ct(t,e,i,s)}else if(t.sourcePortWrapper&&o===wt(a)){var c;("Left"===o||"Right"===o)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom?(e.direction=i.point.y>e.point.y?"Bottom":"Top",c=e.corners.height/2+20):("Top"===o||"Bottom"===o)&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right&&(e.direction=i.point.x>e.point.x?"Right":"Left",c=e.corners.width/2+20),e.direction&&c?n=ct(t,e,i,c,!0):(e.direction=a,n=st(e,i))}else if(!t.sourcePortWrapper||o!==i.direction||"Top"!==o&&"Bottom"!==o||e.corners.center.x!==i.corners.center.x)e.direction=a,n=st(e,i);else{e.direction=i.point.y>e.point.y?"Bottom":"Top";var d="Bottom"===e.direction?e.corners.bottom-e.point.y+20:e.point.y-e.corners.top+20;n=ct(t,e,i,d)}else{e.direction=a,n=ct(t,e,i,"Top"===a||"Bottom"===a?t.sourceWrapper.height/2+20:t.sourceWrapper.width/2+20);var l=e;l.point=n[1],"Left"===a||"Right"===a?(i.direction=a,i.point="Left"===a?i.corners.middleLeft:i.corners.middleRight):H(t.targetWrapper,e,i,t),n=ct(t,e,i)}return n}function R(t,e){if(void 0!==t.targetWrapper&&void 0===t.targetPortWrapper&&Object(h["c"])(t.targetWrapper).containsPoint(e.point)){var i=t.targetWrapper,o=t.segments[t.segments.length-2],r=o.points[o.points.length-1],a=wt(o.direction);"Bottom"===a?r.y<i.corners.bottom&&(o.points[o.points.length-1].y=i.corners.bottom+20,o.length=n["a"].distancePoints(o.points[0],o.points[o.points.length-1])):"Top"===a?r.y>i.corners.top&&(o.points[o.points.length-1].y=i.corners.top-20,o.length=n["a"].distancePoints(o.points[0],o.points[o.points.length-1])):"Left"===a?r.x>i.corners.left&&(o.points[o.points.length-1].x=i.corners.left-20,o.length=n["a"].distancePoints(o.points[0],o.points[o.points.length-1])):"Right"===a&&r.x<i.corners.right&&(o.points[o.points.length-1].x=i.corners.right+20,o.length=n["a"].distancePoints(o.points[0],o.points[o.points.length-1])),e.point=o.points[o.points.length-1]}}function M(t,e,i,n,o,r,a){var s,c,h,d,l=[];E(t);for(var p=0;p<t.segments.length;p++){if(c=t.segments[p],n&&e.direction===wt(c.direction)&&(c.direction=e.direction),p>0&&t.segments[p-1].direction===c.direction)p=D(t,p,e);else if(c.direction)e.point=g(e,t.segments[p]);else{var u=t.segments[p-1];e.point=u.points[u.points.length-1]}if(p===t.segments.length-1)if(R(t,e),s=void 0===o?k(t,e,i):b(t,e,i),x(s,t,e),c.points=[],s.length>=2)for(h=0;h<s.length;h++)c.points.push(s[h]);else d=p;if(void 0!==d&&(d===t.segments.length-1&&(t.segments[d-1].direction=null,t.segments[d-1].length=null),t.segments.splice(d,1)),n&&0===p){var f=O(t,n,r);f&&(e.point=f)}}return B(t,l)}function B(t,e){for(var i=0;i<t.segments.length;i++)for(var n=t.segments[i],o=0;o<n.points.length;o++)(o>0||0===i)&&e.push(n.points[o]);return e}function H(t,e,i,n){var o,r={x:0,y:0},a=I(t,t.corners,t.bounds),s=e.margin,c=e.point;if(a.bottomCenter.y+s.bottom<c.y)o="Bottom",r=a.bottomCenter;else if(a.topCenter.y-s.top>c.y)o="Top",r=a.topCenter;else if(a.middleLeft.x-s.left>c.x)o="Left",r=a.middleLeft;else if(a.middleRight.x+s.right<c.x)o="Right",r=a.middleRight;else{var h=Math.abs(c.y-a.topCenter.y),d=Math.abs(c.x-a.middleRight.x),l=Math.abs(c.y-a.bottomCenter.y),p=Math.abs(c.x-a.middleLeft.x),u=Number.MAX_VALUE;u=h,o="Top",r=a.topCenter,u>d&&(u=d,o="Right",r=a.middleRight),u>l&&(u=l,o="Bottom",r=a.bottomCenter),u>p&&(o="Left",r=a.middleLeft)}i.point=r,i.direction=o;var g=_(a,wt(i.direction));i.point=V(n,t,i.point,g,t===n.targetWrapper)}function N(t,e,i,n){var o,r=!1,a=[];return r=mt(e.direction,i.direction),r&&yt(e,i),"Right"===e.direction&&"Left"===i.direction?o=Z(t,e,i,r):"Right"===e.direction&&"Right"===i.direction?o=Q(t,e,i):"Right"===e.direction&&"Top"===i.direction?o=K(t,e,i,r):"Right"===e.direction&&"Bottom"===i.direction?o=J(t,e,i,r):"Bottom"===e.direction&&"Top"===i.direction?o=$(e,i):"Bottom"===e.direction&&"Bottom"===i.direction?(e.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10},o=et(t,e,i)):"Bottom"===e.direction&&"Left"===i.direction?o=tt(t,e,i,r):"Left"===e.direction&&"Left"===i.direction?o=nt(t,e,i):"Left"===e.direction&&"Top"===i.direction?o=it(t,e,i,r):"Top"===e.direction&&"Top"===i.direction&&(o=ot(t,e,i)),r&&yt(e,i),a=rt(t,o,e,i,n),a}function W(t,e){var i={x:e.x,y:t.y},o=(n["a"].findLength(t,i),n["a"].findLength(i,e)),r=n["a"].findLength(e,t),a=Math.asin(o/r);return a=180*a/Math.PI,t.x<e.x?t.y>e.y&&(a=360-a):a=t.y<e.y?180-a:180+a,a}function _(t,e){var i;switch(e){case"Left":i=t.middleLeft;break;case"Top":i=t.topCenter;break;case"Right":i=t.middleRight;break;case"Bottom":i=t.bottomCenter;break}return i}function X(t,e,i,n,o,r){var a,s,c,h=13,d=[];d.push(n),c=n.y===o.y&&("Left"===e&&o.x<n.x||"Right"===e&&o.x>n.x)||n.x===o.x&&("Top"===e&&o.y<n.y||"Bottom"===e&&o.y>n.y),c||("Top"===e||"Bottom"===e?"Top"===e&&o.y<n.y&&o.y>n.y-h||"Bottom"===e&&o.y>n.y&&o.y<n.y+h?(s="Top"===e?i.top-h:i.bottom+h,d.push({x:n.x,y:s}),d.push({x:n.x+(o.x-n.x)/2,y:s}),d.push({x:n.x+(o.x-n.x)/2,y:o.y})):Math.abs(n.x-o.x)>h&&("Top"===e&&o.y<n.y||"Bottom"===e&&o.y>n.y)?d.push({x:n.x,y:o.y}):(s="Top"===e?i.top-h:i.bottom+h,a=o.x<n.x?i.left-h:i.right+h,d.push({x:n.x,y:s}),d.push({x:o.x,y:s})):"Left"===e&&o.x<n.x&&o.x>n.x-h||"right"===e&&o.x>n.x&&o.x<n.x+h?(a="Left"===e?i.left-h:i.right+h,d.push({x:a,y:n.y}),d.push({x:a,y:n.y+(o.y-n.y)/2}),d.push({x:o.x,y:n.y+(o.y-n.y)/2})):Math.abs(n.y-o.y)>h&&("Left"===e&&o.x<n.x||"Right"===e&&o.x>n.x)?d.push({x:o.x,y:n.y}):(a="Left"===e?i.left-h:i.right+h,d.push({x:a,y:n.y}),d.push({x:a,y:o.y})),r&&(d.push(t.points[0]),d.reverse()),t.points=d)}function Y(t,e,i){var o=n["a"].transform(t,i,e);return o}function V(t,e,i,a,s){i={x:i.x,y:i.y},a={x:a.x,y:a.y};var d,l,p,u=n["a"].findAngle(a,i),g=s?t.targetWrapper:t.sourceWrapper,f=s?t.targetPadding:t.sourcePadding,m=s||"Orthogonal"===t.type?i:a;n["a"].transform(i,u,Math.max(g.actualSize.height/2,g.actualSize.width/2));d=g;var y=Object(h["j"])(-g.parentTransform,g.offsetX,g.offsetY,i),v=Object(h["j"])(-g.parentTransform,g.offsetX,g.offsetY,a);if("Orthogonal"===t.type){var b=5;y.x===v.x&&(y.y<v.y?y.y-=b:y.y+=b),y.y===v.y&&(y.x<v.x?y.x-=b:y.x+=b),i=Object(h["j"])(g.parentTransform,g.offsetX,g.offsetY,y)}else{s?n["a"].findAngle(i,a):n["a"].findAngle(a,i);if(s){var w=n["a"].findAngle(i,a);a=n["a"].transform({x:a.x,y:a.y},w,Math.max(g.actualSize.width,g.actualSize.height))}else{var O=n["a"].findAngle(a,i);i=n["a"].transform({x:i.x,y:i.y},O,Math.max(g.actualSize.width,g.actualSize.height))}}g instanceof c["a"]&&g.data?(p=d.getPoints(),d.data.split("m").length-1+(d.data.split("M").length-1)===1&&(p[p.length]=p[0])):((t.sourcePadding||t.targetPadding)&&(l=new o["a"](g.bounds.x-f,g.bounds.y-f,g.actualSize.width+2*f,g.actualSize.height+2*f)),p=l?[l.topLeft,l.topRight,l.bottomRight,l.bottomLeft]:Object(r["A"])(g,g.corners),p[p.length]=p[0]);p.length;var x={x1:i.x,y1:i.y,x2:a.x,y2:a.y};return F(x,p,!0,m)||i}function U(t,e,i){return e.x=Math.round(100*e.x)/100,e.y=Math.round(100*e.y)/100,i?t.targetPoint=e:t.sourcePoint=e,e}function F(t,e,i,o){var r,a=e.length,s={x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y},c=G(t,s);if(c&&(r=n["a"].distancePoints(c,o)),isNaN(r)||r>0)for(var h=1;h<a-1;h++){s={x1:e[h].x,y1:e[h].y,x2:e[h+1].x,y2:e[h+1].y};var d=G(t,s);if(d){var l=n["a"].distancePoints(d,o);if((isNaN(r)||r>l)&&(r=l,c=d),r>=0&&r<=1)break}}return c}function G(t,e){var i,n,o,r,a,s,c,h,d,l,p,u,g,f,m,y=t.x1,v=t.y1,b=t.x2,w=t.y2,O=e.x1,x=e.y1,j=e.x2,S=e.y2;return i=w-v,o=y-b,a=b*v-y*w,p=i*O+o*x+a,u=i*j+o*S+a,0!==p&&0!==u&&q(p,u)?null:(n=S-x,r=O-j,s=j*x-O*S,d=n*y+r*v+s,l=n*b+r*w+s,0!==d&&0!==l&&q(d,l)?null:(g=i*r-n*o,0===g?null:(f=g<0?-g/2:g/2,f=0,m=o*s-r*a,c=m<0?(m-f)/g:(m+f)/g,m=n*a-i*s,h=m<0?(m-f)/g:(m+f)/g,{x:c,y:h})))}function q(t,e){return t*e>=0}function Z(t,e,i,n){var o,r=t.sourcePortWrapper,s=(t.targetPortWrapper,Math.round(Math.abs(e.point.y-i.point.y))),c=(Math.round(Math.abs(e.point.x-i.point.x)),{x:Math.max(e.point.x,e.corners.right),y:e.point.y}),d={x:Math.min(i.point.x,i.corners.left),y:i.point.y},l=10;if(n){var p=void 0;p=d,d=c,c=p}return e.corners.bottom+l<i.corners.top-l||e.corners.top-l>i.corners.bottom+l||(l=0),e.margin={left:l,right:l,top:l,bottom:l},i.margin={left:l,right:l,top:l,bottom:l},o=0===s&&(e.corners.right<i.corners.left||n&&e.corners.right<i.corners.left)?a["j"].One:e.point.x+e.margin.right<i.point.x-i.margin.left?a["j"].Three:t.sourceWrapper!==t.targetWrapper&&(Object(h["c"])(t.sourceWrapper).containsPoint(d)||Object(h["c"])(t.targetWrapper).containsPoint(c))?a["j"].Three:e.corners.bottom<=i.corners.top?a["j"].Five:e.corners.top>=i.corners.top?a["j"].Five:void 0!==r&&r.offsetY<=i.corners.top||void 0===r&&e.corners.right<=i.corners.top?a["j"].Five:(void 0!==r&&r.offsetY>=i.corners.bottom||void 0===r&&(e.corners.right,i.corners.bottom),a["j"].Five),o}function Q(t,e,i){var n,o=t.sourcePortWrapper,r=t.targetPortWrapper,s=e.point.x-i.point.x,c=e.point.y-i.point.y;return i.margin={left:10,right:10,top:10,bottom:10},e.margin={left:10,right:10,top:10,bottom:10},n=e.corners.right>=i.corners.right?void 0!==o&&(o.offsetY<i.corners.top||o.offsetY>i.corners.bottom)||void 0===o&&e.corners.middleRight.y<i.corners.top?a["j"].Three:void 0!==o&&o.offsetY>i.corners.bottom+i.margin.bottom&&e.corners.top>i.corners.bottom||void 0===o&&e.corners.middleRight.y>i.corners.bottom?a["j"].Three:void 0!==o&&o.offsetY<i.corners.top&&e.corners.bottom>i.corners.top||void 0===o&&e.corners.middleRight.y>i.corners.bottom?a["j"].Three:e.corners.right<i.corners.left||i.corners.right<e.corners.left?a["j"].Five:0===s||0===c?a["j"].One:a["j"].Three:void 0!==r&&e.corners.bottom<r.offsetY||void 0===r&&e.corners.bottom<i.corners.middleRight.y?a["j"].Three:void 0!==r&&e.corners.top>r.offsetY||void 0===r&&e.corners.top>i.corners.middleRight.y?a["j"].Three:void 0!==r&&(void 0!==o&&o.offsetX<i.corners.left&&o.offsetX!==r.offsetX&&o.offsetY!==r.offsetY&&Math.abs(e.corners.right-i.corners.left)<=20||void 0===o&&e.corners.right<i.corners.left&&e.corners.center.x!==i.corners.center.x&&e.corners.center.y!==i.corners.center.y)?a["j"].Three:e.corners.right<i.corners.left?a["j"].Five:0===s||0===c?a["j"].One:a["j"].Three,n}function K(t,e,i,n){var o,r=t.targetPortWrapper,s=t.sourcePortWrapper,c={x:Math.max(e.point.x,e.corners.right),y:e.point.y},d={x:i.point.x,y:Math.min(i.point.y,i.corners.top)};if(i.margin={left:5,right:5,top:5,bottom:5},e.margin={top:5,bottom:5,left:5,right:5},n){var l=void 0;l=s,s=r,r=l}return o=void 0!==s&&s.offsetY<i.corners.top-i.margin.top||void 0===s&&e.corners.bottom<i.corners.top-i.margin.top?e.corners.bottom<i.corners.top?void 0!==r&&e.corners.right+e.margin.right<r.offsetX||void 0===r&&e.corners.right+e.margin.right<i.corners.topCenter.x?a["j"].Two:a["j"].Four:void 0!==r&&e.corners.left>r.offsetX||void 0===r&&e.corners.left>i.corners.topCenter.x?a["j"].Four:a["j"].Two:void 0!==s&&Math.abs(e.corners.right-i.corners.left)<=25&&Math.abs(s.offsetY-i.corners.top)<=25?a["j"].Two:void 0!==r&&Math.abs(r.offsetX-e.corners.topCenter.x)>=25&&e.corners.middleRight.y<r.offsetY?a["j"].Two:e.corners.right<i.corners.left?a["j"].Four:t.sourceWrapper!==t.targetWrapper&&(Object(h["c"])(t.sourceWrapper).containsPoint(d)||Object(h["c"])(t.targetWrapper).containsPoint(c))?a["j"].Two:a["j"].Four,o}function J(t,e,i,n){var o;e.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10};var r=t.sourcePortWrapper,s=t.targetPortWrapper;Math.max(e.point.x,e.corners.right),e.point.y,i.point.x,Math.max(i.point.y,i.corners.bottom);if(n){var c=void 0;c=r,r=s,s=c}return o=void 0!==r&&r.offsetY>i.corners.bottom+i.margin.bottom||void 0===r&&e.corners.middleRight.y>i.corners.bottom+i.margin.bottom?e.corners.top>i.corners.bottom?void 0!==s&&e.corners.right+e.margin.right<s.offsetX||void 0===s&&e.corners.right+e.margin.right<i.corners.bottomCenter.x?a["j"].Two:a["j"].Four:void 0!==s&&e.corners.left>s.offsetX||void 0===s&&e.corners.left>i.corners.bottomCenter.x?a["j"].Four:a["j"].Two:void 0!==r&&Math.abs(e.corners.right-i.corners.left)<=25&&Math.abs(r.offsetY-i.corners.bottom)<=25?a["j"].Two:(e.corners.right,i.corners.left,a["j"].Four),o}function $(t,e){var i,n=t.point.x-e.point.x,o=(t.point.y,e.point.y,t.point.x,Math.max(t.point.y,t.corners.bottom),e.point.x,Math.min(e.point.y,e.corners.top),10);return t.corners.right+o<e.corners.left-o||t.corners.left-o>e.corners.right+o||(o=0),t.margin={left:o,right:o,top:o,bottom:o},e.margin={left:o,right:o,top:o,bottom:o},i=0===n&&t.corners.bottom<e.corners.top?a["j"].One:t.corners.bottom+t.margin.bottom<e.corners.top-e.margin.top?a["j"].Three:t.corners.right+t.margin.right<e.corners.left-e.margin.left?a["j"].Five:(t.corners.left,t.margin.left,e.corners.right,e.margin.right,a["j"].Five),i}function tt(t,e,i,n){var o,r=t.sourcePortWrapper,s=t.targetPortWrapper;e.point.x,Math.max(e.point.y,e.corners.bottom),Math.min(i.point.x,i.corners.left),i.point.y;if(n){var c=void 0;c=r,r=s,s=c}return o=void 0!==r&&r.offsetX<i.corners.left-i.margin.left||void 0===r&&e.corners.bottomCenter.x<i.corners.bottomLeft.x-i.margin.left?e.corners.right<i.corners.left?void 0!==s&&e.corners.bottom+e.margin.bottom<s.offsetY||void 0===s&&e.corners.bottom+e.margin.bottom<i.corners.middleLeft.y?a["j"].Two:a["j"].Four:void 0!==s&&e.corners.top>s.offsetY||void 0===s&&e.corners.top>i.corners.middleLeft.y?a["j"].Four:a["j"].Two:void 0!==s&&Math.abs(e.corners.right-i.corners.left)<=25&&Math.abs(s.offsetY-e.corners.bottom)<=25?a["j"].Two:a["j"].Four,o}function et(t,e,i){var n,o=t.sourcePortWrapper,r=t.targetPortWrapper,s=Math.round(Math.abs(e.point.x-i.point.x)),c=Math.round(Math.abs(i.point.y-i.point.y));return n=e.corners.bottom<i.corners.bottom?void 0!==o&&o.offsetX<i.corners.left-i.margin.left||void 0===o&&e.corners.bottomCenter.x<i.corners.left-i.margin.left?a["j"].Three:void 0!==o&&o.offsetX>i.corners.right+i.margin.right||void 0===o&&e.corners.bottomCenter.x>i.corners.right+i.margin.right?a["j"].Three:e.corners.bottom<i.corners.top?a["j"].Five:0===s||0===c?a["j"].One:a["j"].Three:void 0!==r&&e.corners.left>r.offsetX||void 0===r&&e.corners.left>i.corners.left?a["j"].Three:void 0!==r&&e.corners.right<r.offsetX||void 0===r&&e.corners.right<i.corners.right?a["j"].Three:e.corners.top>i.corners.bottom?a["j"].Five:0===s||0===c?a["j"].One:a["j"].Three,n}function it(t,e,i,n){var o,r=t.sourcePortWrapper,s=t.targetPortWrapper,c={x:Math.min(e.point.x,e.corners.left),y:e.point.y},d={x:i.point.x,y:Math.min(i.point.y,i.corners.top)};if(n){var l=void 0;l=r,r=s,s=l}return o=void 0!==r&&r.offsetY<i.corners.top-i.margin.top||void 0===r&&(e.corners.bottom<i.corners.top-i.margin.top||e.corners.middleLeft.y<i.corners.top-i.margin.top)?e.corners.bottom<i.corners.top?void 0!==s&&e.corners.left-e.margin.left>s.offsetX||void 0===s&&e.corners.left-e.margin.left>i.corners.topCenter.x?a["j"].Two:a["j"].Four:void 0!==s&&e.corners.right<s.offsetX||void 0===s&&e.corners.right<i.corners.topCenter.x?a["j"].Four:a["j"].Two:void 0!==r&&Math.abs(e.corners.left-i.corners.right)<=25&&Math.abs(r.offsetY-i.corners.top)<=25?a["j"].Two:t.sourceWrapper!==t.targetWrapper&&(Object(h["c"])(t.sourceWrapper).containsPoint(d)||Object(h["c"])(t.targetWrapper).containsPoint(c))?a["j"].Two:(e.corners.left,i.corners.right,a["j"].Four),o}function nt(t,e,i){var n=t.sourcePortWrapper,o=t.targetPortWrapper;e.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10};var r,s=Math.round(Math.abs(e.point.x-i.point.x)),c=Math.round(Math.abs(e.point.y-i.point.y));return r=e.corners.left<i.corners.left?void 0!==o&&e.corners.bottom+e.margin.bottom<o.offsetY||void 0===o&&e.corners.bottom+e.margin.bottom<i.corners.middleLeft.y?a["j"].Three:void 0!==o&&e.corners.top-e.margin.top>o.offsetY||void 0===o&&e.corners.top-e.margin.top>i.corners.middleLeft.y?a["j"].Three:e.corners.right<i.corners.left||i.corners.right<e.corners.left?a["j"].Five:0===s||0===c?a["j"].One:a["j"].Three:void 0!==n&&n.offsetY<i.corners.top-i.margin.top||void 0===n&&e.corners.middleLeft.y<i.corners.top?a["j"].Three:void 0!==n&&n.offsetY>i.corners.bottom+i.margin.bottom||void 0===n&&e.corners.middleLeft.y>i.corners.bottom+i.margin.bottom?a["j"].Three:e.corners.left>i.corners.right?a["j"].Five:0===s||0===c?a["j"].One:a["j"].Three,r}function ot(t,e,i){var n,o=t.sourcePortWrapper,r=t.targetPortWrapper,s=Math.round(Math.abs(e.point.x-i.point.x)),c=Math.round(Math.abs(e.point.y-i.point.y));return e.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10},n=e.corners.top<i.corners.top?void 0!==r&&e.corners.left>r.offsetX||void 0===r&&e.corners.left>i.corners.left?a["j"].Three:void 0!==r&&e.corners.right<r.offsetX||void 0===r&&e.corners.right<i.corners.right?a["j"].Three:e.corners.bottom<i.corners.top?a["j"].Five:0===s||0===c?a["j"].One:a["j"].Three:void 0!==o&&o.offsetX>i.corners.right||void 0===o&&e.corners.left>i.corners.right?a["j"].Three:void 0!==o&&o.offsetX<i.corners.left||void 0===o&&e.corners.bottomRight.x<i.corners.left?a["j"].Three:e.corners.top>i.corners.bottom?a["j"].Five:0===s||0===c?a["j"].One:a["j"].Three,n}function rt(t,e,i,n,o){var r,s=t.sourceWrapper,c=t.targetWrapper,h=(t.targetPortWrapper,s.corners),d=c.corners,l=20;if((i.direction!==n.direction||e===a["j"].Five)&&(i.direction===wt(n.direction)||e===a["j"].Three))switch(i.direction){case"Left":h.middleLeft.x>d.middleRight.x&&(l=Math.min(l,(h.middleLeft.x-d.middleRight.x)/2));break;case"Right":h.middleRight.x<d.middleLeft.x&&(l=Math.min(l,(d.middleLeft.x-h.middleRight.x)/2));break;case"Top":h.topCenter.y>d.bottomCenter.y&&(l=Math.min(l,(h.topCenter.y-d.bottomCenter.y)/2));break;case"Bottom":h.bottomCenter.y<d.topCenter.y&&(l=Math.min(l,(d.topCenter.y-h.bottomCenter.y)/2));break}if(l=at(h,i,l),o&&(l=Math.max(l,o)),e===a["j"].One&&(r=[i.point,n.point]),e===a["j"].Two&&(r=st(i,n)),e===a["j"].Three&&(r=ct(t,i,n,l)),e===a["j"].Four){var p=void 0;r=dt(i,n,p,r,l)}return e===a["j"].Five&&(r=ht(i,n,l)),r}function at(t,e,i){switch(e.direction){case"Left":e.point.x>t.left&&(i=e.point.x-t.left>i?e.point.x-t.left+i:i);break;case"Right":e.point.x<t.right&&(i=t.right-e.point.x>i?t.right-e.point.x+i:i);break;case"Top":e.point.y>t.top&&(i=e.point.y-t.top>i?e.point.y-t.top+i:i);break;case"Bottom":e.point.y<t.bottom&&(i=t.bottom-e.point.y>i?t.bottom-e.point.y+i:i);break}return i}function st(t,e){var i;switch(t.direction){case"Left":case"Right":var o={x:e.point.x,y:t.point.y};i=n["a"].equals(t.point,o)||n["a"].equals(e.point,o)?[t.point,e.point]:[t.point,o,e.point];break;case"Top":case"Bottom":var r={x:t.point.x,y:e.point.y};i=n["a"].equals(t.point,r)||n["a"].equals(e.point,r)?[t.point,e.point]:[t.point,r,e.point];break}return i}function ct(t,e,i,n,o){n||(n=20);var r,a,s,c,h=t.sourcePortWrapper,d=i.point.x-e.point.x,l=i.point.y-e.point.y;if(!o&&(Math.abs(d)<.001||Math.abs(l)<.001)&&void 0===i.direction)return r=[e.point,i.point],r;if(void 0===t.targetWrapper&&Math.abs(d)<=31&&Math.abs(l)<=31){if("Left"===e.direction||"Right"===e.direction?Math.abs(l)<12&&(e.direction=e.point.y>i.point.y?"Top":"Bottom"):Math.abs(d)<12&&(e.direction=e.point.x>i.point.x?"Left":"Right"),Math.abs(d)>12||Math.abs(l)>12)return st(e,i);n+=5}return"Left"===e.direction||"Right"===e.direction?("Right"===e.direction?(void 0!==i.direction&&"Right"===i.direction&&(n=Math.max(e.point.x,i.point.x)-e.point.x+n),e.point.x>i.point.x&&void 0===h&&(n=-n)):(void 0!==i.direction&&"Left"===i.direction&&(n=e.point.x-Math.min(e.point.x,i.point.x)+n),(e.point.x>i.point.x||void 0!==h||"Left"===e.direction)&&(n=-n)),c=i.point.y-e.point.y,a=Y(e.point,n,0),c=i.point.y-a.y,0!==c&&(s=Y(a,i.point.y-a.y,90))):"Top"!==e.direction&&"Bottom"!==e.direction||("Bottom"===e.direction?void 0!==i.direction&&"Bottom"===i.direction&&(n=Math.max(e.point.y,i.point.y)-e.point.y+n):(void 0!==i.direction&&"Top"===i.direction&&(n=e.point.y-Math.min(e.point.y,i.point.y)+n),(e.point.y>i.point.y||void 0!==h||"Top"===e.direction)&&(n=-n)),c=i.point.x-e.point.x,a=(e.direction,Y(e.point,n,90)),c=i.point.x-a.x,0!==c&&(s=Y(a,i.point.x-a.x,0))),0===c?[e.point,i.point]:(r=[e.point,a,s,i.point],r)}function ht(t,e,i){var n;void 0===i&&(i=20);var o,r=i,a=t.corners.left-t.margin.left,s=t.corners.right+t.margin.right,c=t.corners.bottom+t.margin.bottom,h=t.corners.top-t.margin.top,d=e.corners.left-e.margin.left,l=e.corners.right+e.margin.right,p=e.corners.bottom+e.margin.bottom,u=e.corners.top-e.margin.top;switch(t.direction){case"Left":(h>u&&h<p||c<p&&c>u)&&a>d&&a<=l&&i>=20&&(r=t.point.x-e.corners.left+r),o=Y(t.point,r,180);break;case"Top":(a>d&&a<l||s<l&&s>d)&&h>u&&h<=p&&i>=20&&(r=t.point.y-e.corners.top+r),o=Y(t.point,r,270);break;case"Right":(h>u&&h<p||c<p&&c>u)&&s<l&&s>=d&&i>=20&&(r=e.corners.right-t.point.x+r),o=Y(t.point,r,0);break;case"Bottom":(a>d&&a<l||s<l&&s>d)&&c<p&&c>=u&&i>=20&&(r=e.corners.bottom-t.point.y+r),o=Y(t.point,r,90);break}if(n=[t.point,o],"Top"===t.direction||"Bottom"===t.direction){var g=t.direction;t.direction=o.x>e.point.x?"Left":"Right",t.point=o,n=dt(t,e,g,n)}else{g=t.direction;t.direction=o.y>e.point.y?"Top":"Bottom",t.point=o,n=dt(t,e,g,n)}return n}function dt(t,e,i,n,o){var r;switch(void 0===o&&(o=20),void 0===i?(t.margin={left:2,right:2,top:2,bottom:2},e.margin={left:0,right:5,top:0,bottom:5}):"Bottom"===t.direction?e.corners.top>t.corners.bottom&&e.corners.top-t.corners.bottom<20&&(o=(e.corners.top-t.corners.bottom)/2):"Top"===t.direction?e.corners.bottom<t.corners.top&&t.corners.top-e.corners.bottom<20&&(o=(t.corners.top-e.corners.bottom)/2):"Right"===t.direction?e.corners.left>t.corners.right&&e.corners.left-t.corners.right<20&&(o=(e.corners.left-t.corners.right)/2):"Left"===t.direction&&e.corners.right<t.corners.left&&t.corners.left-e.corners.right<20&&(o=(t.corners.left-e.corners.right)/2),t.direction){case"Left":o=ut(t,e,i,o),r=Y(t.point,o,180);break;case"Right":o=gt(t,e,o,i),r=Y(t.point,o,0);break;case"Top":o=pt(t,e,i,o),r=Y(t.point,o,270);break;case"Bottom":o=ft(t,e,o,i),r=Y(t.point,o,90)}return void 0!==n?n.push(r):n=[t.point,r],"Top"===t.direction||"Bottom"===t.direction?lt(r,"horizontal",t,e,n):"Right"!==t.direction&&"Left"!==t.direction||lt(r,"vertical",t,e,n),n}function lt(t,e,i,n,o){var r,a,s;"horizontal"===e?(i.margin={left:0,right:10,top:0,bottom:10},n.margin={left:0,right:10,top:0,bottom:10}):"vertical"===e&&(i.margin={left:10,right:0,top:10,bottom:0},n.margin={left:10,right:0,top:10,bottom:0});var c=20;if("horizontal"===e){switch(n.direction){case"Left":if(i.corners.right+i.margin.right<n.corners.left-n.margin.left&&(n.corners.left-i.corners.right>c||i.corners.top-i.margin.top<=n.point.y&&i.corners.bottom+i.margin.bottom>=n.point.y)){var h=Math.min(Math.abs(n.corners.left-i.corners.right)/2,20);c=i.corners.right-t.x+h}else c="Top"===i.direction&&t.y>n.point.y||"Bottom"===i.direction&&t.y<n.point.y?Math.min(n.corners.left,t.x)-t.x-20:t.x>=i.corners.left-i.margin.left&&t.x<=i.corners.right+i.margin.right?Math.min(n.corners.left,i.corners.left)-t.x-20:n.corners.left-t.x-20;break;case"Right":if(i.corners.left-i.margin.left>n.corners.right+n.margin.right&&(i.corners.left-n.corners.right>c||i.corners.top-i.margin.top<=n.point.y&&i.corners.bottom+i.margin.bottom>=n.point.y)){h=Math.min(Math.abs(i.corners.left-n.corners.right)/2,20);c=i.corners.left-t.x-h}else c="Top"===i.direction&&t.y>n.point.y||"Bottom"===i.direction&&t.y<n.point.y?Math.max(n.corners.right,t.x)-t.x+20:t.x>=i.corners.left-i.margin.left&&t.x<=i.corners.right+i.margin.right?Math.max(n.corners.right,i.corners.right)-t.x+20:n.corners.right-t.x+20;break}r=Y(t,c,0),a=Y(r,n.point.y-t.y,90),s=n.point}else if("vertical"===e){switch(n.direction){case"Top":if(i.corners.bottom+i.margin.bottom<n.corners.top-n.margin.top&&(n.corners.top-i.corners.bottom>c||i.corners.left-i.margin.left<=n.point.x&&i.corners.right+i.margin.right>=n.point.x)){h=Math.min(Math.abs(n.corners.top-i.corners.bottom)/2,20);c=i.corners.bottom-t.y+h}else c="Left"===i.direction&&t.x>n.point.x||"Right"===i.direction&&t.x<n.point.x?Math.min(n.corners.top,t.y)-t.y-20:t.y>=i.corners.top-i.margin.top&&t.y<=i.corners.bottom+i.margin.bottom?Math.min(n.corners.top,i.corners.top)-t.y-20:n.corners.top-t.y-20;break;case"Bottom":if(i.corners.top-i.margin.top>n.corners.bottom+n.margin.bottom&&(i.corners.top-n.corners.bottom>c||i.corners.left-i.margin.left<=n.point.x&&i.corners.right+i.margin.right>=n.point.x)){h=Math.min(Math.abs(i.corners.top-n.corners.bottom)/2,20);c=i.corners.top-t.y-h}else c="Left"===i.direction&&t.x>n.point.x||"Right"===i.direction&&t.x<n.point.x?Math.max(n.corners.bottom,t.y)-t.y+20:t.y>=i.corners.top-i.margin.top&&t.y<=i.corners.bottom+i.margin.bottom?Math.max(n.corners.bottom,i.corners.bottom)-t.y+20:n.corners.bottom-t.y+20;break}r=Y(t,c,90),a=Y(r,n.point.x-t.x,0),s=n.point}o.push(r),o.push(a),o.push(s)}function pt(t,e,i,n){return t.corners.top-t.margin.top>e.corners.top+e.margin.top&&t.corners.top-t.margin.top<=e.corners.bottom+e.margin.bottom?("Right"===e.direction&&t.point.x<e.point.x?n+=t.corners.top-e.corners.top:"Left"===e.direction&&t.point.x>e.point.x&&(n+=t.corners.top-e.corners.top),n+=t.point.y-t.corners.top):void 0!==i&&"Left"!==i&&"Right"===e.direction&&t.point.x<e.point.x?n+=Math.abs(t.point.y-e.corners.bottom):void 0!==i&&"Right"!==i&&"Left"===e.direction&&e.point.x<t.point.x?n+=Math.abs(t.point.y-e.corners.bottom):n+=t.point.y-t.corners.top,n}function ut(t,e,i,n){return t.corners.left-t.margin.left>e.corners.left-e.margin.left&&t.corners.left-t.margin.left<=e.corners.right+e.margin.right?("Bottom"===e.direction&&t.point.y<e.point.y?n+=t.corners.left-e.corners.left:"Top"===e.direction&&t.point.y>e.point.y&&(n+=t.corners.left-e.corners.left),n+=t.point.x-t.corners.left):void 0!==i&&"Top"!==i&&"Bottom"===e.direction&&t.point.y<e.point.y?n+=Math.abs(t.point.x-e.corners.right):void 0!==i&&"Bottom"!==i&&"Top"===e.direction&&e.point.y<t.point.y?n+=Math.abs(t.point.x-e.corners.right):n+=t.point.x-t.corners.left,n}function gt(t,e,i,n){return t.corners.right+t.margin.right<e.corners.right+e.margin.right&&t.corners.right+t.margin.right>=e.corners.left-e.margin.left?("Bottom"===e.direction&&t.point.y<e.point.y?i+=e.corners.right-t.corners.right:"Top"===e.direction&&t.point.y>e.point.y&&(i+=e.corners.right-t.corners.right),i+=t.corners.right-t.point.x):void 0!==n&&"Top"!==n&&"Bottom"===e.direction&&t.point.y<e.point.y?i+=Math.abs(t.point.x-e.corners.right):void 0!==n&&"Bottom"!==n&&"Top"===e.direction&&e.point.y<t.point.y?i+=Math.abs(t.point.x-e.corners.right):i+=t.corners.right-t.point.x,i}function ft(t,e,i,n){return t.corners.bottom+t.margin.bottom<e.corners.bottom+e.margin.bottom&&t.corners.bottom+t.margin.bottom>=e.corners.top-e.margin.top?("Right"===e.direction&&t.point.x<e.point.x?i+=e.corners.bottom-t.corners.bottom:"Left"===e.direction&&t.point.x>e.point.x&&(i+=e.corners.bottom-t.corners.bottom),i+=t.corners.bottom-t.point.y):void 0!==n&&"Left"!==n&&"Right"===e.direction&&t.point.x<e.point.x?i+=Math.abs(t.point.y-e.corners.bottom):void 0!==n&&"Right"!==n&&"Left"===e.direction&&e.point.x<t.point.x?i+=Math.abs(t.point.y-e.corners.bottom):i+=t.corners.bottom-t.point.y,i}function mt(t,e){var i=!1;switch(t){case"Left":switch(e){case"Right":case"Bottom":i=!0;break}break;case"Top":switch(e){case"Left":case"Right":case"Bottom":i=!0;break}break;case"Bottom":switch(e){case"Right":i=!0;break}break}return i}function yt(t,e){var i=t.direction;t.direction=e.direction,e.direction=i;var n=t.point;t.point=e.point,e.point=n;var o=t.corners;t.corners=e.corners,e.corners=o}function vt(t,e,i,n){var o,r=void 0===e?i:e,a=r.topLeft,s=r.topRight,c=r.bottomRight,h=r.bottomLeft,d=r.center,l=W(d,t),p=W(d,c),u=W(d,h),g=W(d,a),f=W(d,s);return o=l>g&&l<f?"Top":l>=p&&l<u?"Bottom":l>=u&&l<=g?"Left":"Right",o}function bt(t){var e;return e=t.wrapper.children[0].bounds,"None"!==t.sourceDecorator.shape&&e.uniteRect(t.wrapper.children[1].bounds),"None"!==t.targetDecorator.shape&&e.uniteRect(t.wrapper.children[2].bounds),e}function wt(t){switch(t){case"Top":return"Bottom";case"Bottom":return"Top";case"Left":return"Right";case"Right":return"Left"}return"auto"}},"456d":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("bccc"),o=i("b239"),r=i("d0e6"),a=i("95f7"),s=function(){function t(){this.pivot={x:.5,y:.5},this.isDirt=!0,this.isExport=!1,this.exportScaleValue={x:0,y:0},this.exportScaleOffset={x:0,y:0},this.canApplyStyle=!0,this.visible=!0,this.offsetX=0,this.offsetY=0,this.cornerRadius=0,this.minHeight=void 0,this.minWidth=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.width=void 0,this.height=void 0,this.rotateAngle=0,this.margin={left:0,right:0,top:0,bottom:0},this.horizontalAlignment="Auto",this.verticalAlignment="Auto",this.flip="None",this.relativeMode="Point",this.transform=n["s"].Self|n["s"].Parent,this.style={fill:"white",strokeColor:"black",opacity:1,strokeWidth:1},this.desiredSize=new o["a"],this.actualSize=new o["a"],this.parentTransform=0,this.preventContainer=!1,this.isSvgRender=!1,this.bounds=new r["a"](0,0,0,0),this.shadow=null,this.description="",this.staticSize=!1,this.isRectElement=!1,this.isCalculateDesiredSize=!0,this.flipOffset={x:0,y:0},this.elementActions=n["g"].None,this.position=void 0,this.unitMode=void 0,this.float=!1,this.floatingBounds=void 0}return t.prototype.setOffsetWithRespectToBounds=function(t,e,i){this.unitMode=i,this.position={x:t,y:e}},t.prototype.getAbsolutePosition=function(t){if(void 0!==this.position)return"Absolute"===this.unitMode?this.position:{x:this.position.x*t.width,y:this.position.y*t.height}},Object.defineProperty(t.prototype,"outerBounds",{get:function(){return this.floatingBounds||this.bounds},set:function(t){this.floatingBounds=t},enumerable:!0,configurable:!0}),t.prototype.measure=function(t,e,i){var n=void 0!==this.width?this.width:(t.width||0)-this.margin.left-this.margin.right,r=void 0!==this.height?this.height:(t.height||0)-this.margin.top-this.margin.bottom;return this.desiredSize=new o["a"](n,r),this.isCalculateDesiredSize&&(this.desiredSize=this.validateDesiredSize(this.desiredSize,t)),this.desiredSize},t.prototype.arrange=function(t){return this.actualSize=t,this.updateBounds(),this.actualSize},t.prototype.updateBounds=function(){this.bounds=Object(a["e"])(this)},t.prototype.validateDesiredSize=function(t,e){return!this.isRectElement||this.width||this.minWidth||this.maxWidth||(t.width=50),!this.isRectElement||this.height||this.minHeight||this.maxHeight||(t.height=50),(void 0===t||void 0!==this.width&&void 0!==this.height)&&(t=t||new o["a"],t.width=void 0===this.width?(e.width||0)-this.margin.left-this.margin.right:this.width,t.height=void 0===this.height?(e.height||0)-this.margin.top-this.margin.bottom:this.height),void 0!==this.minWidth&&(t.width=Math.max(t.width,this.minWidth)),void 0!==this.minHeight&&(t.height=Math.max(t.height,this.minHeight)),void 0!==this.maxWidth&&0!==this.maxWidth&&(t.width=Math.min(t.width,this.maxWidth)),void 0!==this.maxHeight&&0!==this.maxHeight&&(t.height=Math.min(t.height,this.maxHeight)),t},t}()},"48e5":function(t,e,i){"use strict";var n=i("c544"),o=i("7de8"),r=i("b239"),a=i("95f7"),s=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),c=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},h=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.offset=0,n.scale=1,n}return s(e,t),e.prototype.preRender=function(){this.unWireEvents(),this.wireEvents()},e.prototype.render=function(){this.updateRulerGeometry(),this.renderComplete()},e.prototype.getModuleName=function(){return"Ruler"},e.prototype.destroy=function(){this.unWireEvents(),this.notify("destroy",{}),t.prototype.destroy.call(this),this.element.classList.remove("e-ruler")},e.prototype.getPersistData=function(){var t=["loaded"];return this.addOnPersist(t)},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var o=n[i];switch(o){case"length":case"interval":case"segmentWidth":case"tickAlignment":case"markerColor":case"thickness":this.updateRuler();break}}},e.prototype.updateRulerGeometry=function(){this.element.style.textAlign="left",this.renderRulerSpace(),this.updateRuler()},e.prototype.renderRulerSpace=function(){var t=this.getRulerGeometry(),e=document.getElementById(this.element.id+"_ruler_space");return e||(e=Object(n["b"])("div",{id:this.element.id+"_ruler_space",style:"height:"+t.height+"px;width:"+t.width+"px;cssFloat:left;"}),this.element.appendChild(e)),e},e.prototype.updateRuler=function(){var t=this.getRulerSize(),e=this.getRulerGeometry(),i=0,n=0,o=new r["a"],a=this.getRulerSVG(e);if(a&&(i=this.length,o.height=t,n=this.offset,i&&i!==1/0)){var s=i+this.segmentWidth,c=n;this.updateSegments(c,s+Math.abs(c),a,t)}},e.prototype.updateSegments=function(t,e,i,n){var o=t,r={trans:0};while(o<e){var a=this.getNewSegment(o,i);a&&(i.appendChild(a.segment),o=this.updateSegment(t,e,a,o,r,n))}},e.prototype.updateSegment=function(t,e,i,n,o,r){var a=this.updateSegmentWidth(this.scale);n===t?(this.startValue=Math.floor(t/a)*a/this.scale,this.startValue=this.startValue%1!==0?Number(this.startValue.toFixed(1)):this.startValue,i.label.textContent=this.startValue.toString(),this.defStartValue=n=this.startValue*this.scale,"Horizontal"===this.orientation?this.hRulerOffset=t-n:this.vRulerOffset=t-n):(this.startValue=n/this.scale,this.startValue=this.startValue%1!==0?Number(this.startValue.toFixed(1)):this.startValue,i.label.textContent=this.startValue.toString()),this.updateTickLabel(i,r);var s="Horizontal"===this.orientation?o.trans+.5+",0.5":"0.5,"+(o.trans+.5);return i.segment.setAttribute("transform","translate("+s+")"),o.trans+=a,n+=a,n},e.prototype.updateTickLabel=function(t,e){var i=t.segment.lastChild.getBBox(),o="Horizontal"===this.orientation,r="RightOrBottom"===this.tickAlignment,a=o?2:0,s=o?r?e/2+5.5-5.5:e/2+5.5:i.height,c=r?-(i.width+2)+","+(e/2-i.height):-(i.width+2)+","+(e/2-i.height/2),h=o?{x:a,y:s}:{x:a,y:s,transform:"rotate(270)translate("+c+")"};Object(n["F"])(t.segment.lastChild,h)},e.prototype.getNewSegment=function(t,e){var i=this.createNewTicks(t,e),n=this.createTickLabel(e,i);return{segment:i,label:n}},e.prototype.createNewTicks=function(t,e){var i,o,r,a=this.updateSegmentWidth(this.scale),s={class:"e-ruler-segment"};r=Object(n["d"])("g",s);for(var c=0;c<this.interval;c++)o=a/this.interval,i=this.createTick(e,o,c+1,t),r.appendChild(i);return r},e.prototype.getLinePoint=function(t,e,i){var n=this.updateSegmentWidth(this.scale),o=this.getRulerSize();return e*=i-1,i=e%n===0?o:.3*o,i},e.prototype.createTick=function(t,e,i,o){var r,s,c,h,d=this.getLinePoint(t,e,i),l=this.getRulerSize(),p="Horizontal"===this.orientation,u="RightOrBottom"===this.tickAlignment,g=Object(a["f"])(this.arrangeTick);c={ruler:r,tickLength:d,tickInterval:this.segmentWidth/this.interval*(i-1)},g&&g(c),d=c.tickLength;var f=e*(i-1),m=p?f:u?l:0,y=p?f:u?l-d:l-(l-d),v=p?u?l:l-(l-d):f,b=p?u?l-d:0:f;return h={x1:m,y1:v,x2:y,y2:b,"stroke-width":"1",stroke:"black"},s=Object(n["d"])("line",h),s.setAttribute("class","e-ruler-tick"),s},e.prototype.createTickLabel=function(t,e){var i;if(e){var o={class:"e-ruler-tick-label"};i=Object(n["d"])("text",o),e.appendChild(i)}return i},e.prototype.updateSegmentWidth=function(t){if(100!==this.segmentWidth)return this.segmentWidth;var e,i,n=25,o=1,r=100;i=Math.pow(2,Math.round(Math.log(t)/Math.log(2))),e=r,e=r/i;while(e>100)o/=10,e/=10;while(e<25)o*=10,e*=10;return e>=n&&e%n!==0&&(e=Math.round(e/n)*n),e*t/o},e.prototype.createMarkerLine=function(t,e,i){var o;return e&&(o=t.getElementById(e.id+"_marker"),o&&o.parentNode.removeChild(o),o=Object(n["d"])("line",i)),o},e.prototype.drawRulerMarker=function(t,e,i){var n,o,r,a,s,c,h,d="Horizontal"===this.orientation,l=t.getElementsByTagName("svg");for(s=0;s<l.length;s++){l[s]&&(n=l[s]);break}if(n){o=this.getRulerSize(),c={id:t.id+"_marker",x1:0,y1:0,x2:d?0:o,y2:d?o:0,stroke:this.markerColor,"stroke-width":1.5,class:"e-d-ruler-marker"},h=this.createMarkerLine(n,t,c),r=this.scale,a=this.offset-this.defStartValue;var p=d?e.x:e.y,u=p*r+i+a;h.setAttribute("transform","translate("+(d?u+.5+" 0.5":"0.5 "+(u+.5))+")"),n.appendChild(h)}},e.prototype.getRulerGeometry=function(){return new r["a"](this.element?this.element.getBoundingClientRect().width:0,this.element?this.element.getBoundingClientRect().height:0)},e.prototype.getRulerSize=function(){return this.thickness},e.prototype.getRulerSVG=function(t){var e,i,o=this.getRulerSize();if(this.element&&(e=document.getElementById(this.element.id+"_ruler_space"),e)){var r={id:this.element.id+"_Ruler_svg",width:"Horizontal"===this.orientation?t.width+200:o+"px",height:"Horizontal"===this.orientation?o:t.height+200+"px",style:"position:inherit;"};if(i=Object(n["d"])("svg",r),e.childNodes.length>0)for(var a=e.childNodes.length-1;a>=0;a--)e.childNodes[a].parentNode.removeChild(e.childNodes[a]);e.appendChild(i)}return i},e.prototype.wireEvents=function(){},e.prototype.unWireEvents=function(){},c([Object(o["p"])(5)],e.prototype,"interval",void 0),c([Object(o["p"])(100)],e.prototype,"segmentWidth",void 0),c([Object(o["p"])("Horizontal")],e.prototype,"orientation",void 0),c([Object(o["p"])("RightOrBottom")],e.prototype,"tickAlignment",void 0),c([Object(o["p"])("red")],e.prototype,"markerColor",void 0),c([Object(o["p"])(25)],e.prototype,"thickness",void 0),c([Object(o["p"])(null)],e.prototype,"arrangeTick",void 0),c([Object(o["p"])(400)],e.prototype,"length",void 0),e}(o["i"]);function d(t){var e=g(t),i={id:t.element.id+"_overlapRuler",style:"height:"+e.height+"px;width:"+e.width+"px;position:absolute;left:0;top:0",class:"e-ruler-overlap"},o=Object(n["b"])("div",i);t.element.insertBefore(o,t.element.firstChild)}function l(t,e){var i=document.getElementById(t.element.id+(e?"_hRuler":"_vRuler")),o=g(t),r=f(t),a=e?"margin-left:"+o.width+"px;":"margin-top:"+o.height+"px;";if(!i){var s="height:"+(e?o.height:r.height+100)+"px;overflow:hidden;width:"+(e?r.width+100:o.width)+"px;position:absolute;font-size:11px;"+a,c={id:t.element.id+(e?"_hRuler":"_vRuler"),style:s};i=Object(n["b"])("div",c)}t.element.insertBefore(i,t.element.firstChild);var d=e?t.rulerSettings.horizontalRuler:t.rulerSettings.verticalRuler,l=new h(d);l.orientation=e?"Horizontal":"Vertical",l.length=(e?r.width:r.height)+d.segmentWidth,l.appendTo("#"+t.element.id+(e?"_hRuler":"_vRuler")),e?t.hRuler=l:t.vRuler=l;var p=document.getElementById(t.element.id+(e?"_hRuler":"_vRuler"));e?t.hRuler.element=p:t.vRuler.element=p}function p(t){var e=-t.scroller.horizontalOffset,i=-t.scroller.verticalOffset;t&&t.rulerSettings.showRulers?(t.hRuler.length=0,t.vRuler.length=0,void 0!==e&&t.hRuler.element&&v(t,t.hRuler,e,!0),void 0!==i&&t.vRuler.element&&v(t,t.vRuler,i,!1)):u(t)}function u(t){Object(n["D"])(t.element.id+"_hRuler"),Object(n["D"])(t.element.id+"_vRuler"),Object(n["D"])(t.element.id+"_overlapRuler")}function g(t){var e=0,i=0;return t.rulerSettings.showRulers&&(e=t.rulerSettings.horizontalRuler.thickness,i=t.rulerSettings.verticalRuler.thickness),new r["a"](i,e)}function f(t){var e=g(t),i=t.scroller.viewPortHeight,n=t.scroller.viewPortWidth;return n<t.element.clientWidth-e.width&&(n=t.element.clientWidth-e.width),i<t.element.clientHeight-e.height&&(i=t.element.clientHeight-e.height),t.hRuler&&t.hRuler.length&&(n=t.hRuler.length),t.vRuler&&t.vRuler.length&&(i=t.vRuler.length),new r["a"](n,i)}function m(){var t,e,i=document.getElementsByClassName("e-d-ruler-marker");if(i&&i.length>0)for(e=i.length-1;e>=0;e--)t=i[e],t&&t.parentNode.removeChild(t)}function y(t,e){t.rulerSettings.showRulers&&(t.hRuler.drawRulerMarker(t.hRuler.element,e,t.scroller.horizontalOffset),t.vRuler.drawRulerMarker(t.vRuler.element,e,t.scroller.verticalOffset))}function v(t,e,i,n){var o=g(t),r=f(t),s=n?t.rulerSettings.horizontalRuler:t.rulerSettings.verticalRuler;w(t,r,n),b(t,r,n),e.offset=i,e.scale=t.scroller.currentZoom,e.length=r.width+100,e.arrangeTick=Object(a["f"])(s.arrangeTick),e.dataBind();var c=n?t.hRuler.element:t.vRuler.element;n?c.style.marginLeft=o.width-e.hRulerOffset+"px":c.style.marginTop=o.height-e.vRulerOffset+"px"}function b(t,e,i){var n=document.getElementById(t.element.id+(i?"_hRuler_ruler_space":"_vRuler_ruler_space")),o=i?t.hRuler:t.vRuler;n&&t&&e&&(n.style.width=(i?e.width+2*o.segmentWidth:o.thickness)+"px",n.style.height=(i?o.thickness:e.height+2*o.segmentWidth)+"px")}function w(t,e,i){var n=document.getElementById(t.element.id+(i?"_hRuler":"_vRuler")),o=i?t.hRuler:t.vRuler;n&&t&&e&&(n.style.width=(i?e.width+o.segmentWidth:o.thickness)+"px",n.style.height=(i?o.thickness:e.height+o.segmentWidth)+"px",n=document.getElementById(t.element.id+"_overlapRuler"),n&&(i?n.style.height=o.thickness+"px":n.style.width=o.thickness+"px"))}i.d(e,"e",(function(){return d})),i.d(e,"f",(function(){return l})),i.d(e,"g",(function(){return p})),i.d(e,"c",(function(){return u})),i.d(e,"b",(function(){return g})),i.d(e,"d",(function(){return m})),i.d(e,"a",(function(){return y}))},6513:function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i("b239"),o=i("456d"),r=i("d0e6"),a=i("c544"),s=i("e464"),c=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),h=function(t){function e(){var e=t.call(this)||this;return e.pathData="",e.transformPath=!0,e.absolutePath="",e.canMeasurePath=!1,e.absoluteBounds=new r["a"],e}return c(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this.pathData},set:function(t){this.pathData!==t&&(this.pathData=t,this.isDirt=!0)},enumerable:!0,configurable:!0}),e.prototype.getPoints=function(){var t=this;return this.pointTimer||(this.pointTimer=setTimeout((function(){t.points=null,t.pointTimer=null}),200)),this.points=this.points||Object(a["e"])(this),Object(a["H"])(this,this.points)},e.prototype.measure=function(t){return this.staticSize&&void 0!==this.width&&void 0!==this.height?this.absoluteBounds=new r["a"](this.offsetX-this.width*this.pivot.x,this.offsetY-this.height*this.pivot.y,this.width,this.height):(!this.isDirt||!this.transformPath&&void 0!==this.width&&void 0!==this.height||this.absoluteBounds&&0!==this.absoluteBounds.height)&&!this.canMeasurePath||(this.absoluteBounds=Object(a["B"])(this.data?this.data:"")),void 0===this.width?this.desiredSize=new n["a"](this.absoluteBounds.width,this.height||this.absoluteBounds.height):void 0===this.height?this.desiredSize=new n["a"](this.width||this.absoluteBounds.width,this.absoluteBounds.height):this.desiredSize=new n["a"](this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.canMeasurePath=!1,this.desiredSize},e.prototype.arrange=function(t){return(this.isDirt||this.actualSize.width!==t.width||this.actualSize.height!==t.height)&&(this.isDirt=!0,this.absolutePath=this.updatePath(this.data,this.absoluteBounds,t),this.staticSize||(this.points=null)),this.actualSize=this.desiredSize,this.updateBounds(),this.isDirt=!1,this.actualSize},e.prototype.updatePath=function(t,e,i){var n=!1,o="",r=-e.x,a=-e.y,c=[];return i.width===e.width&&i.height===e.height||(r=i.width/Number(e.width?e.width:1),a=i.height/Number(e.height?e.height:1),n=!0),c=Object(s["e"])(t),c=Object(s["f"])(c),o=(n||this.isDirt)&&this.transformPath?Object(s["g"])(c,r,a,n,e.x,e.y,0,0):Object(s["a"])(c),n=!1,o},e}(o["a"])},6639:function(t,e,i){"use strict";i.d(e,"a",(function(){return l})),i.d(e,"c",(function(){return p})),i.d(e,"b",(function(){return u}));var n=i("7de8"),o=i("a630"),r=i("be2f"),a=i("bccc"),s=i("95f7"),c=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),h=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),h([Object(n["p"])("blue")],e.prototype,"color",void 0),h([Object(n["p"])("")],e.prototype,"content",void 0),h([Object(n["p"])("")],e.prototype,"link",void 0),h([Object(n["p"])("None")],e.prototype,"textDecoration",void 0),e}(n["d"]),l=function(t){function e(e,i,n,o){var r=t.call(this,e,i,n,o)||this;return n.id||(e.parentObj&&e.parentObj.propName&&"phases"===e.parentObj.propName?r.id=e.parentObj.id:r.id=Object(s["i"])()),r}return c(e,t),h([Object(n["p"])("")],e.prototype,"content",void 0),h([Object(n["p"])(void 0)],e.prototype,"template",void 0),h([Object(n["p"])(!0)],e.prototype,"visibility",void 0),h([Object(n["p"])(a["a"].InheritReadOnly)],e.prototype,"constraints",void 0),h([Object(n["g"])(void 0,d)],e.prototype,"hyperlink",void 0),h([Object(n["p"])("")],e.prototype,"id",void 0),h([Object(n["p"])()],e.prototype,"width",void 0),h([Object(n["p"])()],e.prototype,"height",void 0),h([Object(n["p"])(0)],e.prototype,"rotateAngle",void 0),h([Object(n["g"])({strokeWidth:0,strokeColor:"transparent",fill:"transparent"},o["f"])],e.prototype,"style",void 0),h([Object(n["p"])("Center")],e.prototype,"horizontalAlignment",void 0),h([Object(n["p"])("Center")],e.prototype,"verticalAlignment",void 0),h([Object(n["g"])({},o["a"])],e.prototype,"margin",void 0),h([Object(n["g"])({top:void 0,bottom:void 0,left:void 0,right:void 0},o["a"])],e.prototype,"dragLimit",void 0),h([Object(n["p"])("Shape")],e.prototype,"type",void 0),h([Object(n["p"])()],e.prototype,"addInfo",void 0),e}(n["d"]),p=function(t){function e(e,i,n,o){return t.call(this,e,i,n,o)||this}return c(e,t),e.prototype.getClassName=function(){return"ShapeAnnotation"},h([Object(n["g"])({x:.5,y:.5},r["a"])],e.prototype,"offset",void 0),e}(l),u=function(t){function e(e,i,n,o){return t.call(this,e,i,n,o)||this}return c(e,t),e.prototype.getClassName=function(){return"PathAnnotation"},h([Object(n["p"])(.5)],e.prototype,"offset",void 0),h([Object(n["g"])({x:0,y:0},r["a"])],e.prototype,"displacement",void 0),h([Object(n["p"])("Center")],e.prototype,"alignment",void 0),h([Object(n["p"])(!1)],e.prototype,"segmentAngle",void 0),e}(l)},"6e4a":function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var n=i("7de8"),o=i("a630"),r=i("be2f"),a=i("bccc"),s=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),c=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),c([Object(n["p"])("")],e.prototype,"id",void 0),c([Object(n["p"])("Center")],e.prototype,"horizontalAlignment",void 0),c([Object(n["p"])("Center")],e.prototype,"verticalAlignment",void 0),c([Object(n["g"])({},o["a"])],e.prototype,"margin",void 0),c([Object(n["p"])(12)],e.prototype,"width",void 0),c([Object(n["p"])(12)],e.prototype,"height",void 0),c([Object(n["g"])({},o["c"])],e.prototype,"style",void 0),c([Object(n["p"])("Square")],e.prototype,"shape",void 0),c([Object(n["p"])(a["m"].Connect)],e.prototype,"visibility",void 0),c([Object(n["p"])("")],e.prototype,"pathData",void 0),c([Object(n["p"])(a["l"].Default)],e.prototype,"constraints",void 0),c([Object(n["p"])()],e.prototype,"addInfo",void 0),e}(n["d"]),d=function(t){function e(e,i,n,o){return t.call(this,e,i,n,o)||this}return s(e,t),e.prototype.getClassName=function(){return"PointPort"},c([Object(n["g"])({x:.5,y:.5},r["a"])],e.prototype,"offset",void 0),e}(h)},7682:function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var n=i("8905"),o=i("95f7"),r=i("bccc"),a=i("b239"),s=i("d0e6"),c=i("d454"),h=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.measureChildren=void 0,e}return h(e,t),e.prototype.measure=function(e,i,n){var r=void 0,h=void 0;if(this.hasChildren()){for(var d=0,l=this.children;d<l.length;d++){var p=l[d];p instanceof c["a"]?p.canMeasure&&(e.width=e.width||this.maxWidth||this.minWidth,p.measure(e)):p instanceof c["a"]||p.measure(e,i,n);var u=p.desiredSize.clone();0!==p.rotateAngle&&(u=Object(o["k"])(u,p.rotateAngle));var g=u.width+p.margin.right,f=u.height+p.margin.bottom,m=new s["a"](p.margin.left,p.margin.top,g,f);if(p.float){var y=p.getAbsolutePosition(u);if(void 0!==y)continue}p instanceof c["a"]&&!(p instanceof c["a"]&&p.canConsiderBounds)||(void 0===h?h=m:h.uniteRect(m))}if(h){var v=0,b=0;v=Math.max(h.left,0),b=Math.max(h.top,0),r=new a["a"](h.width+v,h.height+b)}}return r=t.prototype.validateDesiredSize.call(this,r,e),t.prototype.stretchChildren.call(this,r),r.width+=this.padding.left+this.padding.right,r.height+=this.padding.top+this.padding.bottom,this.desiredSize=r,r},e.prototype.arrange=function(e,i){if(this.outerBounds=new s["a"],this.hasChildren()){var n=void 0,o=void 0;n=this.offsetY-e.height*this.pivot.y+this.padding.top,o=this.offsetX-e.width*this.pivot.x+this.padding.left;for(var a=0,h=this.children;a<h.length;a++){var d=h[a];if(0!==(d.transform&r["s"].Parent)){d.parentTransform=this.parentTransform+this.rotateAngle,("None"!==this.flip||this.elementActions&r["g"].ElementIsGroup)&&(d.parentTransform="Horizontal"===this.flip||"Vertical"===this.flip?-d.parentTransform:d.parentTransform);var l=d.desiredSize.clone(),p=void 0,u={x:0,y:0},g=o,f=n;if("Point"===d.relativeMode){var m=d.getAbsolutePosition(e);void 0!==m&&(g+=m.x,f+=m.y)}p="Object"===d.relativeMode?this.alignChildBasedOnParent(d,l,e,g,f):this.alignChildBasedOnaPoint(d,g,f),u={x:p.x+l.width/2,y:p.y+l.height/2},t.prototype.findChildOffsetFromCenter.call(this,d,u)}!i||"Stretch"!==d.horizontalAlignment&&"Stretch"!==d.verticalAlignment?d instanceof c["a"]&&d.canMeasure?(d.arrange(d.desiredSize),this.outerBounds.uniteRect(d.outerBounds)):d instanceof c["a"]||(d.arrange(d.desiredSize),this.outerBounds.uniteRect(d.outerBounds)):d.arrange(e)}}return this.actualSize=e,this.updateBounds(),this.outerBounds.uniteRect(this.bounds),e},e.prototype.alignChildBasedOnParent=function(t,e,i,n,o){switch(t.horizontalAlignment){case"Auto":case"Left":n+=t.margin.left;break;case"Right":n+=i.width-e.width-t.margin.right;break;case"Stretch":case"Center":n+=i.width/2-e.width/2;break}switch(t.verticalAlignment){case"Auto":case"Top":o+=t.margin.top;break;case"Bottom":o+=i.height-e.height-t.margin.bottom;break;case"Stretch":case"Center":o+=i.height/2-e.height/2;break}return{x:n,y:o}},e.prototype.alignChildBasedOnaPoint=function(t,e,i){switch(e+=t.margin.left-t.margin.right,i+=t.margin.top-t.margin.bottom,t.horizontalAlignment){case"Auto":case"Left":e=e;break;case"Stretch":case"Center":e-=t.desiredSize.width*t.pivot.x;break;case"Right":e-=t.desiredSize.width;break}switch(t.verticalAlignment){case"Auto":case"Top":i=i;break;case"Stretch":case"Center":i-=t.desiredSize.height*t.pivot.y;break;case"Bottom":i-=t.desiredSize.height;break}return{x:e,y:i}},e}(n["a"])},8214:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i("456d"),o=i("c544"),r=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),a=function(t){function e(e,i,n){var o=t.call(this)||this;return o.data="",o.nodeId="",o.annotationId="",o.diagramId="",o.diagramId=i,o.nodeId=e,o.annotationId=n,o}return r(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this.data},set:function(t){this.data=t,this.template=Object(o["l"])(this,!0),this.isDirt=!0},enumerable:!0,configurable:!0}),e}(n["a"])},"83c4":function(t,e,i){"use strict";var n=i("7de8"),o=i("a630"),r=i("be2f"),a=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),s([Object(n["p"])("None")],e.prototype,"shape",void 0),s([Object(n["p"])("white")],e.prototype,"fill",void 0),s([Object(n["p"])("Auto")],e.prototype,"horizontalAlignment",void 0),s([Object(n["p"])("Auto")],e.prototype,"verticalAlignment",void 0),s([Object(n["p"])(10)],e.prototype,"width",void 0),s([Object(n["p"])(10)],e.prototype,"height",void 0),s([Object(n["g"])({x:.5,y:1},r["a"])],e.prototype,"offset",void 0),s([Object(n["p"])("#1a1a1a")],e.prototype,"borderColor",void 0),s([Object(n["p"])(1)],e.prototype,"borderWidth",void 0),s([Object(n["g"])({},o["a"])],e.prototype,"margin",void 0),s([Object(n["p"])("")],e.prototype,"pathData",void 0),s([Object(n["p"])("")],e.prototype,"content",void 0),s([Object(n["p"])(0)],e.prototype,"cornerRadius",void 0),s([Object(n["g"])({left:2,right:2,top:2,bottom:2},o["a"])],e.prototype,"padding",void 0),e}(n["d"]),h=i("f1ba"),d=i("6e4a");i.d(e,"a",(function(){return u}));var l=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),p=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),p([Object(n["p"])("")],e.prototype,"id",void 0),p([Object(n["p"])(-1)],e.prototype,"zIndex",void 0),p([Object(n["g"])({},o["a"])],e.prototype,"margin",void 0),p([Object(n["p"])(!0)],e.prototype,"visible",void 0),p([Object(n["e"])([],d["a"])],e.prototype,"ports",void 0),p([Object(n["p"])(!0)],e.prototype,"isExpanded",void 0),p([Object(n["g"])({},h["a"])],e.prototype,"tooltip",void 0),p([Object(n["g"])({},c)],e.prototype,"expandIcon",void 0),p([Object(n["g"])({},c)],e.prototype,"collapseIcon",void 0),p([Object(n["p"])(!1)],e.prototype,"excludeFromLayout",void 0),p([Object(n["p"])()],e.prototype,"addInfo",void 0),p([Object(n["p"])("None")],e.prototype,"flip",void 0),e}(n["d"])},"88a2":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("b239"),o=i("456d"),r=i("c544"),a=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s=function(t){function e(e,i){var n=t.call(this)||this;return n.data="",n.nodeId="",n.diagramId="",n.scale="Stretch",n.diagramId=i,n.nodeId=e,n}return a(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this.data},set:function(t){this.data=t,this.template=Object(r["l"])(this,!1),this.isDirt=!0},enumerable:!0,configurable:!0}),e.prototype.measure=function(t){if(this.isDirt){var e=Object(r["z"])(this.template);this.contentSize=new n["a"],this.contentSize.width=e.width,this.contentSize.height=e.height;var i=e.x,o=e.y;this.templatePosition={x:i,y:o},this.isDirt=!1}if(void 0===this.width||void 0===this.height){var a=Object(r["A"])(this.template);this.desiredSize=new n["a"](a.width,a.height)}else this.desiredSize=new n["a"](this.width,this.height);return this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.desiredSize},e.prototype.arrange=function(t){return this.actualSize=new n["a"](this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},e}(o["a"])},8905:function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var n=i("456d"),o=i("bccc"),r=i("a630"),a=i("b239"),s=i("d0e6"),c=i("95f7"),h=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.padding=new r["g"](0,0,0,0),e.desiredBounds=void 0,e.measureChildren=!0,e.prevRotateAngle=0,e}return h(e,t),e.prototype.hasChildren=function(){return void 0!==this.children&&this.children.length>0},e.prototype.measure=function(t,i,n){this.desiredBounds=void 0;var o,r,s=void 0;if(this.hasChildren()){for(var h=0;h<this.children.length;h++){o=this.children[h],"Stretch"!==o.horizontalAlignment||t.width||(t.width=o.bounds.width),"Stretch"!==o.verticalAlignment||t.height||(t.height=o.bounds.height);var d="Stretch"===o.horizontalAlignment||"Stretch"===o.verticalAlignment;(this.measureChildren||d||o instanceof e&&void 0!==o.measureChildren)&&o.measure(t,i,n),r=this.GetChildrenBounds(o),"Stretch"!==o.horizontalAlignment&&"Stretch"!==o.verticalAlignment?void 0===this.desiredBounds?this.desiredBounds=r:this.desiredBounds.uniteRect(r):!this.actualSize||this.actualSize.width||this.actualSize.height||o.preventContainer||"Stretch"!==o.horizontalAlignment||"Stretch"!==o.verticalAlignment||(void 0===this.desiredBounds?this.desiredBounds=o.bounds:this.desiredBounds.uniteRect(o.bounds))}if(void 0!==this.desiredBounds&&0!==this.rotateAngle){var l={x:this.desiredBounds.x+this.desiredBounds.width*this.pivot.x,y:this.desiredBounds.y+this.desiredBounds.height*this.pivot.y},p=Object(c["j"])(this.rotateAngle,void 0,void 0,l);this.desiredBounds.x=p.x-this.desiredBounds.width*this.pivot.x,this.desiredBounds.y=p.y-this.desiredBounds.height*this.pivot.y}this.desiredBounds&&(s=new a["a"](this.desiredBounds.width,this.desiredBounds.height))}return s=this.validateDesiredSize(s,t),this.stretchChildren(s),this.desiredSize=s,s},e.prototype.arrange=function(t){var i,n=this.desiredBounds;if(n){this.offsetX,this.offsetY;if(this.offsetX=n.x+n.width*this.pivot.x,this.offsetY=n.y+n.height*this.pivot.y,this.hasChildren())for(var r=0;r<this.children.length;r++){i=this.children[r];var a=!1;"Stretch"===i.horizontalAlignment&&(i.offsetX=this.offsetX,i.parentTransform=this.parentTransform+this.rotateAngle,this.flip&&this.elementActions&o["g"].ElementIsGroup&&(i.parentTransform="Horizontal"===this.flip||"Vertical"===this.flip?-i.parentTransform:i.parentTransform),a=!0),"Stretch"===i.verticalAlignment&&(i.offsetY=this.offsetY,i.parentTransform=this.parentTransform+this.rotateAngle,a=!0),(a||this.measureChildren||i instanceof e&&void 0!==i.measureChildren)&&i.arrange(i.desiredSize)}}return this.actualSize=t,this.updateBounds(),this.prevRotateAngle=this.rotateAngle,t},e.prototype.stretchChildren=function(t){if(this.hasChildren())for(var i=0,n=this.children;i<n.length;i++){var o=n[i];"Stretch"!==o.horizontalAlignment&&void 0!==o.desiredSize.width||(o.desiredSize.width=t.width-o.margin.left-o.margin.right),"Stretch"!==o.verticalAlignment&&void 0!==o.desiredSize.height||(o.desiredSize.height=t.height-o.margin.top-o.margin.bottom),o instanceof e&&o.stretchChildren(o.desiredSize)}},e.prototype.applyPadding=function(t){t.width+=this.padding.left+this.padding.right,t.height+=this.padding.top+this.padding.bottom},e.prototype.findChildOffsetFromCenter=function(t,e){var i={x:e.x-t.desiredSize.width/2,y:e.y-t.desiredSize.height/2},n=Object(c["g"])(i,t);n=Object(c["j"])(t.rotateAngle,e.x,e.y,n),n=Object(c["j"])(this.rotateAngle+this.parentTransform,this.offsetX,this.offsetY,n),t.offsetX=n.x,t.offsetY=n.y},e.prototype.GetChildrenBounds=function(t){var e;e=t.desiredSize.clone();t.rotateAngle,this.rotateAngle;var i={x:t.offsetX,y:t.offsetY},n=i.x-e.width*t.pivot.x,o=i.y-e.height*t.pivot.y,r=n+e.width,a=o+e.height,h={x:n,y:o},d={x:r,y:o},l={x:n,y:a},p={x:r,y:a};return h=Object(c["j"])(t.rotateAngle,t.offsetX,t.offsetY,h),d=Object(c["j"])(t.rotateAngle,t.offsetX,t.offsetY,d),l=Object(c["j"])(t.rotateAngle,t.offsetX,t.offsetY,l),p=Object(c["j"])(t.rotateAngle,t.offsetX,t.offsetY,p),0!==this.rotateAngle&&(h=Object(c["j"])(-this.rotateAngle,void 0,void 0,h),d=Object(c["j"])(-this.rotateAngle,void 0,void 0,d),l=Object(c["j"])(-this.rotateAngle,void 0,void 0,l),p=Object(c["j"])(-this.rotateAngle,void 0,void 0,p)),s["a"].toBounds([h,d,l,p])},e}(n["a"])},"8d8a":function(t,e,i){"use strict";i.d(e,"A",(function(){return s})),i.d(e,"o",(function(){return c})),i.d(e,"l",(function(){return h})),i.d(e,"d",(function(){return d})),i.d(e,"g",(function(){return l})),i.d(e,"h",(function(){return p})),i.d(e,"f",(function(){return u})),i.d(e,"z",(function(){return g})),i.d(e,"B",(function(){return f})),i.d(e,"n",(function(){return m})),i.d(e,"v",(function(){return y})),i.d(e,"q",(function(){return v})),i.d(e,"w",(function(){return b})),i.d(e,"y",(function(){return w})),i.d(e,"b",(function(){return O})),i.d(e,"E",(function(){return x})),i.d(e,"m",(function(){return j})),i.d(e,"C",(function(){return S})),i.d(e,"p",(function(){return C})),i.d(e,"G",(function(){return P})),i.d(e,"c",(function(){return T})),i.d(e,"j",(function(){return I})),i.d(e,"I",(function(){return A})),i.d(e,"F",(function(){return z})),i.d(e,"s",(function(){return L})),i.d(e,"D",(function(){return E})),i.d(e,"t",(function(){return k})),i.d(e,"u",(function(){return R})),i.d(e,"H",(function(){return M})),i.d(e,"r",(function(){return B})),i.d(e,"J",(function(){return H})),i.d(e,"i",(function(){return N})),i.d(e,"e",(function(){return W})),i.d(e,"x",(function(){return _})),i.d(e,"k",(function(){return X})),i.d(e,"a",(function(){return Y}));var n=i("9efe"),o=i("bccc"),r=i("fd65"),a=i("6639");function s(t){if(t){var e=0;return e=t instanceof a["c"]||t instanceof a["b"]?t.constraints&o["a"].Select:t instanceof r["b"]?t.constraints&o["b"].Select:t.constraints&o["k"].Select,e}return 1}function c(t){if(t){var e=0;return e=t instanceof a["c"]||t instanceof a["b"]?t.constraints&o["a"].Drag:t instanceof r["b"]?t.constraints&o["b"].Drag:t instanceof n["t"]?1:t.constraints&o["k"].Drag,e}return 1}function h(t,e){var i=0;return i=t instanceof r["b"]?t.constraints&o["b"].PointerEvents:t.constraints&o["k"].PointerEvents,i}function d(t){var e=0;return e=t instanceof r["b"]?t.constraints&o["b"].Delete:t.constraints&o["k"].Delete,e}function l(t){return t.constraints&o["b"].DragSourceEnd}function p(t){return t.constraints&o["b"].DragTargetEnd}function u(t){return t.constraints&o["b"].DragSegmentThumb}function g(t){return t instanceof a["c"]||t instanceof a["b"]?t.constraints&o["a"].Rotate:t.constraints&o["k"].Rotate}function f(t){return t.constraints&o["k"].Shadow}function m(t){return t instanceof n["q"]&&t.constraints&o["k"].InConnect?t.constraints&o["k"].InConnect:0}function y(t){return t&&t.constraints&&!(t.constraints&o["l"].None)&&t.constraints&o["l"].InConnect?t.constraints&o["l"].InConnect:0}function v(t){return t instanceof n["q"]&&t.constraints&o["k"].OutConnect?t.constraints&o["k"].OutConnect:0}function b(t){return t&&t.constraints&&!(t.constraints&o["l"].None)&&t.constraints&o["l"].OutConnect?t.constraints&o["l"].OutConnect:0}function w(t,e){var i=0;return t instanceof a["c"]||t instanceof a["b"]?i=t.constraints&o["a"].Resize:t&&("SouthEast"===e?i=t.constraints&o["k"].ResizeSouthEast:"East"===e?i=t.constraints&o["k"].ResizeEast:"NorthEast"===e?i=t.constraints&o["k"].ResizeNorthEast:"South"===e?i=t.constraints&o["k"].ResizeSouth:"North"===e?i=t.constraints&o["k"].ResizeNorth:"SouthWest"===e?i=t.constraints&o["k"].ResizeSouthWest:"West"===e?i=t.constraints&o["k"].ResizeWest:"NorthWest"===e&&(i=t.constraints&o["k"].ResizeNorthWest)),i}function O(t){var e=0;return e=t instanceof r["b"]?t.constraints&o["b"].AllowDrop:t.constraints&o["k"].AllowDrop,e}function x(t){return t.constraints&o["d"].Virtualization}function j(t,e){var i=0;return t instanceof r["b"]?t.constraints&o["b"].Tooltip?i=t.constraints&o["b"].Tooltip:t.constraints&o["b"].InheritTooltip&&(i=e.constraints&o["d"].Tooltip):t.constraints&o["k"].Tooltip?i=t.constraints&o["k"].Tooltip:t.constraints&o["k"].InheritTooltip&&(i=e.constraints&o["d"].Tooltip),i}function S(t){return t.tool&o["f"].SingleSelect}function C(t){return t.tool&o["f"].MultipleSelect}function P(t){return t.tool&o["f"].ZoomPan}function T(t){return t.tool&o["f"].ContinuousDraw}function I(t){return t.tool&o["f"].DrawOnce}function A(t){return t.tool&o["f"].SingleSelect||t.tool&o["f"].MultipleSelect}function z(t){return t.constraints&o["d"].Zoom}function L(t){return t.constraints&o["d"].Pan}function E(t){return t.constraints&o["d"].UserInteraction}function D(t){return t.constraints&o["d"].ApiUpdate}function k(t){return t.constraints&o["d"].PanX}function R(t){return t.constraints&o["d"].PanY}function M(t){return t.constraints&o["d"].ZoomTextEdit}function B(t){return D(t)||t.diagramActions&o["c"].ToolAction}function H(t,e){var i=0;return i=e instanceof r["b"]?o["b"].ReadOnly:o["k"].ReadOnly,"Text"===e.shape.type?e.constraints&o["k"].ReadOnly:e.constraints&i?t.constraints&o["a"].InheritReadOnly?1:0:t.constraints&o["a"].ReadOnly?1:0}function N(t,e){return t.constraints&o["l"].Draw}function W(t,e){return t.constraints&o["l"].Drag}function _(t){return!!(t&o["c"].PreventClearSelection)}function X(t){return!(t&o["o"].DrawSelectorBorder)}function Y(t){return!!(t&o["o"].PreventRenderSelector)}},"95f7":function(t,e,i){"use strict";i.d(e,"i",(function(){return c})),i.d(e,"c",(function(){return h})),i.d(e,"e",(function(){return d})),i.d(e,"b",(function(){return l})),i.d(e,"d",(function(){return g})),i.d(e,"l",(function(){return m})),i.d(e,"n",(function(){return y})),i.d(e,"a",(function(){return v})),i.d(e,"h",(function(){return w})),i.d(e,"m",(function(){return O})),i.d(e,"k",(function(){return x})),i.d(e,"j",(function(){return j})),i.d(e,"g",(function(){return S})),i.d(e,"f",(function(){return C}));var n=i("d0e6"),o=i("b239"),r=i("ab8c"),a=i("7de8"),s=i("c544");function c(){for(var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",i="",n=0;n<5;n++){if("crypto"in window&&"getRandomValues"in crypto){var o=new Uint16Array(1),r=window.msCrypto||window.crypto;t=r.getRandomValues(o)[0]%(e.length-1)}else t=Math.floor(Math.random()*e.length);0===n&&t<10?n--:i+=e.substring(t,t+1)}return i}function h(t){var e=new n["a"],i=t.offsetY-t.actualSize.height*t.pivot.y,o=t.offsetY+t.actualSize.height*(1-t.pivot.y),r=t.offsetX-t.actualSize.width*t.pivot.x,a=t.offsetX+t.actualSize.width*(1-t.pivot.x),s={x:r,y:i},c={x:a,y:i},h={x:r,y:o},d={x:a,y:o};return e=n["a"].toBounds([s,c,h,d]),e}function d(t){var e,i=new n["a"];e=h(t);var o=e.middleLeft,a=e.topCenter,s=e.bottomCenter,c=e.middleRight,d=e.topLeft,l=e.topRight,p=e.bottomLeft,u=e.bottomRight;if(t.corners={topLeft:d,topCenter:a,topRight:l,middleLeft:o,middleRight:c,bottomLeft:p,bottomCenter:s,bottomRight:u},0!==t.rotateAngle||0!==t.parentTransform){var g=Object(r["a"])();Object(r["c"])(g,t.rotateAngle+t.parentTransform,t.offsetX,t.offsetY),t.corners.topLeft=d=Object(r["e"])(g,d),t.corners.topCenter=a=Object(r["e"])(g,a),t.corners.topRight=l=Object(r["e"])(g,l),t.corners.middleLeft=o=Object(r["e"])(g,o),t.corners.middleRight=c=Object(r["e"])(g,c),t.corners.bottomLeft=p=Object(r["e"])(g,p),t.corners.bottomCenter=s=Object(r["e"])(g,s),t.corners.bottomRight=u=Object(r["e"])(g,u)}return i=n["a"].toBounds([d,l,p,u]),t.corners.left=i.left,t.corners.right=i.right,t.corners.top=i.top,t.corners.bottom=i.bottom,t.corners.center=i.center,t.corners.width=i.width,t.corners.height=i.height,i}function l(t,e,i){var n={},o="properties",r="propName";if(t){i=t[r];var a=t[o]||t,s=[];s=s.concat(Object.keys(a));var c=[];if(s.push("version"),i){var h=C(e);c=h?h(i):[],s=s.concat(c)}var d=p(i);s=s.concat(d);for(var g=0,f=s;g<f.length;g++){var m=f[g];if("historyManager"!==m)if("wrapper"!==m){var y=!(!t[m]||!t.hasOwnProperty("observers"));y||(t[m]instanceof Array?n[m]=u(-1===d.indexOf(m)&&t[o]?t[o][m]:t[m],e,m):t[m]instanceof Array===!1&&t[m]instanceof HTMLElement?n[m]=t[m].cloneNode(!0).innerHtml:t[m]instanceof Array===!1&&t[m]instanceof Object?n[m]=l(-1===d.indexOf(m)&&t[o]?t[o][m]:t[m]):n[m]=t[m])}else t[m]&&(n[m]={actualSize:{width:t[m].actualSize.width,height:t[m].actualSize.height},offsetX:t[m].offsetX,offsetY:t[m].offsetY})}}return n}function p(t){switch(t){case"nodes":case"children":return["inEdges","outEdges","parentId","processId","nodeId","umlIndex","isPhase","isLane"];case"connectors":return["parentId"];case"annotation":return["nodeId"];case"annotations":return["nodeId"];case"shape":return["hasHeader"]}return[]}function u(t,e,i){var n;if(t){n=[];for(var o=0;o<t.length;o++)t[o]instanceof Array?n.push(t[o]):t[o]instanceof Object?n.push(l(t[o],e,i)):n.push(t[o])}return n}function g(t,e){var i="properties";if(t){e||(e={properties:{}});for(var n=0,o=Object.keys(t);n<o.length;n++){var r=o[n];if(t[r]instanceof Array){var a=f(t[r],e[i][r]);e[i][r]&&e[i][r].length||(e[r]=a)}else if(t[r]instanceof Array===!1&&t[r]instanceof HTMLElement)e[r]=t[r].cloneNode(!0).innerHtml;else if(t[r]instanceof Array===!1&&t[r]instanceof Object){var s=g(t[r],e[i][r]);s[i]&&!Object.keys(s[i]).length&&delete s[i],e[r]=s}else e[r]=void 0!==e[i][r]?e[r]:t[r]}}return e}function f(t,e){var i=[],n=!1;e||(e=[]),e.length||(n=!0);for(var o=0;o<t.length;o++)if(t[o]instanceof Array){f(t[o],e[o]);n&&i.push(f)}else if(t[o]instanceof Object){var r=g(t[o],e[o]);n&&i.push(r)}else i.push(t[o]);return i}function m(t){var e="";switch(t){case"Center":e="center";break;case"Left":e="left";break;case"Right":e="right";break}return e}function y(t){var e="";switch(t){case"Wrap":e="breakall";break;case"NoWrap":e="keepall";break;case"WrapWithOverflow":e="normal";break;case"LineThrough":e="line-through";break}return e}function v(t,e){var i="measureElement";window[i].style.visibility="visible";var n=window[i].children[2],o=Object(s["k"])(n)[1];o.textContent=t,o.setAttribute("style","font-size:"+e.fontSize+"px; font-family:"+e.fontFamily+";font-weight:"+(e.bold?"bold":"normal"));var r=o.getBBox().width;return window[i].style.visibility="hidden",r}function b(t,e){var i=0;return i=(t+e)/2,i}function w(t,e){var i=0,n=0,o=0,r=0,a="";n=t.length;var s=0;do{r>0&&(i=o),o=Math.floor(b(i,n)),a+=t.substr(i,o),r=v(a,e)}while(r<=e.width);for(a=a.substr(0,i),s=i;s<n;s++)if(a+=t[s],r=v(a,e),r>=e.width){t=t.substr(0,a.length-1);break}return"Ellipsis"===e.textOverflow?(t=t.substr(0,t.length-3),t+="..."):t=t.substr(0,t.length),t}function O(t,e){if("NoWrap"===e&&"PreserveAll"===t)return"pre";var i="";switch(t){case"CollapseAll":i="nowrap";break;case"CollapseSpace":i="pre-line";break;case"PreserveAll":i="pre-wrap";break}return i}function x(t,e){var i=Object(r["a"])();Object(r["c"])(i,e,0,0);var n=Object(r["e"])(i,{x:0,y:0}),a=Object(r["e"])(i,{x:t.width,y:0}),s=Object(r["e"])(i,{x:0,y:t.height}),c=Object(r["e"])(i,{x:t.width,y:t.height}),h=Math.min(n.x,a.x,s.x,c.x),d=Math.min(n.y,a.y,s.y,c.y),l=Math.max(n.x,a.x,s.x,c.x),p=Math.max(n.y,a.y,s.y,c.y);return new o["a"](l-h,p-d)}function j(t,e,i,n){if(0!==t){var o=Object(r["a"])();return Object(r["c"])(o,t,e,i),Object(r["e"])(o,n)}return n}function S(t,e){var i=t.x+e.desiredSize.width*e.pivot.x,n=t.y+e.desiredSize.height*e.pivot.y;return{x:i,y:n}}function C(t){return void 0!==t&&"string"===typeof t&&(t=Object(a["C"])(t,window)),t}},"9bac":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("7de8"),o=i("a630"),r=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),a=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getClassName=function(){return"UserHandle"},a([Object(n["p"])("")],e.prototype,"name",void 0),a([Object(n["p"])("")],e.prototype,"pathData",void 0),a([Object(n["p"])("")],e.prototype,"content",void 0),a([Object(n["p"])("")],e.prototype,"source",void 0),a([Object(n["p"])("#000000")],e.prototype,"backgroundColor",void 0),a([Object(n["p"])("top")],e.prototype,"side",void 0),a([Object(n["p"])("")],e.prototype,"borderColor",void 0),a([Object(n["p"])(.5)],e.prototype,"borderWidth",void 0),a([Object(n["p"])(25)],e.prototype,"size",void 0),a([Object(n["p"])("white")],e.prototype,"pathColor",void 0),a([Object(n["p"])(10)],e.prototype,"displacement",void 0),a([Object(n["p"])(!0)],e.prototype,"visible",void 0),a([Object(n["p"])(0)],e.prototype,"offset",void 0),a([Object(n["g"])({},o["a"])],e.prototype,"margin",void 0),a([Object(n["p"])("Center")],e.prototype,"horizontalAlignment",void 0),a([Object(n["p"])("Center")],e.prototype,"verticalAlignment",void 0),e}(n["d"])},"9dde":function(t,e,i){"use strict";function n(t){return a[t.toString()]}function o(t,e){return"Custom"===t?e.pathData:s[t]}function r(t){var e;switch(t.shape){case"Minus":e="M0,50 L100,50";break;case"Plus":e="M0,-50 L0,50 M-50,0 L50,0";break;case"ArrowUp":e="M0,100 L50,0 L100,100 Z";break;case"ArrowDown":e="M0,0 L50,100 L100,0 Z";break;case"Path":e=t.pathData;break}return e}i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return r}));var a={X:"M14,14 L106,106 M106,14 L14,106",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z",Square:"M0,0 L10,0 L10,10 L0,10 z"},s={OpenArrow:"M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z",Square:"M0,0 L10,0 L10,10 L0,10 z",Fletch:"M14.8,10c0,0-3.5,6,0.2,12c0,0-2.5-6-10.9-6C4.1,16,11.3,16,14.8,10z",OpenFetch:"M6,17c-0.6,0-1-0.4-1-1s0.4-1,1-1c10.9,0,11-5,11-5c0-0.6,0.4-1,1-1s1,0.4,1,1C19,10.3,18.9,17,6,17C6,17,6,17,6,17z M18,23c-0.5,0-1-0.4-1-1c0-0.2-0.3-5-11-5c-0.6,0-1-0.5-1-1s0.4-1,1-1c0,0,0,0,0,0c12.9,0,13,6.7,13,7    C19,22.6,18.6,23,18,23z",IndentedArrow:"M17,10c0,0-4.5,5.5,0,12L5,16L17,10z",OutdentedArrow:"M14.6,10c0,0,5.4,6,0,12L5,16L14.6,10z",DoubleArrow:"M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z",Arrow:"M15,10 L15,22 L5,16Z",Diamond:"M12,23l-7-7l7-7l6.9,7L12,23z",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z"}},"9efe":function(t,e,i){"use strict";var n=i("7de8"),o=i("a630"),r=i("be2f"),a=i("b239"),s=i("bccc"),c=i("8905"),h=i("7682"),d=i("03e0"),l=i("456d"),p=i("6513"),u=i("d454"),g=i("18f9"),f=i("88a2"),m=i("6e4a"),y=i("6639"),v=i("9dde"),b=i("ff29"),w=i("1ce4"),O=i("95f7"),x=i("83c4"),j=i("8d8a"),S=i("c544"),C=i("e464"),P=i("8214"),T=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.orientation="Vertical",e.measureChildren=void 0,e}return T(e,t),e.prototype.measure=function(t){var e="Horizontal"===this.orientation?this.updateHorizontalStack:this.updateVerticalStack;return this.desiredSize=this.measureStackPanel(t,e),this.desiredSize},e.prototype.arrange=function(t){var e="Horizontal"===this.orientation?this.arrangeHorizontalStack:this.arrangeVerticalStack;return this.actualSize=this.arrangeStackPanel(t,e),this.updateBounds(),this.actualSize},e.prototype.measureStackPanel=function(e,i){var n=void 0;if(void 0!==this.children&&this.children.length>0)for(var o=0,r=this.children;o<r.length;o++){var a=r[o];a.parentTransform=this.rotateAngle+this.parentTransform,this.measureChildren?a.measure(a.desiredSize):a.measure(e);var s=a.desiredSize.clone();this.applyChildMargin(a,s),0!==a.rotateAngle&&(s=Object(O["k"])(s,a.rotateAngle)),void 0===n?n=s:a.preventContainer||i(s,n)}return n=t.prototype.validateDesiredSize.call(this,n,e),this.stretchChildren(n),this.applyPadding(n),n},e.prototype.arrangeStackPanel=function(e,i){if(void 0!==this.children&&this.children.length>0){var n=void 0,o=void 0;n=this.offsetX-e.width*this.pivot.x+this.padding.left,o=this.offsetY-e.height*this.pivot.y+this.padding.top;for(var r=0,a=this.children;r<a.length;r++){var s=a[r],c=s.desiredSize.clone(),h=c;"Vertical"===this.orientation?o+=s.margin.top:n+=s.margin.left,0!==s.rotateAngle&&(h=Object(O["k"])(c,s.rotateAngle));var d=i(n,o,s,this,e,h);t.prototype.findChildOffsetFromCenter.call(this,s,d),s.arrange(c,!0),"Vertical"===this.orientation?o+=h.height+s.margin.bottom:n+=h.width+s.margin.right}}return e},e.prototype.updateHorizontalStack=function(t,e){e.height=Math.max(t.height,e.height),e.width+=t.width},e.prototype.updateVerticalStack=function(t,e){e.width=Math.max(t.width,e.width),e.height+=t.height},e.prototype.arrangeHorizontalStack=function(t,e,i,n,o,r){var a=0;if("Top"===i.verticalAlignment)a=e+i.margin.top+r.height/2;else if("Bottom"===i.verticalAlignment){var s=n.offsetY+o.height*(1-n.pivot.y);a=s-n.padding.bottom-i.margin.bottom-r.height/2}else a=n.offsetY-o.height*n.pivot.y+o.height/2,i.margin.top&&(a=e+i.margin.top+r.height/2);return{x:t+r.width/2,y:a}},e.prototype.arrangeVerticalStack=function(t,e,i,n,o,r){var a=0;if("Left"===i.horizontalAlignment)a=t+i.margin.left+r.width/2;else if("Right"===i.horizontalAlignment){var s=n.offsetX+o.width*(1-n.pivot.x);a=s-n.padding.right-i.margin.right-r.width/2}else a=n.offsetX-o.width*n.pivot.x+o.width/2,i.margin.left&&(a=t+i.margin.left+r.width/2);return{x:a,y:e+r.height/2}},e.prototype.stretchChildren=function(t){if(void 0!==this.children&&this.children.length>0)for(var e=0,i=this.children;e<i.length;e++){var n=i[e];"Vertical"===this.orientation?"Stretch"===n.horizontalAlignment&&(n.desiredSize.width=t.width-(n.margin.left+n.margin.right)):"Stretch"===n.verticalAlignment&&(n.desiredSize.height=t.height-(n.margin.top+n.margin.bottom))}},e.prototype.applyChildMargin=function(t,e){e.height+=t.margin.top+t.margin.bottom,e.width+=t.margin.left+t.margin.right},e}(c["a"]),A=i("3aa5");function z(t,e,i){var n,o="NoWrap";"Class"===e.shape.classifier?n=e.shape.classShape:"Enumeration"===e.shape.classifier?n=e.shape.enumerationShape:"Interface"===e.shape.classifier&&(n=e.shape.interfaceShape);e.container={type:"Stack",orientation:"Vertical"},e.constraints=(s["k"].Default|s["k"].HideThumbs)&~(s["k"].Rotate|s["k"].Resize),e.style={fill:e.style.fill,strokeColor:"black",strokeWidth:1.5},e.children=[],e.maxWidth&&(o="Wrap");var r=new gt(i,"nodes",{id:e.id+"_umlClass_header",annotations:[{id:"name",content:n.name,offset:{x:.5,y:.65},margin:{left:10,right:10},style:{bold:!0,fontSize:14,color:n.style.color,fill:n.style.fill,textWrapping:o}},{content:"<<"+e.shape.classifier+">>",margin:{left:10,right:10},id:"class",style:{fontSize:n.style.fontSize,color:n.style.color,fill:n.style.fill,textWrapping:o},offset:{x:.5,y:.3},constraints:s["a"].ReadOnly}],constraints:(s["k"].Default|s["k"].HideThumbs)&~(s["k"].Rotate|s["k"].Drag|s["k"].Resize),verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:e.style.fill,strokeColor:"#ffffff00"}},!0);return i.initObject(r),i.nodes.push(r),e.children.push(r.id),L(e,i,n,o),E(e,i,n,o),e.offsetX=e.offsetX,e.offsetY=e.offsetY,e.style.fill=e.style.fill,e.borderColor=e.borderColor,i.initObject(e),t}function L(t,e,i,n){if("Enumeration"===t.shape.classifier){var o=i.members;if(o&&o.length){D(t,e);for(var r="",a=0;a<o.length;a++){var c=o[a];if(""!==c.name&&(r+=c.name),a!==o.length){var h=k(t,c),d=new gt(e,"nodes",{id:Object(O["i"])()+"_umlMember",annotations:[{id:"name",content:r,offset:{x:0,y:.5},style:{bold:!0,fontSize:h.fontSize,color:h.color,fill:h.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:t.style.fill,strokeColor:"#ffffff00",textWrapping:n},constraints:(s["k"].Default|s["k"].HideThumbs)&~(s["k"].Rotate|s["k"].Drag|s["k"].Resize),minHeight:25},!0);e.initObject(d),e.nodes.push(d),t.children.push(d.id),r="",c.isSeparator&&a!==o.length-1&&D(t,e)}}}}else{var l=i.attributes;if(l.length){var p="";D(t,e);for(a=0;a<l.length;a++){var u=void 0,g=l[a];if(u=g.scope&&"Public"===g.scope?" +":g.scope&&"Private"===g.scope?"-":g.scope&&"Protected"===g.scope?"#":"~",""!==g.name&&u&&(p+=u+" "+g.name+" : "+g.type),a!==l.length){h=k(t,g),d=new gt(e,"nodes",{id:Object(O["i"])()+"_umlProperty",style:{fill:t.style.fill,strokeColor:"#ffffff00"},annotations:[{id:"name",content:p,offset:{x:0,y:.5},style:{bold:!0,fontSize:h.fontSize,color:h.color,fill:h.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(s["k"].Default|s["k"].HideThumbs)&~(s["k"].Rotate|s["k"].Drag|s["k"].Resize),minHeight:25},!0);e.initObject(d),e.nodes.push(d),t.children.push(d.id),p="",g.isSeparator&&a!==l.length-1&&D(t,e)}}}}}function E(t,e,i,n){if(i.methods&&i.methods.length){var o=i.methods;D(t,e);for(var r="",a="",c=void 0,h=0;h<o.length;h++){var d=o[h];if(c=d.scope&&"Public"===d.scope?" +":d.scope&&"Private"===d.scope?"-":d.scope&&"Protected"===d.scope?"#":"~",d.parameters)for(var l=0;l<d.parameters.length;l++)d.parameters[l].type?r+=d.parameters[l].name+":"+d.parameters[l].type:r+=d.parameters[l].name,l!==d.parameters.length-1&&(r+=",");if(""!==d.name&&c&&(a+=c+" "+d.name+"("+r+") : "+d.type),h!==o.length){var p=k(t,d),u=new gt(e,"nodes",{id:Object(O["i"])()+"_umlMethods",verticalAlignment:"Stretch",horizontalAlignment:"Stretch",annotations:[{id:"name",content:a,offset:{x:0,y:.5},style:{bold:!0,fontSize:p.fontSize,color:p.color,fill:p.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],style:{fill:t.style.fill,strokeColor:"#ffffff00"},minHeight:25,constraints:(s["k"].Default|s["k"].HideThumbs)&~(s["k"].Rotate|s["k"].Drag|s["k"].Resize)},!0);e.initObject(u),e.nodes.push(u),t.children.push(u.id),a="",d.isSeparator&&h!==o.length-1&&D(t,e)}}}}function D(t,e){var i=new gt(e,"nodes",{id:Object(O["i"])()+"_path",height:1,constraints:s["k"].Default&~s["k"].Select,verticalAlignment:"Stretch",horizontalAlignment:"Stretch"},!0);e.initObject(i),e.nodes.push(i),t.children.push(i.id)}function k(t,e){var i={},n=e.style;return i.fill="transparent"!==n.fill?n.fill:t.style.fill,i.color=n.color,i.fontSize=12!==n.fontSize?n.fontSize:t.style.fontSize,i.strokeColor="black"!==n.strokeColor?n.strokeColor:t.style.strokeColor,i.strokeWidth=1!==n.strokeWidth?n.strokeWidth:t.style.strokeWidth,i}var R=i("b46f"),M=i("fd65"),B=i("9bac");i.d(e,"r",(function(){return X})),i.d(e,"p",(function(){return Y})),i.d(e,"l",(function(){return V})),i.d(e,"m",(function(){return U})),i.d(e,"v",(function(){return F})),i.d(e,"a",(function(){return G})),i.d(e,"j",(function(){return q})),i.d(e,"f",(function(){return Z})),i.d(e,"d",(function(){return Q})),i.d(e,"e",(function(){return J})),i.d(e,"h",(function(){return $})),i.d(e,"b",(function(){return it})),i.d(e,"c",(function(){return nt})),i.d(e,"g",(function(){return ot})),i.d(e,"w",(function(){return rt})),i.d(e,"o",(function(){return at})),i.d(e,"y",(function(){return st})),i.d(e,"z",(function(){return ct})),i.d(e,"x",(function(){return ht})),i.d(e,"D",(function(){return dt})),i.d(e,"C",(function(){return lt})),i.d(e,"B",(function(){return pt})),i.d(e,"A",(function(){return ut})),i.d(e,"q",(function(){return gt})),i.d(e,"k",(function(){return ft})),i.d(e,"n",(function(){return mt})),i.d(e,"s",(function(){return yt})),i.d(e,"u",(function(){return vt})),i.d(e,"i",(function(){return bt})),i.d(e,"t",(function(){return wt}));var H=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),N=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},W=function(t){if(t)switch(t.type){case"Basic":return G;case"Flow":return q;case"Path":return X;case"Image":return U;case"Text":return F;case"Bpmn":return ot;case"Native":return Y;case"HTML":return V;case"UmlActivity":return rt;case"UmlClassifier":return ut;case"SwimLane":return vt;default:return G}return G},_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),N([Object(n["p"])("Basic")],e.prototype,"type",void 0),e}(n["d"]),X=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"Path"},N([Object(n["p"])("Path")],e.prototype,"type",void 0),N([Object(n["p"])("")],e.prototype,"data",void 0),e}(_),Y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"Native"},N([Object(n["p"])("Native")],e.prototype,"type",void 0),N([Object(n["p"])("")],e.prototype,"content",void 0),N([Object(n["p"])("Stretch")],e.prototype,"scale",void 0),e}(_),V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"Html"},N([Object(n["p"])("HTML")],e.prototype,"type",void 0),N([Object(n["p"])("")],e.prototype,"content",void 0),e}(_),U=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"Image"},N([Object(n["p"])("Image")],e.prototype,"type",void 0),N([Object(n["p"])("")],e.prototype,"source",void 0),N([Object(n["p"])("None")],e.prototype,"scale",void 0),N([Object(n["p"])("None")],e.prototype,"align",void 0),e}(_),F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"Text"},N([Object(n["p"])("Text")],e.prototype,"type",void 0),N([Object(n["p"])("")],e.prototype,"content",void 0),N([Object(n["g"])({},o["a"])],e.prototype,"margin",void 0),e}(_),G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"BasicShape"},N([Object(n["p"])("Basic")],e.prototype,"type",void 0),N([Object(n["p"])("Rectangle")],e.prototype,"shape",void 0),N([Object(n["p"])(0)],e.prototype,"cornerRadius",void 0),N([Object(n["e"])([],r["a"])],e.prototype,"points",void 0),e}(_),q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"FlowShape"},N([Object(n["p"])("Flow")],e.prototype,"type",void 0),N([Object(n["p"])("Terminator")],e.prototype,"shape",void 0),e}(_),Z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"BpmnGateway"},N([Object(n["p"])("None")],e.prototype,"type",void 0),e}(n["d"]),Q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"BpmnDataObject"},N([Object(n["p"])("None")],e.prototype,"type",void 0),N([Object(n["p"])(!1)],e.prototype,"collection",void 0),e}(n["d"]),K=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),N([Object(n["p"])("None")],e.prototype,"type",void 0),N([Object(n["p"])("None")],e.prototype,"loop",void 0),N([Object(n["p"])(!1)],e.prototype,"call",void 0),N([Object(n["p"])(!1)],e.prototype,"compensation",void 0),e}(n["d"]),J=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"BpmnEvent"},N([Object(n["p"])("Start")],e.prototype,"event",void 0),N([Object(n["p"])("None")],e.prototype,"trigger",void 0),e}(n["d"]),$=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"BpmnSubEvent"},N([Object(n["p"])("None")],e.prototype,"trigger",void 0),N([Object(n["p"])("Start")],e.prototype,"event",void 0),N([Object(n["p"])("")],e.prototype,"id",void 0),N([Object(n["g"])({},r["a"])],e.prototype,"offset",void 0),N([Object(n["e"])([],y["c"])],e.prototype,"annotations",void 0),N([Object(n["e"])([],m["a"])],e.prototype,"ports",void 0),N([Object(n["p"])()],e.prototype,"width",void 0),N([Object(n["p"])()],e.prototype,"height",void 0),N([Object(n["g"])({},o["a"])],e.prototype,"margin",void 0),N([Object(n["p"])("Center")],e.prototype,"horizontalAlignment",void 0),N([Object(n["p"])("Center")],e.prototype,"verticalAlignment",void 0),N([Object(n["p"])(!0)],e.prototype,"visible",void 0),e}(n["d"]),tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),N([Object(n["g"])({id:"success",event:"End",offset:{x:1,y:.5}},$)],e.prototype,"success",void 0),N([Object(n["g"])({id:"failure",event:"Intermediate",trigger:"Error",offset:{x:.25,y:1}},$)],e.prototype,"failure",void 0),N([Object(n["g"])({id:"cancel",event:"Intermediate",trigger:"Cancel",offset:{x:.75,y:1}},$)],e.prototype,"cancel",void 0),e}(n["d"]),et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),N([Object(n["p"])("None")],e.prototype,"type",void 0),N([Object(n["p"])(!1)],e.prototype,"adhoc",void 0),N([Object(n["p"])("Default")],e.prototype,"boundary",void 0),N([Object(n["p"])(!1)],e.prototype,"compensation",void 0),N([Object(n["p"])("None")],e.prototype,"loop",void 0),N([Object(n["p"])(!0)],e.prototype,"collapsed",void 0),N([Object(n["e"])([],$)],e.prototype,"events",void 0),N([Object(n["g"])({},tt)],e.prototype,"transaction",void 0),N([Object(n["p"])(void 0)],e.prototype,"processes",void 0),e}(n["d"]),it=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"BpmnActivity"},N([Object(n["p"])("Task")],e.prototype,"activity",void 0),N([Object(n["g"])({},K)],e.prototype,"task",void 0),N([Object(n["g"])({},et)],e.prototype,"subProcess",void 0),e}(n["d"]),nt=function(t){function e(e,i,n,o){return t.call(this,e,i,n,o)||this}return H(e,t),e.prototype.getClassName=function(){return"BpmnAnnotation"},N([Object(n["p"])("")],e.prototype,"text",void 0),N([Object(n["p"])("")],e.prototype,"id",void 0),N([Object(n["p"])(0)],e.prototype,"angle",void 0),N([Object(n["p"])()],e.prototype,"height",void 0),N([Object(n["p"])()],e.prototype,"width",void 0),N([Object(n["p"])(0)],e.prototype,"length",void 0),e}(n["d"]),ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"BpmnShape"},N([Object(n["p"])("Bpmn")],e.prototype,"type",void 0),N([Object(n["p"])("Event")],e.prototype,"shape",void 0),N([Object(n["g"])({},J)],e.prototype,"event",void 0),N([Object(n["g"])({},Z)],e.prototype,"gateway",void 0),N([Object(n["g"])({},Q)],e.prototype,"dataObject",void 0),N([Object(n["g"])({},it)],e.prototype,"activity",void 0),N([Object(n["g"])({},nt)],e.prototype,"annotation",void 0),N([Object(n["e"])([],nt)],e.prototype,"annotations",void 0),e}(_),rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"UmlActivityShape"},N([Object(n["p"])("UmlActivity")],e.prototype,"type",void 0),N([Object(n["p"])("Action")],e.prototype,"shape",void 0),e}(_),at=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"MethodArguments"},N([Object(n["p"])("")],e.prototype,"name",void 0),N([Object(n["p"])("")],e.prototype,"type",void 0),N([Object(n["g"])({},o["f"])],e.prototype,"style",void 0),e}(n["d"]),st=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"UmlClassAttribute"},N([Object(n["p"])("Public")],e.prototype,"scope",void 0),N([Object(n["p"])(!1)],e.prototype,"isSeparator",void 0),e}(at),ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"UmlClassMethod"},N([Object(n["e"])([],at)],e.prototype,"parameters",void 0),e}(st),ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"UmlClass"},N([Object(n["p"])("")],e.prototype,"name",void 0),N([Object(n["e"])([],st)],e.prototype,"attributes",void 0),N([Object(n["e"])([],ct)],e.prototype,"methods",void 0),N([Object(n["g"])({},o["f"])],e.prototype,"style",void 0),e}(n["d"]),dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"UmlInterface"},N([Object(n["p"])(!1)],e.prototype,"isSeparator",void 0),e}(ht),lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"UmlEnumerationMember"},N([Object(n["p"])("")],e.prototype,"name",void 0),N([Object(n["p"])("")],e.prototype,"value",void 0),N([Object(n["p"])(!1)],e.prototype,"isSeparator",void 0),N([Object(n["g"])({},o["f"])],e.prototype,"style",void 0),e}(n["d"]),pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"UmlEnumeration"},N([Object(n["p"])("")],e.prototype,"name",void 0),N([Object(n["e"])([],lt)],e.prototype,"members",void 0),N([Object(n["g"])({},o["f"])],e.prototype,"style",void 0),e}(n["d"]),ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"UmlClassifierShape"},N([Object(n["p"])("UmlClassifier")],e.prototype,"type",void 0),N([Object(n["g"])({},ht)],e.prototype,"classShape",void 0),N([Object(n["g"])({},dt)],e.prototype,"interfaceShape",void 0),N([Object(n["g"])({},pt)],e.prototype,"enumerationShape",void 0),N([Object(n["p"])("Class")],e.prototype,"classifier",void 0),e}(_),gt=function(t){function e(e,i,n,o){var r,a=t.call(this,e,i,n,o)||this;return a.isCanvasUpdate=!1,a.status="None",a.parentId="",a.processId="",a.umlIndex=-1,a.outEdges=[],a.inEdges=[],a.isHeader=!1,a.isLane=!1,a.isPhase=!1,a.children&&a.children.length>0&&(r=n,r.style&&r.style.fill||(a.style.fill="transparent"),r.style&&r.style.strokeColor||(a.style.strokeColor="transparent")),a.shape&&"UmlActivity"===a.shape.type&&Object(w["P"])(n,a),a.shape&&"SwimLane"===a.shape.type&&Object(w["O"])(n,a),a}return H(e,t),Object.defineProperty(e.prototype,"actualSize",{get:function(){return null!==this.wrapper?this.wrapper.actualSize:new a["a"](this.width||0,this.height||0)},enumerable:!0,configurable:!0}),e.prototype.init=function(t){var e,i;e="SwimLane"!=this.shape.type?new l["a"]:new A["b"];var n="changedProperties",o="oldProperties";switch(this.shape[n]={},this.shape[o]={},this.shape.type){case"Path":var r=new p["a"];r.data=this.shape.data,e=r;break;case"Image":var a=new g["a"];a.source=this.shape.source,a.imageAlign=this.shape.align,a.imageScale=this.shape.scale,e=a;break;case"Text":var c=new u["a"];c.content=this.shape.content,e=c,i=this.style,e.style=i;break;case"Basic":if("Rectangle"===this.shape.shape){var h=new l["a"];e=h,e.cornerRadius=this.shape.cornerRadius}else if("Polygon"===this.shape.shape){var m=new p["a"];m.data=Object(C["b"])(this.shape.points),e=m}else{h=new p["a"];var y=Object(d["a"])(this.shape.shape);h.data=y,e=h}break;case"Flow":var v=new p["a"],O=Object(b["a"])(this.shape.shape);v.data=O,e=v;break;case"UmlActivity":var x=new p["a"];e=Object(w["C"])(x,e,this);break;case"Bpmn":if(t.bpmnModule){e=t.bpmnModule.initBPMNContent(e,this,t),this.wrapper.elementActions=this.wrapper.elementActions|s["g"].ElementIsGroup;var S=this.shape.activity.subProcess;if(S.processes&&S.processes.length)for(var T=this.shape.activity.subProcess.processes,I=0,L=T;I<L.length;I++){var E=L[I];!t.nameTable[E]||t.nameTable[E].processId&&t.nameTable[E].processId!==this.id||(t.nameTable[E].processId=this.id,S.collapsed&&t.updateElementVisibility(t.nameTable[E].wrapper,t.nameTable[E],!S.collapsed),e.children.push(t.nameTable[E].wrapper))}}break;case"Native":var D=new f["a"](this.id,t.element.id);D.content=this.shape.content,D.scale=this.shape.scale,e=D;break;case"HTML":var k=new P["a"](this.id,t.element.id);k.content=this.shape.content,e=k;break;case"UmlClassifier":e=z(e,this,t);break;case"SwimLane":this.annotations=[],this.ports=[],e.cellStyle.fill="none",e.cellStyle.strokeColor="none",this.container={type:"Grid",orientation:this.shape.orientation},e.id=this.id,this.container.orientation=this.shape.orientation,this.constraints|=s["k"].HideThumbs,Object(R["j"])(e,t,this);break}return e.id=this.id+"_content",e.relativeMode="Object",void 0!==this.width&&(e.width=this.width),e.horizontalAlignment="Stretch",void 0!==this.height&&(e.height=this.height),void 0!==this.minHeight&&(e.minHeight=this.minHeight),void 0!==this.maxHeight&&(e.maxHeight=this.maxHeight),void 0!==this.minWidth&&(e.minWidth=this.minWidth),void 0!==this.maxWidth&&(e.maxWidth=this.maxWidth),"Rectangle"!==this.shape.shape||this.shape.cornerRadius||(e.isRectElement=!0),e.verticalAlignment="Stretch",this.shape instanceof F&&(e.margin=this.shape.margin),Object(j["B"])(this)&&0!==(this.constraints&s["k"].Shadow)&&(e.shadow=this.shadow),"Bpmn"===this.shape.type&&"Message"!==this.shape.shape&&"DataSource"!==this.shape.shape||"UmlActivity"===this.shape.type&&"FinalNode"===this.shape.shape||"Text"!==this.shape.type&&(e.style=this.style),(this.wrapper.elementActions&s["g"].ElementIsGroup||"Horizontal"!==this.flip)&&"Vertical"!==this.flip||(e.flip=this.flip),e},e.prototype.initContainer=function(){var t;if(this.id||(this.id=Object(O["i"])()),!this.container||this.shape instanceof vt)t=this.children?new c["a"]:new h["a"];else switch(this.container.type){case"Canvas":t=new h["a"];break;case"Stack":t=new I;break;case"Grid":t=new A["b"],t.setDefinitions(this.rows,this.columns);break}return t.id=this.id,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t.visible=this.visible,t.horizontalAlignment=this.horizontalAlignment,t.verticalAlignment=this.verticalAlignment,this.container&&(t.width=this.width,t.height=this.height,"Stack"===this.container.type&&(t.orientation=this.container.orientation)),t.style.fill=this.backgroundColor,t.style.strokeColor=this.borderColor,t.style.strokeWidth=this.borderWidth,t.rotateAngle=this.rotateAngle,t.minHeight=this.minHeight,t.minWidth=this.minWidth,t.maxHeight=this.maxHeight,t.maxWidth=this.maxWidth,t.pivot=this.pivot,t.margin=this.margin,t.flip=this.flip,this.wrapper=t,t},e.prototype.initPorts=function(t,e){this.wrapper;for(var i,n=0;this.ports,n<this.ports.length;n++){i=this.initPortWrapper(this.ports[n]),i.elementActions=i.elementActions|s["g"].ElementIsPort;var o=void 0,r=Object(O["f"])(t);r&&(o=r(i,this)),i.description=o||i.id,e.children.push(i)}},e.prototype.getIconOffet=function(t,e){var i,n;return"BottomToTop"===t.orientation?(i=e.offset.x,n=1-e.offset.y):"LeftToRight"===t.orientation?(i=e.offset.y,n=e.offset.x):"RightToLeft"===t.orientation?(i=1-e.offset.y,n=e.offset.x):(i=e.offset.x,n=e.offset.y),{x:i,y:n}},e.prototype.initIcons=function(t,e,i,n){this.wrapper;var o,r=this.isExpanded?this.expandIcon:this.collapseIcon;if("None"!==r.shape){var a=new h["a"];a.float=!0;var s=[];a.id=this.id+"_icon_content",a.children=s,a.height=r.height,a.width=r.width,a.style.strokeColor="transparent",a.margin=r.margin,a.horizontalAlignment="Center",a.verticalAlignment="Center",a.visible=this.visible,o=this.getIconOffet(e,r),a.setOffsetWithRespectToBounds(o.x,o.y,"Fraction"),a.relativeMode="Point",this.initIconSymbol(r,a,t,n);var c=void 0,d=Object(O["f"])(t);d&&(c=d(r,this)),a.description=c||a.id,i.children.push(a)}},e.prototype.initAnnotations=function(t,e,i,n){for(var o,r=0;this.annotations,r<this.annotations.length;r++){o=this.initAnnotationWrapper(this.annotations[r],i,n,r);var a=void 0,s=Object(O["f"])(t);s&&(a=s(o,this)),o.description=a||o.id,e.children.push(o)}},e.prototype.initPortWrapper=function(t){t.id=t.id||Object(O["i"])();var e=new p["a"];e.height=t.height,e.width=t.width;var i="Custom"===t.shape?t.pathData:Object(v["c"])(t.shape);e.id=this.id+"_"+t.id,e.margin=t.margin,e.data=i;var n=t.style;return e.style={fill:n.fill,strokeColor:n.strokeColor,gradient:null,opacity:n.opacity,strokeDashArray:n.strokeDashArray,strokeWidth:n.strokeWidth},e.horizontalAlignment=t.horizontalAlignment,e.verticalAlignment=t.verticalAlignment,e=Object(w["W"])(e,this.flip,t),void 0===this.width&&void 0===this.height||(e.float=!0),e.relativeMode="Point",e.visible=!(!Object(w["g"])(t,s["m"].Visible)||Object(w["g"])(t,s["m"].Hover)||Object(w["g"])(t,s["m"].Connect)),e},e.prototype.initAnnotationWrapper=function(t,e,i,n){t.id=t.id||n+"annotation"||Object(O["i"])();var o,r=t;if(e&&t.template)o=new P["a"](this.id,e,t.id),o.content=t.template;else{o=new u["a"],o.canMeasure=!i;var a=t.style,s=t.hyperlink.link?t.hyperlink:void 0;o.style={fill:a.fill,strokeColor:a.strokeColor,strokeWidth:a.strokeWidth,bold:a.bold,textWrapping:a.textWrapping,color:s?s.color||o.hyperlink.color:a.color,whiteSpace:a.whiteSpace,fontFamily:a.fontFamily,fontSize:a.fontSize,italic:a.italic,gradient:null,opacity:a.opacity,strokeDashArray:a.strokeDashArray,textAlign:a.textAlign,textOverflow:t.style.textOverflow,textDecoration:s?s.textDecoration||o.hyperlink.textDecoration:a.textDecoration},o.hyperlink.link=t.hyperlink.link||void 0,o.hyperlink.content=t.hyperlink.content||void 0,o.hyperlink.textDecoration=t.hyperlink.textDecoration||void 0,o.content=s?s.content||o.hyperlink.link:t.content}return o.constraints=t.constraints,o.height=t.height,o.width=t.width,o.visible=t.visibility,o.rotateAngle=t.rotateAngle,o.id=this.id+"_"+t.id,void 0===this.width||t.template||(void 0===t.width||t.width>this.width&&("Wrap"===t.style.textWrapping||"WrapWithOverflow"===t.style.textWrapping))&&(o.width=this.width),o.margin=t.margin,o.horizontalAlignment=t.horizontalAlignment,o.verticalAlignment=t.verticalAlignment,o.setOffsetWithRespectToBounds(r.offset.x,r.offset.y,"Fraction"),void 0===this.width&&void 0===this.height||(o.float=!0),o.relativeMode="Point",o},e.prototype.initIconContainer=function(t,e){var i=new l["a"];return i.id=e.id+"_rect",i.height=t.height,i.width=t.width,i.visible=e.visible,i.margin=t.margin,i.cornerRadius=t.cornerRadius,i.style={fill:t.fill,strokeColor:t.borderColor,strokeWidth:t.borderWidth},i.setOffsetWithRespectToBounds(.5,.5,"Fraction"),i.horizontalAlignment="Center",i.verticalAlignment="Center",i.relativeMode="Object",i.description=i.description||"Click here to expand or collapse",i},e.prototype.initIconSymbol=function(t,e,i,n){var o;if(e.children.push(this.initIconContainer(t,e)),"Template"===t.shape)o=new f["a"](this.id,n),o.content=t.content,o.height=10,o.width=10;else{o=new p["a"],o.data=Object(v["b"])(t);var r=Object(S["B"])(o.data);o.height=r.height<10?r.height:10-(t.padding.bottom+t.padding.top),o.width=r.width<10?r.width:10-(t.padding.left+t.padding.right)}o.id=e.id+"_shape",o.horizontalAlignment="Center",o.verticalAlignment="Center",o.visible=e.visible,o.visible=e.visible,o.style={fill:"black",strokeColor:t.borderColor,strokeWidth:t.borderWidth},o.setOffsetWithRespectToBounds(.5,.5,"Fraction"),o.relativeMode="Object",o.description=e.description||"Click here to expand or collapse",e.children.push(o)},e.prototype.getClassName=function(){return"Node"},N([Object(n["e"])([],y["c"])],e.prototype,"annotations",void 0),N([Object(n["p"])(0)],e.prototype,"offsetX",void 0),N([Object(n["p"])(0)],e.prototype,"offsetY",void 0),N([Object(n["g"])({x:.5,y:.5},r["a"])],e.prototype,"pivot",void 0),N([Object(n["p"])()],e.prototype,"width",void 0),N([Object(n["p"])()],e.prototype,"height",void 0),N([Object(n["p"])()],e.prototype,"minWidth",void 0),N([Object(n["p"])()],e.prototype,"minHeight",void 0),N([Object(n["p"])()],e.prototype,"maxWidth",void 0),N([Object(n["p"])()],e.prototype,"maxHeight",void 0),N([Object(n["p"])(0)],e.prototype,"rotateAngle",void 0),N([Object(n["g"])({fill:"white"},o["f"])],e.prototype,"style",void 0),N([Object(n["p"])("transparent")],e.prototype,"backgroundColor",void 0),N([Object(n["p"])("none")],e.prototype,"borderColor",void 0),N([Object(n["p"])(0)],e.prototype,"borderWidth",void 0),N([Object(n["p"])()],e.prototype,"data",void 0),N([Object(n["h"])(W)],e.prototype,"shape",void 0),N([Object(n["p"])(null)],e.prototype,"wrapper",void 0),N([Object(n["p"])(s["k"].Default)],e.prototype,"constraints",void 0),N([Object(n["g"])({},o["b"])],e.prototype,"shadow",void 0),N([Object(n["p"])()],e.prototype,"children",void 0),N([Object(n["p"])(null)],e.prototype,"container",void 0),N([Object(n["p"])("Left")],e.prototype,"horizontalAlignment",void 0),N([Object(n["p"])("Top")],e.prototype,"verticalAlignment",void 0),N([Object(n["p"])()],e.prototype,"rows",void 0),N([Object(n["p"])()],e.prototype,"columns",void 0),N([Object(n["p"])()],e.prototype,"rowIndex",void 0),N([Object(n["p"])()],e.prototype,"columnIndex",void 0),N([Object(n["p"])()],e.prototype,"rowSpan",void 0),N([Object(n["p"])()],e.prototype,"columnSpan",void 0),N([Object(n["p"])("")],e.prototype,"branch",void 0),e}(x["a"]),ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),N([Object(n["p"])("")],e.prototype,"id",void 0),N([Object(n["g"])({style:{fill:"#111111"}},y["a"])],e.prototype,"annotation",void 0),N([Object(n["g"])({fill:"#E7F4FF",strokeColor:"#CCCCCC"},o["c"])],e.prototype,"style",void 0),N([Object(n["p"])(50)],e.prototype,"height",void 0),N([Object(n["p"])(50)],e.prototype,"width",void 0),e}(n["d"]),mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"Lane"},N([Object(n["p"])("")],e.prototype,"id",void 0),N([Object(n["g"])({fill:"#F9F9F9",strokeColor:"#CCCCCC"},o["c"])],e.prototype,"style",void 0),N([Object(n["e"])([],gt)],e.prototype,"children",void 0),N([Object(n["p"])(100)],e.prototype,"height",void 0),N([Object(n["p"])(100)],e.prototype,"width",void 0),N([Object(n["g"])({style:{fill:"#E7F4FF",strokeColor:"#CCCCCC"},annotation:{content:"Function"}},ft)],e.prototype,"header",void 0),e}(n["d"]),yt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.getClassName=function(){return"Phase"},N([Object(n["p"])("")],e.prototype,"id",void 0),N([Object(n["g"])({strokeColor:"#CCCCCC"},o["c"])],e.prototype,"style",void 0),N([Object(n["g"])({annotation:{content:"Phase"}},ft)],e.prototype,"header",void 0),N([Object(n["p"])(100)],e.prototype,"offset",void 0),e}(n["d"]),vt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.padding=20,e.hasHeader=!0,e}return H(e,t),e.prototype.getClassName=function(){return"SwimLane"},N([Object(n["p"])("SwimLane")],e.prototype,"type",void 0),N([Object(n["p"])(20)],e.prototype,"phaseSize",void 0),N([Object(n["e"])([],yt)],e.prototype,"phases",void 0),N([Object(n["p"])("Horizontal")],e.prototype,"orientation",void 0),N([Object(n["e"])([],mt)],e.prototype,"lanes",void 0),N([Object(n["g"])({style:{fill:"#E7F4FF",strokeColor:"#CCCCCC"},annotation:{content:"Function"}},ft)],e.prototype,"header",void 0),N([Object(n["p"])(!1)],e.prototype,"isLane",void 0),N([Object(n["p"])(!1)],e.prototype,"isPhase",void 0),e}(_),bt=function(){function t(){}return t.prototype.getClassName=function(){return"ChildContainer"},N([Object(n["p"])("Canvas")],t.prototype,"type",void 0),N([Object(n["p"])("Vertical")],t.prototype,"orientation",void 0),t}(),wt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.init=function(t){var e=new c["a"];e.measureChildren=!1;new a["a"];if(e.children=[],this.annotation){var i=this.nodes.length>0?t.nameTable[this.nodes[0].id].wrapper:t.nameTable[this.connectors[0].id].wrapper,n=t.getWrapper(i,this.annotation.id);e.children.push(n)}else if(this.nodes||this.connectors){for(var o=0;o<this.nodes.length;o++){var r=t.nameTable[this.nodes[o].id];n=r.wrapper;e.children.push(n)}for(var s=0;s<this.connectors.length;s++){var h=t.nameTable[this.connectors[s].id];n=h.wrapper;e.children.push(n)}}return this.wrapper=e,e},N([Object(n["p"])(null)],e.prototype,"wrapper",void 0),N([Object(n["e"])([],gt)],e.prototype,"nodes",void 0),N([Object(n["e"])([],M["b"])],e.prototype,"connectors",void 0),N([Object(n["p"])()],e.prototype,"width",void 0),N([Object(n["p"])()],e.prototype,"height",void 0),N([Object(n["p"])(0)],e.prototype,"rotateAngle",void 0),N([Object(n["p"])(0)],e.prototype,"offsetX",void 0),N([Object(n["p"])(0)],e.prototype,"offsetY",void 0),N([Object(n["g"])({x:.5,y:.5},r["a"])],e.prototype,"pivot",void 0),N([Object(n["p"])("CompleteIntersect")],e.prototype,"rubberBandSelectionMode",void 0),N([Object(n["e"])([],B["a"])],e.prototype,"userHandles",void 0),N([Object(n["p"])(s["p"].All)],e.prototype,"constraints",void 0),N([Object(n["p"])()],e.prototype,"setTooltipTemplate",void 0),e}(n["d"])},a630:function(t,e,i){"use strict";i.d(e,"g",(function(){return s})),i.d(e,"a",(function(){return c})),i.d(e,"b",(function(){return h})),i.d(e,"d",(function(){return d})),i.d(e,"c",(function(){return g})),i.d(e,"e",(function(){return f})),i.d(e,"f",(function(){return m}));var n=i("7de8"),o=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},a=function(t){if(t)switch(t.type){case"Linear":return p;case"Radial":return u;default:return p}return p},s=function(){function t(t,e,i,n){this.left=t,this.right=e,this.top=i,this.bottom=n}return t}(),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),r([Object(n["p"])(0)],e.prototype,"left",void 0),r([Object(n["p"])(0)],e.prototype,"right",void 0),r([Object(n["p"])(0)],e.prototype,"top",void 0),r([Object(n["p"])(0)],e.prototype,"bottom",void 0),e}(n["d"]),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),r([Object(n["p"])(45)],e.prototype,"angle",void 0),r([Object(n["p"])(5)],e.prototype,"distance",void 0),r([Object(n["p"])(.7)],e.prototype,"opacity",void 0),r([Object(n["p"])("lightgrey")],e.prototype,"color",void 0),e}(n["d"]),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getClassName=function(){return"Stop"},r([Object(n["p"])("")],e.prototype,"color",void 0),r([Object(n["p"])(0)],e.prototype,"offset",void 0),r([Object(n["p"])(1)],e.prototype,"opacity",void 0),e}(n["d"]),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),r([Object(n["e"])([],d)],e.prototype,"stops",void 0),r([Object(n["p"])("None")],e.prototype,"type",void 0),r([Object(n["p"])("")],e.prototype,"id",void 0),e}(n["d"]),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),r([Object(n["p"])(0)],e.prototype,"x1",void 0),r([Object(n["p"])(0)],e.prototype,"x2",void 0),r([Object(n["p"])(0)],e.prototype,"y1",void 0),r([Object(n["p"])(0)],e.prototype,"y2",void 0),e}(l),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),r([Object(n["p"])(0)],e.prototype,"cx",void 0),r([Object(n["p"])(0)],e.prototype,"cy",void 0),r([Object(n["p"])(0)],e.prototype,"fx",void 0),r([Object(n["p"])(0)],e.prototype,"fy",void 0),r([Object(n["p"])(50)],e.prototype,"r",void 0),e}(l),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),r([Object(n["p"])("white")],e.prototype,"fill",void 0),r([Object(n["p"])("black")],e.prototype,"strokeColor",void 0),r([Object(n["p"])("")],e.prototype,"strokeDashArray",void 0),r([Object(n["p"])(1)],e.prototype,"strokeWidth",void 0),r([Object(n["p"])(1)],e.prototype,"opacity",void 0),r([Object(n["h"])(a)],e.prototype,"gradient",void 0),e}(n["d"]),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),r([Object(n["p"])("transparent")],e.prototype,"fill",void 0),e}(g),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),r([Object(n["p"])("black")],e.prototype,"color",void 0),r([Object(n["p"])("Arial")],e.prototype,"fontFamily",void 0),r([Object(n["p"])(12)],e.prototype,"fontSize",void 0),r([Object(n["p"])(!1)],e.prototype,"italic",void 0),r([Object(n["p"])(!1)],e.prototype,"bold",void 0),r([Object(n["p"])("CollapseSpace")],e.prototype,"whiteSpace",void 0),r([Object(n["p"])("WrapWithOverflow")],e.prototype,"textWrapping",void 0),r([Object(n["p"])("Center")],e.prototype,"textAlign",void 0),r([Object(n["p"])("None")],e.prototype,"textDecoration",void 0),r([Object(n["p"])("Wrap")],e.prototype,"textOverflow",void 0),r([Object(n["p"])("transparent")],e.prototype,"fill",void 0),e}(g)},ab8c:function(t,e,i){"use strict";var n;i.d(e,"a",(function(){return r})),i.d(e,"e",(function(){return a})),i.d(e,"f",(function(){return s})),i.d(e,"c",(function(){return c})),i.d(e,"d",(function(){return h})),i.d(e,"g",(function(){return d})),i.d(e,"b",(function(){return g})),function(t){t[t["Identity"]=0]="Identity",t[t["Translation"]=1]="Translation",t[t["Scaling"]=2]="Scaling",t[t["Unknown"]=4]="Unknown"}(n||(n={}));var o=function(){function t(t,e,i,n,o,r,a){this.m11=t,this.m12=e,this.m21=i,this.m22=n,this.offsetX=o,this.offsetY=r,this.type=a}return t}();function r(){return new o(1,0,0,1,0,0,n.Identity)}function a(t,e){var i=u(t,e.x,e.y);return{x:Math.round(100*i.x)/100,y:Math.round(100*i.y)/100}}function s(t,e){for(var i=[],n=0,o=e;n<o.length;n++){var r=o[n];i.push(a(t,r))}return i}function c(t,e,i,n){e%=360,g(t,p(.017453292519943295*e,i||0,n||0))}function h(t,e,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0),g(t,l(e,i,n,o))}function d(t,e,i){return t.type&n.Identity?(t.type=n.Translation,void f(t,1,0,0,1,e,i)):t.type&n.Unknown?(t.offsetX+=e,void(t.offsetY+=i)):(t.offsetX+=e,t.offsetY+=i,void(t.type|=n.Translation))}function l(t,e,i,o){var a=r();return a.type=i||o?n.Scaling|n.Translation:n.Scaling,f(a,t,0,0,e,i-t*i,o-e*o),a}function p(t,e,i){var o=r(),a=Math.sin(t),s=Math.cos(t),c=e*(1-s)+i*a,h=i*(1-s)-e*a;return o.type=n.Unknown,f(o,s,a,-a,s,c,h),o}function u(t,e,i){switch(t.type){case n.Identity:break;case n.Translation:e+=t.offsetX,i+=t.offsetY;break;case n.Scaling:e*=t.m11,i*=t.m22;break;case n.Translation|n.Scaling:e*=t.m11,e+=t.offsetX,i*=t.m22,i+=t.offsetY;break;default:var o=i*t.m21+t.offsetX,r=e*t.m12+t.offsetY;e*=t.m11,e+=o,i*=t.m22,i+=r;break}return{x:e,y:i}}function g(t,e){var i=t.type,o=e.type;if(o!==n.Identity){if(i===n.Identity)return m(t,e),void(t.type=e.type);if(o===n.Translation)return t.offsetX+=e.offsetX,t.offsetY+=e.offsetY,void(i!==n.Unknown&&(t.type|=n.Translation));if(i!==n.Translation){var a=i<<4|o;switch(a){case 34:return t.m11*=e.m11,void(t.m22*=e.m22);case 35:return t.m11*=e.m11,t.m22*=e.m22,t.offsetX=e.offsetX,t.offsetY=e.offsetY,void(t.type=n.Translation|n.Scaling);case 36:break;default:switch(a){case 50:return t.m11*=e.m11,t.m22*=e.m22,t.offsetX*=e.m11,void(t.offsetY*=e.m22);case 51:return t.m11*=e.m11,t.m22*=e.m22,t.offsetX=e.m11*t.offsetX+e.offsetX,void(t.offsetY=e.m22*t.offsetY+e.offsetY);case 52:break;default:switch(a){case 66:case 67:case 68:break;default:return}break}break}var s=r(),c=t.m11*e.m11+t.m12*e.m21,h=t.m11*e.m12+t.m12*e.m22,d=t.m21*e.m11+t.m22*e.m21,l=t.m21*e.m12+t.m22*e.m22,p=t.offsetX*e.m11+t.offsetY*e.m21+e.offsetX,u=t.offsetX*e.m12+t.offsetY*e.m22+e.offsetY;return f(s,c,h,d,l,p,u),s.m21||s.m12?s.type=n.Unknown:((s.m11&&1!==s.m11||s.m22&&1!==s.m22)&&(s.type=n.Scaling),(s.offsetX||s.offsetY)&&(s.type|=n.Translation),(s.type&(n.Translation|n.Scaling))===n.Identity&&(s.type=n.Identity),s.type=n.Scaling|n.Translation),m(t,s),void(t.type=s.type)}var g=t.offsetX,y=t.offsetY;t.offsetX=g*e.m11+y*e.m21+e.offsetX,t.offsetY=g*e.m12+y*e.m22+e.offsetY,o!==n.Unknown?t.type=n.Translation|n.Scaling:t.type=n.Unknown}}function f(t,e,i,n,o,r,a){t.m11=e,t.m12=i,t.m21=n,t.m22=o,t.offsetX=r,t.offsetY=a}function m(t,e){t.m11=e.m11,t.m12=e.m12,t.m21=e.m21,t.m22=e.m22,t.offsetX=e.offsetX,t.offsetY=e.offsetY,t.type=e.type}},b239:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n=function(){function t(t,e){this.width=t,this.height=e}return t.prototype.isEmpty=function(){return 0===this.height&&0===this.width},t.prototype.clone=function(){return new t(this.width,this.height)},t}()},b46f:function(t,e,i){"use strict";i.d(e,"j",(function(){return u})),i.d(e,"m",(function(){return m})),i.d(e,"h",(function(){return x})),i.d(e,"r",(function(){return j})),i.d(e,"c",(function(){return C})),i.d(e,"d",(function(){return I})),i.d(e,"e",(function(){return A})),i.d(e,"t",(function(){return z})),i.d(e,"k",(function(){return L})),i.d(e,"w",(function(){return E})),i.d(e,"g",(function(){return D})),i.d(e,"v",(function(){return M})),i.d(e,"u",(function(){return B})),i.d(e,"a",(function(){return H})),i.d(e,"b",(function(){return W})),i.d(e,"s",(function(){return F})),i.d(e,"l",(function(){return G})),i.d(e,"i",(function(){return q})),i.d(e,"o",(function(){return Z})),i.d(e,"q",(function(){return K})),i.d(e,"n",(function(){return $})),i.d(e,"p",(function(){return et})),i.d(e,"f",(function(){return ot}));var n=i("9efe"),o=i("3aa5"),r=i("bccc"),a=i("95f7"),s=i("456d"),c=i("d454"),h=i("b239"),d=i("7682"),l=i("d0e6"),p=i("1257");function u(t,e,i){i.width||0!==i.shape.phases.length||(i.width=100);var n=[],o=[],r=0,s=i.shape,c="Horizontal"===s.orientation;if(s.header&&s.hasHeader&&v(n,s.header.height),w(n,c,i),O(o,c,i),t.setDefinitions(n,o),s.header&&s.hasHeader&&(f(t,e,i),r++),s.phases.length>0&&s.phaseSize){for(var h=0;h<s.phases.length;h++)""===s.phases[h].id&&(s.phases[h].id=Object(a["i"])()),m(t,e,i,r,c,h);r++}if(s.lanes.length>0)for(h=0;h<s.lanes.length;h++)""===s.lanes[h].id&&(s.lanes[h].id=Object(a["i"])()),y(t,e,i,r,h,c),r++}function g(t,e,i,o,a,d,l,p){var u=new n["q"](t,"nodes",o,!0);u.parentId=i.id,u.isHeader=!!a,u.isPhase=!!d,u.isLane=!!l;var g=d?"PhaseHeaderParent":"LaneHeaderParent";if(p&&(u[g]=p),u.constraints&=~(r["k"].InConnect|r["k"].OutConnect),u.constraints|=r["k"].HideThumbs,t.initObject(u),t.nodes.push(u),u.wrapper.children.length>0){for(var f=0;f<u.wrapper.children.length;f++){var m=u.wrapper.children[f];m instanceof s["a"]&&(m.isCalculateDesiredSize=!1),m instanceof c["a"]&&(m.canConsiderBounds=!1,(!a&&"Vertical"===i.shape.orientation&&d||"Vertical"!==i.shape.orientation&&l)&&(m.isLaneOrientation=!0,m.refreshTextElement()))}u.wrapper.measure(new h["a"](void 0,void 0)),u.wrapper.arrange(u.wrapper.desiredSize)}return u.wrapper}function f(t,e,i){for(var n=0,o=t.columnDefinitions(),r=i.shape,a=0;a<o.length;a++)n+=o[a].width;var s={annotations:[{content:r.header.annotation.content,style:r.header.annotation.style?r.header.annotation.style:void 0}],style:r.header.style?r.header.style:void 0,offsetX:i.offsetX,offsetY:i.offsetY,rowIndex:0,columnIndex:0,maxWidth:n,container:{type:"Canvas",orientation:"Horizontal"}},c=g(e,t,i,s,!0);t.addObject(c,0,0,1,t.columnDefinitions().length)}function m(t,e,i,n,o,r){var a,s=0,c=0,h=i.shape;o?(c=r,s=n,a=t.columnDefinitions()[r].width):s=h.header&&h.hasHeader?r+1:r;var d={annotations:[{content:h.phases[r].header.annotation.content,rotateAngle:o?0:270}],maxWidth:a,id:i.id+h.phases[r].id+"_header",offsetX:i.offsetX,offsetY:i.offsetY,style:h.phases[r].style,rowIndex:s,columnIndex:c,container:{type:"Canvas",orientation:o?"Horizontal":"Vertical"}};h.phases[r].header.id=d.id;var l=g(e,t,i,d,!1,!0,!1,h.phases[r].id);t.addObject(l,s,c)}function y(t,e,i,n,o,a){for(var s,c,h,d,l,p=i.shape,u=p.phases.length||1,f=p.header&&p.hasHeader?1:0,m=0,y=a?n:f,v=p.phaseSize&&p.phases.length>0?1:0,b=0;b<u;b++)m=a?b:o+v,h=t.rows[y].cells[m],d={id:i.id+p.lanes[o].id+b,rowIndex:y,columnIndex:m,width:h.minWidth,height:h.minHeight,offsetX:i.offsetX,offsetY:i.offsetY,style:p.lanes[o].style,constraints:r["k"].Default|r["k"].ReadOnly|r["k"].AllowDrop,container:{type:"Canvas",orientation:a?"Horizontal":"Vertical"}},c=g(e,t,i,d,!1,!1,!0),c.children[0].isCalculateDesiredSize=!1,0===b&&(s={id:i.id+p.lanes[o].id+"_"+b+"_header",style:p.lanes[o].header.style,annotations:[{content:p.lanes[o].header.annotation.content,rotateAngle:a?270:0}],offsetX:i.offsetX,offsetY:i.offsetY,rowIndex:y,columnIndex:m,container:{type:"Canvas",orientation:a?"Horizontal":"Vertical"}},p.lanes[o].header.id=s.id,a?s.width=p.lanes[o].header.width:s.height=p.lanes[o].header.height,l=g(e,t,i,s,!1,!1,!0,p.lanes[o].id),c.children.push(l)),t.addObject(c,y,m),a||y++,m=a?b:o+1}function v(t,e){var i=new o["c"];i.height=e,t.push(i)}function b(t){var e=new o["a"];return e.width=t,e}function w(t,e,i){var n,o=0,r=i.shape;if(t.length>0)for(var a=0;a<t.length;a++)o+=t[a].height;if(e){if(r.phases.length>0&&r.phaseSize&&(o+=r.phaseSize,v(t,r.phaseSize)),r.lanes.length>0)for(a=0;a<r.lanes.length;a++)n=r.lanes[a].height,o+=n,a===r.lanes.length-1&&o<i.height&&(n+=i.height-o),v(t,n)}else if(r.phases.length>0){var s=0;for(a=0;a<r.phases.length;a++){var c=r.phases[a].offset;0===a?s+=c:(c-=s,s+=c),n=c,o+=n,a===r.phases.length-1&&o<i.height&&(n+=i.height-o),v(t,n)}}else v(t,i.height)}function O(t,e,i){var n,o,r,a,s=0,c=i.shape;if(c.phases.length>0&&"Horizontal"===c.orientation)for(a=0;a<c.phases.length;a++)n=c.phases[a].offset,0===a?s+=n:(n-=s,s+=n),o=b(n),a===c.phases.length-1&&s<i.width&&(o.width+=i.width-s),t.push(o);else if(e)o=b(i.width),t.push(o);else{for(c.phaseSize&&c.phases.length>0?c.lanes.length+1:c.lanes.length,c.phaseSize&&c.phases.length>0&&(s+=c.phaseSize,o=b(c.phaseSize),t.push(o)),r=0;r<c.lanes.length;r++)s+=c.lanes[r].width,o=b(c.lanes[r].width),r===c.lanes.length-1&&s<i.width&&(o.width+=i.width-s),t.push(o);0!==c.phases.length&&0!==c.lanes.length||(o=b(i.width),t.push(o))}}function x(t,e,i,n){for(var o,r,a,s,c,h,d,l=[],p=0,u=e.rowDefinitions().length,g=0;g<u;g++)for(h=e.rows[g],s=0;s<h.cells.length;s++)if(c=h.cells[s].children[0],c&&c.children&&c.children.length)for(a=1;a<c.children.length;a++)if(o=c.children[a],r=t.getObject(o.id),r&&(r.inEdges.length>0||r.outEdges.length>0))for(d=r.inEdges.concat(r.outEdges),p=0;p<d.length;p++)-1===l.indexOf(d[p])&&l.push(d[p]);return l}function j(t){var e=t.wrapper;if(e.measure(new h["a"](t.width,t.height)),e.children[0]instanceof o["b"]){var i=e.children[0],n=!1;i.width&&i.width<i.desiredSize.width&&(n=!0,i.width=i.desiredSize.width),i.height&&i.height<i.desiredSize.height&&(n=!0,i.height=i.desiredSize.height),n&&i.measure(new h["a"](i.width,i.height))}e.arrange(e.desiredSize)}function S(t,e,i){var n,o,r,a,s,c,h,d,l=e.wrapper.children[0];for(n=i;n<l.rows.length;n++)for(c=l.rows[n],o=0;o<c.cells.length;o++)if(h=c.cells[o],h.children&&h.children.length>0)for(r=0;r<h.children.length;r++)d=h.children[r],a=t.nameTable[d.id],a.isLane&&d.children.length>1&&(s=t.nameTable[d.children[1].id],s&&s.isLane&&(s.rowIndex=n,s.columnIndex=o)),a.rowIndex=n,a.columnIndex=o}function C(t,e){var i,n,o,r,a,s,c,d,l=e.wrapper.children[0],p=e.shape,u=p.padding,g=p.lanes,f=l.bounds.y,m=p.phaseSize>0?p.phases.length:0,y="Horizontal"===p.orientation,v=y?p.phases.length||1:g.length+1,b=y?(p.header&&p.hasHeader?1:0)+(p.phases.length>0?1:0)+p.lanes.length:(p.header&&p.hasHeader?1:0)+p.phases.length;if(0===m&&!y&&p.lanes.length&&(b+=1),y?(i=(p.header&&p.hasHeader?1:0)+(m>0?1:0),n=0):(i=p.header&&p.hasHeader?1:0,n=m>0?1:0),g.length>0)for(f+=p.header&&p.hasHeader?p.header.height:0,s=0;s<g.length;s++){for(c=0;c<g[s].children.length;c++)if(o=g[s].children[c],o.offsetX=g[s].width,o.offsetY=g[s].height,t.initObject(o),t.nodes.push(o),r=o.wrapper,y){for(d=n;d<v;d++)if(a=l.rows[i].cells[d],r.margin.left<a.bounds.right-l.bounds.x){o.parentId=a.children[0].id,d>n?r.margin.left=r.margin.left-(a.bounds.left-l.bounds.left):a.children[0].children[1].actualSize.width+u>=r.margin.left&&(r.margin.left=a.children[0].children[1].actualSize.width+u),r.margin.left<u&&(r.margin.left=u),r.margin.top<u&&(r.margin.top=u),P(r,o,t);break}}else for(var w=i;w<b;w++)if(a=l.rows[w].cells[n],r.margin.top<a.bounds.bottom-f){o.parentId=a.children[0].id,w>i?r.margin.top=r.margin.top-(a.bounds.top-f):a.children[0].children[1].actualSize.height+u>=r.margin.top&&(r.margin.top=a.children[0].children[1].actualSize.height+u),r.margin.left<u&&(r.margin.left=u),r.margin.top<u&&(r.margin.top=u),P(r,o,t);break}y?i++:n++}l.measure(new h["a"](e.width,e.height)),l.arrange(l.desiredSize),T(l,e),e.width=e.wrapper.width=l.width,e.height=e.wrapper.height=l.height,B(t,e),e.wrapper.measure(new h["a"](e.width,e.height)),e.wrapper.arrange(l.desiredSize),rt(e),A(e,t),I(e)}function P(t,e,i){t.measure(new h["a"](e.width,e.height)),t.arrange(t.desiredSize);var n=i.getObject(e.parentId);i.addChild(n,e.id)}function T(t,e){var i,n,o,r,a,s,c=t.columnDefinitions(),h=t.rowDefinitions(),d=R(e);"Vertical"===e.shape.orientation&&0===d&&(d=e.shape.header&&e.shape.hasHeader?1:0);var l=e.shape.padding;for(i=0;i<c.length;i++)t.updateColumnWidth(i,c[i].width,!0,l);for(i=d;i<h.length;i++)t.updateRowHeight(i,h[i].height,!0,l);for(n=0;n<h.length;n++)for(s=t.rows[n],i=0;i<c.length;i++)if(r=s.cells[i],r.children&&r.children.length>0)for(o=0;o<r.children.length;o++)a=r.children[o],a.maxWidth&&(a.maxWidth=r.actualSize.width),a.maxHeight&&(a.maxHeight=r.actualSize.height)}function I(t){if("SwimLane"===t.shape.type&&!t.shape.isLane&&!t.shape.isPhase){var e=void 0,i=void 0,n=void 0,o=void 0,r=t.shape.lanes,a=R(t),s=t.wrapper.children[0].rowDefinitions();for(i=0;i<r.length;i++,a++)e=r[i],"Horizontal"===t.shape.orientation?(o=s[a].height,e.height!==o&&(e.height=o)):(n=t.wrapper.children[0].columnDefinitions(),o=n[a].width,e.width!==o&&(e.width=o))}}function A(t,e){var i,n,o,r,a=t.shape,s=a.phases,c=a.header&&a.hasHeader?1:0,h=t.wrapper.children[0],d=h.bounds.y+(a.header&&a.hasHeader?a.header.height:0);if("SwimLane"===t.shape.type&&(t=e.getObject(t.id)||t,s.length>0))if(h=t.wrapper.children[0],"Horizontal"===a.orientation)for(o=a.header&&a.hasHeader?h.rows[1]:h.rows[0],i=0;i<s.length;i++)r=o.cells[i].children[0],n=r.bounds.right-h.bounds.x,s[i].offset!==n&&(s[i].offset=n),e.nameTable[r.id].maxWidth=r.maxWidth;else for(i=0;i<s.length;i++)r=h.rows[c+i].cells[0].children[0],n=r.bounds.bottom-d,s[i].offset!==n&&(s[i].offset=n),e.nameTable[r.id].maxWidth=r.maxWidth}function z(t,e){if(t&&t.length>0){var i=void 0;e.lineRoutingModule&&e.constraints&r["d"].LineRouting&&e.lineRoutingModule.renderVirtualRegion(e,!0);for(var n=0;n<t.length;n++)i=e.getObject(t[n]),e.lineRoutingModule&&e.constraints&r["d"].LineRouting?e.lineRoutingModule.refreshConnectorSegments(e,i,!0):e.connectorPropertyChange(i,{},{sourceID:i.sourceID,targetID:i.targetID})}}function L(t,e,i,n){var o,s,c,d,l,p,u,g,f,m=t.getObject(e.parentId),y=m.shape,v=m.wrapper.children[0],b=y.lanes,w=x(t,v,e.rowIndex,!0);("Horizontal"===y.orientation&&e.rowIndex!==i.rowIndex||"Vertical"===y.orientation&&e.columnIndex!==i.columnIndex)&&("Horizontal"===y.orientation?(l=e.rowIndex,p=i.rowIndex,o=(y.header&&y.hasHeader?1:0)+(y.phases.length&&y.phaseSize?1:0),g=e.rowIndex-o,f=i.rowIndex-o,g<f?n&&i.wrapper.offsetY>n.y&&(p+=f>0?-1:1,f+=f>0?-1:1):n&&i.wrapper.offsetY<n.y&&(p+=1,f+=1),l!==p&&v.updateRowIndex(l,p)):(l=e.columnIndex,p=i.columnIndex,o=y.phases.length&&y.phaseSize?1:0,g=e.columnIndex-o,f=i.columnIndex-o,y.header&&y.hasHeader?1:0,g<f?n&&i.wrapper.offsetX>n.x&&(p+=f>0?-1:1,f+=f>0?-1:1):n&&i.wrapper.offsetX<n.x&&(p+=1,f+=1),l!==p&&(0===y.phaseSize&&0===p&&y.header&&y.hasHeader&&(v.rows[0].cells[l].children=v.rows[0].cells[0].children,v.rows[0].cells[l].columnSpan=v.rows[0].cells[0].columnSpan,v.rows[0].cells[0].children=[]),v.updateColumnIndex(0,l,p))),l!==p&&(s={target:Object(a["b"])(i),source:Object(a["b"])(e)},u=b[g],b.splice(g,1),b.splice(f,0,u),d={target:Object(a["b"])(s.source),source:Object(a["b"])(s.target)},c={type:"LanePositionChanged",redoObject:d,undoObject:s,category:"Internal"},t.diagramActions&r["c"].UndoRedo||t.commandHandler.addHistoryEntry(c),S(t,m,0),z(w,t),m.wrapper.measure(new h["a"](m.width,m.height)),m.wrapper.arrange(m.wrapper.desiredSize),t.updateDiagramObject(m))),t.updateDiagramElementQuad()}function E(t,e,i,n){var o=t.getObject(i.id),r=o.shape,a=r.header&&r.hasHeader?1:0,s=r.lanes,c=r.phases,h=n.wrapper.actualSize.width,d=n.wrapper.actualSize.height,l=e.wrapper.actualSize.width,p=e.wrapper.actualSize.height;"SwimLane"===o.shape.type&&("Horizontal"===r.orientation?e.isPhase?c[e.columnIndex].offset+=h-l:(a=r.phaseSize&&r.phases.length>0?a+1:a,s[e.rowIndex-a].height+=d-p):e.isPhase?c[e.rowIndex-a].offset+=d-p:(a=r.phaseSize&&r.phases.length>0?1:0,s[e.columnIndex-a].width+=h-l))}function D(t,e){var i,n=t.shape,o=n.header&&n.hasHeader?1:0;return"Horizontal"===n.orientation?(o+=n.phases.length>0?1:0,i=e.rowIndex-o):i=e.columnIndex-(n.phaseSize&&n.phases.length>0?1:0),i}function k(t,e){var i,n=e.shape,o=n.header&&n.hasHeader?1:0;return i="Horizontal"===n.orientation?t.columnIndex:t.rowIndex-o,i}function R(t){var e=0,i=t.shape;return"Horizontal"===i.orientation&&(e=i.header&&i.hasHeader?1:0),i.phases.length>0&&i.phaseSize&&(e+=1),e}function M(t,e,i,n){var o=t.shape;if(o.phases.length>0){var r=e.nameTable[o.phases[n].header.id];r&&r.maxWidth<i.outerBounds.width&&(r.maxWidth=i.outerBounds.width,r.wrapper.maxWidth=i.outerBounds.width)}}function B(t,e){if(e.shape.header&&e.shape.hasHeader){var i=e.wrapper.children[0],n=i.rows[0].cells[0].children[0].id,o=t.nameTable[n];o&&o.isHeader&&o.maxWidth<e.width&&(o.maxWidth=e.width,o.wrapper.maxWidth=e.width)}}function H(t,e,i,s){var c,h=t.nameTable[e.id];if("SwimLane"===h.shape.type){t.protectPropertyChange(!0);var d=h.wrapper.children[0],l=d.bounds,p=h.shape,u=void 0,g=!1,f=void 0,m=void 0,v=void 0,b=void 0,w=void 0,O=void 0,C=void 0,P=void 0,T=void 0,I=void 0,A=void 0,L=void 0;if(b=new n["n"](p,"lanes",i,!0),v=p.header&&p.hasHeader?1:0,"Horizontal"===p.orientation&&(g=!0,v=p.phases.length>0?v+1:v),f=x(t,d,0,!0),w=void 0!==s?s:p.lanes.length,v+=w,c={element:b,cause:t.diagramActions,state:"Changing",type:"Addition",cancel:!1,laneIndex:w},t.triggerEvent(r["e"].collectionChange,c),!c.cancel){if(g){var E=new o["c"];E.height=i.height,d.addRow(v,E,!1),h.height=void 0!==h.height?h.height+i.height:h.height,h.wrapper.height=d.height=h.height}else{var D=new o["a"];D.width=i.width,d.addColumn(w+1,D,!1),h.width&&(h.width+=i.width,h.wrapper.width=d.width=h.width),t.diagramActions&r["c"].UndoRedo||(d.rows[0].cells[0].columnSpan+=1)}t.diagramActions&r["c"].UndoRedo||(b.id+=Object(a["i"])()),void 0!==s?p.lanes.splice(s,0,b):p.lanes.push(b),c={element:b,cause:t.diagramActions,state:"Changed",type:"Addition",cancel:!1,laneIndex:w},t.triggerEvent(r["e"].collectionChange,c),y(d,t,h,v,w,g),u="Horizontal"===p.orientation?t.nameTable[d.rows[v].cells[0].children[0].id]:p.header&&p.hasHeader?t.nameTable[d.rows[1].cells[v].children[0].id]:t.nameTable[d.rows[0].cells[v].children[0].id],t.diagramActions&r["c"].UndoRedo||(m={type:"LaneCollectionChanged",changeType:"Insert",undoObject:Object(a["b"])(b),redoObject:Object(a["b"])(u),category:"Internal"},t.addHistoryEntry(m));var k="Horizontal"===p.orientation?v:p.header&&p.hasHeader?1:0;if(S(t,h,k),j(h),B(t,h),O=i.children,O&&O.length>0)for(C=0;C<O.length;C++)if(A=O[C],L={x:A.wrapper.offsetX,y:A.wrapper.offsetY},"Horizontal"===p.orientation)for(I=d.rows[v].cells[P],P=0;P<d.rows[v].cells.length;P++)N(t,d.rows[v].cells[P],L,A);else for(T=0;T<d.rows.length;T++)I=d.rows[T].cells[v],N(t,I,L,A);z(f,t),t.drag(h,l.x-d.bounds.x,l.y-d.bounds.y)}t.protectPropertyChange(!1)}}function N(t,e,i,n){if(e.children&&e.children.length>0){var o=e.children[0],r=t.nameTable[o.id];o.bounds.containsPoint(i)&&t.addChild(r,n)}}function W(t,e,i){if("SwimLane"===e.shape.type){var s=void 0,c=void 0,h=void 0,d=void 0,l=void 0,p=void 0,u=void 0,g=void 0,f=e.wrapper.bounds.x,y=e.wrapper.bounds.y,v=e.shape,b=v.padding,w=v.phases,O=void 0,x=e.wrapper.children[0],S="Horizontal"===v.orientation;if(s=v.header&&v.hasHeader?0:-1,v.phases.length>0&&(s+=1,0),u=S?v.lanes[0].header.width:v.lanes[0].header.height,i.offset>u){for(g=0;g<w.length;g++)if(h=w[g],d=g>0?w[g-1]:h,h.offset>i.offset){if(O=g>0?i.offset-d.offset:i.offset,S){var C=x.columnDefinitions()[g];C.width-=O,l=t.nameTable[v.phases[g].header.id],l.maxWidth=l.wrapper.maxWidth=C.width,x.updateColumnWidth(g,C.width,!1);var P=new o["a"];P.width=O,p=g,x.addColumn(g,P,!1);break}var T=x.rowDefinitions()[g+s];T.height-=O,l=t.nameTable[v.phases[g].header.id],x.updateRowHeight(g+s,T.height,!1);var I=new o["c"];I.height=O,p=g,x.addRow(g+s,I,!1);break}if(t.diagramActions&r["c"].UndoRedo&&void 0===p){var z=t.historyManager.currentEntry.next;z.isLastPhase&&(p=w.length,_(p,e,z,x,S,i))}var L=new n["s"](e.shape,"phases",i,!0);if(t.diagramActions&r["c"].UndoRedo||(L.id+=Object(a["i"])()),v.phases.splice(p,0,L),m(x,t,e,s,S,p),S){if(c=t.nameTable[x.rows[s].cells[p].children[0].id],0===p&&v.header&&v.hasHeader){x.rows[0].cells[0].children=x.rows[0].cells[1].children,x.rows[0].cells[1].children=[];for(var E=x.rows[0],D=0;D<E.cells.length;D++)E.cells[D].minWidth=void 0,E.cells[D].columnSpan=0===D?x.rows[0].cells.length:1}X(t,e,x,p,S);var k=x.columnDefinitions();if(x.updateColumnWidth(p,k[p].width,!0,b),c.maxWidth=c.wrapper.maxWidth=k[p].width,k.length>p+1){var R=t.nameTable[x.rows[s].cells[p+1].children[0].id];x.updateColumnWidth(p+1,k[p+1].width,!0,b),R.maxWidth=R.wrapper.maxWidth=k[p+1].width}e.width=e.wrapper.width=e.wrapper.children[0].width=x.width}else{c=t.nameTable[x.rows[s+p].cells[0].children[0].id];var M=x.rowDefinitions(),H=M[s+p].height;Y(t,e,x,s+p,S),x.updateRowHeight(s+p,H,!0,b),M.length>s+p+1&&(H=M[s+p+1].height,x.updateRowHeight(s+p+1,H,!0,b)),e.height=e.wrapper.height=e.wrapper.children[0].height=x.actualSize.height}if(j(e),e.width=e.wrapper.actualSize.width,B(t,e),t.drag(e,f-e.wrapper.bounds.x,y-e.wrapper.bounds.y),A(e,t),!(t.diagramActions&r["c"].UndoRedo)){z={type:"PhaseCollectionChanged",changeType:"Insert",undoObject:Object(a["b"])(L),redoObject:Object(a["b"])(c),category:"Internal"};t.addHistoryEntry(z)}t.updateDiagramObject(e)}}}function _(t,e,i,n,r,a){var s=e.shape,c=s.phases[t-2],h=i.previousPhase.offset;if(r){var d=n.columnDefinitions()[t-1],l=new o["a"];t>1?(l.width=d.width-(h-c.offset),d.width=h-c.offset):(l.width=d.width-h,d.width=h),n.updateColumnWidth(t-1,d.width,!1),n.addColumn(t,l,!1)}else{d=n.rowDefinitions()[t];var p=new o["c"];t>1?(p.height=i.undoObject.offset-h,d.height=h-c.offset):(p.height=d.height-h,d.height=h),n.updateRowHeight(t,d.height,!1),n.addRow(1+t,p,!1)}}function X(t,e,i,n,o){var r,a,s,c,h,d=e.shape,l=R(e);for(d.header&&d.hasHeader&&(i.rows[0].cells[0].columnSpan=i.rows[0].cells.length),a=l;a<i.rows.length;a++)h=i.rows[a],s=h.cells[n-1],c=h.cells[n],r=h.cells[n+1],V(t,e,s,c,r,a,n);S(t,e,1)}function Y(t,e,i,n,o){for(var r,a,s,c=i.rows[n],h=i.rows[n+1],d=i.rows[n-1],l=1;l<c.cells.length;l++)a=c.cells[l],s=h?h.cells[l]:void 0,r=d.cells[l],V(t,e,r,a,s,n,l);S(t,e,1)}function V(t,e,i,n,o,s,c){var h,d,p,u,f,m,y=e.shape,v="Horizontal"===y.orientation,b=e.wrapper.children[0],w=n.desiredCellWidth,O=n.desiredCellHeight,x=v?s:c;if(i?(h=v?i.bounds.x+i.bounds.width:i.bounds.x,d=v?i.bounds.y:i.bounds.y+i.bounds.height):(h=b.bounds.x,d=o.bounds.y),p=new l["a"](h,d,w,O),u={id:e.id+(v?y.lanes[x-2]:y.lanes[x-1]).id+Object(a["i"])()[0],rowIndex:s,columnIndex:c,width:n.minWidth,height:n.minHeight,style:(v?y.lanes[x-2]:y.lanes[x-1]).style,constraints:r["k"].Default|r["k"].AllowDrop,container:{type:"Canvas",orientation:v?"Horizontal":"Vertical"}},f=g(t,b,e,u,!1,!1,!0),f.children[0].isCalculateDesiredSize=!1,b.addObject(f,s,c),o&&o.children&&o.children.length)for(m=0;m<o.children.length;m++)v?t.nameTable[o.children[m].id].columnIndex+=1:t.nameTable[o.children[m].id].rowIndex+=1;U(t,o,n,p,f,v,i)}function U(t,e,i,n,o,r,a){var s,c,h,d=t.nameTable[o.id],l=e||a,p=t.nameTable[d.parentId],u=p.shape.padding;if(l.children&&l.children[0].children.length>1)for(var g=1;g<l.children[0].children.length;g++)s=l.children[0].children[g],h=t.nameTable[s.id],c=r?{x:s.bounds.x,y:s.bounds.center.y}:{x:s.bounds.center.x,y:s.bounds.top},n.containsPoint(c)?(i.children[0].children.push(s),l.children[0].children.splice(g,1),g--,t.deleteChild(h),h.isLane||(h.parentId=o.id),d.children||(d.children=[]),e||(r?h.margin.left=h.wrapper.bounds.x-l.children[0].bounds.right:h.margin.top=h.wrapper.bounds.y-l.children[0].bounds.bottom),d.children.push(s.id),h.zIndex=d.zIndex+1,t.removeElements(h)):e&&(r?(h.margin.left-=i.desiredCellWidth,u>h.margin.left&&(h.margin.left=u)):(h.margin.top-=i.desiredCellHeight,u>h.margin.top&&(h.margin.top=u)))}function F(t,e,i){if("SwimLane"===e.shape.type&&("ResizeSouth"===i||"ResizeEast"===i)){var n=e.shape,o=e.wrapper.children[0],r=void 0,a=void 0;"ResizeSouth"===i?"Vertical"===n.orientation?r=o.rows[o.rows.length-1].cells[0]:(a=o.rows.length-1,r=o.rows[a].cells[o.rows[a].cells.length-1]):(a=n.header&&n.hasHeader?1:0,r=o.rows[a].cells[o.rows[a].cells.length-1]),t.commandHandler.select(t.nameTable[r.children[0].id])}}function G(t,e,i,n,o,r){var s,c,h,d,l,p,u,g,f,m=Object(a["i"])(),y=t.shape,v=y.phases,b=t.offsetX-t.wrapper.actualSize.width/2,w=t.offsetY-t.wrapper.actualSize.height/2;if("Vertical"===y.orientation&&(w+=y.header&&y.hasHeader?y.header.height:0),!r)for(o||(t.id+=m,y&&y.header&&y.hasHeader?y.header.id+=m:y.header=void 0),s=0;v&&s<v.length;s++)d=v[s],d.id+=m;for(f=o?[i.childTable[n.id]]:y.lanes,s=0;f&&s<f.length;s++)for(h=f[s],r||(h.id+=m),c=0;h.children&&c<h.children.length;c++)l=h.children[c],u=l.wrapper.offsetX-l.width/2,g=l.wrapper.offsetY-l.height/2,l.zIndex=-1,l.inEdges=l.outEdges=[],(r||i&&(1===i.pasteIndex||0===i.pasteIndex))&&("Vertical"===y.orientation?l.margin.top=g-w:l.margin.left=u-b),r||(l.id+=m);if(!r){if(o){var O={lanes:f,phases:v,phaseSize:y.phaseSize,type:"SwimLane",orientation:y.orientation,header:{annotation:{content:"Title"},height:50}};p={shape:O},"Horizontal"===y.orientation?(p.width=t.wrapper.actualSize.width,p.height=n.wrapper.actualSize.height+y.header.height+y.phaseSize,p.offsetX=t.wrapper.offsetX+10*i.pasteIndex,p.offsetY=n.wrapper.offsetY+10*i.pasteIndex):(p.width=n.wrapper.actualSize.width,p.height=t.wrapper.actualSize.height,p.offsetX=n.wrapper.offsetX+10*i.pasteIndex,p.offsetY=t.wrapper.offsetY+10*i.pasteIndex),t=p}if(0!==i.pasteIndex&&(t.offsetX+=10,t.offsetY+=10),t.zIndex=-1,t=e.add(t),!o)for(var x=0,j=Object.keys(i.childTable);x<j.length;x++){var S=j[x],C=i.childTable[S];C.id+=m,C.sourceID+=m,C.targetID+=m,C.zIndex=-1,e.add(C)}"SVG"!==e.mode&&e.refreshDiagramLayer(),e.select([t])}return t}function q(t,e,i,n){var o,r=e.nodes[0];if(n||Object(p["c"])(t,r,!0)){var a=void 0,c=void 0,l=void 0,u=void 0,g=void 0,f=new s["a"];i&&(g=t.nameTable[i].parentId,a=r=t.nameTable[i]),c=i?a.wrapper:r.wrapper,l=t.nameTable[g||r.parentId],l&&"Grid"===l.container.type&&(o=new d["a"],o.children=[],!n&&r.isHeader||("Horizontal"===l.container.orientation&&r.isPhase||"Vertical"===l.container.orientation&&(r.rowIndex>0&&r.columnIndex>0||r.isLane)?(u=Object(p["d"])(l,a?a.columnIndex:r.columnIndex,!(!l.shape.header||!l.shape.hasHeader)),o.offsetX=u.center.x,o.offsetY=u.center.y,f.width=u.width,f.height=u.height):(o.offsetX=l.offsetX,o.offsetY=c.offsetY,f.width=l.wrapper.actualSize.width,f.height=c.actualSize.height)),o.children.push(f),o.measure(new h["a"]),o.arrange(o.desiredSize))}return o}function Z(t,e,i,n,o){o=void 0!==o?o:D(e,i);for(var a=!1,s=e.shape.lanes[o],c=s.children.length-1;c>=0;c--)n?n.id===s.children[c].id&&s.children.splice(c,1):(t.removeDependentConnector(s.children[c]),t.diagramActions&r["c"].UndoRedo||(t.diagramActions=t.diagramActions|r["c"].UndoRedo,a=!0),t.remove(s.children[c]),s.children.splice(c,1),a&&(t.diagramActions=t.diagramActions&~r["c"].UndoRedo))}function Q(t){var e=t.children[0];return e}function K(t,e){var i,n,o,a,s,c,h=e.wrapper.children[0].rows;for(n=0;n<h.length;n++)for(o=0;o<h[n].cells.length;o++){if(s=Q(h[n].cells[o]),s&&s.children)for(a=0;a<s.children.length;a++)s.children[a].children&&(c=t.nameTable[s.children[a].id],c&&(c.isLane?J(t,c):(t.removeDependentConnector(c),t.diagramActions|=r["c"].PreventHistory,t.remove(c),t.diagramActions&=~r["c"].PreventHistory,a--)));s&&(i=t.nameTable[s.id],i&&J(t,i))}}function J(t,e){t.nodes.splice(t.nodes.indexOf(e),1),t.removeFromAQuad(e),t.removeObjectsFromLayer(e),delete t.nameTable[e.id],t.removeElements(e)}function $(t,e,i,n){var o;if("SwimLane"===i.shape.type){var s=i.shape,c=void 0;if(1===s.lanes.length)t.remove(i);else{var h=i.wrapper.bounds.x,d=i.wrapper.bounds.y,l=void 0,p=void 0,u=void 0,g=void 0,f=void 0,m=i.wrapper.children[0];if(c=n?s.lanes.indexOf(n):D(i,e),o={element:e,cause:t.diagramActions,state:"Changing",type:"Removal",cancel:!1,laneIndex:c},t.triggerEvent(r["e"].collectionChange,o),!o.cancel){var y=Object(a["b"])(s.lanes[c]);if(Z(t,i,e,void 0,c),!(t.diagramActions&r["c"].UndoRedo)){var v={type:"LaneCollectionChanged",changeType:"Remove",undoObject:y,redoObject:Object(a["b"])(e),category:"Internal"};t.addHistoryEntry(v)}s.lanes.splice(c,1);var b=e?"Horizontal"===s.orientation?e.rowIndex:e.columnIndex:R(i)+c;if("Horizontal"===s.orientation){for(l=m.rows[b],p=0;p<l.cells.length;p++)if(u=l.cells[p],u&&u.children.length>0)for(g=0;g<u.children.length;g++)f=u.children[g],tt(t,f);m.removeRow(b)}else{for(i.width=void 0!==i.width?i.width-m.rows[0].cells[b].actualSize.width:i.width,p=0;p<m.rows.length;p++)if(u=m.rows[p].cells[b],u&&u.children.length>0)for(g=0;g<u.children.length;g++)f=u.children[g],tt(t,f);m.removeColumn(b)}o={element:e,cause:t.diagramActions,state:"Changed",type:"Removal",cancel:!1,laneIndex:c},t.triggerEvent(r["e"].collectionChange,o),i.width=i.wrapper.width=m.width,i.height=i.wrapper.height=m.height,j(i),S(t,i,b),t.drag(i,h-i.wrapper.bounds.x,d-i.wrapper.bounds.y),t.updateDiagramObject(i)}}}}function tt(t,e){var i,n;if(e instanceof d["a"]){if(e.children.length>0)for(i=0;i<e.children.length;i++)e.children[i]instanceof d["a"]&&tt(t,e.children[i]);n=t.getObject(e.id),J(t,n)}}function et(t,e,i,n){t.protectPropertyChange(!0);i.wrapper.bounds.x,i.wrapper.bounds.y;var o,s=!1,c=i.shape,h=i.wrapper.children[0],d=n?c.phases.indexOf(n):k(e,i),l=c.phases.length;if(c.phases.length>1){d===l-1&&(s=!0,o=Object(a["b"])(c.phases[d-1]));var p=Object(a["b"])(c.phases[d]);if(c.phases.splice(d,1),!(t.diagramActions&r["c"].UndoRedo)){var u={type:"PhaseCollectionChanged",changeType:"Remove",undoObject:p,previousPhase:o,redoObject:Object(a["b"])(e),category:"Internal",isLastPhase:s};t.addHistoryEntry(u)}"Horizontal"===c.orientation?it(t,h,e,d):nt(t,h,e,d,i),B(t,i),S(t,i,1),A(i,t),t.protectPropertyChange(!1),t.updateDiagramObject(i)}}function it(t,e,i,n){var o,r,a,s,c,h,l,p,u,g,f,m;for(n=void 0!==n?n:i.columnIndex,l=0;l<e.rows.length;l++)if(o=e.rows[l],o.cells.length>1&&(r=o.cells[n],a=o.cells.length-1===n?o.cells[n-1]:o.cells[n+1],c=a.children[0],r.children.length>0))if(s=r.children[0],f=t.nameTable[s.id],0===a.children.length&&r.children.length>0)a.children=r.children,a.columnSpan=r.columnSpan-1;else{for(p=0;p<s.children.length;p++){if(g=s.children[p],g instanceof d["a"]){if(m=t.nameTable[g.id],m.isLane||(m.parentId=c.id),o.cells.length-1===n&&(m.margin.left=m.wrapper.bounds.x-c.bounds.x,g.margin.left=m.wrapper.bounds.x-c.bounds.x),c.children.push(g),t.nameTable[c.id]){var y=t.nameTable[c.id];y.children||(y.children=[]),y.children.push(g.id)}s.children.splice(p,1),p--,f&&f.children&&-1!==f.children.indexOf(m.id)&&f.children.splice(f.children.indexOf(m.id),1)}if(o.cells.length-1!==n)for(u=0;u<c.children.length;u++){var v=c.children[u];if(v instanceof d["a"]){var b=t.nameTable[v.id];b.margin.left=b.wrapper.bounds.x-s.bounds.x,v.margin.left=b.wrapper.bounds.x-s.bounds.x}}}if(f&&f.isPhase){var w=t.nameTable[c.id];w&&(c.maxWidth=w.wrapper.maxWidth=w.wrapper.maxWidth+=f.wrapper.maxWidth)}J(t,f)}var O=e.columnDefinitions()[n].width;e.removeColumn(n),n<e.columnDefinitions().length?(h=e.columnDefinitions()[n].width,h+=O,e.updateColumnWidth(n,h,!0)):(h=e.columnDefinitions()[n-1].width,h+=O,e.updateColumnWidth(n-1,h,!0))}function nt(t,e,i,n,o){var r,a,s,c,h,l,p,u,g,f,m,y=o.shape,v=void 0!==n?y.header?n+1:n:i.rowIndex;r=e.rows[v];var b=o.wrapper.bounds.y,w=y.phases.length;for(void 0!==y.header&&y.hasHeader&&(b+=e.rowDefinitions()[0].height),s=n===w?e.rows[v-1]:e.rows[v+1],h=0;h<r.cells.length;h++)if(a=r.cells[h],u=s.cells[h],g=u.children[0],a.children.length>0){var O=a.children[0],x=t.nameTable[O.id];if(n<w)for(p=0;p<g.children.length;p++)f=g.children[p],f instanceof d["a"]&&(m=t.nameTable[f.id],m.margin.top=m.wrapper.bounds.y-(0===n?b:O.bounds.y),f.margin.top=m.wrapper.bounds.y-(0===n?b:O.bounds.y));for(l=0;l<O.children.length;l++)f=O.children[l],f instanceof d["a"]&&(m=t.nameTable[f.id],m.parentId=g.id,n===w&&(m.margin.top=m.wrapper.bounds.y-(0===n?b:g.bounds.y),f.margin.top=m.wrapper.bounds.y-(0===n?b:g.bounds.y)),g.children.push(f),O.children.splice(l,1),l--,x.children&&-1!==x.children.indexOf(m.id)&&x.children.splice(x.children.indexOf(m.id),1));J(t,x)}var j=e.rowDefinitions()[v].height;e.removeRow(v),v<e.rowDefinitions().length?(c=e.rowDefinitions()[v].height,c+=j,e.updateRowHeight(v,c,!0)):(c=e.rowDefinitions()[v-1].height,c+=j,e.updateRowHeight(v-1,c,!0))}function ot(t,e,i){var n=t.nameTable[e.parentId];if(n&&n.isLane){var o=t.nameTable[n.parentId],r=o.wrapper.children[0];o.wrapper.bounds.x,o.wrapper.bounds.y;r.updateColumnWidth(n.columnIndex,r.columnDefinitions()[n.columnIndex].width,!0,i),r.updateRowHeight(n.rowIndex,r.rowDefinitions()[n.rowIndex].height,!0,i);var a=n.wrapper,s=void 0;e.margin.left<i&&(e.margin.left=i),e.margin.top<i&&(e.margin.top=i);for(var c=0;c<a.children.length;c++){var l=a.children[c];if(l instanceof d["a"]){var p=t.nameTable[l.id];if(p.isLane){s=p.wrapper,!0;break}}}s&&("Horizontal"===o.shape.orientation?e.margin.left<i+s.actualSize.width&&(e.margin.left=i+s.actualSize.width):e.margin.top<i+s.actualSize.height&&(e.margin.top=i+s.actualSize.height)),o.wrapper.measure(new h["a"](o.width,o.height)),o.wrapper.arrange(o.wrapper.desiredSize),e.offsetX=e.wrapper.offsetX,e.offsetY=e.wrapper.offsetY,t.nodePropertyChange(e,{},{margin:{left:e.margin.left,top:e.margin.top}}),r.measure(new h["a"](r.width,r.height)),r.arrange(r.desiredSize),o.width=o.wrapper.width=o.wrapper.children[0].actualSize.width,o.height=o.wrapper.height=o.wrapper.children[0].actualSize.height}}function rt(t){if("SwimLane"===t.shape.type)for(var e=t.shape.lanes,i=void 0,n=void 0,o=0;o<e.length;o++){i=e[o];for(var r=0;r<i.children.length;r++)n=i.children[r],n.offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY}}},bccc:function(t,e,i){"use strict";var n,o,r,a,s,c,h,d,l,p,u,g,f,m,y,v,b,w,O,x;i.d(e,"m",(function(){return n})),i.d(e,"q",(function(){return o})),i.d(e,"p",(function(){return r})),i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return s})),i.d(e,"k",(function(){return c})),i.d(e,"g",(function(){return h})),i.d(e,"r",(function(){return d})),i.d(e,"d",(function(){return l})),i.d(e,"f",(function(){return p})),i.d(e,"s",(function(){return u})),i.d(e,"h",(function(){return f})),i.d(e,"i",(function(){return m})),i.d(e,"c",(function(){return y})),i.d(e,"o",(function(){return v})),i.d(e,"n",(function(){return b})),i.d(e,"j",(function(){return w})),i.d(e,"e",(function(){return O})),i.d(e,"l",(function(){return x})),function(t){t[t["Visible"]=1]="Visible",t[t["Hidden"]=2]="Hidden",t[t["Hover"]=4]="Hover",t[t["Connect"]=8]="Connect"}(n||(n={})),function(t){t[t["None"]=0]="None",t[t["ShowHorizontalLines"]=1]="ShowHorizontalLines",t[t["ShowVerticalLines"]=2]="ShowVerticalLines",t[t["ShowLines"]=3]="ShowLines",t[t["SnapToHorizontalLines"]=4]="SnapToHorizontalLines",t[t["SnapToVerticalLines"]=8]="SnapToVerticalLines",t[t["SnapToLines"]=12]="SnapToLines",t[t["SnapToObject"]=16]="SnapToObject",t[t["All"]=31]="All"}(o||(o={})),function(t){t[t["None"]=1]="None",t[t["ConnectorSourceThumb"]=2]="ConnectorSourceThumb",t[t["ConnectorTargetThumb"]=4]="ConnectorTargetThumb",t[t["ResizeSouthEast"]=8]="ResizeSouthEast",t[t["ResizeSouthWest"]=16]="ResizeSouthWest",t[t["ResizeNorthEast"]=32]="ResizeNorthEast",t[t["ResizeNorthWest"]=64]="ResizeNorthWest",t[t["ResizeEast"]=128]="ResizeEast",t[t["ResizeWest"]=256]="ResizeWest",t[t["ResizeSouth"]=512]="ResizeSouth",t[t["ResizeNorth"]=1024]="ResizeNorth",t[t["Rotate"]=2048]="Rotate",t[t["UserHandle"]=4096]="UserHandle",t[t["ToolTip"]=8192]="ToolTip",t[t["ResizeAll"]=2046]="ResizeAll",t[t["All"]=16382]="All"}(r||(r={})),function(t){t[t["None"]=1]="None",t[t["Select"]=2]="Select",t[t["Delete"]=4]="Delete",t[t["Drag"]=8]="Drag",t[t["DragSourceEnd"]=16]="DragSourceEnd",t[t["DragTargetEnd"]=32]="DragTargetEnd",t[t["DragSegmentThumb"]=64]="DragSegmentThumb",t[t["AllowDrop"]=128]="AllowDrop",t[t["Bridging"]=256]="Bridging",t[t["BridgeObstacle"]=512]="BridgeObstacle",t[t["InheritBridging"]=1024]="InheritBridging",t[t["PointerEvents"]=2048]="PointerEvents",t[t["Tooltip"]=4096]="Tooltip",t[t["InheritTooltip"]=8192]="InheritTooltip",t[t["Interaction"]=4218]="Interaction",t[t["ReadOnly"]=16384]="ReadOnly",t[t["LineRouting"]=32768]="LineRouting",t[t["InheritLineRouting"]=65536]="InheritLineRouting",t[t["Default"]=77374]="Default"}(a||(a={})),function(t){t[t["ReadOnly"]=2]="ReadOnly",t[t["InheritReadOnly"]=4]="InheritReadOnly",t[t["Select"]=8]="Select",t[t["Drag"]=16]="Drag",t[t["Resize"]=32]="Resize",t[t["Rotate"]=64]="Rotate",t[t["Interaction"]=120]="Interaction",t[t["None"]=0]="None"}(s||(s={})),function(t){t[t["None"]=0]="None",t[t["Select"]=2]="Select",t[t["Drag"]=4]="Drag",t[t["Rotate"]=8]="Rotate",t[t["Shadow"]=16]="Shadow",t[t["PointerEvents"]=32]="PointerEvents",t[t["Delete"]=64]="Delete",t[t["InConnect"]=128]="InConnect",t[t["OutConnect"]=256]="OutConnect",t[t["Individual"]=512]="Individual",t[t["Expandable"]=1024]="Expandable",t[t["AllowDrop"]=2048]="AllowDrop",t[t["Inherit"]=78]="Inherit",t[t["ResizeNorthEast"]=4096]="ResizeNorthEast",t[t["ResizeEast"]=8192]="ResizeEast",t[t["ResizeSouthEast"]=16384]="ResizeSouthEast",t[t["ResizeSouth"]=32768]="ResizeSouth",t[t["ResizeSouthWest"]=65536]="ResizeSouthWest",t[t["ResizeWest"]=131072]="ResizeWest",t[t["ResizeNorthWest"]=262144]="ResizeNorthWest",t[t["ResizeNorth"]=524288]="ResizeNorth",t[t["Resize"]=1044480]="Resize",t[t["AspectRatio"]=1048576]="AspectRatio",t[t["HideThumbs"]=16777216]="HideThumbs",t[t["Tooltip"]=2097152]="Tooltip",t[t["InheritTooltip"]=4194304]="InheritTooltip",t[t["ReadOnly"]=8388608]="ReadOnly",t[t["Default"]=5240814]="Default"}(c||(c={})),function(t){t[t["None"]=0]="None",t[t["ElementIsPort"]=2]="ElementIsPort",t[t["ElementIsGroup"]=4]="ElementIsGroup"}(h||(h={})),function(t){t[t["Rotate"]=2]="Rotate",t[t["ConnectorSource"]=4]="ConnectorSource",t[t["ConnectorTarget"]=8]="ConnectorTarget",t[t["ResizeNorthEast"]=16]="ResizeNorthEast",t[t["ResizeEast"]=32]="ResizeEast",t[t["ResizeSouthEast"]=64]="ResizeSouthEast",t[t["ResizeSouth"]=128]="ResizeSouth",t[t["ResizeSouthWest"]=256]="ResizeSouthWest",t[t["ResizeWest"]=512]="ResizeWest",t[t["ResizeNorthWest"]=1024]="ResizeNorthWest",t[t["ResizeNorth"]=2048]="ResizeNorth",t[t["Default"]=4094]="Default"}(d||(d={})),function(t){t[t["None"]=1]="None",t[t["Bridging"]=2]="Bridging",t[t["UndoRedo"]=4]="UndoRedo",t[t["Tooltip"]=8]="Tooltip",t[t["UserInteraction"]=16]="UserInteraction",t[t["ApiUpdate"]=32]="ApiUpdate",t[t["PageEditable"]=48]="PageEditable",t[t["Zoom"]=64]="Zoom",t[t["PanX"]=128]="PanX",t[t["PanY"]=256]="PanY",t[t["Pan"]=384]="Pan",t[t["ZoomTextEdit"]=512]="ZoomTextEdit",t[t["Virtualization"]=1024]="Virtualization",t[t["LineRouting"]=2048]="LineRouting",t[t["Default"]=500]="Default"}(l||(l={})),function(t){t[t["None"]=0]="None",t[t["SingleSelect"]=1]="SingleSelect",t[t["MultipleSelect"]=2]="MultipleSelect",t[t["ZoomPan"]=4]="ZoomPan",t[t["DrawOnce"]=8]="DrawOnce",t[t["ContinuousDraw"]=16]="ContinuousDraw",t[t["Default"]=3]="Default"}(p||(p={})),function(t){t[t["Self"]=1]="Self",t[t["Parent"]=2]="Parent"}(u||(u={})),function(t){t[t["Canvas"]=0]="Canvas",t[t["Svg"]=1]="Svg"}(g||(g={})),function(t){t[t["None"]=0]="None",t[t["Control"]=1]="Control",t[t["Meta"]=1]="Meta",t[t["Alt"]=2]="Alt",t[t["Shift"]=4]="Shift"}(f||(f={})),function(t){t[t["None"]=null]="None",t[t["Number0"]=0]="Number0",t[t["Number1"]=1]="Number1",t[t["Number2"]=2]="Number2",t[t["Number3"]=3]="Number3",t[t["Number4"]=4]="Number4",t[t["Number5"]=5]="Number5",t[t["Number6"]=6]="Number6",t[t["Number7"]=7]="Number7",t[t["Number8"]=8]="Number8",t[t["Number9"]=9]="Number9",t[t["A"]=65]="A",t[t["B"]=66]="B",t[t["C"]=67]="C",t[t["D"]=68]="D",t[t["E"]=69]="E",t[t["F"]=70]="F",t[t["G"]=71]="G",t[t["H"]=72]="H",t[t["I"]=73]="I",t[t["J"]=74]="J",t[t["K"]=75]="K",t[t["L"]=76]="L",t[t["M"]=77]="M",t[t["N"]=78]="N",t[t["O"]=79]="O",t[t["P"]=80]="P",t[t["Q"]=81]="Q",t[t["R"]=82]="R",t[t["S"]=83]="S",t[t["T"]=84]="T",t[t["U"]=85]="U",t[t["V"]=86]="V",t[t["W"]=87]="W",t[t["X"]=88]="X",t[t["Y"]=89]="Y",t[t["Z"]=90]="Z",t[t["Left"]=37]="Left",t[t["Up"]=38]="Up",t[t["Right"]=39]="Right",t[t["Down"]=40]="Down",t[t["Escape"]=27]="Escape",t[t["Space"]=32]="Space",t[t["PageUp"]=33]="PageUp",t[t["PageDown"]=34]="PageDown",t[t["End"]=35]="End",t[t["Home"]=36]="Home",t[t["Delete"]=46]="Delete",t[t["Tab"]=9]="Tab",t[t["Enter"]=13]="Enter",t[t["BackSpace"]=8]="BackSpace",t[t["F1"]=112]="F1",t[t["F2"]=113]="F2",t[t["F3"]=114]="F3",t[t["F4"]=115]="F4",t[t["F5"]=116]="F5",t[t["F6"]=117]="F6",t[t["F7"]=118]="F7",t[t["F8"]=119]="F8",t[t["F9"]=120]="F9",t[t["F10"]=121]="F10",t[t["F11"]=122]="F11",t[t["F12"]=123]="F12",t[t["Star"]=56]="Star",t[t["Plus"]=187]="Plus",t[t["Minus"]=189]="Minus"}(m||(m={})),function(t){t[t["Render"]=2]="Render",t[t["PublicMethod"]=4]="PublicMethod",t[t["ToolAction"]=8]="ToolAction",t[t["UndoRedo"]=16]="UndoRedo",t[t["TextEdit"]=32]="TextEdit",t[t["Group"]=64]="Group",t[t["Clear"]=128]="Clear",t[t["PreventClearSelection"]=256]="PreventClearSelection",t[t["Interactions"]=512]="Interactions",t[t["PreventHistory"]=1024]="PreventHistory",t[t["PreventIconsUpdate"]=2048]="PreventIconsUpdate",t[t["PreventCollectionChangeOnDragOver"]=4096]="PreventCollectionChangeOnDragOver",t[t["PreventZIndexOnDragging"]=8192]="PreventZIndexOnDragging"}(y||(y={})),function(t){t[t["None"]=2]="None",t[t["DrawSelectorBorder"]=4]="DrawSelectorBorder",t[t["PreventRenderSelector"]=8]="PreventRenderSelector"}(v||(v={})),function(t){t[t["None"]=0]="None",t[t["PreventDrag"]=2]="PreventDrag",t[t["PreventScale"]=4]="PreventScale",t[t["PreventDataInit"]=8]="PreventDataInit",t[t["hScrollbarMoved"]=16]="hScrollbarMoved",t[t["vScrollbarMoved"]=32]="vScrollbarMoved"}(b||(b={})),function(t){t[t["Zero"]=0]="Zero",t[t["One"]=1]="One",t[t["Two"]=2]="Two",t[t["Three"]=3]="Three",t[t["Four"]=4]="Four",t[t["Five"]=5]="Five"}(w||(w={})),function(t){t[t["collectionChange"]=0]="collectionChange",t[t["rotateChange"]=1]="rotateChange",t[t["positionChange"]=2]="positionChange",t[t["propertyChange"]=3]="propertyChange",t[t["selectionChange"]=4]="selectionChange",t[t["sizeChange"]=5]="sizeChange",t[t["drop"]=6]="drop",t[t["sourcePointChange"]=7]="sourcePointChange",t[t["targetPointChange"]=8]="targetPointChange",t[t["connectionChange"]=9]="connectionChange",t[t["animationComplete"]=10]="animationComplete",t[t["click"]=11]="click",t[t["doubleClick"]=12]="doubleClick",t[t["scrollChange"]=13]="scrollChange",t[t["dragEnter"]=14]="dragEnter",t[t["dragLeave"]=15]="dragLeave",t[t["dragOver"]=16]="dragOver",t[t["textEdit"]=17]="textEdit",t[t["paletteSelectionChange"]=18]="paletteSelectionChange",t[t["historyChange"]=19]="historyChange",t[t["mouseEnter"]=20]="mouseEnter",t[t["mouseLeave"]=21]="mouseLeave",t[t["mouseOver"]=22]="mouseOver",t[t["expandStateChange"]=23]="expandStateChange",t[t["segmentCollectionChange"]=24]="segmentCollectionChange",t[t["commandExecute"]=25]="commandExecute",t[t["historyStateChange"]=26]="historyStateChange",t[t["onUserHandleMouseDown"]=27]="onUserHandleMouseDown",t[t["onUserHandleMouseUp"]=28]="onUserHandleMouseUp",t[t["onUserHandleMouseEnter"]=29]="onUserHandleMouseEnter",t[t["onUserHandleMouseLeave"]=30]="onUserHandleMouseLeave",t[t["onImageLoad"]=31]="onImageLoad"}(O||(O={})),function(t){t[t["None"]=1]="None",t[t["Drag"]=2]="Drag",t[t["Draw"]=4]="Draw",t[t["InConnect"]=8]="InConnect",t[t["OutConnect"]=16]="OutConnect",t[t["Default"]=24]="Default"}(x||(x={}))},be2f:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i("7de8"),o=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.equals=function(t,e){return t===e||!(!t||!e)&&(!t||!e||t.x===e.x&&t.y===e.y)},e.isEmptyPoint=function(t){return!t.x||!t.y},e.transform=function(t,e,i){var n={x:0,y:0};return n.x=Math.round(100*(t.x+i*Math.cos(e*Math.PI/180)))/100,n.y=Math.round(100*(t.y+i*Math.sin(e*Math.PI/180)))/100,n},e.findLength=function(t,e){var i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));return i},e.findAngle=function(t,e){var i=Math.atan2(e.y-t.y,e.x-t.x);return i=180*i/Math.PI,i%=360,i<0&&(i+=360),i},e.distancePoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},e.getLengthFromListOfPoints=function(t){for(var e=0,i=0;i<t.length-1;i++)e+=this.distancePoints(t[i],t[i+1]);return e},e.adjustPoint=function(t,e,i,n){var o,r=i?{x:t.x,y:t.y}:{x:e.x,y:e.y};return t.x===e.x?t.y<e.y&&i||t.y>e.y&&!i?r.y+=n:r.y-=n:t.y===e.y?t.x<e.x&&i||t.x>e.x&&!i?r.x+=n:r.x-=n:i?(o=this.findAngle(t,e),r=this.transform(t,o,n)):(o=this.findAngle(e,t),r=this.transform(e,o,n)),r},e.direction=function(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?t.x<e.x?"Right":"Left":t.y<e.y?"Bottom":"Top"},e.prototype.getClassName=function(){return"Point"},r([Object(n["p"])(0)],e.prototype,"x",void 0),r([Object(n["p"])(0)],e.prototype,"y",void 0),e}(n["d"])},beab:function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i("9efe"),o=i("fd65"),r=i("4f3e"),a=i("2d85"),s=i("95f7"),c=i("1ce4"),h=function(){function t(){this.dataTable={}}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"DataBinding"},t.prototype.initData=function(t,e){var i,n="data",o="json",r=t.dataManager||t.dataSource||{};i=r[n]||r[o]||(r.dataSource?r.dataSource.json:void 0),i&&0===i.length&&r.dataSource.data&&(i=r.dataSource.data),i&&i.length&&this.applyDataSource(t,i,e)},t.prototype.initSource=function(t,e){var i,n=this,o=t,s=t;if(o.dataManager instanceof r["a"]||o.dataSource instanceof r["a"]){var h=s.dataManager||s.dataSource,d=h.defaultQuery||new a["b"],l=t.dataManager||t.dataSource;l.executeQuery(d).then((function(o){var r="result";i=o[r],e.isDestroyed||(n.applyDataSource(t,i,e),e.refreshDiagram(),e.trigger("dataLoaded",{diagram:Object(c["h"])(e)}))}))}},t.prototype.applyDataSource=function(t,e,i){var n,o;this.dataTable={};var r,a,s=[],c=[];if(void 0!==e){for(var h=0;h<e.length;h++)n=e[h],void 0===n[t.parentId]||null===n[t.parentId]||"object"!==typeof n[t.parentId]?void 0!==s[n[t.parentId]]?s[n[t.parentId]].items.push(n):s[n[t.parentId]]={items:[n]}:s=this.updateMultipleRootNodes(n,s,t,e),t.root===n[t.id]&&(o={items:[n]});if(o)c.push(o);else for(var d=0,l=Object.keys(s);d<l.length;d++){var p=l[d];p&&"undefined"!==p&&"''"!==p&&"null"!==p||c.push(s[p])}for(var u=0;u<c.length;u++)for(var g=0;g<c[u].items.length;g++){r=c[u].items[g];var f=this.applyNodeTemplate(t,r,i);i.nodes.push(f),this.dataTable[r[t.id]]=f,a=s[f.data[t.id]],void 0!==a&&this.renderChildNodes(t,a,f.id,s,i)}}this.dataTable=null},t.prototype.updateMultipleRootNodes=function(t,e,i,n){for(var o,r=t[i.parentId],a=0;a<r.length;a++)o=r[a],e[o]?e[o].items.push(t):e[o]={items:[t]};return e},t.prototype.applyNodeTemplate=function(t,e,i){var o=Object(s["i"])(),r={id:o,data:e},a=Object(s["f"])(t.doBinding);a&&a(r,e,i);var h=new n["q"](i,"nodes",r,!0);if(Object(c["S"])(h,r,i.nodeDefaults),t.dataMapSettings)for(var d=void 0,l=[],p=[],u=0;u<t.dataMapSettings.length;u++){if(-1!==t.dataMapSettings[u].property.indexOf(".")){p=this.splitString(t.dataMapSettings[u].property);for(var g=0;g<p.length;g++)-1!==p[g].indexOf("[")&&(d=p[g].indexOf("["),l=p[g].split("["));if(d)if(p[2])h[l[0]][p[0].charAt(d+1)][p[1]][p[2]]=e[t.dataMapSettings[u].field];else{var f=e[t.dataMapSettings[u].field];h[l[0]][p[0].charAt(d+1)][p[1]]=f}else p[2]?h[p[0]][p[1]][p[2]]=e[t.dataMapSettings[u].field]:h[p[0]][p[1]]=e[t.dataMapSettings[u].field]}else{var m=t.dataMapSettings[u].property;m=m.charAt(0).toLowerCase()+m.slice(1),h[m]=e[t.dataMapSettings[u].field]}d=0,l=[],p=[]}return this.collectionContains(h,i,t.id,t.parentId)?this.dataTable[e[t.id]]:h},t.prototype.splitString=function(t){var e=[];e=t.split(".");for(var i=0;i<e.length;i++)e[i]=e[i].charAt(0).toLowerCase()+e[i].slice(1);return e},t.prototype.renderChildNodes=function(t,e,i,n,o){for(var r,a,s,c=0;c<e.items.length;c++){r=e.items[c],s=this.applyNodeTemplate(t,r,o);var h=!1;this.collectionContains(s,o,t.id,t.parentId)?h=!0:(this.dataTable[r[t.id]]=s,o.nodes.push(s)),this.containsConnector(o,i,s.id)||o.connectors.push(this.applyConnectorTemplate(i,s.id,o)),h||(a=n[s.data[t.id]],void 0!==a&&this.renderChildNodes(t,a,s.id,n,o))}},t.prototype.containsConnector=function(t,e,i){if(""!==e&&""!==i)for(var n=0;n<t.connectors.length;n++){var o=t.connectors[n];if(void 0!==o&&o.sourceID===e&&o.targetID===i)return!0}return!1},t.prototype.collectionContains=function(t,e,i,n){var o=this.dataTable[t.data[i]];return void 0!==o&&o.data[i]===t.data[i]&&o.data[n]===t.data[n]},t.prototype.applyConnectorTemplate=function(t,e,i){var n={id:Object(s["i"])(),sourceID:t,targetID:e},r=new o["b"](i,"connectors",n,!0);return Object(c["S"])(r,n,i.connectorDefaults),r},t}()},c2844:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return c})),i.d(e,"c",(function(){return h}));var n=i("7de8"),o=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),r([Object(n["p"])()],e.prototype,"key",void 0),r([Object(n["p"])()],e.prototype,"keyModifiers",void 0),e}(n["d"]),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getClassName=function(){return"Command"},r([Object(n["p"])("")],e.prototype,"name",void 0),r([Object(n["p"])()],e.prototype,"canExecute",void 0),r([Object(n["p"])()],e.prototype,"execute",void 0),r([Object(n["g"])({},a)],e.prototype,"gesture",void 0),r([Object(n["p"])("")],e.prototype,"parameter",void 0),e}(n["d"]),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),r([Object(n["e"])([],s)],e.prototype,"commands",void 0),e}(n["d"]),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),r([Object(n["p"])()],e.prototype,"show",void 0),r([Object(n["p"])()],e.prototype,"showCustomMenuOnly",void 0),r([Object(n["p"])()],e.prototype,"items",void 0),e}(n["d"])},c544:function(t,e,i){"use strict";i.d(e,"e",(function(){return l})),i.d(e,"k",(function(){return p})),i.d(e,"H",(function(){return u})),i.d(e,"B",(function(){return g})),i.d(e,"x",(function(){return b})),i.d(e,"C",(function(){return w})),i.d(e,"y",(function(){return O})),i.d(e,"z",(function(){return x})),i.d(e,"A",(function(){return j})),i.d(e,"I",(function(){return S})),i.d(e,"n",(function(){return C})),i.d(e,"m",(function(){return P})),i.d(e,"o",(function(){return T})),i.d(e,"g",(function(){return I})),i.d(e,"v",(function(){return A})),i.d(e,"f",(function(){return z})),i.d(e,"t",(function(){return E})),i.d(e,"s",(function(){return D})),i.d(e,"q",(function(){return k})),i.d(e,"j",(function(){return R})),i.d(e,"h",(function(){return M})),i.d(e,"i",(function(){return B})),i.d(e,"p",(function(){return H})),i.d(e,"r",(function(){return W})),i.d(e,"b",(function(){return _})),i.d(e,"d",(function(){return X})),i.d(e,"w",(function(){return Y})),i.d(e,"u",(function(){return V})),i.d(e,"a",(function(){return U})),i.d(e,"D",(function(){return F})),i.d(e,"l",(function(){return G})),i.d(e,"F",(function(){return q})),i.d(e,"E",(function(){return Z})),i.d(e,"c",(function(){return Q})),i.d(e,"G",(function(){return K}));var n=i("d0e6"),o=i("b239"),r=i("e464"),a=i("95f7"),s=i("ab8c"),c=i("7de8"),h=i("9efe"),d=i("1ce4");function l(t){var e,i,n=[],o="measureElement";window[o].style.visibility="visible";var r=window[o].children[2],a=p(r)[0];a.setAttributeNS(null,"d",t.data);var s=t.absoluteBounds,c=S(t,s,t);a.setAttributeNS(null,"d",c);var h=a.getTotalLength();for(i=0;i<=h;i+=10)e=a.getPointAtLength(i),n.push({x:e.x,y:e.y});return window[o].style.visibility="hidden",n}function p(t){var e,i=[];if("msie"===c["c"].info.name||"edge"===c["c"].info.name)for(var n=0;n<t.childNodes.length;n++)e=t.childNodes[n],1===e.nodeType&&i.push(e);else i=t.children;return i}function u(t,e){for(var i=[],n=0,o=e;n<o.length;n++){var r=o[n],a={x:t.offsetX-t.actualSize.width*t.pivot.x+r.x,y:t.offsetY-t.actualSize.height*t.pivot.y+r.y},c=void 0,h=t.rotateAngle+t.parentTransform;h&&(c=Object(s["a"])(),Object(s["c"])(c,h,t.offsetX,t.offsetY)),c&&(a=Object(s["e"])(c,a)),i.push(a)}return i}function g(t){if(t){var e="measureElement";window[e].style.visibility="visible";var i=window[e].children[2],o=p(i)[0];o.setAttribute("d",t);var r=o.getBBox(),a=new n["a"](r.x,r.y,r.width,r.height);return window[e].style.visibility="hidden",a}return new n["a"](0,0,0,0)}function f(t,e){var i={fill:t.style.fill,stroke:t.style.strokeColor,angle:t.rotateAngle+t.parentTransform,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:t.style.strokeWidth,dashArray:t.style.strokeDashArray,opacity:t.style.opacity,shadow:t.shadow,gradient:t.style.gradient,visible:t.visible,id:t.id,description:t.description,width:e||t.actualSize.width,height:t.actualSize.height,x:t.offsetX-t.actualSize.width*t.pivot.x+.5,y:t.offsetY-t.actualSize.height*t.pivot.y+.5};return i.fontSize=t.style.fontSize,i.fontFamily=t.style.fontFamily,i.textOverflow=t.style.textOverflow,i.textDecoration=t.style.textDecoration,i.doWrap=t.doWrap,i.whiteSpace=Object(a["m"])(t.style.whiteSpace,t.style.textWrapping),i.content=t.content,i.textWrapping=t.style.textWrapping,i.breakWord=Object(a["n"])(t.style.textWrapping),i.textAlign=Object(a["l"])(t.style.textAlign),i.color=t.style.color,i.italic=t.style.italic,i.bold=t.style.bold,i.dashArray="",i.strokeWidth=0,i.fill="",i}function m(t,e,i){var n,o,r=[],s=0,c=e||t.content;if("nowrap"!==t.whiteSpace&&"pre"!==t.whiteSpace)if("breakall"===t.breakWord)for(n="",n+=c[0],s=0;s<c.length;s++)if(o=Object(a["a"])(n,t),o>=t.width&&n.length>0)r[r.length]={text:n,x:0,dy:0,width:o},n="";else{n+=c[s+1]||"",n.indexOf("\n")>-1&&(n=n.replace("\n",""));var h=Object(a["a"])(n,t);Math.ceil(h)+2>=t.width&&n.length>0&&(r[r.length]={text:n,x:0,dy:0,width:h},n=""),s===c.length-1&&n.length>0&&(r[r.length]={text:n,x:0,dy:0,width:h},n="")}else r=y(t,e,i);else r[r.length]={text:c,x:0,dy:0,width:Object(a["a"])(c,t)};return r}function y(t,e,i){var n,o,r,s,c=[],h="",d=0,l=0,p="nowrap"!==t.whiteSpace,u=e||t.content,g=u.split("\n");for(d=0;d<g.length;d++)for("",n="NoWrap"!==t.textWrapping?g[d].split(" "):g,l=0;l<n.length;l++){h+=((0!==l||1===n.length)&&p&&h.length>0?" ":"")+n[l],o=h+" "+(n[l+1]||"");var f=Object(a["a"])(o,t);Math.floor(f)>(i||t.width)-2&&h.length>0?(c[c.length]={text:h,x:0,dy:0,width:o===h?f:h===s?r:Object(a["a"])(h,t)},h=""):l===n.length-1&&(c[c.length]={text:h,x:0,dy:0,width:f},h=""),s=o,r=f}return c}function v(t,e){var i,n,o={x:0,width:0},r=0;for(r=0;r<e.length;r++)i=e[r].width,n=i,i="left"===t.textAlign?0:"center"===t.textAlign?i>t.width&&("Ellipsis"===t.textOverflow||"Clip"===t.textOverflow)?0:-i/2:"right"===t.textAlign?-i:e.length>1?0:-i/2,e[r].dy=1.2*t.fontSize,e[r].x=i,o?(o.x=Math.min(o.x,i),o.width=Math.max(o.width,n)):o={x:i,width:n};return o}function b(t,e,i,n,r){var s=new o["a"],c=_("span",{style:"display:inline-block; line-height: normal"});return t.bold&&(c.style.fontWeight="bold"),t.italic&&(c.style.fontStyle="italic"),void 0!==i&&(c.style.width=i.toString()+"px"),void 0!==n&&(c.style.height=n.toString()+"px"),void 0!==r&&(c.style.maxWidth=r.toString()+"px"),c.style.fontFamily=t.fontFamily,c.style.fontSize=t.fontSize+"px",c.style.color=t.color,c.textContent=e,c.style.whiteSpace=Object(a["m"])(t.whiteSpace,t.textWrapping),c.style.wordBreak=void 0!==r?"break-word":Object(a["n"])(t.textWrapping),document.body.appendChild(c),s.width=c.offsetWidth,s.height=c.offsetHeight,document.body.removeChild(c),s}function w(t,e,i,n,r){var a,s,c=new o["a"](0,0),h=f(t,n);return t.childNodes=a=m(h,r,t.isLaneOrientation?n:void 0),t.wrapBounds=s=v(h,a),c.width=s.width,t.wrapBounds.width>=n&&"Wrap"!==h.textOverflow&&(c.width=n),c.height=a.length*t.style.fontSize*1.2,c}function O(t,e,i,n){var r="measureElement";window[r].style.visibility="visible";var a=window[r].children[1];a.setAttribute("src",t);var s=a.getBoundingClientRect(),c=s.width,h=s.height;e=new o["a"](c,h),window[r].style.visibility="hidden";var d=document.createElement("img");return d.setAttribute("src",t),Z(d,{id:i+"sf-imageNode",style:"display: none;"}),document.body.appendChild(d),d.onload=function(t){var e=t.currentTarget;n&&n(i,{width:e.width,height:e.height})},e}function x(t){var e="measureElement";window[e].style.visibility="visible";var i=window[e].children[2];i.appendChild(t);var n=t.getBoundingClientRect(),o=i.getBoundingClientRect(),r=n;return r.x=n.left-o.left,r.y=n.top-o.top,i.removeChild(t),window[e].style.visibility="hidden",r}function j(t){var e="measureElement";window[e].style.visibility="visible";var i=window[e].children[2];i.appendChild(t);var n=i.getBoundingClientRect();return i.removeChild(t),window[e].style.visibility="hidden",n}function S(t,e,i,n){var o,a=0,s=0,c=0,h=0,d=!1,l="",p=[];return o=e,a===o.x&&s===o.y||(c=a-Number(o.x),h=s-Number(o.y)),(t.actualSize.width!==o.width||t.actualSize.height!==o.height||n)&&(c=(n&&n.width||t.actualSize.width)/Number(o.width?o.width:1),h=(n&&n.height||t.actualSize.height)/Number(o.height?o.height:1),d=!0),p=Object(r["e"])(t.data),p=Object(r["f"])(p),l=Object(r["g"])(p,c,h,d,o.x,o.y,a,s),d=!1,l}function C(t){var e,i,n=P(t);return i=n.getElementsByClassName("e-diagram-layer"),e=i[0],e}function P(t,e){var i,n;return e&&(n=document.getElementById(e)),i="msie"===c["c"].info.name||"edge"===c["c"].info.name?n?n.querySelector("#"+t):document.getElementById(t):n?n.querySelector("#"+CSS.escape(t)):document.getElementById(t),i}function T(t,e,i){var n,o,r=void 0,a="";"native"===i?(n=N(t),a="_content_groupElement"):"html"===i?(n=W(t).childNodes[0],a="_html_element"):(n=L(t),a="_groupElement");for(var s=0;n.childNodes&&s<n.childNodes.length;s++)if(o=n.childNodes[s],o&&o.id===e+a){r=s;break}return r}function I(t){var e,i=null,n=P(t);return e=n.getElementsByClassName("e-adorner-layer"),i=e[0],i}function A(t){var e=null,i=I(t);return e=i.getElementById(t+"_SelectorElement"),e}function z(t){var e=null,i=I(t);return e=i.getElementById(t+"_diagramAdorner"),e}function L(t){var e,i=C(t);return e=i.getElementById(t+"_diagramLayer"),e}function E(t){var e,i=null,n=P(t);return e=n.getElementsByClassName("e-ports-expand-layer"),i=e[0],i}function D(t){var e,i,n=P(t);return i=n.getElementsByClassName("e-native-layer"),e=i[0],e}function k(t){var e,i=null,n=P(t);return e=n.getElementsByClassName("e-grid-layer"),i=e[0],i}function R(t){var e=P(t),i=e.getElementsByClassName("e-background-layer");return i[0].parentNode}function M(t){var e,i=null,n=P(t);return e=n.getElementsByClassName("e-background-image-layer"),i=e[0],i}function B(t){var e,i=null,n=P(t);return e=n.getElementsByClassName("e-background-layer"),i=e[0],i}function H(t){var e=null,i=k(t);return e=i.getElementById(t+"_gridline"),e}function N(t){var e=null,i=D(t);return e=i.getElementById(t+"_nativeLayer"),e}function W(t){var e,i=null,n=P(t);return e=n.getElementsByClassName("e-html-layer"),i=e[0],i}function _(t,e){var i=Object(c["w"])(t);return Z(i,e),i}function X(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg",t);return q(i,e),i}function Y(t,e){var i="object"===typeof t.className?t.className.animVal:t.className;return(" "+i+" ").indexOf(" "+e+" ")>-1}function V(){var t=_("div",{style:"visibility:hidden; width: 100px"});document.body.appendChild(t);var e=t.getBoundingClientRect().width;t.style.overflow="scroll";var i=_("div",{style:"width:100%"});t.appendChild(i);var n=i.getBoundingClientRect().width;return t.parentNode.removeChild(t),e-n}function U(t,e,i){t=[];for(var n=0,o=i.length;n<o;n++)t.push({pageX:i[n].clientX,pageY:i[n].clientY,pointerId:null});return t}function F(t,e){var i=P(t,e);i&&i.parentNode.removeChild(i)}function G(t,e){var i;if(e){var n={style:"height: 100%; width: 100%"};i=_("div",n)}else i=document.createElementNS("http://www.w3.org/2000/svg","g");var o,r=Object(d["u"])(t),a="",s={};if(r instanceof h["q"]){s=r;var l="Blazor";if(window[l]){s={};var p="id",u="height",g="width",f="offsetX",m="offsetY",y="content",v="annotations",b="addInfo";if(a=r[p]+"content_diagram",s[p]=r[p],s[u]=r[u],s[g]=r[g],s[f]=r[f],s[m]=r[m],s[b]=r[b],r.annotations&&r.annotations.length>0){s[v]=[];for(var w=0;w<r.annotations.length;w++)s[v][w]={content:r.annotations[w][y]}}}}else s=r,a=t.diagramId+"template_diagram";if("string"===typeof t.content){var O=document.getElementById(t.content);if(O)i.appendChild(O);else{var x=void 0;x=Object(c["v"])(t.content);for(var j=0,S=x(s,null,null,a);j<S.length;j++)o=S[j],i.appendChild(o)}}else i.appendChild(t.content);return i.cloneNode(!0)}function q(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++)t.setAttribute(i[n],e[i[n]])}function Z(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++)t.setAttribute(i[n],e[i[n]])}function Q(){var t="measureElement";if(window[t])window[t].usageCount+=1;else{var e=_("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),i=_("span",{style:"display:inline-block ; line-height: normal"});e.appendChild(i);var n=void 0;n=_("img",{}),e.appendChild(n);var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("xlink","http://www.w3.org/1999/xlink"),e.appendChild(o);var r=document.createElementNS("http://www.w3.org/2000/svg","path");o.appendChild(r);document.createTextNode("");var a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),o.appendChild(a),window[t]=e,window[t].usageCount=1,document.body.appendChild(e);var s="measureElementCount";window[s]?window[s]++:window[s]=1}}function K(t,e,i,n){return e.length>1&&0===t.x&&("Clip"===n.textOverflow||"Ellipsis"===n.textOverflow)&&"Wrap"===n.textWrapping?(t.x=e[i-1]?e[i-1].x:-t.width/2,t.x):t.x}},d0e6:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n=function(){function t(t,e,i,n){this.x=Number.MAX_VALUE,this.y=Number.MAX_VALUE,this.width=0,this.height=0,void 0===t||void 0===e?(t=e=Number.MAX_VALUE,i=n=0):(void 0===i&&(i=0),void 0===n&&(n=0)),this.x=t,this.y=e,this.width=i,this.height=n}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return{x:this.left,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return{x:this.right,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return{x:this.left,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return{x:this.right,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"middleLeft",{get:function(){return{x:this.left,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"middleRight",{get:function(){return{x:this.right,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topCenter",{get:function(){return{x:this.x+this.width/2,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomCenter",{get:function(){return{x:this.x+this.width/2,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),t.prototype.equals=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height},t.prototype.uniteRect=function(t){var e=Math.max(Number.NaN===this.right||this.x===Number.MAX_VALUE?t.right:this.right,t.right),i=Math.max(Number.NaN===this.bottom||this.y===Number.MAX_VALUE?t.bottom:this.bottom,t.bottom);return this.x=Math.min(this.left,t.left),this.y=Math.min(this.top,t.top),this.width=e-this.x,this.height=i-this.y,this},t.prototype.unitePoint=function(t){if(this.x===Number.MAX_VALUE)return this.x=t.x,void(this.y=t.y);var e=Math.min(this.left,t.x),i=Math.min(this.top,t.y),n=Math.max(this.right,t.x),o=Math.max(this.bottom,t.y);this.x=e,this.y=i,this.width=n-this.x,this.height=o-this.y},t.prototype.Inflate=function(t){return this.x-=t,this.y-=t,this.width+=2*t,this.height+=2*t,this},t.prototype.intersects=function(t){return!(this.right<t.left||this.left>t.right||this.top>t.bottom||this.bottom<t.top)},t.prototype.containsRect=function(t){return this.left<=t.left&&this.right>=t.right&&this.top<=t.top&&this.bottom>=t.bottom},t.prototype.containsPoint=function(t,e){return void 0===e&&(e=0),this.left-e<=t.x&&this.right+e>=t.x&&this.top-e<=t.y&&this.bottom+e>=t.y},t.toBounds=function(e){for(var i=new t,n=0,o=e;n<o.length;n++){var r=o[n];i.unitePoint(r)}return i},t.empty=new t(Number.MAX_VALUE,Number.MIN_VALUE,0,0),t}()},d454:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("b239"),o=i("456d"),r=i("c544"),a=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s=function(t){function e(){var e=t.call(this)||this;return e.textContent="",e.canMeasure=!0,e.isLaneOrientation=!1,e.canConsiderBounds=!0,e.hyperlink={color:"blue"},e.doWrap=!0,e.textNodes=[],e.style={color:"black",fill:"transparent",strokeColor:"black",strokeWidth:1,fontFamily:"Arial",fontSize:12,whiteSpace:"CollapseSpace",textWrapping:"WrapWithOverflow",textAlign:"Center",italic:!1,bold:!1,textDecoration:"None",strokeDashArray:"",opacity:5,gradient:null,textOverflow:"Wrap"},e.style.fill="transparent",e.style.strokeColor="transparent",e}return a(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this.textContent},set:function(t){this.textContent!==t&&(this.textContent=t,this.isDirt=!0,this.doWrap=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.textNodes},set:function(t){this.textNodes=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapBounds",{get:function(){return this.textWrapBounds},set:function(t){this.textWrapBounds=t},enumerable:!0,configurable:!0}),e.prototype.refreshTextElement=function(){this.isDirt=!0},e.prototype.measure=function(t){var e;return e=this.isDirt&&this.canMeasure?Object(r["C"])(this,this.style,this.content,this.isLaneOrientation?t.height:this.width||t.width):this.desiredSize,void 0===this.width||void 0===this.height?this.desiredSize=new n["a"](e.width,e.height):this.desiredSize=new n["a"](this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.desiredSize},e.prototype.arrange=function(t){return(t.width!==this.actualSize.width||t.height!==this.actualSize.height||this.isDirt)&&(this.doWrap=!0),this.actualSize=t,this.updateBounds(),this.isDirt=!1,this.actualSize},e}(o["a"])},e464:function(t,e,i){"use strict";function n(t){var e,i=[],n=o(t);if(n.length>0)for(var r=0;r<n.length;r++){var a=n[r],s="";switch(s=a[0],s.toLowerCase()){case"m":for(e=1;e<a.length;e++)i.push({command:s,x:a[e],y:a[e+1]}),e+=1,"m"===s?s="l":"M"===s&&(s="L");break;case"l":case"t":for(e=1;e<a.length;e++)i.push({command:s,x:a[e],y:a[e+1]}),e+=1;break;case"h":for(e=1;e<a.length;e++)i.push({command:s,x:a[e]});break;case"v":for(e=1;e<a.length;e++)i.push({command:s,y:a[e]});break;case"z":i.push({command:s});break;case"c":for(e=1;e<a.length;e++)i.push({command:s,x1:a[e],y1:a[e+1],x2:a[e+2],y2:a[e+3],x:a[e+4],y:a[e+5]}),e+=5;break;case"s":for(e=1;e<a.length;e++)i.push({command:s,x2:a[e],y2:a[e+1],x:a[e+2],y:a[e+3]}),e+=3;break;case"q":for(e=1;e<a.length;e++)i.push({command:s,x1:a[e],y1:a[e+1],x:a[e+2],y:a[e+3]}),e+=3;break;case"a":for(e=1;e<a.length;e++)i.push({command:s,r1:a[e],r2:a[e+1],angle:a[e+2],largeArc:a[e+3],sweep:a[e+4],x:a[e+5],y:a[e+6]}),e+=6;break}}return i}function o(t){var e=/([a-z]+)|([+-]?(?:\d+\.?\d*|\.\d+))/gi,i=[],n=[],o={};e.lastIndex=0;var r=!1;o=e.exec(t);while(o){if("e"===o[1]){r=!0}else o[1]?("zm"===o[1].toLowerCase()?(i.length&&n.push(i),n.push(["Z"]),i=[o[1].substring(1,2)]):(i.length&&n.push(i),i=[o[1]]),r=!1):(i.length||(i=[]),r||i.push(Number(o[2])),r=!1);o=e.exec(t)}return i.length&&n.push(i),n}function r(t,e,i){var n,o,r,a=0,s=0,c="",h=[{x:a+t,y:s},{x:a+i-t,y:s},{x:a+i,y:s+t},{x:a+i,y:s+e-t},{x:a+i-t,y:s+e},{x:a+t,y:s+e},{x:a,y:s+e-t},{x:a,y:s+t}],d=[{x:a+i,y:s},{x:a+i,y:s+e},{x:a,y:s+e},{x:a,y:s}],l=0;for(c="M"+h[0].x+" "+h[0].y,r=0;r<h.length;r+=2)n=h[r+1],c+="L"+n.x+" "+n.y,o=h[r+2]||h[0],c+="Q"+d[l].x+" "+d[l].y+" "+o.x+" "+o.y,l++;return c}function a(t){var e,i,n="";for(n="M"+t[0].x+" "+t[0].y,i=1;i<t.length;i++)e=t[i],n+="L"+e.x+" "+e.y;return n+="Z",n}function s(t){var e,i,n,o,r,a,s,c,h,d,l=[];for(s=0,c=0,d=0,h=t.length;d<h;++d){var p=t[d],u=p,g="";g=u.command,"y1"in u&&(o=u.y1),"y2"in u&&(a=u.y2),"x1"in u&&(n=u.x1),"x2"in u&&(r=u.x2),"x"in u&&(s=u.x),"y"in u&&(c=u.y);var f=l[l.length-1];switch(g){case"M":l.push({command:"M",x:s,y:c});break;case"L":l.push({command:"L",x0:e,y0:i,x:s,y:c});break;case"H":l.push({command:"L",x0:e,y0:i,x:s,y:i});break;case"V":l.push({command:"L",x0:e,y0:i,x:e,y:c});break;case"C":l.push({command:"C",x0:e,y0:i,x1:n,y1:o,x2:r,y2:a,x:s,y:c});break;case"S":if(f){var m=void 0;m="C"===f.command||"S"===f.command?{x:f.x2,y:f.y2}:{x:e,y:i};var y={x:2*e-m.x,y:2*i-m.y};l.push({command:"C",x0:e,y0:i,x1:y.x,y1:y.y,x2:r,y2:a,x:s,y:c})}break;case"Q":l.push({command:"Q",x0:e,y0:i,x1:n,y1:o,x:s,y:c});break;case"T":if(f){m=void 0;m="Q"===f.command?{x:f.x1,y:f.y1}:{x:e,y:i};y={x:2*e-m.x,y:2*i-m.y};l.push({command:"Q",x0:e,y0:i,x1:y.x,y1:y.y,x:s,y:c})}break;case"A":var v=u;v.command="A",l.push(v);break;case"Z":case"z":l.push({command:"Z"}),s=e,c=i;break}"M"!==g&&"m"!==g||(s,c),e=s,i=c}return l}function c(t,e,i,n,o,r,a,s){var c,l,u,g,f,m,y,v,b;for(f=0,m=0,v=0,y=t.length;v<y;++v){var w=t[v],O=w,x=O.command;"x"in O&&(f=O.x),"y"in O&&(m=O.y),"y1"in O&&(l=O.y1),"y2"in O&&(g=O.y2),"x1"in O&&(c=O.x1),"x2"in O&&(u=O.x2),n?(void 0!==f&&(f=d(f,e,o,a)),void 0!==m&&(m=d(m,i,r,s)),void 0!==c&&(c=d(c,e,o,a)),void 0!==l&&(l=d(l,i,r,s)),void 0!==u&&(u=d(u,e,o,a)),void 0!==g&&(g=d(g,i,r,s))):(void 0!==f&&(f=Number((f+e).toFixed(2))),void 0!==m&&(m=Number((m+i).toFixed(2))),void 0!==c&&(c=Number((c+e).toFixed(2))),void 0!==l&&(l=Number((l+i).toFixed(2))),void 0!==u&&(u=Number((u+e).toFixed(2))),void 0!==g&&(g=Number((g+i).toFixed(2))));var j={x:f,y:m,x1:c,y1:l,x2:u,y2:g,r1:O.r1,r2:O.r2};b=h(O,x,j,n,e,i),b&&(t[v]=b),"M"!==x&&"m"!==x||(f,m)}var S=p(t);return S}function h(t,e,i,n,o,r){switch(e){case"M":t.x=i.x,t.y=i.y;break;case"L":t.x=i.x,t.y=i.y;break;case"H":t.x=i.x;break;case"V":t.y=i.y;break;case"C":t.x=i.x,t.y=i.y,t.x1=i.x1,t.y1=i.y1,t.x2=i.x2,t.y2=i.y2;break;case"S":t.x=i.x,t.y=i.y,t.x2=i.x2,t.y2=i.y2;break;case"Q":t.x=i.x,t.y=i.y,t.x1=i.x1,t.y1=i.y1;break;case"T":t.x=i.x,t.y=i.y;break;case"A":var a=i.r1,s=i.r2;n&&(i.r1=a*=o,i.r2=s*=r),t.x=i.x,t.y=i.y,t.r1=i.r1,t.r2=i.r2;break;case"z":case"Z":t={command:"Z"};break}return t}function d(t,e,i,n){return t!==i?t=n!==i?t*e-(Number(i)*e-Number(i))+(n-Number(i)):Number(t)*e-(Number(i)*e-Number(i)):n!==i&&(t=n),Number(t.toFixed(2))}function l(t){var e,i,n,o,r,a,s,c,h,d;for(s=0,c=0,d=0,h=t.length;d<h;++d){var l=t[d],p=l,u=p.command;if(/[MLHVCSQTA]/.test(u))"x"in p&&(p.x=s=p.x),"y"in p&&(p.y=c=p.y);else{"x1"in p&&(p.x1=n=s+p.x1),"x2"in p&&(p.x2=r=s+p.x2),"y1"in p&&(p.y1=o=c+p.y1),"y2"in p&&(p.y2=a=c+p.y2),"x"in p&&(p.x=s+=p.x),"y"in p&&(p.y=c+=p.y);var g=void 0;switch(u){case"m":case"M":g={command:"M",x:s,y:c};break;case"l":case"L":g={command:"L",x:s,y:c};break;case"h":case"H":g={command:"H",x:s};break;case"v":case"V":g={command:"V",y:c};break;case"c":case"C":g={command:"C",x:s,y:c,x1:n,y1:o,x2:r,y2:a};break;case"s":case"S":g={command:"S",x:s,y:c,x2:r,y2:a};break;case"q":case"Q":g={command:"Q",x:s,y:c,x1:n,y1:o};break;case"t":case"T":g={command:"T",x:s,y:c};break;case"a":case"A":g={command:"A",x:s,y:c},g.r1=p.r1,g.r2=p.r2,g.angle=p.angle,g.largeArc=p.largeArc,g.sweep=p.sweep;break;case"z":case"Z":g={command:"Z"},s=e,c=i,g=t[d];break}g&&(t[d]=g)}"M"!==u&&"m"!==u||(e=s,i=c)}return t}function p(t){var e,i="";for(e=0;e<t.length;e++)i+=0===e?u(t[e]):" "+u(t[e]);return i}function u(t){var e="";switch(t.command){case"Z":case"z":e=t.command;break;case"M":case"m":case"L":case"l":e=t.command+" "+t.x+" "+t.y;break;case"C":case"c":e=t.command+" "+t.x1+" "+t.y1+" "+t.x2+" "+t.y2+" "+t.x+" "+t.y;break;case"Q":case"q":e=t.command+" "+t.x1+" "+t.y1+" "+t.x+" "+t.y;break;case"A":case"a":var i=t.command,n=t.angle,o=t.largeArc?"1":"0",r=t.sweep?"1":"0";e=i+" "+t.r1+" "+t.r2+" "+n+" "+o+" "+r+" "+t.x+" "+t.y;break;case"H":case"h":e=t.command+" "+t.x;break;case"V":case"v":e=t.command+" "+t.y;break;case"S":case"s":e=t.command+" "+t.x2+" "+t.y2+" "+t.x+" "+t.y;break;case"T":case"t":e=t.command+" "+t.x+" "+t.y}return e}i.d(e,"e",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"b",(function(){return a})),i.d(e,"d",(function(){return s})),i.d(e,"g",(function(){return c})),i.d(e,"f",(function(){return l})),i.d(e,"a",(function(){return p}))},f1ba:function(t,e,i){"use strict";var n,o,r,a,s,c,h=i("7de8"),d=!1;function l(t,e){var i=!1,n={left:0,top:0},o=t;if(!t||!e)return n;Object(h["E"])(e.offsetParent)&&"fixed"===e.style.position&&(i=!0);while((e.offsetParent||i)&&t&&e.offsetParent!==t)n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent;t=o;while((e.offsetParent||i)&&t&&e.offsetParent!==t)n.left-=t.scrollLeft,n.top-=t.scrollTop,t=t.parentElement;return n}function p(t,e,i,n,s){if(o=i+e==="topright"?void 0:s,o=s,d=!!n,!t)return{left:0,top:0};e||(e="left"),i||(i="top"),a=t.ownerDocument,r=t;var c={left:0,top:0};return f(e.toLowerCase(),i.toLowerCase(),c)}function u(t,e){e.left=t}function g(t,e){e.top=t}function f(t,e,i){switch(n=r.getBoundingClientRect(),e+t){case"topcenter":u(j(),i),g(w(),i);break;case"topright":u(x(),i),g(w(),i);break;case"centercenter":u(j(),i),g(b(),i);break;case"centerright":u(x(),i),g(b(),i);break;case"centerleft":u(O(),i),g(b(),i);break;case"bottomcenter":u(j(),i),g(v(),i);break;case"bottomright":u(x(),i),g(v(),i);break;case"bottomleft":u(O(),i),g(v(),i);break;default:case"topleft":u(O(),i),g(w(),i);break}return i}function m(){return a.documentElement.scrollTop||a.body.scrollTop}function y(){return a.documentElement.scrollLeft||a.body.scrollLeft}function v(){return d?n.bottom:n.bottom+m()}function b(){return w()+n.height/2}function w(){return d?n.top:n.top+m()}function O(){return n.left+y()}function x(){return n.right+y()-(o?o.width:0)}function j(){return O()+n.width/2}function S(t,e,i,n){if(void 0===e&&(e=null),void 0===i&&(i={X:!1,Y:!1}),!i.Y&&!i.X)return{left:0,top:0};var o=t.getBoundingClientRect();if(c=e,s=t.ownerDocument,n||(n=p(t,"left","top")),i.X){var r=c?k():U(),a=N(),h=W(),d=a-n.left,l=n.left+o.width-h;o.width>r?n.left=d>0&&l<=0?h-o.width:l>0&&d<=0?a:d>l?h-o.width:a:d>0?n.left+=d:l>0&&(n.left-=l)}if(i.Y){var u=c?R():V(),g=H(),f=_(),m=g-n.top,y=n.top+o.height-f;o.height>u?n.top=m>0&&y<=0?f-o.height:y>0&&m<=0?g:m>y?f-o.height:g:m>0?n.top+=m:y>0&&(n.top-=y)}return n}function C(t,e,i,n){void 0===e&&(e=null);var o=p(t,"left","top");i&&(o.left=i),n&&(o.top=n);var r=[];c=e,s=t.ownerDocument;var a=t.getBoundingClientRect(),h=o.top,d=o.left,l=o.left+a.width,u=o.top+a.height,g=D(h,u),f=z(d,l);return g.topSide&&r.push("top"),f.rightSide&&r.push("right"),f.leftSide&&r.push("left"),g.bottomSide&&r.push("bottom"),r}function P(t,e,i,n,o,r,a,h,d){if(void 0===a&&(a=null),void 0===h&&(h={X:!0,Y:!0}),e&&t&&o&&r&&(h.X||h.Y)){var l={TL:null,TR:null,BL:null,BR:null},p={TL:null,TR:null,BL:null,BR:null},u=t.getBoundingClientRect(),g={posX:o,posY:r,offsetX:i,offsetY:n,position:{left:0,top:0}};c=a,s=e.ownerDocument,I(e,l,g,d,u),A(p,g,u),h.X&&L(e,p,l,g,u,!0),h.Y&&l.TL.top>-1&&E(e,p,l,g,u,!0),T(t,g,u)}}function T(t,e,i){var n=0,o=0;if(null!=t.offsetParent&&("absolute"===getComputedStyle(t.offsetParent).position||"relative"===getComputedStyle(t.offsetParent).position)){var r=p(t.offsetParent,"left","top",!1,i);n=r.left,o=r.top}t.style.top=e.position.top+e.offsetY-o+"px",t.style.left=e.position.left+e.offsetX-n+"px"}function I(t,e,i,n,o){i.position=p(t,i.posX,i.posY,n,o),e.TL=p(t,"left","top",n,o),e.TR=p(t,"right","top",n,o),e.BR=p(t,"left","bottom",n,o),e.BL=p(t,"right","bottom",n,o)}function A(t,e,i){t.TL={top:e.position.top+e.offsetY,left:e.position.left+e.offsetX},t.TR={top:t.TL.top,left:t.TL.left+i.width},t.BL={top:t.TL.top+i.height,left:t.TL.left},t.BR={top:t.TL.top+i.height,left:t.TL.left+i.width}}function z(t,e){var i=!1,n=!1;return t-Y()<N()&&(i=!0),e>W()&&(n=!0),{leftSide:i,rightSide:n}}function L(t,e,i,n,o,r){var a=z(e.TL.left,e.TR.left);i.TL.left-Y()<=N()&&(a.leftSide=!1),i.TR.left>=W()&&(a.rightSide=!1),(a.leftSide&&!a.rightSide||!a.leftSide&&a.rightSide)&&("right"===n.posX?n.posX="left":n.posX="right",n.offsetX=n.offsetX+o.width,n.offsetX=-1*n.offsetX,n.position=p(t,n.posX,n.posY,!1),A(e,n,o),r&&L(t,e,i,n,o,!1))}function E(t,e,i,n,o,r){var a=D(e.TL.top,e.BL.top);i.TL.top-X()<=H()&&(a.topSide=!1),i.BL.top>=_()&&(a.bottomSide=!1),(a.topSide&&!a.bottomSide||!a.topSide&&a.bottomSide)&&("top"===n.posY?n.posY="bottom":n.posY="top",n.offsetY=n.offsetY+o.height,n.offsetY=-1*n.offsetY,n.position=p(t,n.posX,n.posY,!1,o),A(e,n,o),r&&E(t,e,i,n,o,!1))}function D(t,e){var i=!1,n=!1;return t-X()<H()&&(i=!0),e>_()&&(n=!0),{topSide:i,bottomSide:n}}function k(){return c.getBoundingClientRect().width}function R(){return c.getBoundingClientRect().height}function M(){return c.getBoundingClientRect().left}function B(){return c.getBoundingClientRect().top}function H(){return c?B():0}function N(){return c?M():0}function W(){return c?Y()+M()+k():Y()+U()}function _(){return c?X()+B()+R():X()+V()}function X(){return s.documentElement.scrollTop||s.body.scrollTop}function Y(){return s.documentElement.scrollLeft||s.body.scrollLeft}function V(){return window.innerHeight}function U(){var t=window.innerWidth,e=Object(h["E"])(document.documentElement)?0:document.documentElement.offsetWidth;return t-(t-e)}var F=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),G=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),G([Object(h["p"])("left")],e.prototype,"X",void 0),G([Object(h["p"])("top")],e.prototype,"Y",void 0),e}(h["d"]),Z={ROOT:"e-popup",RTL:"e-rtl",OPEN:"e-popup-open",CLOSE:"e-popup-close"},Q=function(t){function e(e,i){return t.call(this,i,e)||this}return F(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var o=n[i];switch(o){case"width":Object(h["K"])(this.element,{width:Object(h["z"])(t.width)});break;case"height":Object(h["K"])(this.element,{height:Object(h["z"])(t.height)});break;case"zIndex":Object(h["K"])(this.element,{zIndex:t.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var r=t.offsetX-e.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+r).toString()+"px";break;case"offsetY":var a=t.offsetY-e.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+a).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==t.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents();break}}},e.prototype.getModuleName=function(){return"popup"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.destroy=function(){this.element.classList.remove(Z.ROOT,Z.RTL),this.unwireEvents(),t.prototype.destroy.call(this)},e.prototype.render=function(){this.element.classList.add(Z.ROOT);var t={};1e3!==this.zIndex&&(t.zIndex=this.zIndex),"auto"!==this.width&&(t.width=Object(h["z"])(this.width)),"auto"!==this.height&&(t.height=Object(h["z"])(this.height)),Object(h["K"])(this.element,t),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},e.prototype.wireEvents=function(){h["c"].isDevice&&h["l"].add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},e.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var t=0,e=this.getScrollableParent(this.getRelateToElement());t<e.length;t++){var i=e[t];h["l"].add(i,"scroll",this.scrollRefresh,this)}},e.prototype.unwireEvents=function(){h["c"].isDevice&&h["l"].remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},e.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var t=0,e=this.getScrollableParent(this.getRelateToElement());t<e.length;t++){var i=e[t];h["l"].remove(i,"scroll",this.scrollRefresh)}},e.prototype.getRelateToElement=function(){var t=""===this.relateTo||Object(h["E"])(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:t},!0),"string"===typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},e.prototype.scrollRefresh=function(t){if("reposition"===this.actionOnScroll?this.element.offsetParent===t.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==t.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var e=this.isElementOnViewport(this.getRelateToElement(),t.target);e||this.targetInvisibleStatus?e&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},e.prototype.isElementOnViewport=function(t,e){for(var i=this.getScrollableParent(t),n=0;n<i.length;n++)if(!this.isElementVisible(t,i[n]))return!1;return!0},e.prototype.isElementVisible=function(t,e){var i=this.checkGetBoundingClientRect(t);if(!i.height||!i.width)return!1;if(Object(h["E"])(this.checkGetBoundingClientRect(e))){var n=window,o={top:n.scrollY,left:n.scrollX,right:n.scrollX+n.outerWidth,bottom:n.scrollY+n.outerHeight},r=p(t),a={top:r.top,left:r.left,right:r.left+i.width,bottom:r.top+i.height},s={top:o.bottom-a.top,left:o.right-a.left,bottom:a.bottom-o.top,right:a.right-o.left};return s.top>0&&s.left>0&&s.right>0&&s.bottom>0}var c=e.getBoundingClientRect();return!(i.bottom<c.top)&&!(i.bottom>c.bottom)&&!(i.right>c.right)&&!(i.left<c.left)},e.prototype.preRender=function(){},e.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add(Z.RTL):this.element.classList.remove(Z.RTL)},e.prototype.setContent=function(){Object(h["E"])(this.content)||(this.element.innerHTML="","string"===typeof this.content?this.element.textContent=this.content:this.element.appendChild(this.content))},e.prototype.orientationOnChange=function(){var t=this;setTimeout((function(){t.refreshPosition()}),200)},e.prototype.refreshPosition=function(t,e){Object(h["E"])(t)||this.checkFixedParent(t),this.reposition(),e||this.checkCollision()},e.prototype.reposition=function(){var t,e,i=this.getRelateToElement();if("number"===typeof this.position.X&&"number"===typeof this.position.Y)t={left:this.position.X,top:this.position.Y};else if("string"===typeof this.position.X&&"number"===typeof this.position.Y||"number"===typeof this.position.X&&"string"===typeof this.position.Y){var n=this.element.style.display,o=void 0;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(o=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),t="string"===typeof this.position.X?{left:e.left,top:this.position.Y}:{left:this.position.X,top:e.top},this.element.style.display=n,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=o)}else if(i){n=this.element.style.display;this.element.style.display="block",t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=n}else t={left:0,top:0};Object(h["E"])(t)||(this.element.style.left=t.left+"px",this.element.style.top=t.top+"px")},e.prototype.checkGetBoundingClientRect=function(t){var e;try{return e=t.getBoundingClientRect(),e}catch(i){return null}},e.prototype.getAnchorPosition=function(t,e,i,n,o){var r=this.checkGetBoundingClientRect(e),a=this.checkGetBoundingClientRect(t);if(Object(h["E"])(r)||Object(h["E"])(a))return null;var s=t,c={left:0,top:0};switch(e.offsetParent&&"BODY"===e.offsetParent.tagName&&"BODY"===t.tagName?c=p(t):(e.classList.contains("e-dlg-modal")&&"BODY"!==s.tagName&&(e=e.parentElement),c=l(s,e)),i.X){default:case"left":break;case"center":e.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?c.left+=window.innerWidth/2-r.width/2:"container"===this.targetType?c.left+=a.width/2-r.width/2:c.left+=a.width/2;break;case"right":e.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?c.left+=window.innerWidth-r.width:"container"===this.targetType?c.left+=a.width-r.width:c.left+=a.width;break}switch(i.Y){default:case"top":break;case"center":e.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?c.top+=window.innerHeight/2-r.height/2:"container"===this.targetType?c.top+=a.height/2-r.height/2:c.top+=a.height/2;break;case"bottom":e.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?c.top+=window.innerHeight-r.height:"container"===this.targetType?c.top+=a.height-r.height:c.top+=a.height;break}return c.left+=n,c.top+=o,c},e.prototype.callFlip=function(t){var e=this.getRelateToElement();P(this.element,e,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,t,this.fixedParent)},e.prototype.callFit=function(t){if(0!==C(this.element,this.viewPortElement).length)if(Object(h["E"])(this.viewPortElement)){var e=S(this.element,this.viewPortElement,t);t.X&&(this.element.style.left=e.left+"px"),t.Y&&(this.element.style.top=e.top+"px")}else{var i=this.checkGetBoundingClientRect(this.element),n=this.checkGetBoundingClientRect(this.viewPortElement);if(Object(h["E"])(i)||Object(h["E"])(n))return null;t&&!0===t.Y&&(n.top>i.top?this.element.style.top="0px":n.bottom<i.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(i.bottom-n.bottom)+"px")),t&&!0===t.X&&(n.right<i.right?this.element.style.left=parseInt(this.element.style.left,10)-(i.right-n.right)+"px":n.left>i.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(n.left-i.left)+"px"))}},e.prototype.checkCollision=function(){var t=this.collision.X,e=this.collision.Y;"none"===t&&"none"===e||("flip"===t&&"flip"===e?this.callFlip({X:!0,Y:!0}):"fit"===t&&"fit"===e?this.callFit({X:!0,Y:!0}):("flip"===t?this.callFlip({X:!0,Y:!1}):"flip"===e&&this.callFlip({Y:!0,X:!1}),"fit"===t?this.callFit({X:!0,Y:!1}):"fit"===e&&this.callFit({X:!1,Y:!0})))},e.prototype.show=function(t,e){var i=this;if(this.wireEvents(),1e3===this.zIndex||!Object(h["E"])(e)){var n=Object(h["E"])(e)?this.element:e;this.zIndex=J(n),Object(h["K"])(this.element,{zIndex:this.zIndex})}t=Object(h["E"])(t)||"object"!==typeof t?this.showAnimation:t,"none"===this.collision.X&&"none"===this.collision.Y||(Object(h["I"])([this.element],Z.CLOSE),Object(h["r"])([this.element],Z.OPEN),this.checkCollision(),Object(h["I"])([this.element],Z.OPEN),Object(h["r"])([this.element],Z.CLOSE)),Object(h["E"])(t)?(Object(h["I"])([this.element],Z.CLOSE),Object(h["r"])([this.element],Z.OPEN),this.trigger("open")):(t.begin=function(){i.isDestroyed||(Object(h["I"])([i.element],Z.CLOSE),Object(h["r"])([i.element],Z.OPEN))},t.end=function(){i.isDestroyed||i.trigger("open")},new h["b"](t).animate(this.element))},e.prototype.hide=function(t){var e=this;t=Object(h["E"])(t)||"object"!==typeof t?this.hideAnimation:t,Object(h["E"])(t)?(Object(h["I"])([this.element],Z.OPEN),Object(h["r"])([this.element],Z.CLOSE),this.trigger("close")):(t.end=function(){e.isDestroyed||(Object(h["I"])([e.element],Z.OPEN),Object(h["r"])([e.element],Z.CLOSE),e.trigger("close"))},new h["b"](t).animate(this.element)),this.unwireEvents()},e.prototype.getScrollableParent=function(t){return this.checkFixedParent(t),K(t,this.fixedParent)},e.prototype.checkFixedParent=function(t){var e=t.parentElement;while(e&&"HTML"!==e.tagName){var i=getComputedStyle(e);"fixed"===i.position&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.position="fixed",this.fixedParent=!0),e=e.parentElement,Object(h["E"])(this.element.offsetParent)&&"fixed"===i.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},G([Object(h["p"])("auto")],e.prototype,"height",void 0),G([Object(h["p"])("auto")],e.prototype,"width",void 0),G([Object(h["p"])(null)],e.prototype,"content",void 0),G([Object(h["p"])("container")],e.prototype,"targetType",void 0),G([Object(h["p"])(null)],e.prototype,"viewPortElement",void 0),G([Object(h["p"])({X:"none",Y:"none"})],e.prototype,"collision",void 0),G([Object(h["p"])("")],e.prototype,"relateTo",void 0),G([Object(h["g"])({},q)],e.prototype,"position",void 0),G([Object(h["p"])(0)],e.prototype,"offsetX",void 0),G([Object(h["p"])(0)],e.prototype,"offsetY",void 0),G([Object(h["p"])(1e3)],e.prototype,"zIndex",void 0),G([Object(h["p"])(!1)],e.prototype,"enableRtl",void 0),G([Object(h["p"])("reposition")],e.prototype,"actionOnScroll",void 0),G([Object(h["p"])(null)],e.prototype,"showAnimation",void 0),G([Object(h["p"])(null)],e.prototype,"hideAnimation",void 0),G([Object(h["k"])()],e.prototype,"open",void 0),G([Object(h["k"])()],e.prototype,"close",void 0),G([Object(h["k"])()],e.prototype,"targetExitViewport",void 0),e=G([h["o"]],e),e}(h["i"]);function K(t,e){var i=getComputedStyle(t),n=[],o=/(auto|scroll)/,r=t.parentElement;while(r&&"HTML"!==r.tagName){var a=getComputedStyle(r);"absolute"===i.position&&"static"===a.position||!o.test(a.overflow+a.overflowY+a.overflowX)||n.push(r),r=r.parentElement}return e||n.push(document),n}function J(t){var e=t.parentElement,i=[];while(e){if("BODY"===e.tagName)break;var n=document.defaultView.getComputedStyle(e,null).getPropertyValue("z-index"),o=document.defaultView.getComputedStyle(e,null).getPropertyValue("position");"auto"!==n&&"static"!==o&&i.push(n),e=e.parentElement}for(var r=[],a=0;a<document.body.children.length;a++)if(!t.isEqualNode(document.body.children[a])){n=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("z-index"),o=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("position");"auto"!==n&&"static"!==o&&r.push(n)}r.push("999");var s=[];if(!Object(h["E"])(t.parentElement)&&"BODY"!==t.parentElement.tagName){var c=[].slice.call(t.parentElement.children);for(a=0;a<c.length;a++){n=document.defaultView.getComputedStyle(c[a],null).getPropertyValue("z-index"),o=document.defaultView.getComputedStyle(c[a],null).getPropertyValue("position");"auto"!==n&&"static"!==o&&s.push(n)}}var d=i.concat(r,s),l=Math.max.apply(Math,d)+1;return l>2147483647?2147483647:l}var $=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tt=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},et=1500,it=500,nt=0,ot=8,rt=2,at=2,st="e-tooltip",ct="e-rtl",ht="e-bigger",dt="e-icons",lt="e-tooltip-close",pt="e-tooltip-wrap",ut="e-tip-content",gt="e-arrow-tip",ft="e-arrow-tip-outer",mt="e-arrow-tip-inner",yt="e-tip-bottom",vt="e-tip-top",bt="e-tip-left",wt="e-tip-right",Ot="e-popup",xt="e-popup-open",jt="e-popup-close",St="e-lib",Ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $(e,t),tt([Object(h["p"])({effect:"FadeIn",duration:150,delay:0})],e.prototype,"open",void 0),tt([Object(h["p"])({effect:"FadeOut",duration:150,delay:0})],e.prototype,"close",void 0),e}(h["d"]),Pt=function(t){function e(e,i){return t.call(this,e,i)||this}return $(e,t),e.prototype.initialize=function(){this.formatPosition(),Object(h["r"])([this.element],st)},e.prototype.formatPosition=function(){var t,e;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(t=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=t[0],this.tooltipPositionX=t[1]):(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=e[0],this.tooltipPositionY=e[1])},e.prototype.renderArrow=function(){this.setTipClass(this.position);var t=this.createElement("div",{className:gt+" "+this.tipClass});t.appendChild(this.createElement("div",{className:ft+" "+this.tipClass})),t.appendChild(this.createElement("div",{className:mt+" "+this.tipClass})),this.tooltipEle.appendChild(t)},e.prototype.setTipClass=function(t){0===t.indexOf("Right")?this.tipClass=bt:0===t.indexOf("Bottom")?this.tipClass=vt:0===t.indexOf("Left")?this.tipClass=wt:this.tipClass=yt},e.prototype.renderPopup=function(t){var e=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(t);this.tooltipEle.classList.remove(St),this.popupObj=new Q(this.tooltipEle,{height:this.height,width:this.width,position:{X:e.left,Y:e.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},e.prototype.getTooltipPosition=function(t){this.tooltipEle.style.display="none";var e=p(t,this.tooltipPositionX,this.tooltipPositionY);this.tooltipEle.style.display="";var i=this.calculateTooltipOffset(this.position),n=this.collisionFlipFit(t,e.left+i.left,e.top+i.top);return n},e.prototype.reposition=function(t){var e=this.getTooltipPosition(t);this.popupObj.position={X:e.left,Y:e.top},this.popupObj.dataBind()},e.prototype.openPopupHandler=function(){this.needTemplateReposition()&&!this.mouseTrail&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs)},e.prototype.closePopupHandler=function(){Object(h["J"])(this.element.id+"content","Content"),this.clear(),this.trigger("afterClose",this.tooltipEventArgs)},e.prototype.calculateTooltipOffset=function(t){var e={top:0,left:0},i=this.tooltipEle.offsetWidth,n=this.tooltipEle.offsetHeight,o=this.tooltipEle.querySelector("."+gt),r=o?o.offsetWidth:0,a=o?o.offsetHeight:0,s=this.showTipPointer?nt:ot,c=a/2+at+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),h=r/2+at+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(s+=rt),t){case"RightTop":e.left+=r+s,e.top-=n-c;break;case"RightCenter":e.left+=r+s,e.top-=n/2;break;case"RightBottom":e.left+=r+s,e.top-=c;break;case"BottomRight":e.top+=a+s,e.left-=h;break;case"BottomCenter":e.top+=a+s,e.left-=i/2;break;case"BottomLeft":e.top+=a+s,e.left-=i-h;break;case"LeftBottom":e.left-=r+i+s,e.top-=c;break;case"LeftCenter":e.left-=r+i+s,e.top-=n/2;break;case"LeftTop":e.left-=r+i+s,e.top-=n-c;break;case"TopLeft":e.top-=n+a+s,e.left-=i-h;break;case"TopRight":e.top-=n+a+s,e.left-=h;break;default:e.top-=n+a+s,e.left-=i/2;break}return e.left+=this.offsetX,e.top+=this.offsetY,e},e.prototype.updateTipPosition=function(t){var e=this.tooltipEle.querySelectorAll("."+gt+",."+ft+",."+mt),i=[yt,vt,bt,wt];Object(h["I"])(e,i),this.setTipClass(t),Object(h["r"])(e,this.tipClass)},e.prototype.adjustArrow=function(t,e,i,n){if(!1!==this.showTipPointer){var o,r;this.updateTipPosition(e);var a=this.tooltipEle.clientWidth,s=this.tooltipEle.clientHeight,c=this.tooltipEle.querySelector("."+gt),h=this.tooltipEle.querySelector("."+mt),d=c.offsetWidth,l=c.offsetHeight;if(this.tipClass===yt||this.tipClass===vt){this.tipClass===yt?(r="99.9%",h.style.top="-"+(l-2)+"px"):(r=-(l-1)+"px",h.style.top="-"+(l-6)+"px");var p="Center"!==i||a>t.offsetWidth||this.mouseTrail;o=p&&"Left"===i||!p&&"End"===this.tipPointerPosition?a-d-at+"px":p&&"Right"===i||!p&&"Start"===this.tipPointerPosition?at+"px":a/2-d/2+"px"}else{this.tipClass===wt?(o="99.9%",h.style.left="-"+(d-2)+"px"):(o=-(d-1)+"px",h.style.left=d-2-d+"px");p="Center"!==n||s>t.offsetHeight||this.mouseTrail;r=p&&"Top"===n||!p&&"End"===this.tipPointerPosition?s-l-at+"px":p&&"Bottom"===n||!p&&"Start"===this.tipPointerPosition?at+"px":s/2-l/2+"px"}c.style.top=r,c.style.left=o}},e.prototype.renderContent=function(t){var e=this.tooltipEle.querySelector("."+ut);if(t&&!Object(h["E"])(t.getAttribute("title"))&&(t.setAttribute("data-content",t.getAttribute("title")),t.removeAttribute("title")),Object(h["E"])(this.content))t&&!Object(h["E"])(t.getAttribute("data-content"))&&(e.innerHTML=t.getAttribute("data-content"));else if(e.innerHTML="",this.content instanceof HTMLElement)e.appendChild(this.content);else if("string"===typeof this.content&&this.content.indexOf("<div>Blazor")<0)e.innerHTML=this.content;else{var i=Object(h["v"])(this.content);Object(h["s"])(i({},null,null,this.element.id+"content"),e),"string"===typeof this.content&&this.content.indexOf("<div>Blazor")>=0&&(this.isBlazorTemplate=!0,Object(h["N"])(this.element.id+"content","Content",this))}},e.prototype.renderCloseIcon=function(){if(this.isSticky){var t=this.createElement("div",{className:dt+" "+lt});this.tooltipEle.appendChild(t),h["l"].add(t,h["c"].touchStartEvent,this.onStickyClose,this)}},e.prototype.addDescribedBy=function(t,e){var i=(t.getAttribute("aria-describedby")||"").split(/\s+/);i.indexOf(e)<0&&i.push(e),Object(h["t"])(t,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":e})},e.prototype.removeDescribedBy=function(t){var e=t.getAttribute("data-tooltip-id"),i=(t.getAttribute("aria-describedby")||"").split(/\s+/),n=i.indexOf(e);-1!==n&&i.splice(n,1),t.removeAttribute("data-tooltip-id");var o=i.join(" ").trim();o?t.setAttribute("aria-describedby",o):t.removeAttribute("aria-describedby")},e.prototype.tapHoldHandler=function(t){clearTimeout(this.autoCloseTimer),this.targetHover(t.originalEvent)},e.prototype.touchEndHandler=function(t){var e=this;if(!this.isSticky){var i=function(){e.close()};this.autoCloseTimer=setTimeout(i,et)}},e.prototype.targetClick=function(t){var e;e=this.target?Object(h["u"])(t.target,this.target):this.element,Object(h["E"])(e)||(null===e.getAttribute("data-tooltip-id")?this.targetHover(t):this.isSticky||this.hideTooltip(this.animation.close,t,e))},e.prototype.targetHover=function(t){var e;if(e=this.target?Object(h["u"])(t.target,this.target):this.element,!Object(h["E"])(e)&&null===e.getAttribute("data-tooltip-id")){for(var i=[].slice.call(document.querySelectorAll("[data-tooltip-id= "+this.ctrlId+"_content]")),n=0,o=i;n<o.length;n++){var r=o[n];this.restoreElement(r)}this.showTooltip(e,this.animation.open,t)}},e.prototype.showTooltip=function(t,e,i){var n=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.tooltipEventArgs=i?{type:i.type,cancel:!1,target:t,event:i,element:this.tooltipEle}:{type:null,cancel:!1,target:t,event:null,element:this.tooltipEle};var o=function(o){n.beforeRenderCallback(o,t,i,e)};this.trigger("beforeRender",this.tooltipEventArgs,o.bind(this))},e.prototype.beforeRenderCallback=function(t,e,i,n){var o=this;if(t.cancel)this.isHidden=!0,this.clear();else{this.isHidden=!1,Object(h["E"])(this.tooltipEle)?(this.ctrlId=this.element.getAttribute("id")?Object(h["B"])(this.element.getAttribute("id")):Object(h["B"])("tooltip"),this.tooltipEle=this.createElement("div",{className:pt+" "+Ot+" "+St,attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+Object(h["z"])(this.width)+";height:"+Object(h["z"])(this.height)+";position:absolute;"}),this.cssClass&&Object(h["r"])([this.tooltipEle],this.cssClass.split(" ")),h["c"].isDevice&&Object(h["r"])([this.tooltipEle],ht),"auto"!==this.width&&(this.tooltipEle.style.maxWidth=Object(h["z"])(this.width)),this.tooltipEle.appendChild(this.createElement("div",{className:ut})),document.body.appendChild(this.tooltipEle),this.addDescribedBy(e,this.ctrlId+"_content"),this.renderContent(e),Object(h["r"])([this.tooltipEle],xt),this.showTipPointer&&this.renderArrow(),this.renderCloseIcon(),this.renderPopup(e)):(this.adjustArrow(e,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(e,this.ctrlId+"_content"),this.renderContent(e),h["b"].stop(this.tooltipEle),this.reposition(e)),Object(h["I"])([this.tooltipEle],xt),Object(h["r"])([this.tooltipEle],jt),this.tooltipEventArgs=i?{type:i.type,cancel:!1,target:e,event:i,element:this.tooltipEle}:{type:null,cancel:!1,target:e,event:null,element:this.tooltipEle},this.needTemplateReposition()&&!this.mouseTrail&&(this.tooltipEle.style.display="none");var r=function(t){o.beforeOpenCallback(t,e,n,i)};this.trigger("beforeOpen",this.tooltipEventArgs,r.bind(this))}},e.prototype.beforeOpenCallback=function(t,e,i,n){var o=this;if(t.cancel)this.isHidden=!0,this.clear(),this.restoreElement(e);else{var r={name:i.effect,duration:i.duration,delay:i.delay,timingFunction:"easeOut"};if("None"===i.effect&&(r=void 0),this.openDelay>0){var a=function(){o.popupObj&&o.popupObj.show(r,e)};this.showTimer=setTimeout(a,this.openDelay)}else this.popupObj.show(r,e)}n&&this.wireMouseEvents(n,e)},e.prototype.needTemplateReposition=function(){var t=this;return!Object(h["E"])(t.viewContainerRef)&&"string"!==typeof t.viewContainerRef||Object(h["D"])()&&this.isBlazorTemplate},e.prototype.checkCollision=function(t,e,i){var n={left:e,top:i,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},o=C(this.tooltipEle,this.target?this.element:null,e,i);return o.length>0&&(n.horizontal=o.indexOf("left")>=0?"Right":o.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=o.indexOf("top")>=0?"Bottom":o.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n},e.prototype.collisionFlipFit=function(t,e,i){var n=this.checkCollision(t,e,i),o=n.position;if(this.tooltipPositionY!==n.vertical&&(o=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(0===o.indexOf("Left")&&(n.vertical="LeftTop"===o||"LeftCenter"===o?"Top":"Bottom",o=n.vertical+"Left"),0===o.indexOf("Right")&&(n.vertical="RightTop"===o||"RightCenter"===o?"Top":"Bottom",o=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:t,event:null,element:this.tooltipEle,collidedPosition:o},this.trigger("beforeCollision",this.tooltipEventArgs),n.position!==o){var r=p(t,n.horizontal,n.vertical);this.adjustArrow(t,o,n.horizontal,n.vertical);var a=this.calculateTooltipOffset(o);a.top-=-1!=="TopBottom".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="TopBottom".indexOf(o.split(/(?=[A-Z])/)[0])?2*this.offsetY:0,a.left-=-1!=="RightLeft".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="RightLeft".indexOf(o.split(/(?=[A-Z])/)[0])?2*this.offsetX:0,n.position=o,n.left=r.left+a.left,n.top=r.top+a.top}else this.adjustArrow(t,o,n.horizontal,n.vertical);var s={left:n.left,top:n.top},c=S(this.tooltipEle,this.target?this.element:null,{X:!0,Y:!1},s).left;if(this.showTipPointer&&(0===o.indexOf("Bottom")||0===o.indexOf("Top"))){var h=this.tooltipEle.querySelector("."+gt),d=parseInt(h.style.left,10)-(c-n.left);d<0?d=0:d+h.offsetWidth>this.tooltipEle.clientWidth&&(d=this.tooltipEle.clientWidth-h.offsetWidth),h.style.left=d.toString()+"px"}return s.left=c,s},e.prototype.hideTooltip=function(t,e,i){var n,o=this;e?(n=this.target?i||e.target:this.element,this.tooltipEventArgs={type:e.type,cancel:!1,target:n,event:e,element:this.tooltipEle}):(n=document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]"),this.tooltipEventArgs={type:null,cancel:!1,target:n,event:null,element:this.tooltipEle}),Object(h["E"])(n)||this.trigger("beforeClose",this.tooltipEventArgs,(function(e){if(e.cancel)o.isHidden=!1;else{o.restoreElement(n),o.isHidden=!0;var i={name:t.effect,duration:t.duration,delay:t.delay,timingFunction:"easeIn"};if("None"===t.effect&&(i=void 0),o.closeDelay>0){var r=function(){o.popupObj&&o.popupObj.hide(i)};o.hideTimer=setTimeout(r,o.closeDelay)}else o.popupObj.hide(i)}}))},e.prototype.restoreElement=function(t){this.unwireMouseEvents(t),Object(h["E"])(t.getAttribute("data-content"))||(t.setAttribute("title",t.getAttribute("data-content")),t.removeAttribute("data-content")),this.removeDescribedBy(t)},e.prototype.clear=function(){this.tooltipEle&&(Object(h["I"])([this.tooltipEle],jt),Object(h["r"])([this.tooltipEle],xt)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&Object(h["H"])(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)},e.prototype.onMouseOut=function(t){var e=t.relatedTarget;if(e&&!this.mouseTrail){var i=Object(h["u"])(e,"."+pt+"."+St+"."+Ot);i?(h["l"].add(i,"mouseleave",this.tooltipElementMouseOut,this),this.unwireMouseEvents(t.target)):this.hideTooltip(this.animation.close,t)}else this.hideTooltip(this.animation.close,t)},e.prototype.tooltipElementMouseOut=function(t){this.hideTooltip(this.animation.close,t,this.findTarget()),h["l"].remove(this.element,"mouseleave",this.tooltipElementMouseOut)},e.prototype.onStickyClose=function(t){this.close()},e.prototype.onMouseMove=function(t){var e=0,i=0;t.type.indexOf("touch")>-1?(t.preventDefault(),e=t.touches[0].pageX,i=t.touches[0].pageY):(e=t.pageX,i=t.pageY),h["b"].stop(this.tooltipEle),Object(h["I"])([this.tooltipEle],jt),Object(h["r"])([this.tooltipEle],xt),this.adjustArrow(t.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var n=this.calculateTooltipOffset(this.position),o=e+n.left+this.offsetX,r=i+n.top+this.offsetY,a=this.checkCollision(t.target,o,r);if(this.tooltipPositionX!==a.horizontal||this.tooltipPositionY!==a.vertical){var s=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?a.vertical+a.horizontal:a.horizontal+a.vertical;a.position=s,this.adjustArrow(t.target,a.position,a.horizontal,a.vertical);var c=this.calculateTooltipOffset(a.position);a.left=e+c.left-this.offsetX,a.top=i+c.top-this.offsetY}this.tooltipEle.style.left=a.left+"px",this.tooltipEle.style.top=a.top+"px"},e.prototype.keyDown=function(t){this.tooltipEle&&27===t.keyCode&&this.close()},e.prototype.touchEnd=function(t){this.tooltipEle&&null===Object(h["u"])(t.target,"."+st)&&this.close()},e.prototype.scrollHandler=function(t){this.tooltipEle&&this.close()},e.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},e.prototype.preRender=function(){this.tipClass=yt,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},e.prototype.wireEvents=function(t){for(var e=this.getTriggerList(t),i=0,n=e;i<n.length;i++){var o=n[i];if("Custom"===o)return;"Focus"===o&&this.wireFocusEvents(),"Click"===o&&h["l"].add(this.element,h["c"].touchStartEvent,this.targetClick,this),"Hover"===o&&(h["c"].isDevice?(this.touchModule=new h["q"](this.element,{tapHoldThreshold:it,tapHold:this.tapHoldHandler.bind(this)}),h["l"].add(this.element,h["c"].touchEndEvent,this.touchEndHandler,this)):h["l"].add(this.element,"mouseover",this.targetHover,this))}h["l"].add(document,"touchend",this.touchEnd,this),h["l"].add(document,"scroll",this.scrollHandler,this),h["l"].add(document,"keydown",this.keyDown,this)},e.prototype.getTriggerList=function(t){return"Auto"===t&&(t=h["c"].isDevice?"Hover":"Hover Focus"),t.split(" ")},e.prototype.wireFocusEvents=function(){if(Object(h["E"])(this.target))h["l"].add(this.element,"focus",this.targetHover,this);else for(var t=[].slice.call(this.element.querySelectorAll(this.target)),e=0,i=t;e<i.length;e++){var n=i[e];h["l"].add(n,"focus",this.targetHover,this)}},e.prototype.wireMouseEvents=function(t,e){this.tooltipEle&&(this.isSticky||("focus"===t.type&&h["l"].add(e,"blur",this.onMouseOut,this),"mouseover"===t.type&&h["l"].add(e,"mouseleave",this.onMouseOut,this)),this.mouseTrail&&h["l"].add(e,"mousemove touchstart mouseenter",this.onMouseMove,this))},e.prototype.unwireEvents=function(t){for(var e=this.getTriggerList(t),i=0,n=e;i<n.length;i++){var o=n[i];if("Custom"===o)return;"Focus"===o&&this.unwireFocusEvents(),"Click"===o&&h["l"].remove(this.element,h["c"].touchStartEvent,this.targetClick),"Hover"===o&&(h["c"].isDevice?(this.touchModule&&this.touchModule.destroy(),h["l"].remove(this.element,h["c"].touchEndEvent,this.touchEndHandler)):h["l"].remove(this.element,"mouseover",this.targetHover))}h["l"].remove(document,"touchend",this.touchEnd),h["l"].remove(document,"scroll",this.scrollHandler),h["l"].remove(document,"keydown",this.keyDown)},e.prototype.unwireFocusEvents=function(){if(Object(h["E"])(this.target))h["l"].remove(this.element,"focus",this.targetHover);else for(var t=[].slice.call(this.element.querySelectorAll(this.target)),e=0,i=t;e<i.length;e++){var n=i[e];h["l"].remove(n,"focus",this.targetHover)}},e.prototype.unwireMouseEvents=function(t){if(!this.isSticky)for(var e=this.getTriggerList(this.opensOn),i=0,n=e;i<n.length;i++){var o=n[i];"Focus"===o&&h["l"].remove(t,"blur",this.onMouseOut),"Hover"!==o||h["c"].isDevice||h["l"].remove(t,"mouseleave",this.onMouseOut)}this.mouseTrail&&h["l"].remove(t,"mousemove touchstart mouseenter",this.onMouseMove)},e.prototype.findTarget=function(){var t=document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]");return t},e.prototype.getModuleName=function(){return"tooltip"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.onPropertyChanged=function(t,e){for(var i=this.findTarget(),n=0,o=Object.keys(t);n<o.length;n++){var r=o[n];switch(r){case"width":this.tooltipEle&&i&&(this.tooltipEle.style.width=Object(h["z"])(t.width),this.reposition(i));break;case"height":this.tooltipEle&&i&&(this.tooltipEle.style.height=Object(h["z"])(t.height),this.reposition(i));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(e.opensOn),this.wireEvents(t.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&i){var a=this.tooltipEle.querySelector("."+mt);a.style.top=a.style.left=null,this.reposition(i)}break;case"tipPointerPosition":this.tooltipEle&&i&&this.reposition(i);break;case"offsetX":if(this.tooltipEle){var s=t.offsetX-e.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+s).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var c=t.offsetY-e.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+c).toString()+"px"}break;case"cssClass":this.tooltipEle&&(e.cssClass&&Object(h["I"])([this.tooltipEle],e.cssClass.split(" ")),t.cssClass&&Object(h["r"])([this.tooltipEle],t.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?Object(h["r"])([this.tooltipEle],ct):Object(h["I"])([this.tooltipEle],ct));break}}},e.prototype.open=function(t,e){void 0===e&&(e=this.animation.open),"none"!==t.style.display&&this.showTooltip(t,e)},e.prototype.close=function(t){void 0===t&&(t=this.animation.close),this.hideTooltip(t)},e.prototype.refresh=function(t){this.tooltipEle&&this.renderContent(t),this.popupObj&&t&&this.reposition(t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),Object(h["I"])([this.element],st),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&Object(h["H"])(this.tooltipEle),this.tooltipEle=null,this.popupObj=null},tt([Object(h["p"])("auto")],e.prototype,"width",void 0),tt([Object(h["p"])("auto")],e.prototype,"height",void 0),tt([Object(h["p"])()],e.prototype,"content",void 0),tt([Object(h["p"])()],e.prototype,"target",void 0),tt([Object(h["p"])("TopCenter")],e.prototype,"position",void 0),tt([Object(h["p"])(0)],e.prototype,"offsetX",void 0),tt([Object(h["p"])(0)],e.prototype,"offsetY",void 0),tt([Object(h["p"])(!0)],e.prototype,"showTipPointer",void 0),tt([Object(h["p"])("Auto")],e.prototype,"tipPointerPosition",void 0),tt([Object(h["p"])("Auto")],e.prototype,"opensOn",void 0),tt([Object(h["p"])(!1)],e.prototype,"mouseTrail",void 0),tt([Object(h["p"])(!1)],e.prototype,"isSticky",void 0),tt([Object(h["g"])({},Ct)],e.prototype,"animation",void 0),tt([Object(h["p"])(0)],e.prototype,"openDelay",void 0),tt([Object(h["p"])(0)],e.prototype,"closeDelay",void 0),tt([Object(h["p"])()],e.prototype,"cssClass",void 0),tt([Object(h["k"])()],e.prototype,"beforeRender",void 0),tt([Object(h["k"])()],e.prototype,"beforeOpen",void 0),tt([Object(h["k"])()],e.prototype,"afterOpen",void 0),tt([Object(h["k"])()],e.prototype,"beforeClose",void 0),tt([Object(h["k"])()],e.prototype,"afterClose",void 0),tt([Object(h["k"])()],e.prototype,"beforeCollision",void 0),tt([Object(h["k"])()],e.prototype,"created",void 0),tt([Object(h["k"])()],e.prototype,"destroyed",void 0),e=tt([h["o"]],e),e}(h["i"]);i.d(e,"a",(function(){return At})),i.d(e,"b",(function(){return zt})),i.d(e,"c",(function(){return Dt}));var Tt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),It=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},At=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Tt(e,t),It([Object(h["p"])("")],e.prototype,"content",void 0),It([Object(h["p"])("TopLeft")],e.prototype,"position",void 0),It([Object(h["p"])("Mouse")],e.prototype,"relativeMode",void 0),It([Object(h["p"])(!0)],e.prototype,"showTipPointer",void 0),It([Object(h["p"])("auto")],e.prototype,"width",void 0),It([Object(h["p"])("auto")],e.prototype,"height",void 0),It([Object(h["p"])("Auto")],e.prototype,"openOn",void 0),It([Object(h["p"])()],e.prototype,"animation",void 0),e}(h["d"]);function zt(t){var e=new Pt;e=kt(t.tooltip,e);var i=new Pt(e);return i.beforeCollision=Et,i.beforeOpen=Lt,i.cssClass="e-diagram-tooltip",i.opensOn="custom",i.appendTo("#"+t.element.id),i.close(),i}function Lt(t){""!==this.content&&void 0!==this.content||(t.element.style.display="none")}function Et(t){t.collidedPosition&&t.collidedPosition!==this.position&&(t.element.style.display="none")}function Dt(t,e){var i,n=t.tooltipObject;return i=e?e.tooltip:t.tooltip,kt(i,n),n}function kt(t,e){return t.content?(e.content=t.content,e.position=t.position,e.showTipPointer=t.showTipPointer,e.width=t.width,e.height=t.height,t.animation?e.animation=t.animation:e.animation={close:{effect:"None"}}):e.close(),e}},fd65:function(t,e,i){"use strict";i.d(e,"d",(function(){return L})),i.d(e,"a",(function(){return E})),i.d(e,"c",(function(){return D})),i.d(e,"g",(function(){return R})),i.d(e,"f",(function(){return M})),i.d(e,"e",(function(){return H})),i.d(e,"b",(function(){return X}));var n=i("7de8"),o=i("a630"),r=i("be2f"),a=i("d454"),s=i("bccc"),c=i("d0e6"),h=i("b239"),d=i("3b21"),l=i("1ce4"),p=i("95f7"),u=i("6513"),g=i("6639"),f=i("7682"),m=i("9dde"),y=i("83c4"),v=i("f1ba"),b=i("ab8c"),w=i("8214"),O=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),x=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},j=function(t){if(t)switch(t.type){case"Bpmn":return A;case"UmlActivity":return I;case"UmlClassifier":return _;default:return T}return T},S=function(t){if(t)switch(t.type){case"Straight":return L;case"Bezier":return E;case"Orthogonal":return D;default:return L}},C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return O(e,t),x([Object(n["p"])(10)],e.prototype,"width",void 0),x([Object(n["p"])(10)],e.prototype,"height",void 0),x([Object(n["p"])("Arrow")],e.prototype,"shape",void 0),x([Object(n["g"])({fill:"black",strokeColor:"black",strokeWidth:1},o["c"])],e.prototype,"style",void 0),x([Object(n["g"])({x:0,y:.5},r["a"])],e.prototype,"pivot",void 0),x([Object(n["p"])("")],e.prototype,"pathData",void 0),e}(n["d"]),P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return O(e,t),x([Object(n["p"])(0)],e.prototype,"angle",void 0),x([Object(n["p"])(0)],e.prototype,"distance",void 0),e}(n["d"]),T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return O(e,t),x([Object(n["p"])("None")],e.prototype,"type",void 0),e}(n["d"]),I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return O(e,t),x([Object(n["p"])("Object")],e.prototype,"flow",void 0),x([Object(n["p"])(30)],e.prototype,"exceptionFlowHeight",void 0),e}(T),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return O(e,t),x([Object(n["p"])("Sequence")],e.prototype,"flow",void 0),x([Object(n["p"])("Normal")],e.prototype,"sequence",void 0),x([Object(n["p"])("Default")],e.prototype,"message",void 0),x([Object(n["p"])("Default")],e.prototype,"association",void 0),e}(T),z=function(t){function e(e,i,n,o){var r=t.call(this,e,i,n,o)||this;return r.points=[],r}return O(e,t),x([Object(n["p"])("Straight")],e.prototype,"type",void 0),x([Object(n["p"])(!0)],e.prototype,"allowDrag",void 0),e}(n["d"]),L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return O(e,t),e.prototype.getClassName=function(){return"StraightSegment"},x([Object(n["g"])({x:0,y:0},r["a"])],e.prototype,"point",void 0),e}(z),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return O(e,t),e.prototype.getClassName=function(){return"BezierSegment"},x([Object(n["g"])({x:0,y:0},r["a"])],e.prototype,"point1",void 0),x([Object(n["g"])({x:0,y:0},r["a"])],e.prototype,"point2",void 0),x([Object(n["g"])({angle:0,distance:0},P)],e.prototype,"vector1",void 0),x([Object(n["g"])({angle:0,distance:0},P)],e.prototype,"vector2",void 0),e}(L),D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return O(e,t),e.prototype.getClassName=function(){return"OrthogonalSegment"},x([Object(n["p"])(null)],e.prototype,"length",void 0),x([Object(n["p"])(null)],e.prototype,"direction",void 0),e}(z);function k(t,e,i){var n=t.center,o=i?45:180/(2+2/(t.height/t.width)),r=o,a=180-o,s=a+2*o,c=360-o,h=Object(d["a"])(e,n);return h>r&&h<a?"top":h>a&&h<s?"right":h>s&&h<c?"bottom":"left"}function R(t){return!t.distance&&!t.angle}function M(t,e,i){var n=60,o={x:0,y:0};switch(i||(i=Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?t.x<e.x?"right":"left":t.y<e.y?"bottom":"top"),i){case"bottom":case"top":n=Math.min(.45*Math.abs(t.y-e.y),n),o={x:t.x,y:t.y+("bottom"===i?n:-n)};break;case"right":case"left":n=Math.min(.45*Math.abs(t.x-e.x),n),o={x:t.x+("right"===i?n:-n),y:t.y};break}return o}function B(t,e,i,n,o){var r=0,a=0,s=0,c=0,h=3,d=Number((o.distance(e,t)+o.distance(i,e)+o.distance(n,i))/h);if(0!==d)for(var l=0;l<=d;l++){var p=l/d,u=(1-p)*(1-p)*(1-p)*t.x+3*p*(1-p)*(1-p)*e.x+3*p*p*(1-p)*i.x+p*p*p*n.x,g=(1-p)*(1-p)*(1-p)*t.y+3*p*(1-p)*(1-p)*e.y+3*p*p*(1-p)*i.y+p*p*p*n.y;0===l?(r=s=u,a=c=g):(r=Math.min(u,r),a=Math.min(g,a),s=Math.max(u,s),c=Math.max(g,c))}return{x:r,y:a,width:s-r,height:c-a,left:r,top:a,right:r+(s-r),bottom:a+(c-a),center:{x:(r+(s-r))/2,y:(a+(c-a))/2}}}function H(t,e,i,n,o,r,a){var s={x:0,y:0},c=r/a,h=(1-c)*(1-c)*(1-c)*e.x+3*c*(1-c)*(1-c)*i.x+3*c*c*(1-c)*n.x+c*c*c*o.x;s.x=h;var d=(1-c)*(1-c)*(1-c)*e.y+3*c*(1-c)*(1-c)*i.y+3*c*c*(1-c)*n.y+c*c*c*o.y;return s.y=d,s}var N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return O(e,t),x([Object(n["p"])(!0)],e.prototype,"optional",void 0),x([Object(n["p"])(void 0)],e.prototype,"lowerBounds",void 0),x([Object(n["p"])(void 0)],e.prototype,"upperBounds",void 0),e}(n["d"]),W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return O(e,t),x([Object(n["p"])("OneToOne")],e.prototype,"type",void 0),x([Object(n["g"])({},N)],e.prototype,"target",void 0),x([Object(n["g"])({},N)],e.prototype,"source",void 0),e}(n["d"]),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return O(e,t),x([Object(n["p"])("UmlClassifier")],e.prototype,"type",void 0),x([Object(n["p"])("Aggregation")],e.prototype,"relationship",void 0),x([Object(n["p"])("Directional")],e.prototype,"associationType",void 0),x([Object(n["g"])({},W)],e.prototype,"multiplicity",void 0),e}(T),X=function(t){function e(e,i,n,o){var r=t.call(this,e,i,n,o)||this;return r.parentId="",r.bridges=[],r.status="None",r.shape&&"UmlActivity"===r.shape.type&&Object(l["P"])(n,r),n&&n.shape&&"None"!==n.shape.type&&Object(l["N"])(n,r),r}return O(e,t),e.prototype.init=function(t){var e;this.id||(this.id=Object(p["i"])());var i=new f["a"],n=new u["a"];n.id=this.id+"_path";var o,a=new u["a"],s=new u["a"];n=this.getSegmentElement(this,n);var h=[];switch(h=this.getConnectorPoints(this.type),h=this.clipDecorators(this,h),o=c["a"].toBounds(h),i.width=o.width,i.height=o.height,i.offsetX=o.x+i.pivot.x*o.width,i.offsetY=o.y+i.pivot.y*o.height,this.shape.type){case"Bpmn":switch(this.shape.flow){case"Sequence":e=this.getBpmnSequenceFlow();break;case"Association":e=new u["a"],e.visible=!1,this.getBpmnAssociationFlow();break;case"Message":e=this.getBpmnMessageFlow(),n=this.getSegmentElement(this,n),this.updateShapePosition(this,e);break}break;case"UmlActivity":switch(this.shape.flow){case"Object":this.getUMLObjectFlow();break;case"Exception":this.getUMLExceptionFlow(n);break}break;case"UmlClassifier":this.getConnectorRelation();break}var d=this.intermediatePoints;if("Bezier"===this.type){var l=this.segments[0],g=this.segments[this.segments.length-1];d=[r["a"].isEmptyPoint(g.point2)?g.bezierPoint2:g.point2,r["a"].isEmptyPoint(l.point1)?l.bezierPoint1:l.point1]}var m="getDescription",y=t[m];this.sourceWrapper&&this.sourceWrapper.style.strokeWidth;if(a=this.getDecoratorElement(h[0],d[1],this.sourceDecorator,!0,y),s=this.getDecoratorElement(h[h.length-1],d[d.length-2],this.targetDecorator,!1,y),a.id=this.id+"_srcDec",s.id=this.id+"_tarDec",n.style=this.style,n.style["fill"]="transparent",void 0!==y){var v=y(this,t);n.description=v||this.id}i.style.strokeColor="transparent",i.style.fill="transparent",i.style.strokeWidth=0,i.children=[n,a,s],i.id=this.id,void 0!==e&&i.children.push(e),i.offsetX=n.offsetX,i.offsetY=n.offsetY,i.width=n.width,i.height=n.height;for(var b=0;this.annotations,b<this.annotations.length;b++)i.children.push(this.getAnnotationElement(this.annotations[b],this.intermediatePoints,o,y,t.element.id));return this.wrapper=i,i},e.prototype.getConnectorRelation=function(){var t=this.shape;"Association"===t.relationship?(this.segments[0].type="Straight",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"):"Inheritance"===t.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"):"Composition"===t.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="Diamond",this.targetDecorator.shape="None"):"Aggregation"===t.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="Diamond",this.targetDecorator.shape="None"):"Dependency"===t.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="OpenArrow"):"Realization"===t.relationship&&(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"),"BiDirectional"===t.associationType&&(this.sourceDecorator.shape="None",this.targetDecorator.shape="None");var e,i,n="",o="",r="",a="";t.multiplicity.source&&(t.multiplicity.source.lowerBounds=t.multiplicity.source.lowerBounds,t.multiplicity.source.upperBounds=t.multiplicity.source.upperBounds),t.multiplicity.target&&(t.multiplicity.target.lowerBounds=t.multiplicity.target.lowerBounds,t.multiplicity.target.upperBounds=t.multiplicity.target.upperBounds),e=t.multiplicity.source,i=t.multiplicity.target,a=e.upperBounds?e.lowerBounds+"..."+e.upperBounds:e.lowerBounds,n=i.upperBounds?i.lowerBounds+"..."+i.upperBounds:i.lowerBounds,"ManyToOne"===t.multiplicity.type&&(t.multiplicity.target.optional=!1,o=a||"*",r="1"),"OneToMany"===t.multiplicity.type&&(t.multiplicity.source.optional=!1,r=n||"*",o="1"),"ManyToOne"===t.multiplicity.type&&(o=a||"*",r=n||"*"),"OneToOne"===t.multiplicity.type&&(t.multiplicity.target.optional=!1,t.multiplicity.source.optional=!1,o="1",r="1"),this.annotations=[{id:this.id+"sourcelabel",content:o,offset:0,alignment:"Before",margin:{right:5,bottom:5}},{id:this.id+"targetlabel",content:r,offset:1,alignment:"Before",margin:{right:5,bottom:5}}]},e.prototype.getBpmnSequenceFlow=function(){var t=new u["a"],e=new u["a"];if("Normal"===this.shape.sequence&&"Bezier"!==this.type&&(this.targetDecorator.shape="Arrow"),"Default"===this.shape.sequence){t=this.getSegmentElement(this,t);var i=this.intermediatePoints;e=Object(l["V"])(i,this),this.targetDecorator.shape="Arrow"}return"Conditional"===this.shape.sequence&&(this.targetDecorator.shape="Arrow",this.sourceDecorator.shape="Diamond",e.id=this.id+this.shape.type),e},e.prototype.getUMLObjectFlow=function(){if(this.annotations)for(var t=0;t<this.annotations.length;t++)this.annotations[t].content="["+this.annotations[t].content+"]"},e.prototype.getUMLExceptionFlow=function(t){this.type="Straight";var e=this.shape.exceptionFlowHeight/2,i={x:(this.targetPoint.x+this.sourcePoint.x)/2,y:(this.targetPoint.y+this.sourcePoint.y)/2},n=i.x-this.sourcePoint.x,o=i.y-this.sourcePoint.y,r=Math.sqrt(n*n+o*o),a=e/r,s={x:i.x-n*a,y:i.y-o*a},c={x:i.x+n*a,y:i.y+o*a},h=Object(b["a"])();Object(b["c"])(h,315,i.x,i.y),this.segments=[];var d=new L(this,"segments",{type:"Straight",point:Object(b["e"])(h,c)},!0);this.segments.push(d),d=new L(this,"segments",{type:"Straight",point:Object(b["e"])(h,s)},!0),this.segments.push(d),t=this.getSegmentElement(this,t)},e.prototype.getBpmnAssociationFlow=function(){"Default"===this.shape.association&&(this.targetDecorator.shape="Arrow"),"Directional"===this.shape.association&&(this.targetDecorator.shape="Arrow"),"BiDirectional"===this.shape.association&&(this.targetDecorator.shape="Arrow",this.sourceDecorator.shape="Arrow")},e.prototype.getBpmnMessageFlow=function(){var t=new u["a"];return this.targetDecorator.shape="Arrow",this.targetDecorator.width=5,this.targetDecorator.height=10,this.sourceDecorator.shape="Circle","InitiatingMessage"!==this.shape.message&&"NonInitiatingMessage"!==this.shape.message||(t.id=this.id+"_"+this.shape.message,t.width=25,t.height=15,t.data="M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",t.horizontalAlignment="Center",t.verticalAlignment="Center",t.transform=s["s"].Self,t.style.fill="NonInitiatingMessage"===this.shape.message?"lightgrey":"white"),t},e.prototype.distance=function(t,e){return Object(l["l"])(t,e)},e.prototype.findPath=function(t,e){return Object(l["p"])(t,e)},e.prototype.getAnnotationElement=function(t,e,i,n,o){var r,s;t.id=t.id||Object(p["i"])(),o&&t.template?(r=new w["a"](this.id,o,t.id),r.content=t.template):(r=new a["a"],r.content=t.content,r.style.textOverflow="Wrap"),r.constraints=t.constraints,r.visible=t.visibility,r.rotateAngle=t.rotateAngle,r.horizontalAlignment=t.horizontalAlignment,r.verticalAlignment=t.verticalAlignment,r.width=t.width,r.height=t.height,void 0===i.width||t.template||(r.width=(t.width||i.width)-t.margin.left-t.margin.right),r.margin=t.margin,r.id=this.id+"_"+t.id,0===i.width&&(i.width=this.style.strokeWidth),0===i.height&&(i.height=this.style.strokeWidth),r.style=t.style;var c=Object(p["f"])(n);return c&&(s=c(t,this)),r.description=s||r.id,this.updateAnnotation(t,e,i,r),r},e.prototype.updateAnnotation=function(t,e,i,n,o){var r,a,s,c,h,d,p,u,g={x:0,y:0};n instanceof w["a"]||o||n.refreshTextElement(),n.width=t.width||i.width,r=Object(l["r"])(e,t,i),a=r.point,t.segmentAngle&&(n.rotateAngle=t.rotateAngle+r.angle,n.rotateAngle=(n.rotateAngle+360)%360),0===i.width&&(i.width=this.style.strokeWidth),0===i.height&&(i.height=this.style.strokeWidth),d={x:(a.x-i.x)/i.width,y:(a.y-i.y)/i.height},g.x=i.width*d.x,g.y=i.height*d.y,s=Object(l["b"])(t,r.angle,e),c=s.hAlign,h=s.vAlign,"left"===c?(p="Left",g.x+=t.displacement.x):"right"===c?(p="Right",g.x-=t.displacement.x):"center"===c&&(p="Center"),"top"===h?(u="Top",g.y+=t.displacement.y):"bottom"===h?(u="Bottom",g.y-=t.displacement.y):"center"===h&&(u="Center"),n.horizontalAlignment=p,n.verticalAlignment=u,n.setOffsetWithRespectToBounds(g.x,g.y,"Absolute"),n.relativeMode="Point"},e.prototype.getConnectorPoints=function(t,e,i){Math.abs(this.sourcePoint.x-this.targetPoint.x),Math.abs(this.sourcePoint.y-this.targetPoint.y);e=Object(d["b"])(this,i);var n=e.slice(0);return n&&n.length>0&&(this.sourcePoint=n[0],this.targetPoint=n[n.length-1]),n},e.prototype.clipDecorator=function(t,e,i){var n={x:0,y:0},o={x:0,y:0},a={x:0,y:0},s=e.length;o=i?e[0]:e[s-1],a=i?e[1]:e[s-2];var c=r["a"].distancePoints(o,a);c=0===c?1:c;var h=1,d=i?t.sourceWrapper:t.targetWrapper;d&&(h=d.style.strokeWidth);var l=h-1;return n.x=Math.round(o.x+l*(a.x-o.x)/c),n.y=Math.round(o.y+l*(a.y-o.y)/c),(i&&"None"!==t.sourceDecorator.shape||!i&&"None"!==t.targetDecorator.shape)&&(n=r["a"].adjustPoint(n,a,!0,h/2)),n},e.prototype.clipDecorators=function(t,e){return"None"!==t.sourceDecorator.shape&&(e[0]=this.clipDecorator(t,e,!0)),"None"!==t.targetDecorator.shape&&(e[e.length-1]=this.clipDecorator(t,e,!1)),e},e.prototype.updateSegmentElement=function(t,e,i){var n,o=new c["a"];if(n=this.getSegmentPath(t,e),"Bezier"===t.type){if(this.segments.length>0)for(var a=0;a<this.segments.length;a++){var s=this.segments[a],h=t.segments[a],d=r["a"].isEmptyPoint(s.point1)?h.bezierPoint1:h.point1,l=r["a"].isEmptyPoint(s.point2)?h.bezierPoint2:h.point2;o.uniteRect(B(s.points[0],d,l,s.points[1],t))}}else o=c["a"].toBounds(e);return i.width=o.width,i.height=o.height,i.offsetX=o.x+i.width/2,i.offsetY=o.y+i.height/2,i.data=n,t.wrapper&&(t.wrapper.offsetX=i.offsetX,t.wrapper.offsetY=i.offsetY,t.wrapper.width=o.width,t.wrapper.height=o.height),i},e.prototype.getSegmentElement=function(t,e,i){var n=[];return Object(l["q"])(t),n=this.getConnectorPoints(t.type,void 0,i),this.intermediatePoints=n,e.staticSize=!0,e=this.updateSegmentElement(t,n,e),e},e.prototype.getDecoratorElement=function(t,e,i,n,o){var r=new u["a"];if(r.transform=s["s"].Self,this.updateDecoratorElement(r,t,e,i),void 0!==o){var a=o(i,this);r.description=a||"source"}return r},e.prototype.bridgePath=function(t,e,i){var n=e;if(t.bridges.length>0)if("Straight"===t.type&&t.segments.length<2)for(var o=0;o<t.bridges.length;o++){var r=t.bridges[o];r.rendered||(n+=" L"+r.startPoint.x+" "+r.startPoint.y,n+=r.path,r.rendered=!0)}else if("Orthogonal"===t.type||"Straight"===t.type&&t.segments.length>1)for(o=0;o<t.bridges.length;o++){r=t.bridges[o];r.segmentPointIndex===i&&(r.rendered||r.segmentPointIndex===i&&(n+=" L"+r.startPoint.x+" "+r.startPoint.y,n+=r.path,r.rendered=!0))}return n},e.prototype.updateDecoratorElement=function(t,e,i,n){var o,a;t.offsetX=e.x,t.offsetY=e.y,a=r["a"].findAngle(e,i),o=Object(m["a"])(n.shape,n);var s=new h["a"](n.width,n.height);t.pivot.x=n.pivot.x,t.pivot.y=n.pivot.y,t.style=n.style,t.rotateAngle=a,t.data=o,t.canMeasurePath=!0,t.width=s.width,t.height=s.height},e.prototype.getSegmentPath=function(t,e){var i,n,o,a="",s=[],c=0;while(c<e.length)s.push({x:e[c].x,y:e[c].y}),c++;for(var h=0;h<t.bridges.length;h++){var d=t.bridges[h];d.rendered=!1}if(s=this.clipDecorators(t,s),this.cornerRadius>0&&"Bezier"!==this.type)for(var l=0;l<s.length-1;l++){i=s[l],0===l&&(a="M"+i.x+" "+i.y);var p=r["a"].distancePoints(s[l],s[l+1]);p>0&&(n=l<s.length-2?p<2*this.cornerRadius?r["a"].adjustPoint(s[l],s[l+1],!1,p/2):r["a"].adjustPoint(s[l],s[l+1],!1,this.cornerRadius):s[l+1],l>0&&(p<2*this.cornerRadius?(o=r["a"].adjustPoint(s[l],s[l+1],!0,p/2),l<s.length-2&&(n=null)):o=r["a"].adjustPoint(s[l],s[l+1],!0,this.cornerRadius)),o&&(a+="Q"+i.x+" "+i.y+" "+o.x+" "+o.y),n&&(t.bridges.length>0&&(a=this.bridgePath(t,a,l),"Orthogonal"===t.type&&(a=this.bridgePath(t,a,l+1))),a+=" L"+n.x+" "+n.y))}else if("Bezier"===this.type){for(var u=void 0,g=this.segments,f=0;f<g.length;f++)s.length>2&&(g[f].bezierPoint1={x:0,y:0},g[f].bezierPoint2={x:0,y:0}),!r["a"].isEmptyPoint(g[f].point1)||g[f].vector1.angle||g[f].vector1.distance?g[f].vector1.angle||g[f].vector1.distance?g[f].bezierPoint1=r["a"].transform(s[f],g[f].vector1.angle,g[f].vector1.distance):g[f].bezierPoint1={x:g[f].point1.x||g[f].bezierPoint1.x,y:g[f].point1.y||g[f].bezierPoint1.y}:((t.sourceID||this.sourcePortID)&&this.sourceWrapper&&(u=k(this.sourceWrapper.bounds,s[f],!0)),g[f].bezierPoint1=M(s[f],s[f+1],u)),!r["a"].isEmptyPoint(g[f].point2)||g[f].vector2.angle||g[f].vector2.distance?g[f].vector2.angle||g[f].vector2.distance?g[f].bezierPoint2=r["a"].transform(s[f+1],g[f].vector2.angle,g[f].vector2.distance):g[f].bezierPoint2={x:g[f].point2.x||g[f].bezierPoint2.x,y:g[f].point2.y||g[f].bezierPoint2.y}:((t.targetID||this.targetPortID)&&this.targetWrapper&&(u=k(this.targetWrapper.bounds,s[f+1],!0)),g[f].bezierPoint2=M(s[f+1],s[f],u));s.splice(1,0,{x:g[0].bezierPoint1.x,y:g[0].bezierPoint1.y}),s.splice(s.length-1,0,{x:g[g.length-1].bezierPoint2.x,y:g[g.length-1].bezierPoint2.y}),s=this.clipDecorators(t,s);for(var m=0;m<g.length;m++){0===m&&(a="M"+s[0].x+" "+s[0].y);var y=m===g.length-1?s[s.length-1].x+" "+s[s.length-1].y:g[m].points[g[m].points.length-1].x+" "+g[m].points[g[m].points.length-1].y;a+="C"+g[m].bezierPoint1.x+" "+g[m].bezierPoint1.y+" "+g[m].bezierPoint2.x+" "+g[m].bezierPoint2.y+" "+y}}else for(var v=0;v<s.length;v++)i=s[v],0===v&&(a="M"+i.x+" "+i.y),v>0&&(a=this.bridgePath(t,a,v),a+=" L"+i.x+" "+i.y);return a},e.prototype.updateShapeElement=function(t){var e;switch(t.shape.type){case"Bpmn":t.wrapper.children[3]instanceof u["a"]&&(e=t.wrapper.children[3]),"Message"===t.shape.flow&&this.updateShapePosition(t,e);break;case"UmlActivity":"Exception"===t.shape.flow&&this.getUMLExceptionFlow(t.wrapper.children[0]);break}},e.prototype.updateShapePosition=function(t,e){for(var i,n,o=.5,a=0,s=this.intermediatePoints,c=0;c<s.length-1;c++){a+=this.distance(s[c],s[c+1]);var h=a*o;a>=h&&(i=Object(d["a"])(s[c],s[c+1]),n=r["a"].transform(s[c],i,h))}e.offsetX=n.x,e.offsetY=n.y},e.prototype.scale=function(t,e,i,n,o){var r=0,a=0;if(this.wrapper&&this.wrapper.outerBounds){var s=Object(d["f"])(this),c=(this.wrapper.bounds.width||this.style.strokeWidth||1)-2,h=(this.wrapper.bounds.height||this.style.strokeWidth||1)-2;r=s.width-c,a=s.height-h,t=(i-Math.max(r,a))/c,e=(n-Math.max(r,a))/h,r=a=Math.min(r,a)}t=e=Math.min(t,e);var p=Object(b["a"])();o=o||this.wrapper,Object(b["c"])(p,-o.rotateAngle,o.offsetX,o.offsetY),Object(b["d"])(p,t,e,o.offsetX,o.offsetY),Object(b["c"])(p,o.rotateAngle,o.offsetX,o.offsetY);var u=Object(b["f"])(p,this.intermediatePoints);return this.sourcePoint=u[0],this.targetPoint=u[u.length-1],u=this.intermediatePoints=Object(d["b"])(this),Object(l["R"])(this,u),{x:r,y:a}},e.prototype.getClassName=function(){return"Connector"},x([Object(n["h"])(j)],e.prototype,"shape",void 0),x([Object(n["p"])(s["b"].Default)],e.prototype,"constraints",void 0),x([Object(n["p"])(10)],e.prototype,"bridgeSpace",void 0),x([Object(n["e"])([],g["b"])],e.prototype,"annotations",void 0),x([Object(n["g"])({},r["a"])],e.prototype,"sourcePoint",void 0),x([Object(n["g"])({},r["a"])],e.prototype,"targetPoint",void 0),x([Object(n["f"])(S)],e.prototype,"segments",void 0),x([Object(n["p"])("")],e.prototype,"sourceID",void 0),x([Object(n["p"])("")],e.prototype,"targetID",void 0),x([Object(n["p"])(10)],e.prototype,"hitPadding",void 0),x([Object(n["p"])("Straight")],e.prototype,"type",void 0),x([Object(n["p"])(0)],e.prototype,"cornerRadius",void 0),x([Object(n["g"])({shape:"None"},C)],e.prototype,"sourceDecorator",void 0),x([Object(n["g"])({shape:"Arrow"},C)],e.prototype,"targetDecorator",void 0),x([Object(n["g"])({},v["a"])],e.prototype,"tooltip",void 0),x([Object(n["p"])("")],e.prototype,"sourcePortID",void 0),x([Object(n["p"])("")],e.prototype,"targetPortID",void 0),x([Object(n["p"])(0)],e.prototype,"sourcePadding",void 0),x([Object(n["p"])(0)],e.prototype,"targetPadding",void 0),x([Object(n["g"])({strokeWidth:1,strokeColor:"black"},o["e"])],e.prototype,"style",void 0),x([Object(n["p"])(null)],e.prototype,"wrapper",void 0),e}(y["a"])},ff29:function(t,e,i){"use strict";function n(t){return o[t.toString()]}i.d(e,"a",(function(){return n}));var o={Process:"M419.511,76.687L359.511,76.687L359.511,43.086L419.511,43.086z",Decision:"M 253.005,115.687L 200.567,146.071L 148.097,115.687L 200.534,85.304L 253.005,115.687 Z",Document:"M 60 31.9 c 0 0 -11 -7.7 -30 0 s -30 0 -30 0 V 0 h 60 V 31.9 Z",PreDefinedProcess:"M 0,0 L 50,0 L 50,50 L 0,50 Z  M 8.334,0 L 8.334,50 M 41.667,0 L 41.667,50",Terminator:"M 269.711,29.33C 269.71,44.061 257.77,56 243.04,56L 158.058,56C 143.33,56 131.39,44.061 131.39,29.33L 131.39,29.33C 131.391,14.6057 143.33,2.669 158.058,2.669L 243.044,2.669C 257.772,2.669 269.711,14.6057 269.711,29.333 Z",PaperTap:"M0.0009,17.2042 L0.0009,47.165 C0.001,47.165 14.403,53.5455 25.00,47.165 C35.599,40.7852 44.403,43.5087 50.00,47.165L50.001,17.2042 M50.001,32.7987 L50.001,2.8405 C50.001,2.8405 35.599,-3.5427 25.001,2.8405C14.403,9.2237 5.599,6.494 0.0009,2.8405 L0.0009,32.7987",DirectData:"M 132.62 0 L 17.38 0 C 7.78 0 0 13.43 0 30 C 0 46.57 7.78 60 17.38 60 L 132.62 60 M 132.62 0C 123.02 0 115.24 13.43 115.24 30 C 115.24 46.57 123.02 60 132.62 60 C 142.22 60 150 46.57 150 30 C 150 13.43 142.22 0 132.62 0 z ",SequentialData:"M0.0029,24.999 C0.0029,11.1922 10.433,0.0021 23.295,0.0021 C36.159,0.00216 46.585,11.1922 46.585,24.999C46.585,38.8057 36.159,49.9979 23.295,49.9979 C10.433,49.9979 0.0029,38.8057 0.0029,24.999 z M23.294,49.999 L50.002,49.999",Sort:"M50.001,24.9971 L25.001,49.9971 L0.00097,24.9971 L25.001,-0.00286865 L50.001,24.9971 z M0.000976562,24.9971 L50.001,24.9971",MultiDocument:"M43.6826,40 C44.8746,40.6183 45.8586,41.3502 46.8366,42.1122 L46.8366,4.74487 L3.09857,4.74487 L3.09857,10.9544 M46.837,35.143 C48.027,35.765 49.025,36.604 50.003,37.369 L50.003,0.002 L6.264,0.002 L6.264,4.744 M43.682,47.113 L43.682,10.765 L0.0025,10.7652 L0.0025,47.1132 C0.0025,47.1132 12.5846,53.6101 21.8426,47.1132 C31.1006,40.6163 38.792,43.393 43.6826,47.1132 z",Collate:"M50.001,0.0028 L25.001,25.0029 L0.00097,0.0028 L50.001,0.002 z M0.0009,50.002 L25.001,25.002L50.001,50.002 L0.0009,50.0029 z",SummingJunction:"M7.3252,42.6768 L42.6772,7.3247 M42.6768,42.6768 L7.3248,7.3247 M0.0009,25.001 C0.0009,11.193 11.197,0.0009 25.001,0.0009 C38.809,0.0009 50.001,11.193 50.001,25.001 C50.001,38.809 38.809,50.001 25.001,50.001 C11.197,50.00 0.0009,38.809 0.0009,25.00 z",Or:"M 0 50 L 100 50 M 50 100 L 50 0.0 M 0 50 C 0 22.384 22.392 0 50 0 C 77.616 0 100 22.384 100 50 C 100 77.616 77.616 100 50 100 C 22.392 100 0 77.616 0 50 Z",InternalStorage:"M 0 3.81946A 2.5,3.81946 0 0,1 2.5,0L 47.5 0A 2.5,3.81946 0 0,1 50,3.81946L 50 45.836A 2.5,3.819446 0 0,1 47.5,49.652778L 2.5 49.652778A 2.5,3.819446 0 0,1 0,45.8336L 0 3.819446ZM 0 11.45834L 50 11.4583334M 12.5 0L 12.5 49.652778",Extract:"M0,35 L30,0 L60,35 Z",ManualOperation:"M46.4,28.8 L14.8,28.8 L0,0 L60,0 Z",Merge:"M60,0 L30,35 L0,0 Z",OffPageReference:"M60,33.3 L30.1,39 L0,33.3 L0,0 L60,0 Z",SequentialAccessStorage:"M 60 30 C 60 13.4 46.6 0 30 0 S 0 13.4 0 30 s 13.4 30 30 30 h 28.6 v -6.5 h -9.9C 55.5 48 60 39.5 60 30 Z",Annotation:"M49.9984,50.0029 L-0.00271199,50.0029 L-0.00271199,0.00286865 L49.9984,0.00286865",Annotation2:"M49.9977,50.0029 L25.416,50.0029 L25.416,0.00286865 L49.9977,0.00286865 M25.4166,25.0029 L-0.00227869,25.0029",Data:"M 10 0 L 40 0 L 30 40 L 0 40 Z",Card:"M275,60 L400,60 L400,110 L260,110 L260,75 Z",Delay:"M0,0 L12.029,0 C14.212999,0 16,1.7869979 16,3.9709952 C16,6.1549926 14.212999,7.9409904 12.029,7.9409904 L0,7.9409904 z",Preparation:"M 1048.17 572 C 1051.06 568.86 1055.17 567.05 1059.5 567 L 1094.51 567 C 1098.84 567.05 1102.95 568.86 1105.84 572 L 1126.43 595 C 1127.01 596.28 1127.01 597.72 1126.43 599 L 1105.84 622 C 1102.95 625.14 1098.84 626.95 1094.51 627 L 1059.5 627 C 1055.17 626.95 1051.06 625.14 1048.17 622 L 1027.58 599 C 1027 597.72 1027 596.28 1027.58 595 L 1048.17 572 Z",Display:"M47.8809,19.2914 L32.7968,-0.00594145 L11.3902,-0.00594145 C7.93166,-0.00594145 0.00124586,11.187 0.00124586,24.9968C0.00124586,38.8032 7.93166,49.9962 11.3902,49.9962 L32.7968,49.99 L47.615,31.038 C47.615,31.0388 52.798,24.9968 47.880,19.2914 z",ManualInput:"M 912 732 L 1006.85 707 C 1008.2 707 1009.5 707.53 1010.46 708.46 C 1011.41 709.4 1011.95 710.67 1011.95 712 L 1011.95 762C 1012 764.41 1010.28 766.52 1007.87 767 L 917.1 767 C 915.75 767 914.45 766.47 913.49 765.54 C 912.54 764.6 912 763.33 912 762 L 912 732 Z",LoopLimit:"M 8 9 L 27 9 L 33 15 L 33 26 C 33 27 33 27 32 27 L 4 27 C 3 27 2 27 2 26 L 2 15 L 8 9 Z",StoredData:"M 5.55 0L 50 0A 1.5,30 0 0,1 50,0A 5.555,25 0 0,0 50,50A 1.5,30 0 0,1 50,50L 5.555 50A 5.55,25 0 0,1 5.555,0Z"}}}]);
//# sourceMappingURL=chunk-0eb55f7f.16603e62.js.map